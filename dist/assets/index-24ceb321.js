(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))t(u);new MutationObserver(u=>{for(const a of u)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&t(c)}).observe(document,{childList:!0,subtree:!0});function d(u){const a={};return u.integrity&&(a.integrity=u.integrity),u.referrerPolicy&&(a.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?a.credentials="include":u.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(u){if(u.ep)return;u.ep=!0;const a=d(u);fetch(u.href,a)}})();/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
 Socket.IO v4.4.1
 (c) 2014-2022 Guillermo Rauch
 Released under the MIT License.
*/var xr=[`
    <ul class="`,`">
      `,`
    </ul>
  `];xr.raw=xr.slice();var Or=[`
        <li class="`,'">',`</li>
      `];Or.raw=Or.slice();var H=H||{};H.scope={};H.arrayIteratorImpl=function(e){var i=0;return function(){return i<e.length?{done:!1,value:e[i++]}:{done:!0}}};H.arrayIterator=function(e){return{next:H.arrayIteratorImpl(e)}};H.ASSUME_ES5=!1;H.ASSUME_NO_NATIVE_MAP=!1;H.ASSUME_NO_NATIVE_SET=!1;H.SIMPLE_FROUND_POLYFILL=!1;H.defineProperty=H.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,i,d){e!=Array.prototype&&e!=Object.prototype&&(e[i]=d.value)};H.getGlobal=function(e){return typeof window<"u"&&window===e?e:typeof global<"u"&&global!=null?global:e};H.global=H.getGlobal(globalThis);H.SYMBOL_PREFIX="jscomp_symbol_";H.initSymbol=function(){H.initSymbol=function(){},H.global.Symbol||(H.global.Symbol=H.Symbol)};H.SymbolClass=function(e,i){this.$jscomp$symbol$id_=e,H.defineProperty(this,"description",{configurable:!0,writable:!0,value:i})};H.SymbolClass.prototype.toString=function(){return this.$jscomp$symbol$id_};H.Symbol=function(){function e(d){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new H.SymbolClass(H.SYMBOL_PREFIX+(d||"")+"_"+i++,d)}var i=0;return e}();H.initSymbolIterator=function(){H.initSymbol();var e=H.global.Symbol.iterator;e||(e=H.global.Symbol.iterator=H.global.Symbol("Symbol.iterator")),typeof Array.prototype[e]!="function"&&H.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return H.iteratorPrototype(H.arrayIteratorImpl(this))}}),H.initSymbolIterator=function(){}};H.initSymbolAsyncIterator=function(){H.initSymbol();var e=H.global.Symbol.asyncIterator;e||(e=H.global.Symbol.asyncIterator=H.global.Symbol("Symbol.asyncIterator")),H.initSymbolAsyncIterator=function(){}};H.iteratorPrototype=function(e){return H.initSymbolIterator(),e={next:e},e[H.global.Symbol.iterator]=function(){return this},e};H.makeIterator=function(e){var i=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return i?i.call(e):H.arrayIterator(e)};H.arrayFromIterator=function(e){for(var i,d=[];!(i=e.next()).done;)d.push(i.value);return d};H.arrayFromIterable=function(e){return e instanceof Array?e:H.arrayFromIterator(H.makeIterator(e))};H.objectCreate=H.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(e){var i=function(){};return i.prototype=e,new i};H.underscoreProtoCanBeSet=function(){var e={a:!0},i={};try{return i.__proto__=e,i.a}catch{}return!1};H.setPrototypeOf=typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:H.underscoreProtoCanBeSet()?function(e,i){if(e.__proto__=i,e.__proto__!==i)throw new TypeError(e+" is not extensible");return e}:null;H.inherits=function(e,i){if(e.prototype=H.objectCreate(i.prototype),e.prototype.constructor=e,H.setPrototypeOf){var d=H.setPrototypeOf;d(e,i)}else for(d in i)if(d!="prototype")if(Object.defineProperties){var t=Object.getOwnPropertyDescriptor(i,d);t&&Object.defineProperty(e,d,t)}else e[d]=i[d];e.superClass_=i.prototype};H.polyfill=function(e,i,d,t){if(i){for(d=H.global,e=e.split("."),t=0;t<e.length-1;t++){var u=e[t];u in d||(d[u]={}),d=d[u]}e=e[e.length-1],t=d[e],i=i(t),i!=t&&i!=null&&H.defineProperty(d,e,{configurable:!0,writable:!0,value:i})}};H.FORCE_POLYFILL_PROMISE=!1;H.polyfill("Promise",function(e){function i(){this.batch_=null}function d(c){return c instanceof u?c:new u(function(r,s){r(c)})}if(e&&!H.FORCE_POLYFILL_PROMISE)return e;i.prototype.asyncExecute=function(c){if(this.batch_==null){this.batch_=[];var r=this;this.asyncExecuteFunction(function(){r.executeBatch_()})}this.batch_.push(c)};var t=H.global.setTimeout;i.prototype.asyncExecuteFunction=function(c){t(c,0)},i.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var c=this.batch_;this.batch_=[];for(var r=0;r<c.length;++r){var s=c[r];c[r]=null;try{s()}catch(l){this.asyncThrow_(l)}}}this.batch_=null},i.prototype.asyncThrow_=function(c){this.asyncExecuteFunction(function(){throw c})};var u=function(c){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[];var r=this.createResolveAndReject_();try{c(r.resolve,r.reject)}catch(s){r.reject(s)}};u.prototype.createResolveAndReject_=function(){function c(l){return function(g){s||(s=!0,l.call(r,g))}}var r=this,s=!1;return{resolve:c(this.resolveTo_),reject:c(this.reject_)}},u.prototype.resolveTo_=function(c){if(c===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(c instanceof u)this.settleSameAsPromise_(c);else{e:switch(typeof c){case"object":var r=c!=null;break e;case"function":r=!0;break e;default:r=!1}r?this.resolveToNonPromiseObj_(c):this.fulfill_(c)}},u.prototype.resolveToNonPromiseObj_=function(c){var r=void 0;try{r=c.then}catch(s){this.reject_(s);return}typeof r=="function"?this.settleSameAsThenable_(r,c):this.fulfill_(c)},u.prototype.reject_=function(c){this.settle_(2,c)},u.prototype.fulfill_=function(c){this.settle_(1,c)},u.prototype.settle_=function(c,r){if(this.state_!=0)throw Error("Cannot settle("+c+", "+r+"): Promise already settled in state"+this.state_);this.state_=c,this.result_=r,this.executeOnSettledCallbacks_()},u.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var c=0;c<this.onSettledCallbacks_.length;++c)a.asyncExecute(this.onSettledCallbacks_[c]);this.onSettledCallbacks_=null}};var a=new i;return u.prototype.settleSameAsPromise_=function(c){var r=this.createResolveAndReject_();c.callWhenSettled_(r.resolve,r.reject)},u.prototype.settleSameAsThenable_=function(c,r){var s=this.createResolveAndReject_();try{c.call(r,s.resolve,s.reject)}catch(l){s.reject(l)}},u.prototype.then=function(c,r){function s(v,h){return typeof v=="function"?function(k){try{l(v(k))}catch(_){g(_)}}:h}var l,g,o=new u(function(v,h){l=v,g=h});return this.callWhenSettled_(s(c,l),s(r,g)),o},u.prototype.catch=function(c){return this.then(void 0,c)},u.prototype.callWhenSettled_=function(c,r){function s(){switch(l.state_){case 1:c(l.result_);break;case 2:r(l.result_);break;default:throw Error("Unexpected state: "+l.state_)}}var l=this;this.onSettledCallbacks_==null?a.asyncExecute(s):this.onSettledCallbacks_.push(s)},u.resolve=d,u.reject=function(c){return new u(function(r,s){s(c)})},u.race=function(c){return new u(function(r,s){for(var l=H.makeIterator(c),g=l.next();!g.done;g=l.next())d(g.value).callWhenSettled_(r,s)})},u.all=function(c){var r=H.makeIterator(c),s=r.next();return s.done?d([]):new u(function(l,g){function o(k){return function(_){v[k]=_,h--,h==0&&l(v)}}var v=[],h=0;do v.push(void 0),h++,d(s.value).callWhenSettled_(o(v.length-1),g),s=r.next();while(!s.done)})},u},"es6","es3");H.generator={};H.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")};H.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null};H.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};H.generator.Context.prototype.stop_=function(){this.isRunning_=!1};H.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};H.generator.Context.prototype.next_=function(e){this.yieldResult=e};H.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()};H.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_};H.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_};H.generator.Context.prototype.yield=function(e,i){return this.nextAddress=i,{value:e}};H.generator.Context.prototype.yieldAll=function(e,i){e=H.makeIterator(e);var d=e.next();if(H.generator.ensureIteratorResultIsObject_(d),d.done)this.yieldResult=d.value,this.nextAddress=i;else return this.yieldAllIterator_=e,this.yield(d.value,i)};H.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e};H.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};H.generator.Context.prototype.setCatchFinallyBlocks=function(e,i){this.catchAddress_=e,i!=null&&(this.finallyAddress_=i)};H.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0};H.generator.Context.prototype.leaveTryBlock=function(e,i){this.nextAddress=e,this.catchAddress_=i||0};H.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e};H.generator.Context.prototype.enterFinallyBlock=function(e,i,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=i||0};H.generator.Context.prototype.leaveFinallyBlock=function(e,i){if(i=this.finallyContexts_.splice(i||0)[0],i=this.abruptCompletion_=this.abruptCompletion_||i){if(i.isException)return this.jumpToErrorHandler_();i.jumpTo!=null&&this.finallyAddress_<i.jumpTo?(this.nextAddress=i.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e};H.generator.Context.prototype.forIn=function(e){return new H.generator.Context.PropertyIterator(e)};H.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var i in e)this.properties_.push(i);this.properties_.reverse()};H.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var e=this.properties_.pop();if(e in this.object_)return e}return null};H.generator.Engine_=function(e){this.context_=new H.generator.Context,this.program_=e};H.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())};H.generator.Engine_.prototype.return_=function(e){this.context_.start_();var i=this.context_.yieldAllIterator_;return i?this.yieldAllStep_("return"in i?i.return:function(d){return{value:d,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())};H.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())};H.generator.Engine_.prototype.yieldAllStep_=function(e,i,d){try{var t=e.call(this.context_.yieldAllIterator_,i);if(H.generator.ensureIteratorResultIsObject_(t),!t.done)return this.context_.stop_(),t;var u=t.value}catch(a){return this.context_.yieldAllIterator_=null,this.context_.throw_(a),this.nextStep_()}return this.context_.yieldAllIterator_=null,d.call(this.context_,u),this.nextStep_()};H.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(i){this.context_.yieldResult=void 0,this.context_.throw_(i)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}};H.generator.Generator_=function(e){this.next=function(i){return e.next_(i)},this.throw=function(i){return e.throw_(i)},this.return=function(i){return e.return_(i)},H.initSymbolIterator(),this[Symbol.iterator]=function(){return this}};H.generator.createGenerator=function(e,i){return i=new H.generator.Generator_(new H.generator.Engine_(i)),H.setPrototypeOf&&H.setPrototypeOf(i,e.prototype),i};H.asyncExecutePromiseGenerator=function(e){function i(t){return e.next(t)}function d(t){return e.throw(t)}return new Promise(function(t,u){function a(c){c.done?t(c.value):Promise.resolve(c.value).then(i,d).then(a,u)}a(e.next())})};H.asyncExecutePromiseGeneratorFunction=function(e){return H.asyncExecutePromiseGenerator(e())};H.asyncExecutePromiseGeneratorProgram=function(e){return H.asyncExecutePromiseGenerator(new H.generator.Generator_(new H.generator.Engine_(e)))};H.iteratorFromArray=function(e,i){H.initSymbolIterator(),e instanceof String&&(e+="");var d=0,t={next:function(){if(d<e.length){var u=d++;return{value:i(u,e[u]),done:!1}}return t.next=function(){return{done:!0,value:void 0}},t.next()}};return t[Symbol.iterator]=function(){return t},t};H.polyfill("Array.prototype.keys",function(e){return e||function(){return H.iteratorFromArray(this,function(i){return i})}},"es6","es3");H.polyfill("Object.is",function(e){return e||function(i,d){return i===d?i!==0||1/i===1/d:i!==i&&d!==d}},"es6","es3");H.polyfill("Array.prototype.includes",function(e){return e||function(i,d){var t=this;t instanceof String&&(t=String(t));var u=t.length;for(d=d||0,0>d&&(d=Math.max(d+u,0));d<u;d++){var a=t[d];if(a===i||Object.is(a,i))return!0}return!1}},"es7","es3");H.checkStringArgs=function(e,i,d){if(e==null)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return e+""};H.polyfill("String.prototype.includes",function(e){return e||function(i,d){return H.checkStringArgs(this,i,"includes").indexOf(i,d||0)!==-1}},"es6","es3");H.checkEs6ConformanceViaProxy=function(){try{var e={},i=Object.create(new H.global.Proxy(e,{get:function(d,t,u){return d==e&&t=="q"&&u==i}}));return i.q===!0}catch{return!1}};H.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;H.ES6_CONFORMANCE=H.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&H.checkEs6ConformanceViaProxy();H.owns=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)};H.polyfill("WeakMap",function(e){function i(){if(!e||!Object.seal)return!1;try{var l=Object.seal({}),g=Object.seal({}),o=new e([[l,2],[g,3]]);return o.get(l)!=2||o.get(g)!=3?!1:(o.delete(l),o.set(g,4),!o.has(l)&&o.get(g)==4)}catch{return!1}}function d(){}function t(l){var g=typeof l;return g==="object"&&l!==null||g==="function"}function u(l){if(!H.owns(l,c)){var g=new d;H.defineProperty(l,c,{value:g})}}function a(l){var g=Object[l];g&&(Object[l]=function(o){return o instanceof d?o:(u(o),g(o))})}if(H.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&H.ES6_CONFORMANCE)return e}else if(i())return e;var c="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var r=0,s=function(l){if(this.id_=(r+=Math.random()+1).toString(),l){l=H.makeIterator(l);for(var g;!(g=l.next()).done;)g=g.value,this.set(g[0],g[1])}};return s.prototype.set=function(l,g){if(!t(l))throw Error("Invalid WeakMap key");if(u(l),!H.owns(l,c))throw Error("WeakMap key fail: "+l);return l[c][this.id_]=g,this},s.prototype.get=function(l){return t(l)&&H.owns(l,c)?l[c][this.id_]:void 0},s.prototype.has=function(l){return t(l)&&H.owns(l,c)&&H.owns(l[c],this.id_)},s.prototype.delete=function(l){return t(l)&&H.owns(l,c)&&H.owns(l[c],this.id_)?delete l[c][this.id_]:!1},s},"es6","es3");H.MapEntry=function(){};H.polyfill("Map",function(e){function i(){if(H.ASSUME_NO_NATIVE_MAP||!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var s=Object.seal({x:4}),l=new e(H.makeIterator([[s,"s"]]));if(l.get(s)!="s"||l.size!=1||l.get({x:4})||l.set({x:4},"t")!=l||l.size!=2)return!1;var g=l.entries(),o=g.next();return o.done||o.value[0]!=s||o.value[1]!="s"?!1:(o=g.next(),!(o.done||o.value[0].x!=4||o.value[1]!="t"||!g.next().done))}catch{return!1}}if(H.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&H.ES6_CONFORMANCE)return e}else if(i())return e;H.initSymbolIterator();var d=new WeakMap,t=function(s){if(this.data_={},this.head_=c(),this.size=0,s){s=H.makeIterator(s);for(var l;!(l=s.next()).done;)l=l.value,this.set(l[0],l[1])}};t.prototype.set=function(s,l){s=s===0?0:s;var g=u(this,s);return g.list||(g.list=this.data_[g.id]=[]),g.entry?g.entry.value=l:(g.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:s,value:l},g.list.push(g.entry),this.head_.previous.next=g.entry,this.head_.previous=g.entry,this.size++),this},t.prototype.delete=function(s){return s=u(this,s),s.entry&&s.list?(s.list.splice(s.index,1),s.list.length||delete this.data_[s.id],s.entry.previous.next=s.entry.next,s.entry.next.previous=s.entry.previous,s.entry.head=null,this.size--,!0):!1},t.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=c(),this.size=0},t.prototype.has=function(s){return!!u(this,s).entry},t.prototype.get=function(s){return(s=u(this,s).entry)&&s.value},t.prototype.entries=function(){return a(this,function(s){return[s.key,s.value]})},t.prototype.keys=function(){return a(this,function(s){return s.key})},t.prototype.values=function(){return a(this,function(s){return s.value})},t.prototype.forEach=function(s,l){for(var g=this.entries(),o;!(o=g.next()).done;)o=o.value,s.call(l,o[1],o[0],this)},t.prototype[Symbol.iterator]=t.prototype.entries;var u=function(s,l){var g=l&&typeof l;g=="object"||g=="function"?d.has(l)?g=d.get(l):(g=""+ ++r,d.set(l,g)):g="p_"+l;var o=s.data_[g];if(o&&H.owns(s.data_,g))for(s=0;s<o.length;s++){var v=o[s];if(l!==l&&v.key!==v.key||l===v.key)return{id:g,list:o,index:s,entry:v}}return{id:g,list:o,index:-1,entry:void 0}},a=function(s,l){var g=s.head_;return H.iteratorPrototype(function(){if(g){for(;g.head!=s.head_;)g=g.previous;for(;g.next!=g.head;)return g=g.next,{done:!1,value:l(g)};g=null}return{done:!0,value:void 0}})},c=function(){var s={};return s.previous=s.next=s.head=s},r=0;return t},"es6","es3");H.assign=typeof Object.assign=="function"?Object.assign:function(e,i){for(var d=1;d<arguments.length;d++){var t=arguments[d];if(t)for(var u in t)H.owns(t,u)&&(e[u]=t[u])}return e};H.polyfill("Object.assign",function(e){return e||H.assign},"es6","es3");H.polyfill("Object.values",function(e){return e||function(i){var d=[],t;for(t in i)H.owns(i,t)&&d.push(i[t]);return d}},"es8","es3");H.polyfill("Math.log10",function(e){return e||function(i){return Math.log(i)/Math.LN10}},"es6","es3");H.polyfill("Array.from",function(e){return e||function(i,d,t){d=d??function(r){return r};var u=[],a=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];if(typeof a=="function"){i=a.call(i);for(var c=0;!(a=i.next()).done;)u.push(d.call(t,a.value,c++))}else for(a=i.length,c=0;c<a;c++)u.push(d.call(t,i[c],c));return u}},"es6","es3");H.findInternal=function(e,i,d){e instanceof String&&(e=String(e));for(var t=e.length,u=0;u<t;u++){var a=e[u];if(i.call(d,a,u,e))return{i:u,v:a}}return{i:-1,v:void 0}};H.polyfill("Array.prototype.find",function(e){return e||function(i,d){return H.findInternal(this,i,d).v}},"es6","es3");H.polyfill("Array.prototype.entries",function(e){return e||function(){return H.iteratorFromArray(this,function(i,d){return[i,d]})}},"es6","es3");H.polyfill("Array.prototype.fill",function(e){return e||function(i,d,t){var u=this.length||0;for(0>d&&(d=Math.max(0,u+d)),(t==null||t>u)&&(t=u),t=Number(t),0>t&&(t=Math.max(0,u+t)),d=Number(d||0);d<t;d++)this[d]=i;return this}},"es6","es3");H.polyfill("Array.prototype.copyWithin",function(e){function i(d){return d=Number(d),d===1/0||d===-1/0?d:d|0}return e||function(d,t,u){var a=this.length;if(d=i(d),t=i(t),u=u===void 0?a:i(u),d=0>d?Math.max(a+d,0):Math.min(d,a),t=0>t?Math.max(a+t,0):Math.min(t,a),u=0>u?Math.max(a+u,0):Math.min(u,a),d<t)for(;t<u;)t in this?this[d++]=this[t++]:(delete this[d++],t++);else for(u=Math.min(u,a+t-d),d+=u-t;u>t;)--u in this?this[--d]=this[u]:delete this[--d];return this}},"es6","es3");H.polyfill("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991},"es6","es3");H.polyfill("Set",function(e){function i(){if(H.ASSUME_NO_NATIVE_SET||!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var t=Object.seal({x:4}),u=new e(H.makeIterator([t]));if(!u.has(t)||u.size!=1||u.add(t)!=u||u.size!=1||u.add({x:4})!=u||u.size!=2)return!1;var a=u.entries(),c=a.next();return c.done||c.value[0]!=t||c.value[1]!=t?!1:(c=a.next(),c.done||c.value[0]==t||c.value[0].x!=4||c.value[1]!=c.value[0]?!1:a.next().done)}catch{return!1}}if(H.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(e&&H.ES6_CONFORMANCE)return e}else if(i())return e;H.initSymbolIterator();var d=function(t){if(this.map_=new Map,t){t=H.makeIterator(t);for(var u;!(u=t.next()).done;)this.add(u.value)}this.size=this.map_.size};return d.prototype.add=function(t){return t=t===0?0:t,this.map_.set(t,t),this.size=this.map_.size,this},d.prototype.delete=function(t){return t=this.map_.delete(t),this.size=this.map_.size,t},d.prototype.clear=function(){this.map_.clear(),this.size=0},d.prototype.has=function(t){return this.map_.has(t)},d.prototype.entries=function(){return this.map_.entries()},d.prototype.values=function(){return this.map_.values()},d.prototype.keys=d.prototype.values,d.prototype[Symbol.iterator]=d.prototype.values,d.prototype.forEach=function(t,u){var a=this;this.map_.forEach(function(c){return t.call(u,c,c,a)})},d},"es6","es3");H.polyfill("String.prototype.startsWith",function(e){return e||function(i,d){var t=H.checkStringArgs(this,i,"startsWith");i+="";var u=t.length,a=i.length;d=Math.max(0,Math.min(d|0,t.length));for(var c=0;c<a&&d<u;)if(t[d++]!=i[c++])return!1;return c>=a}},"es6","es3");H.polyfill("String.prototype.endsWith",function(e){return e||function(i,d){var t=H.checkStringArgs(this,i,"endsWith");i+="",d===void 0&&(d=t.length),d=Math.max(0,Math.min(d|0,t.length));for(var u=i.length;0<u&&0<d;)if(t[--d]!=i[--u])return!1;return 0>=u}},"es6","es3");var xt=function(e){function i(t){if(d[t])return d[t].exports;var u=d[t]={i:t,l:!1,exports:{}};return e[t].call(u.exports,u,u.exports,i),u.l=!0,u.exports}var d={};return i.m=e,i.c=d,i.d=function(t,u,a){i.o(t,u)||Object.defineProperty(t,u,{configurable:!1,enumerable:!0,get:a})},i.n=function(t){var u=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(u,"a",u),u},i.o=function(t,u){return Object.prototype.hasOwnProperty.call(t,u)},i.p="",i(i.s=33)}([function(e,i,d){e=d(1);var t=d.n(e),u=d(34),a=function(){var c=u().format("YYMMDDHHmmss")+"::",r=function(s){console.log.apply(console,H.arrayFromIterable(s))};return{DEBUG:0,TRACE:1,INFO:2,WARNING:3,ERROR:4,NONE:5,setLogLevel:function(s){if(console.log("setting log level:  old: "+a.logLevel+" new: "+s),typeof s=="string"||typeof s=="number"){var l=s;typeof l=="number"?(l=Math.round(s),s>a.NONE?l=a.NONE:s<a.DEBUG&&(l=a.DEBUG),a.logLevel=l):-1<"DEBUG TRACE INFO WARNING ERROR NONE".split(" ").indexOf(l)?a.logLevel=l:a.error("setLogLevel() invalid param"),a.logLevel>a.INFO&&(a.logLevel=a.INFO)}else a.error("setLogLevel() invalid param type")},getLogLevel:function(s){return a.logLevel},setOutputFunction:function(s){r=s},setLogPrefix:function(s){c=s},log:function(s,l){for(var g=[],o=1;o<arguments.length;++o)g[o-1]=arguments[o];var v=c;if(!(s<a.logLevel)){if(s===a.DEBUG?v+="D":s===a.TRACE?v+="T":s===a.INFO?v+="I":s===a.WARNING?v+="W":s===a.ERROR&&(v+="E"),v+="::WB::",o=t.a.getLocalStorageItem("logID"),v+=o??"",o=[v].concat(g),t.a.getLocalStorageItem("vcxRTCLib-log")!=null){var h=JSON.parse(t.a.getLocalStorageItem("vcxRTCLib-log"));500<Object.keys(h).length&&delete Object.keys(h)[0];var k="",_;for(_ in g)k=typeof g[_]=="object"?k+JSON.stringify(g[_],null,2):k+g[_];h[v]=k,t.a.removeLocalStorageItem("vcxRTCLib-log"),t.a.setLocalStorageItem("vcxRTCLib-log",JSON.stringify(h,null,2))}if(a.panel!==void 0){for(g="",_=0;_<o.length;_+=1)g+=o[_];a.panel.value=a.panel.value+`
`+g}else r.apply(a,[o])}},debug:function(s){for(var l=[],g=0;g<arguments.length;++g)l[g-0]=arguments[g];a.log.apply(a,[a.DEBUG].concat(H.arrayFromIterable(l)))},trace:function(s){for(var l=[],g=0;g<arguments.length;++g)l[g-0]=arguments[g];a.log.apply(a,[a.TRACE].concat(H.arrayFromIterable(l)))},info:function(s){for(var l=[],g=0;g<arguments.length;++g)l[g-0]=arguments[g];a.log.apply(a,[a.INFO].concat(H.arrayFromIterable(l)))},warning:function(s){for(var l=[],g=0;g<arguments.length;++g)l[g-0]=arguments[g];a.log.apply(a,[a.WARNING].concat(H.arrayFromIterable(l)))},error:function(s){for(var l=[],g=0;g<arguments.length;++g)l[g-0]=arguments[g];a.log.apply(a,[a.ERROR].concat(H.arrayFromIterable(l)))}}}();a.logLevel=a.INFO,i.a=a},function(e,i,d){d(35);var t={};t.browser_info=function(){var c="none",r,s=window.navigator.userAgent;if((r=s.indexOf("OPR"))!=-1)var l="opera";else(r=s.indexOf("Firefox"))!=-1?l="mozilla":(r=s.indexOf("Edg"))!=-1?l="edge":(r=s.indexOf("Chrome"))!=-1?l="chrome-stable":s.indexOf("Safari")!=-1?(l="safari",(r=s.indexOf("Version"))!=-1&&(c=s.substring(r+8))):(r=s.indexOf("MSIE"))!=-1||(r=s.indexOf("Windows NT"))!=-1?l="IE":(s.includes("iPhone")||s.includes("iPad"))&&s.includes("Mobile")&&(r=s.indexOf("OS"))!=-1?((l=s.substring(r+3))&&(c=l.substring(0,l.indexOf(" "))),c?(c.replace(/_/g,"."),l="safari"):(l="none",r=-1)):l="none";if(c=="none"&&r!=-1){var g=s.substring(r);(r=g.indexOf("/"))!=-1&&(c=g.substring(r+1))}var o;return(o=c.indexOf(";"))!=-1&&(c=c.substring(0,o)),(o=c.indexOf(" "))!=-1&&(c=c.substring(0,o)),r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(s)?"mobile":"desktop",{name:l,version:c,device_type:r}}(),t.is_supported=!(RTCPeerConnection===void 0||!/chrome-stable|mozilla|safari|opera|edge/i.test(t.browser_info.name)),t.browser_type=window.navigator.userAgent.match("Chrome")?"chrome-stable":window.navigator.userAgent.match("Firefox")?"mozilla":window.navigator.userAgent.match(/Safari|AppleWebKit/g)?"safari":window.navigator.userAgent.match("Edge")?"edge":window.navigator.userAgent.match("Electron")?"electron":window.navigator.userAgent.match(".NET")?"IE":"none",t.device_type=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(window.navigator.userAgent)?"mobile":"desktop";var u=function(c,r,s,l){var g=s;switch(r){case"get":g=c.getItem(s);break;case"set":c.setItem(s,l);break;case"remove":c.removeItem(s)}return g},a=function(c,r,s){try{return u(localStorage,c,r,s)}catch(l){if(l.SecurityError!=null)try{return u(sessionStorage,c,r,s)}catch{}return null}};e.exports={product:{company:"Vcloudx Inc",product:"enablex.io",version:"2.3.9",release:"2.3.9"},default_region:["IN"],data_throughput_duration:2,video_bandwidth_duration:10,audio_bandwidth_duration:10,video_layer_bitrates:{0:3e5,1:8e5,2:15e5},video_resolution_range:{HD:{min:{width:320,height:180},max:{width:1280,height:720}},SD:{min:{width:320,height:180},max:{width:960,height:540}},LD:{min:{width:160,height:90},max:{width:640,height:360}},Default:{min:{width:160,height:90},max:{width:1280,height:720}}},video_bandwidth_range:{HD:{0:{min:100,max:1200},1:{min:100,max:800},2:{min:100,max:400}},SD:{0:{min:100,max:700},1:{min:100,max:400},2:{min:100,max:250}},LD:{0:{min:80,max:400},1:{min:80,max:250},2:{min:80,max:150}},ND:{0:{min:0,max:0},1:{min:40,max:200},2:{min:40,max:100}},share:{min:100,max:400},canvas:{min:1024,max:4096}},screen_resolution_range:{HD:{bw:600,fps:20},SD:{bw:400,fps:15},LD:{bw:200,fps:10}},proxy_api_url:"apiproxy.enablex.io",proxy_api_port:443,ice_servers:{IN:{turnURI:"turns:ts.enablex.io:443",turnUsername:"vcxturn",turnCredential:"V201301",stunURI:"stun:stun.l.google.com:19302"},US:{turnURI:"turns:eu2ts.enablex.io:443",turnUsername:"vcxturn",turnCredential:"V201301",stunURI:"stun:stun.l.google.com:19302"},SG:{turnURI:"turns:sgts.enablex.io:443",turnUsername:"vcxturn",turnCredential:"V201301",stunURI:"stun:stun.l.google.com:19302"},DE:{turnURI:"turns:gwcts.enablex.io:443",turnUsername:"vcxturn",turnCredential:"V201301",stunURI:"stun:stun.l.google.com:19302"}},browser_info:t.browser_info,browser_type:t.browser_type,device_type:t.device_type,user_agent:window.navigator.userAgent,is_supported:function(){return t.is_supported},setVideoBwQualityMapper:function(c){c.minBwKbpsToCheck&&(t.videoBitrateQualityMap=c.bpsQualityMapTable.slice(),t.cameraResolutionTable=c.camResTable.slice()),t.videoQualityMapMinBwKbps=c.minBwKbpsToCheck},getBitrateMapTable:function(){return t.videoBitrateQualityMap},getCamResolutionTable:function(){return t.cameraResolutionTable},getCamResTableToCheck:function(c){if(t.videoBitrateQualityMap!==void 0&&c<=t.videoQualityMapMinBwKbps){for(var r=0;r<t.videoBitrateQualityMap.length;r++)if(t.videoBitrateQualityMap[r].kbps<=c)return{resTable:t.cameraResolutionTable.slice(t.videoBitrateQualityMap[r].resTable.index),fps:t.videoBitrateQualityMap[r].fps.max}}},internetDetectionUrl:"https://api.enablex.io/status",getLocalStorageItem:function(c){return a("get",c)},setLocalStorageItem:function(c,r){return a("set",c,r)},removeLocalStorageItem:function(c){return a("remove",c)},senduserDataMaximumLimit:2048,noise_analysis:!0,csp_enabled:!1,eventLogLevel:"error"}},function(e,i,d){var t=d(4);i.a=function(){var u=Object(t.c)({});return u.url="",u}},function(e,i,d){var t=function(u){var a=u.name,c=u.src,r=u.srcObject,s=u.href,l=u.rel,g=u.type,o=u.target,v=u.autoplay,h=u.playsinline,k=u.alt,_=u.title,y=u.id,S=u.class;u=t.getStyle(u.style);var x=null;return a&&a!=""&&a!=null&&(x=document.createElement(a),c&&c!=""&&c!=null&&x.setAttribute("src",c),r&&r!=""&&r!=null&&x.setAttribute("srcObject",r),s&&s!=""&&s!=null&&x.setAttribute("href",s),o&&o!=""&&o!=null&&x.setAttribute("target",o),k&&k!=""&&k!=null&&x.setAttribute("alt",k),_&&_!=""&&_!=null&&x.setAttribute("title",_),l&&l!=""&&l!=null&&x.setAttribute("rel",l),g&&g!=""&&g!=null&&x.setAttribute("type",g),v&&v!=""&&v!=null&&x.setAttribute("autoplay",v),h&&h!=""&&h!=null&&x.setAttribute("playsinline",h),y&&y!=""&&y!=null&&x.setAttribute("id",y),S&&S!=""&&S!=null&&x.setAttribute("class",S),u&&u!=""&&u!=null&&x.setAttribute("style",u)),x};t.getStyle=function(u){var a="",c;for(c in u)a+=c+":"+u[c]+";";return a},t.getById=function(u){return document.getElementById(u)},t.getByClass=function(u){return document.getElementsByClassName(u)[0]},t.getByTag=function(u){return document.getElementsByTagName(u)[0]},t.getTagByDOM=function(u,a){return a.getElementsByTagName(u)[0]},t.getByClass=function(u,a){return a.getElementsByClassName(u)[0]},t.append=function(u,a){return a.appendChild(u)},t.setStyle=function(u,a,c){u.style[a]=c},t.addCssFile=function(u){t.getByTag("head").appendChild(u)},t.checkParam=function(u){var a=!1;return u&&u!=null&&u!=""&&(a=!0),a},i.a=t},function(e,i,d){d.d(i,"c",function(){return a}),d.d(i,"b",function(){return c}),d.d(i,"e",function(){return r}),d.d(i,"f",function(){return s}),d.d(i,"d",function(){return l}),d.d(i,"g",function(){return g}),d.d(i,"a",function(){return o});var t=d(0),u=d(7),a=function(){var v={},h={};if(v.addEventListener=function(_,y){h[_]===void 0&&(h[_]=[]),h[_].push(y)},v.removeEventListener=function(_,y){h[_]&&(y=h[_].indexOf(y),y!==-1&&h[_].splice(y,1))},u.a.browserEngineCheck()!=="IE")v.dispatchEvent=function(_){if(!_||!_.type)throw Error("Undefined event");_.type!="onStatSubscription"&&_.type!="genericEvents"&&_.type!="talker-notification"&&t.a.debug("Event: "+_.type);for(var y=h[_.type]||[],S=0;S<y.length;S+=1)y[S](_)};else{var k=function(_,y){y=y||{bubbles:!1,cancelable:!1,detail:void 0};var S=document.createEvent("CustomEvent");return S.initCustomEvent(_,y.bubbles,y.cancelable,y.detail),S.data=y.detail,S};k.prototype=window.Event.prototype,window.CustomEvent=k,v.dispatchEvent=function(_){_.type!="onStatSubscription"&&_.type!="genericEvents"&&_.type!="talker-notification"&&t.a.debug("Event: "+_.type),_=k(_.type,{bubbles:!1,cancelable:!1,detail:_}),document.getElementById("WebrtcEverywherePluginId").dispatchEvent(_)}}return v.on=v.addEventListener,v.off=v.removeEventListener,v.emit=v.dispatchEvent,v.eventsList=h,v},c=function(v){var h={};return h.type=v.type,h},r=function(v){var h=c(v);return h.streams=v.streams,h.message=v.message,h.room=v.room,h.users=v.users,h.type=v.type,h.bandwidth=v.bandwidth,h.TalkerCount=v.TalkerCount,h.me=v.me,h.mediaRecord=v.mediaRecord,h.error=v.error,h},s=function(v){var h=c(v);return h.stream=v.stream,h.msg=v.msg,h.bandwidth=v.bandwidth,h.attrs=v.attrs,h},l=function(v){return c(v)},g=function(v){var h=c(v);return h.name=v.name,h.role=v.role,h.clientId=v.clientId,h.permissions=v.permission,h},o=function(v){var h=c(v);return h.message=v.message,h}},function(e,i,d){e={SocketEvent:{},RoomEvent:{},UserEvent:{},StreamEvent:{}},e.SocketEvent.onAddStream="onAddStream",e.SocketEvent.onRemoveTrack="onRemoveTrack",e.SocketEvent.media_engine_connecting="media_engine_connecting",e.SocketEvent.signaling_message_peer="signaling_message_peer",e.SocketEvent.publish_me="publish_me",e.SocketEvent.unpublish_me="unpublish_me",e.SocketEvent.onBandwidthAlert="onBandwidthAlert",e.SocketEvent.onBandwidthEvents="bandwidthEvents",e.SocketEvent.onSelfBandwidthAlert="onSelfBandwidthAlert",e.SocketEvent.onDataStream="onDataStream",e.SocketEvent.onUpdateAttributeStream="onUpdateAttributeStream",e.SocketEvent.onRemoveStream="onRemoveStream",e.SocketEvent.disconnect="disconnect",e.SocketEvent.connection_failed="connection_failed",e.SocketEvent.error="error",e.SocketEvent.connect_error="connect_error",e.SocketEvent.connect_timeout="connect_timeout",e.SocketEvent.reconnecting="reconnecting",e.SocketEvent.reconnect="reconnect",e.SocketEvent.reconnected="reconnected",e.SocketEvent.reconnect_attempt="reconnect_attempt",e.SocketEvent.reconnect_error="reconnect_error",e.SocketEvent.reconnect_failed="reconnect_failed",e.SocketEvent.user_connected="user-connected",e.SocketEvent.user_updated="user-updated",e.SocketEvent.user_disconnected="user-disconnected",e.SocketEvent.user_subscribed="user-subscribed",e.SocketEvent.user_unsubscribed="user-unsubscribed",e.SocketEvent.dial_state_events="dialStateEvents",e.RoomEvent.user_role_changed="userRoleChanged",e.SocketEvent.onStatSubscription="onStatSubscription",e.SocketEvent.onStreamingNotification="onStreamingNotification",e.SocketEvent.onHlsStreamingNotification="onHlsStreamingNotification",e.SocketEvent.onHlsStreamingNotificationToPublisher="onHlsStreamingNotificationToPublisher",e.SocketEvent.onLiveRecordingNotification="onLiveRecordingNotification",e.SocketEvent.onRoomLiveRecordingOn="room-live-recording-on",e.SocketEvent.onRoomLiveRecordingOff="room-live-recording-off",e.SocketEvent.onRoomLiveRecordingFailed="room-live-recording-failed",e.SocketEvent.data_stream_room="onDataStreamToRoom",e.RoomEvent.onStreamingNotification="onStreamingNotification",e.RoomEvent.onHlsStreamingNotification="onHlsStreamingNotification",e.RoomEvent.onHlsStreamingNotificationToPublisher="onHlsStreamingNotificationToPublisher",e.RoomEvent.onLiveRecordingNotification="onLiveRecordingNotification",e.UserEvent.user_awaited="user-awaited",e.UserEvent.user_joined="user-joined",e.RoomEvent.room_connected="room-connected",e.RoomEvent.room_disconnected="room-disconnected",e.RoomEvent.room_awaited="room-awaited",e.RoomEvent.room_record_on="room-record-on",e.RoomEvent.room_record_off="room-record-off",e.RoomEvent.onRoomLiveRecordingOn="room-live-recording-on",e.RoomEvent.onRoomLiveRecordingOff="room-live-recording-off",e.RoomEvent.onRoomLiveRecordingFailed="room-live-recording-failed",e.RoomEvent.update_layout="update-layout",e.RoomEvent.change_layout="change-layout",e.RoomEvent.new_active_talker="active-talkers-updated",e.RoomEvent.hard_mute_audio="hardmute-user-audio",e.RoomEvent.hard_unmute_audio="hardunmute-user-audio",e.RoomEvent.hard_mute_video="hardmute-user-video",e.RoomEvent.get_active_talker="getNumberOfTalker",e.RoomEvent.set_active_talker="setNumberOfTalker",e.RoomEvent.get_active_max_talker="getMaxNumberOfTalker",e.RoomEvent.set_adavanced_options="setAdvancedOptions",e.RoomEvent.get_adavanced_options="getAdvancedOptions",e.RoomEvent.client_stats="clientStats",e.RoomEvent.switch_user_role="switchUserRole",e.RoomEvent.hard_unmute_video="hardunmute-user-video",e.RoomEvent.share_started="shareStarted",e.RoomEvent.share_stopped="shareStopped",e.RoomEvent.screen_share_override="shareOverride",e.RoomEvent.streaming_uri="streamingUri",e.RoomEvent.stop_sharing="stopSharing",e.RoomEvent.share_state_events="shareStateEvents",e.RoomEvent.extend_conference_duration="extendConferenceDuration",e.RoomEvent.lock_room="lockRoom",e.RoomEvent.drop="drop",e.RoomEvent.subscriber_video_mute="subscriber-video-mute",e.RoomEvent.switch_codec="switch-publish-media-codec",e.RoomEvent.canvas_started="canvasStarted",e.RoomEvent.canvas_stopped="canvasStopped",e.RoomEvent.canvas_state_events="canvasStateEvents",e.RoomEvent.custom_data_saved="CustomDataSaved",e.RoomEvent.custom_data_updated="CustomDataUpdated",e.RoomEvent.transcription_events="transcription-events",e.RoomEvent.invite_breakout_room="invite-breakout-room",e.RoomEvent.user_joined_breakout_room="user-joined-breakout-room",e.RoomEvent.user_left_breakout_room="breakout-user-disconnected",e.RoomEvent.breakout_room_destroyed="breakout-room-destroyed",e.RoomEvent.generic_events="genericEvents",e.RoomEvent.network_reconnected="network-reconnected",e.RoomEvent.network_disconnected="network-disconnected",e.RoomEvent.network_reconnectiontimeout="network-reconnect-timeout",e.RoomEvent.network_reconnectfailed="network-reconnect-failed",e.RoomEvent.fs_upload_started="fs-upload-started",e.RoomEvent.fs_file_uploaded="fs-file-available",e.RoomEvent.fs_download_started="fs-download-started",e.RoomEvent.fs_file_downloaded="fs-upload-success",e.RoomEvent.fs_file_upload_result="fs-upload-result",e.RoomEvent.fs_file_download_result="fs-download-result",e.SocketEvent.floor_management_events="floorManagementEvents",e.SocketEvent.room_management_events="roomManagementEvents",e.UserEvent.user_audio_muted="user-audio-muted",e.UserEvent.user_audio_unmuted="user-audio-unmuted",e.UserEvent.user_video_muted="user-video-muted",e.UserEvent.user_video_unmuted="user-video-unmuted",e.SocketEvent.hard_mute="hardMute",e.SocketEvent.hard_mute_room="room-muted",e.SocketEvent.hard_unmute_room="room-unmuted",e.SocketEvent.switched_room="roomSwitched",e.RoomEvent.room_transcription_on="room-transcription-on",e.RoomEvent.room_transcription_off="room-transcription-off",e.RoomEvent.self_transcription_on="self-transcription-on",e.RoomEvent.self_transcription_off="self-transcription-off",e.constant={},e.constant.H264_CODEC="H264_AND_OPUS",e.constant.default="default",e.constant.SAFARI_VERSION_NOT_SUPPORTING_VP8="12.0",e.constant.SAFARI_VERSION_SUPPORTING_VP8="12.1",e.constant.FIREFOX_VERSION_VIDEO_MUTE_SUPPORT="60.0",e.constant.CHROME_VERSION_SCREEN_SHARE_WITHOUT_EXTN_SUPPORT="72.0",e.constant.FIREFOX_VERSION_SCREEN_SHARE_WITHOUT_EXTN_SUPPORT="66.0",e.constant.SAFARI_VERSION_SCREEN_SHARE_SUPPORT="13.0.0",e.constant.FIREFOX_VERSION_SENDER_ENCODINGS_PARAM_SUPPORT="64.0",e.constant.SAFARI_VERSION_SENDER_ENCODINGS_PARAM_SUPPORT="13.1.0",e.constant.SAFARI_VERSION_DEVICE_CHANGE_EVENT_SUPPORT="11.0.0",i.a=e},function(e,i,d){i.a={error_000:{result:0,msg:"success"},error_1000:{result:1e3,msg:"Non supported browser"},error_1130:{result:1130,error:"Moderator not present/ wait for Moderator",desc:""},error_1140:{result:1140,error:"Previous similar request in process",desc:""},error_1141:{result:1141,error:"Remote streams can't be muted",desc:""},error_1142:{result:1142,error:"Invalid Device Id",desc:"OverconstrainedError: Invalid device id provided"},error_1143:{result:1143,error:"Requested device not found",desc:"NotFoundError: Requested device was not found"},error_1144:{result:1144,error:"Permission denied",desc:"NotAllowedError: The request is not allowed by the user agent or the platform in the current context"},error_1145:{result:1145,error:"Could not start video source",desc:"NotReadableError: Could not start video source"},error_1146:{result:1146,error:"Failed to execute getUserMedia on MediaDevices",desc:"TypeError: At least one of audio and video must be requested"},error_1147:{result:1147,error:"Constraints could be not satisfied",desc:"OverconstrainedError: Video width constraint could not be satisfied"},error_1148:{result:1148,error:"Constraints could be not satisfied",desc:"OverconstrainedError: Video height constraint could not be satisfied"},error_1149:{result:1149,error:"Constraints could be not satisfied",desc:"One of the constraints (Height, Width, DeviceId) is not satisfied."},error_1150:{result:1150,error:"Reason unknown",desc:"Reason unknown"},error_1151:{result:1151,error:"A screen share is already running",desc:""},error_1152:{result:1152,error:"Audio only calls are allowed with your current browser version",desc:""},error_1153:{result:1153,error:"Unsupported browser",desc:""},error_1154:{result:1154,error:"Given frame rate is not supported",desc:"Frame rate might be negative or not a number which is not accepted by captureStream method"},error_1155:{result:1155,error:"Invalid options/parameters /values",desc:"Invalid options parameters/values "},error_1156:{result:1156,error:"Invalid streamType",desc:" streamType  should be set as canvas for canvas streams and talker for talker streams"},error_1157:{result:1157,error:"The given canvas element does not exist in the DOM",desc:"The canvas element you have provided does not exist in the DOM"},error_1158:{result:1158,error:"This browser does not support canvas",desc:"This browser does not support canvas"},error_1159:{result:1159,error:"Stream not found",desc:"Stream not found"},error_1160:{result:1160,error:"Media connection failure",desc:"Media connection failure"},error_1161:{result:1161,error:"Server connection failure",desc:"Server connection failure"},error_1162:{result:1162,error:"The DOM element does not exist",desc:"The element with DOM reference provided does not exist"},error_1163:{result:1163,error:"Network disconnected",desc:"Socket or media connection has failed due to network error"},error_1164:{result:1164,error:"Network reconnected",desc:"Network reconnected"},error_1165:{result:1165,error:"Reconnect attempt exceeded",desc:"Reconnection failed"},error_1166:{result:1166,error:"Reconnection timed out",desc:"Reconnection failed"},error_1167:{result:1167,error:"Publish or subscribe failed",desc:"After reconnection publish or subscibe failed"},error_1168:{result:1168,error:"Not allowed",desc:"Only moderator has rights to excercise this transaction"},error_1169:{result:1169,msg:"No listener for event",desc:""},error_1170:{result:1170,error:"Not supported",desc:"Feature is not enabled because of room config or no licence "},error_1171:{result:1171,error:"Room not connected",desc:"Room not connected"},error_1172:{result:1172,error:"Room connect failed",desc:"Room connect failed"},error_1173:{result:1173,error:"Floor not granted for participant",desc:"Floor not granted"},error_1174:{result:1174,error:"Local Recording started already",desc:""},error_1175:{result:1175,error:"Local Recording not started /stream not having media",desc:""},error_1176:{result:1176,error:"Moderator declined right to control media devices ",desc:""},error_1177:{result:1177,error:"MediaDevice state is already in same state",desc:""},error_1178:{result:1178,error:"Reconnection for a single participant in the room is not allowed",desc:"Reconnection not allowed"},error_1179:{result:1179,error:" files to upload input array size is 0",desc:" empty file transfer is not allowed"},error_1180:{result:1180,error:" room is disconected",desc:" file sharing is not allowed on disconnected rooms"},error_1181:{result:1181,error:" Recieve file operation is not permitted.",desc:" File which you are trying to receive  does not exist."},error_1182:{result:1182,error:"file upload failed",desc:"file upload failed "},error_1183:{result:1183,error:" file download failed ",desc:" file download failed"},error_1184:{result:1184,error:"user video resolution inavlid range",desc:"user video resolution inavlid range"},error_1185:{result:1185,error:"file upload failed ",desc:"file upload failed because provided file list is empty"},error_1186:{result:1186,error:"file upload failed ",desc:"file size is zero bytes"},error_1187:{result:1187,error:"file upload failed ",desc:"file upload failed because it exceeded max upload limit"},error_1188:{result:1188,error:"current and requested state / value are same",desc:"current and requested state / value are same"},error_1189:{result:1189,error:"Media operation not allowed in mute state",desc:""},error_4121:{result:4121,error:"room already locked / unlocked",desc:" room is already locked/unlocked"},error_7000:{result:7e3,error:"streaming error",desc:" streaming error"},error_7008:{result:7008,error:"streaming error",desc:"only moderator can start streaming"},error_7009:{result:7009,error:"streaming error",desc:"invalid or undefined streaming configuration"},error_7101:{result:7101,error:"streaming error",desc:"rtmpUrl should not exceed more than 3 values"},error_7102:{result:7102,error:"streaming error",desc:"invalid rtmp or url format"},error_7103:{result:7103,error:"streaming error",desc:"room is disconnecting, cannot start streaming"},error_7044:{result:7044,error:"streaming error",desc:"only moderator can stop streaming"},error_7045:{result:7045,error:"streaming error",desc:"room is disconnecting, streaming will be stopped"},error_7072:{result:7072,error:"streaming params change error",desc:"only moderator can change streaming params"},error_7078:{result:7078,error:"streaming params change error",desc:"room is disconnecting, cannot change streaming params"},error_7201:{result:7201,error:"live recording error",desc:"only moderator can start live recording"},error_7202:{result:7202,error:"live recording error",desc:"invalid url format"},error_7203:{result:7203,error:"live recording error",desc:"room is disconnecting, cannot start live recording"},error_7204:{result:7204,error:"live recording error",desc:"live recording error"},error_7036:{result:7036,error:"live recording error",desc:"only moderator can stop live recording"},error_7037:{result:7037,error:"live recording error",desc:"room is disconnecting, live recording will be stopped"},error_7079:{result:7079,error:"room is disconected",desc:"Layout update is not allowed on disconnected rooms"},error_7071:{result:7071,error:"live recording error",desc:"only moderator can change live recording params"},error_8000:{result:8e3,error:"invalidate transcoding error",desc:"Room is disconnecting, invalidate transcoding cannot be performed now"},error_8001:{result:8001,error:"Live transcription is already in progress",desc:"Live transcription is already in progress"},error_8002:{result:8002,error:"Live transcription is not running",desc:"Live transcription is not started"},CC002:{cause:2002,msg:"unexpected-disconnection"},CC006:{cause:2006,msg:"normal-disconnect"},error_1190:{result:1190,error:"Exception found",desc:"Could not fetch video size"},error_1191:{result:1191,error:"Stream track ended state ",desc:"Stream track is already ended"},error_1192:{result:1192,error:"Invalid parameters",desc:"Invalid value for layout parameter"},error_1193:{result:1193,error:"Invalid parameters",desc:"Invalid value for service parameter"},error_1194:{result:1194,error:"Invalid parameters",desc:"Invalid value for clients parameter"},error_1195:{result:1195,error:"Large text Data",desc:"Failed to handle larger text-data"},error_1196:{result:1196,error:"content-length value exceeded.",desc:"Entered value of content-length exceeded the maximum allowed value."},error_1197:{result:1197,error:"stream Invalid state .",desc:"room not published or already stream in published."}}},function(e,i,d){(function(t){var u=d(37),a=d(38),c=d(39),r=d(0),s=d(26),l=d(6),g=d(5),o=d(8),v=d(9),h=103,k,_=!1,y={deviceList:void 0},S=function(){var W="none";return typeof t<"u"&&t.exports?W="fake":window.navigator.userAgent.match("Firefox")!==null?W="mozilla":window.navigator.userAgent.match("Chrome")!==null?(W="chrome-stable",window.navigator.userAgent.match("Electron")!==null?W="electron":window.navigator.userAgent.match("Edge")!==null&&(W="edge")):window.navigator.userAgent.match("Safari")!==null||window.navigator.userAgent.match("AppleWebKit")!==null?W="safari":window.navigator.userAgent.match(".NET")!==null&&(W="IE"),W},x=function(){var W=navigator.userAgent,K=W.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(K[1])){var re=/\brv[ :]+(\d+)/g.exec(W)||[];return"IE "+(re[1]||"")}return K[1]==="Chrome"&&(re=W.match(/\b(OPR|Edge)\/(\d+)/),re!=null)?re.slice(1).join(" ").replace("OPR","Opera"):(K=K[2]?K[2]:navigator.appVersion,(re=W.match(/version\/([^\s]+)/i))!=null&&(K=re[1]),K)},D=function(W){var K=x();if(typeof W!="string")return!1;K=K.split("."),W=W.split(".");for(var re=Math.min(K.length,W.length),f=0;f<re;++f){if(K[f]=parseInt(K[f],10),W[f]=parseInt(W[f],10),K[f]>W[f])return!1;if(K[f]<W[f])return!0}return K.length==W.length?!1:!(K.length<W.length)},E=function(W,K){for(var re={cam:[],mic:[],speaker:[]},f=0;f<W.length;f++)switch(W[f].kind){case"audioinput":K.mic&&re.mic.push(W[f]);break;case"videoinput":K.cam&&re.cam.push(W[f]);break;case"audiooutput":K.speaker&&re.speaker.push(W[f])}return re},I=function(W){var K={cam:[],mic:[],speaker:[]},re={cam:[],mic:[],speaker:[]},f={cam:[],mic:[],speaker:[]};if(y.deviceList!==void 0){re=JSON.parse(JSON.stringify(y.deviceList));for(var ae in W.cam){var ce=!1,he;for(he in re.cam)W.cam[ae].deviceId===re.cam[he].deviceId&&(f.cam.push(re.cam.splice(he,1)[0]),ce=!0);ce===!1&&K.cam.push(W.cam[ae])}for(var ye in W.mic){ce=!1;for(var R in re.mic)W.mic[ye].groupId===re.mic[R].groupId&&(f.mic.push(re.mic.splice(R,1)[0]),ce=!0);ce===!1&&K.mic.push(W.mic[ye])}for(var O in W.speaker){ce=!1;for(var j in re.speaker)W.speaker[O].groupId===re.speaker[j].groupId&&(f.speaker.push(re.speaker.splice(j,1)[0]),ce=!0);ce===!1&&K.speaker.push(W.speaker[O])}y.deviceList=W}return{current:f,added:K,removed:re}},p=function(W,K,re){re=re===void 0?!0:re,S()==="IE"||S()==="edge"?(v.a.error("agent-event",o.a.event_incompatible_browser,{error:l.a.error_1153}),K(null,l.a.error_1153)):_&&S()==="safari"?K("success",null):navigator.mediaDevices.getUserMedia(W).then(function(f){_=!0,K(f,null)}).catch(function(f){if(f=Object(s.a)(f),v.a.error("agent-event",o.a.event_gum_failed,{error:f}),!re||f.result!==l.a.error_1143.result&&f.result!==l.a.error_1144.result)r.a.error("Failed to get media devices : "+JSON.stringify(f)),K(null,f);else if(W.video&&W.audio){var ae=JSON.parse(JSON.stringify(W));ae.video=!1,ae.videoConfigured=W.video,r.a.warning("getUserMedia() failed with error: "+JSON.stringify(f)+" retry with audio-only"),p(ae,K)}else W.video||W.videoConfigured==null?(r.a.error("Failed to get media devices permission: "+JSON.stringify(f)),K(null,f)):(ae=JSON.parse(JSON.stringify(W)),ae.video=W.videoConfigured,ae.audio=!1,console.log("getUserMedia() failed with error: "+JSON.stringify(f)+" retry with video-only"),p(ae,K))})},B=function(W){navigator.mediaDevices.enumerateDevices().then(function(K){W(K)})},P=function(W,K){var re={};W!==void 0?(re.mic=W.mic!=null?W.mic:!1,re.cam=W.cam!=null?W.cam:!1,re.speaker=W.speaker!=null?W.speaker:!1):re={mic:!0,cam:!0,speaker:!0},r.a.debug("getDeviceList ops: "+JSON.stringify(W)+" media ops: "+JSON.stringify(re)),re.mic||re.cam?p({audio:re.mic,video:re.cam},function(f,ae){f||ae&&ae.result===l.a.error_1145.result?B(function(ce,he){ce?(ce=E(ce,re),K({result:0,devices:ce})):K(ae&&ae.result===l.a.error_1145.result?ae:he)}):K(ae)}):re.speaker?B(function(f,ae){f&&(f=E(f,re),K({result:0,devices:f}))}):K(l.a.error_1155)},z=function(){return document.getElementById("WebrtcEverywherePluginId")},te=function(W,K,re,f){W.addEventListener(K,re,f)};i.a={GetUserMedia:function(W,K,re){K=K===void 0?function(){}:K,re=re===void 0?function(){}:re;var f,ae=S();if(ae==="chrome-stable"||ae==="electron"||ae==="mozilla"||ae==="safari")var ce=function(ye,R,O){navigator.mediaDevices.getUserMedia(ye).then(R).catch(O)},he=function(ye,R,O){navigator.getDisplayMedia?navigator.getDisplayMedia({video:!0}).then(R).catch(O):navigator.mediaDevices.getDisplayMedia(ye).then(R).catch(O)};else ce=navigator.getUserMedia=function(ye,R,O){document.readyState!=="complete"?k||(k=!0,te(document,"readystatechange",function(){k&&document.readyState=="complete"&&(k=!1,z().getUserMedia(ye,R,O))})):z().getUserMedia(ye,R,O)};ae=function(){switch(r.a.debug("Screen access requested"),S()){case"electron":r.a.debug("Screen sharing in Electron"),f={},f.video=W.video||{},f.video.mandatory=W.video.mandatory||{},f.video.mandatory.chromeMediaSource="screen",ce(f,K,re);break;case"mozilla":r.a.debug("Screen sharing in Firefox max fps: 5"),f={},W.video!==void 0?(f.video={},f.video.mediaSource="window"):f={audio:W.audio,video:{mediaSource:"window"}},D(g.a.constant.FIREFOX_VERSION_SCREEN_SHARE_WITHOUT_EXTN_SUPPORT)?ce(f,K,re):(f.video={framerate:{max:W.fps}},he(f,K,re));break;case"safari":D(g.a.constant.SAFARI_VERSION_SCREEN_SHARE_SUPPORT)?(r.a.error("Screen Sharing not supported for safari version: "+x()),v.a.error("agent-event",o.a.event_incompatible_browser,{error:"This safari version does not support ScreenSharing"})):(r.a.debug("Screen sharing  Safari "),he({video:!0},K,re));break;case"chrome-stable":if(r.a.debug("Screen sharing in Chrome"),f={},W.desktopStreamId)f.video=W.video||{mandatory:{}},f.video.mandatory=f.video.mandatory||{},f.video.mandatory.chromeMediaSource="desktop",f.video.mandatory.chromeMediaSourceId=W.desktopStreamId,f.video.mandatory.chromeMediaSourceId=W.desktopStreamId,ce(f,K,re);else if(D(g.a.constant.CHROME_VERSION_SCREEN_SHARE_WITHOUT_EXTN_SUPPORT)){var ye="apedaiecomcfkjdjbnkfcdafaikkdkeo";W.extensionId&&(r.a.debug("extensionId supplied, using "+W.extensionId),ye=W.extensionId),r.a.debug("Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(ye,{getStream:!0},function(R){R===void 0?(r.a.error("Access to screen denied"),re({code:"Access to screen denied"})):(R=R.streamId,W.video.mandatory!==void 0?(f.video=W.video,f.video.mandatory.chromeMediaSource="desktop",f.video.mandatory.chromeMediaSourceId=R):f={video:{mandatory:{maxFrameRate:W.fps,chromeMediaSource:"desktop",chromeMediaSourceId:R}}},ce(f,K,re))})}catch{r.a.debug("Screensharing plugin is not accessible "),v.a.error("agent-event",o.a.event_incompatible_browser,{error:"Screensharing plugin is not accessible"}),re({code:"no_plugin_present"})}}else r.a.debug("Screen sharing in Chrome without extension max Fps:: 3"),f.video={frameRate:{max:W.fps}},W.audio!=null&&W.audio!==!1&&(f.audio=!0),he(f,K,re);break;default:r.a.error("This browser does not support ScreenSharing"),v.a.error("agent-event",o.a.event_incompatible_browser,{error:"This browser does not support ScreenSharing"})}},W.screen?ae():typeof t<"u"&&t.exports?r.a.error("Video/audio streams not supported in controller yet"):(r.a.debug("Calling getUserMedia with config",JSON.stringify(W)),ce(W,K,re))},buildPair:function(W){var K={};if(h+=1,W.sessionId=h,K.browser=S(),K.browser==="fake")r.a.warning("Publish/subscribe video/audio streams not supported in media yet"),v.a.warn("agent-event",o.a.event_incompatible_browser,{error:"Publish/subscribe video/audio streams not supported in media yet"}),K=Object(c.a)(W);else if(K.browser==="mozilla")r.a.debug("Firefox Stack"),K=Object(a.a)(W);else if(K.browser==="safari")r.a.debug("Safari using Chrome Stable Stack"),K=Object(u.a)(W);else if(K.browser==="chrome-stable"||K.browser==="electron")r.a.debug("Chrome Stable Stack"),K=Object(u.a)(W);else if(K.browser==="IE")r.a.debug("IE using Chrome Stable Stack"),K=Object(u.a)(W);else throw r.a.error("No stack available for this browser"),v.a.error("agent-event",o.a.event_incompatible_browser,{error:"No stack available for this browser"}),Error("WebRTC stack not available");return K.updateSpec||(K.updateSpec=function(re,f){f=f===void 0?function(){}:f,r.a.error("Update Configuration not implemented in this browser"),v.a.error("agent-event",o.a.event_incompatible_browser,{error:"Update Configuration not implemented in this browser"}),f("unimplemented")}),K},browserEngineCheck:S,getAndroidVersion:function(){var W=navigator.userAgent;return 0<=W.indexOf("Android")?parseFloat(W.slice(W.indexOf("Android")+8)):!1},mediaDeviceUpdate:function(W,K,re){y.changedDevicesCallbacks!=null?(K!=null&&K==1&&(y.changedDevicesCallbacks=[]),y.changedDevicesCallbacks.push(re)):(y.deviceList===void 0&&P(W,function(f){y.deviceList=f.devices}),y.changedDevicesCallbacks=[],y.changedDevicesCallbacks.push(re),S()==="safari"&&D(g.a.constant.SAFARI_VERSION_DEVICE_CHANGE_EVENT_SUPPORT)?setInterval(function(){P(W,function(f){if(y.deviceList===void 0)y.deviceList=f.devices;else{var ae=I(f.devices);y.changedDevicesCallbacks.forEach(function(ce){return ce(ae)})}})},3e3):navigator.mediaDevices.ondevicechange=function(f){(y.receivedDC==null||y.receivedDC!=1)&&(y.receivedDC=!0,setTimeout(function(){y.receivedDC=!1,P(W,function(ae){if(ae.result==0)if(y.deviceList===void 0)y.deviceList=ae.devices;else{var ce=I(ae.devices);y.changedDevicesCallbacks.forEach(function(he){return he(ce)})}else console.log("ondevicechange() getDeviceList failed error: "+JSON.stringify(ae))})},500))})},getDeviceList:P,getBrowserVersion:x,GetCanvasStream:function(W,K,re){K=K===void 0?function(){}:K,re=re===void 0?function(){}:re;var f=null,ae=null,ce=S();if(W.canvas)if(ce==="chrome-stable"||ce==="mozilla"||ce==="safari"){if(W.canvas.fps!==void 0&&0<W.canvas.fps)var he=W.canvas.fps;else if(W.canvas.fps!==void 0){r.a.error("Framerate is invalid is: ",W.canvas.fps),re(l.a.error_1154),v.a.error("agent-event",o.a.event_incompatible_browser,{error:l.a.error_1154});return}W=W.canvas.canvasId;try{(f=document.querySelector("#"+W))&&(f instanceof HTMLMediaElement||f instanceof HTMLCanvasElement)?(ae=f.captureStream(f instanceof HTMLCanvasElement?he:void 0))?K(ae):(r.a.error("captureStream() failed . canvasFps : ",he),re(l.a.error_1159),v.a.error("agent-event",o.a.event_incompatible_browser,{error:l.a.error_1159})):(r.a.error("DOM Element does not exists/ not a Media Element. DomId is: ",W),v.a.error("agent-event",o.a.event_incompatible_browser,{error:l.a.error_1157}),re(l.a.error_1157))}catch(ye){r.a.error("DOM Element does not exists/ not a Media Element. DomId is: ",W),re(l.a.error_1157),v.a.error("agent-event",o.a.event_incompatible_browser,{error:l.a.error_1157,exception:"Canvas chrome err: "+JSON.stringify(ye)})}}else r.a.error(" getCanvasStream() This browser does not support canvas"),re(l.a.error_1158),v.a.error("agent-event",o.a.event_incompatible_browser,{error:l.a.error_1154});else r.a.error(" getCanvasStream() is called without canvas options"),v.a.error("agent-event",o.a.event_incompatible_browser,{error:"Canvas called without options"}),re(l.a.error_1155)},isCurrentVerLess:D,getSupportedDeviceConstraints:function(){return navigator.mediaDevices.getSupportedConstraints()}}}).call(i,d(36)(e))},function(e,i,d){i.a={event_ice_failed:{event_code:"4000",severity:"critical",event_name:"ice-failed",event_description:"ICE failed"},event_ice_success:{event_code:"40001",severity:"",event_name:"ice-success",event_description:"ICE success"},event_stream_subscribe_failed:{event_code:"4001",severity:"critical",event_name:"stream-subscribe-failed",event_description:"Failed to subscribe to stream"},event_stream_subscribe_success:{event_code:"40011",severity:"",event_name:"stream-subscribe-success",event_description:"Subscribe to stream successful"},event_stream_unsubscribe_failed:{event_code:"4002",severity:"critical",event_name:"stream-unsubscribe-failed",event_description:"Failed to unsubscribe from stream"},event_stream_unsubscribe_success:{event_code:"40021",severity:"",event_name:"stream-unsubscribe-success",event_description:"Unsubscribe from stream success"},event_socket_connect_failed:{event_code:"4003",severity:"critical",event_name:"socket-connect-failed",event_description:"Socket connection failed"},event_socket_connect_success:{event_code:"40031",severity:"",event_name:"socket-connect-success",event_description:"Socket connection successful"},event_stream_publish_failed:{event_code:"4004",severity:"critical",event_name:"stream-publish-failed",event_description:"Failed to publish stream"},event_stream_publish_success:{event_code:"40041",severity:"",event_name:"stream-publish-success",event_description:"stream published successfully"},event_stream_unpublish_failed:{event_code:"4005",severity:"critical",event_name:"stream-unpublish-failed",event_description:"Failed to unpublish stream"},event_stream_unpublish_success:{event_code:"40051",severity:"",event_name:"stream-unpublish-success",event_description:"Unpublish stream success"},event_start_recording_failed:{event_code:"4006",severity:"critical",event_name:"start-recording-failed",event_description:"Failed to start recording"},event_start_recording_success:{event_code:"40061",severity:"",event_name:"start-recording-success",event_description:"Start recording success"},event_start_local_recording_failed:{event_code:"40062",severity:"critical",event_name:"start-local-recording-failed",event_description:"Failed to start local recording"},event_start_local_recording_success:{event_code:"40063",severity:"",event_name:"start-local-recording-success",event_description:"Start local recording success"},event_stop_recording_failed:{event_code:"4007",severity:"critical",event_name:"stop-recording-failed",event_description:"Failed to stop recording"},event_stop_recording_success:{event_code:"40071",severity:"",event_name:"stop-recording-success",event_description:"Stop recording success"},event_stop_local_recording_failed:{event_code:"40072",severity:"critical",event_name:"stop-local-recording-failed",event_description:"Failed to stop local recording"},event_stop_local_recording_success:{event_code:"40073",severity:"",event_name:"stop-local-recording-success",event_description:"Stop local recording success"},event_start_screenshare_failed:{event_code:"4008",severity:"critical",event_name:"start-screenshare-failed",event_description:"Failed to start screenshare"},event_start_screenshare_success:{event_code:"40081",severity:"",event_name:"start-screenshare-success",event_description:"Screenshare Start successfully"},event_stop_screenshare_failed:{event_code:"4009",severity:"critical",event_name:"stop-screenshare-failed",event_description:"Failed to stop screenshare"},event_stop_screenshare_success:{event_code:"40091",severity:"",event_name:"stop-screenshare-success",event_description:"Screenshare stopped successfully"},event_start_canvas_failed:{event_code:"4010",severity:"critical",event_name:"start-canvas-failed",event_description:"Failed to start canvas"},event_start_canvas_success:{event_code:"40101",severity:"",event_name:"start-canvas-success",event_description:"Canvas started successfully"},event_stop_canvas_failed:{event_code:"4011",severity:"critical",event_name:"stop-canvas-failed",event_description:"Failed to stop canvas"},event_stop_canvas_success:{event_code:"40111",severity:"",event_name:"stop-canvas-success",event_description:"Canvas stopped successfully"},event_network_reconnect_timeout:{event_code:"4012",severity:"high",event_name:"network-reconnect-timeout",event_description:"Reconnection timed out"},event_start_annotation_failed:{event_code:"4012",severity:"high",event_name:"start-annotation-failed",event_description:"Start Annotation Failed"},event_start_annotation_success:{event_code:"40121",severity:"high",event_name:"start-annotation-success",event_description:"Start Annotation successful"},event_stop_annotation_failed:{event_code:"4013",severity:"high",event_name:"stop-annotation-failed",event_description:"Stop Annotation Failed"},event_stop_annotation_success:{event_code:"40131",severity:"high",event_name:"stop-annotation-success",event_description:"Stop Annotation successful"},event_send_message_failed:{event_code:"4013",severity:"high",event_name:"send-message-failed",event_description:"Failed to send message"},event_send_message_success:{event_code:"40131",severity:"",event_name:"send-message-success",event_description:"Send message success"},event_reconnect_socket_failed:{event_code:"4014",severity:"high",event_name:"reconnect-socket-failed",event_description:"Failed to reconnect socket"},event_reconnect_socket_success:{event_code:"40141",severity:"",event_name:"reconnect-socket-success",event_description:"Socket reconnection success"},event_send_data_failed:{event_code:"4018",severity:"high",event_name:"send-data-failed",event_description:"Failed to send data"},event_send_data_success:{event_code:"40181",severity:"",event_name:"send-data-success",event_description:"Send data success"},event_media_access_denied:{event_code:"4019",severity:"critical",event_name:"media-access-denied",event_description:"Access to media denied"},event_media_access_success:{event_code:"40191",severity:"",event_name:"media-access-allowed-success",event_description:"User has granted access to local media."},event_agent_media_access_denied:{event_code:"40192",severity:"critical",event_name:"agent-media-access-denied-failed",event_description:"Access to media denied (Agent)"},event_gum_failed:{event_code:"4020",severity:"critical",event_name:"gum-failed",event_description:"Get User Media failed"},event_gum_success:{event_code:"40201",severity:"",event_name:"gum-success",event_description:"Get User Media success"},event_agent_gum_failed:{event_code:"40201",severity:"critical",event_name:"agent-gum-failed",event_description:"Get User Media failed (Agent)"},event_audio_device_access_failed:{event_code:"4021",severity:"critical",event_name:"audio-device-access-failed",event_description:"Failed to access Audio device"},event_agent_audio_device_access_failed:{event_code:"40211",severity:"critical",event_name:"agent-audio-device-access-failed",event_description:"Failed to access Audio device (Agent)"},event_video_device_access_failed:{event_code:"4022",severity:"critical",event_name:"video-device-access-failed",event_description:"Failed to access Video device"},event_agent_video_device_access_failed:{event_code:"40221",severity:"critical",event_name:"agent-video-device-access-failed",event_description:"Failed to access Video device (Agent)"},event_remote_canvas_stream_failed:{event_code:"4023",severity:"high",event_name:"remote-canvas-stream-failed",event_description:"Remote canvas stream failed"},event_capture_canvas_stream_failed:{event_code:"4024",severity:"critical",event_name:"capture-canvas-stream-failed",event_description:"Failed to capture canvas stream"},event_set_local_description:{event_code:"4025",severity:"none",event_name:"set-local-description",event_description:"Local SDP description is set"},event_set_remote_description:{event_code:"4026",severity:"none",event_name:"set-remote-description",event_description:"Remote SDP description is set"},event_reconnect_subscribe_failed:{event_code:"4027",severity:"high",event_name:"reconnect-subscribe-failed",event_description:"Failed to subscribe while reconnecting"},event_reconnect_publish_failed:{event_code:"4028",severity:"high",event_name:"reconnect-publish-failed",event_description:"Failed to publish while reconnecting"},event_incompatible_browser:{event_code:"4029",severity:"high",event_name:"incompatible-browser",event_description:"Browser is incompatible"},event_connect_socket_failed:{event_code:"4030",severity:"high",event_name:"connect-socket-failed",event_description:"Socket connection failed"},event_connect_socket_success:{event_code:"40301",severity:"",event_name:"connect-socket-success",event_description:"Socket connection successful"},event_room_reconnection_failed:{event_code:"4031",severity:"high",event_name:"room-reconnection-failed",event_description:"Room reconnection failed"},event_room_reconnection_success:{event_code:"40311",severity:"",event_name:"room-reconnection- success",event_description:"Room reconnection success"},event_room_disconnection_failed:{event_code:"4032",severity:"high",event_name:"room-disconnection-failed",event_description:"Room disconnection failed"},event_room_disconnection_success:{event_code:"40321",severity:"",event_name:"room-disconnection-success",event_description:"Room disconnection success"},event_mute_self_audio_failed:{event_code:"4033",severity:"high",event_name:"mute-self-audio-failed",event_description:"mute self audio failed"},event_mute_self_audio_success:{event_code:"40331",severity:"",event_name:"mute-self-audio-success",event_description:"mute self audio success"},event_unmute_self_audio_failed:{event_code:"4034",severity:"high",event_name:"unmute-self-audio-failed",event_description:"unmute self audio failed"},event_unmute_self_audio_success:{event_code:"40341",severity:"",event_name:"unmute-self-audio-success",event_description:"unmute self audio success"},event_room_mute_failed:{event_code:"4035",severity:"high",event_name:"room-mute-failed",event_description:"room mute failed"},event_room_mute_success:{event_code:"40351",severity:"",event_name:"room-mute-success",event_description:"room mute success"},event_room_unmute_failed:{event_code:"4036",severity:"high",event_name:"room-unmute-failed",event_description:"room unmute failed"},event_room_unmute_success:{event_code:"40361",severity:"",event_name:"room-unmute-success",event_description:"room unmute success"},event_file_shared_failed:{event_code:"4037",severity:"high",event_name:"file-shared-failed",event_description:"file shared failed"},event_file_shared_success:{event_code:"40371",severity:"",event_name:"file-shared-success",event_description:"file shared success"},event_file_download_failed:{event_code:"4038",severity:"high",event_name:"file-downlod-failed",event_description:"file download failed"},event_file_download_success:{event_code:"40381",severity:"",event_name:"file-downlod-success",event_description:"file downlod success"},event_mute_self_video_failed:{event_code:"4039",severity:"high",event_name:"mute-self-video-failed",event_description:"mute self video failed"},event_mute_self_video_success:{event_code:"40391",severity:"",event_name:"mute-self-video-success",event_description:"mute self video success"},event_unmute_self_video_failed:{event_code:"4040",severity:"high",event_name:"unmute-self-video-failed",event_description:"unmute self video failed"},event_unmute_self_video_success:{event_code:"40401",severity:"",event_name:"unmute-self-video-success",event_description:"unmute self video failed"},event_low_bandwidth_update:{event_code:"4041",severity:"",event_name:"low-bandwidth-update",event_description:"low bandwidth update"},event_network_change:{event_code:"4042",severity:"",event_name:"network-change",event_description:"network change"},event_connection_lost:{event_code:"4043",severity:"",event_name:"connection-lost",event_description:"connection lost"},event_make_outbound_call_failed:{event_code:"4044",severity:"high",event_name:"make-outbound-call-failed",event_description:"Outbound call failed"},event_make_outbound_call_success:{event_code:"40441",severity:"",event_name:"make-outbound-call-success",event_description:"Outbound call success"},event_make_outbound_call_state:{event_code:"4045",severity:"",event_name:"make-outbound-call-state",event_description:"Outbound call state"},event_abwd_mute_video_success:{event_code:"4101",severity:"",event_name:"mute-publisher-video-success",event_description:"Publisher video muted due to low bandwidth"},event_fs_upload_started_success:{event_code:"4102",severity:"",event_name:"fs-upload-started-success",event_description:"File is being shared"},event_fs_file_available_success:{event_code:"4103",severity:"",event_name:"fs-file-available-success",event_description:"File is being shared"},event_room_user_connect_failed:{event_code:"4104",severity:"",event_name:"room-user-connect-failed",event_description:"User connection to the Room failed"},event_room_user_connect_success:{event_code:"41041",severity:"",event_name:"room-user-connect-success",event_description:"A new user is connected to the Room"},event_room_user_disconnect_failed:{event_code:"4105",severity:"",event_name:"room-user-disconnect-failed",event_description:"User disconnection to the Room failed"},event_room_user_disconnect_success:{event_code:"41051",severity:"",event_name:"room-user-disconnect-success",event_description:"User is disconnected to the Room"},event_start_live_recording_failed:{event_code:"4046",severity:"critical",event_name:"start-live-recording-failed",event_description:"Failed to start live recording"},event_start_live_recording_success:{event_code:"40461",severity:"",event_name:"start-live-recording-success",event_description:"Start live recording success"},event_stop_live_recording_failed:{event_code:"4047",severity:"critical",event_name:"stop-live-recording-failed",event_description:"Failed to stop live recording"},event_stop_live_recording_success:{event_code:"40471",severity:"",event_name:"stop-live-recording-success",event_description:"Stop live recording success"},event_live_recording_param_change_failed:{event_code:"40472",severity:"",event_name:"live-recording-param-change-failed",event_description:"live recording params change failed"},event_live_recording_param_change_success:{event_code:"40473",severity:"",event_name:"live-recording-param-change-success",event_description:"live recording params change success"},event_streaming_param_change_failed:{event_code:"40474",severity:"",event_name:"Streaming-param-change-failed",event_description:"Streaming params change failed"},event_streaming_param_change_success:{event_code:"40475",severity:"",event_name:"Streaming-param-change-success",event_description:"Streaming params change success"},event_general_failed:{event_code:"4106",severity:"critical",event_name:"general-failed",event_description:"General error"},event_general_success:{event_code:"41061",severity:"",event_name:"general-success",event_description:"General success"},event_stream_player_failed:{event_code:"4107",severity:"critical",event_name:"player-play-failed",event_description:"player div is not playing the video"}}},function(e,i,d){var t=d(0);e=d(1);var u=d.n(e);d=function(){var a={eventLoggerToken:void 0,eventServer:{},logID:void 0,eventBuffer:[],uniqueSequence:1,clientId:void 0};switch(u.a.eventLogLevel){case"trace":a.logLevel=2;break;case"debug":a.logLevel=1;break;case"info":a.logLevel=3;break;case"warn":a.logLevel=4;break;case"error":a.logLevel=5;break;default:a.logLevel=6}return a.init=function(c){try{c.eventServer&&c.eventServer.url&&(a.eventServer.url=c.eventServer.url,a.logID=c.logId)}catch(r){t.a.error("Error! Failed to send auth request to Event Server. Error: "+r+".")}},a.log=function(c,r){try{if(!(c<a.logLevel)){t.a.debug("EventLogger.log event SENT"+JSON.stringify(r));var s=new Date().toISOString(),l="info",g={};switch(c){case 1:l="debug";break;case 2:l="trace";break;case 3:l="info";break;case 4:l="warning";break;case 5:l="error";break;default:l="info"}if(g.key={logID:a.logID,endpointType:"client",instanceID:a.logID,uniqueSequence:a.uniqueSequence++},g.severity=r.event?r.event.severity:"none",g.eventLevel=[],g.eventLevel.push(l),g.eventLevel.push(r.source),g.eventMeta={},g.eventMeta.event=r.event,g.eventMeta.meta=r.meta,g.isAnonymousInfo=!0,g.sourceTimeStamp=s,a.eventServer.url&&a.eventLoggerToken){var o=new XMLHttpRequest;o.onreadystatechange=function(){this.readyState===4&&this.status===200?t.a.info(this.responseText):t.a.error("Connection to Event Server did not establish. readyState: "+this.readyState+" Status: "+this.status)},o.open("POST","https://"+a.eventServer.url+"/event",!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("eventToken",a.eventLoggerToken),o.send(JSON.stringify(g))}else a.eventBuffer.push(g)}}catch(v){t.a.error("Error! Failed to post log event to Event Server. Error: "+v+".")}},a.debug=function(c,r,s){a.log(1,{source:c,event:r,meta:s})},a.trace=function(c,r,s){a.log(2,{source:c,event:r,meta:s})},a.info=function(c,r,s){a.log(3,{source:c,event:r,meta:s})},a.warn=function(c,r,s){a.log(4,{source:c,event:r,meta:s})},a.error=function(c,r,s){s.error!=null&&typeof s.error!="object"&&(s.error={errorDesc:s.error}),a.log(5,{source:c,event:r,meta:s})},a.close=function(){},a.revalidate=function(){},a.processBufferEvents=function(){for(var c=0;c<a.eventBuffer.length;c++){var r=a.eventBuffer[c],s=new XMLHttpRequest;s.onreadystatechange=function(){this.readyState==4&&this.status==200?t.a.info(this.responseText):t.a.error("Connection to Event Server did not establish. Status: "+this.status)},s.open("POST","https://"+a.eventServer.url+"/event",!0),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("eventToken",a.eventLoggerToken),s.send(JSON.stringify(r))}},a.setClientId=function(c){a.clientId=c},a.setEventLoggerToken=function(c){c&&(a.eventLoggerToken=c,a.eventLoggerToken&&a.eventServer&&a.eventServer.url&&a.processBufferEvents())},a}(),i.a=d},function(e,i,d){i.a={vcx_player:{width:"inherit",height:"inherit",position:"relative","background-color":"black",overflow:"hidden"},vcx_player_loader:{width:"100%",height:"100%",position:"absolute"},vcx_player_screen_saver:{width:"100%",height:"100%",position:"absolute","z-index":"1"},vcx_stream:{width:"inherit !important",height:"inherit !important",position:"absolute","object-fit":"cover"},default_vcx_bar:{height:"100%",width:"100%",position:"absolute"},vcx_subbar_bottom:{width:"100%",height:"15%","max-height":"33px",color:"#aaa",position:"absolute",bottom:0,"background-repeat":"repeat-x;","-webkit-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)",transition:"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","-moz-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","background-position":"bottom","padding-top":"50px","z-index":2},vcx_subbar_top:{width:"100%",height:"15%","max-height":"30px",color:"#aaa",position:"absolute",top:0,"background-repeat":"repeat-x",transition:"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","-webkit-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","-moz-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","background-position":"top !important","padding-bottom":"50px","z-index":2},vcx_subbar_left:{width:"15%",height:"100%","max-width":"30px",color:"#aaa",position:"absolute",left:0,"background-repeat":"repeat-x",transition:"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","-webkit-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","-moz-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","background-position":"bottom"},vcx_subbar_right:{width:"15%",height:"100%","max-width":"30px",color:"#aaa",position:"absolute",right:0,transition:"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","-webkit-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","-moz-transition":"opacity .25s cubic-bezier(0.0,0.0,0.2,1)","background-position":"bottom"},brand_logo:{"max-width":"30px","max-height":"30px",cursor:"pointer",position:"absolute",right:"0px",margin:"5px"},theater_view:{width:"100% !important",height:"80% !important"},full_view:{width:"100% !important",height:"100% !important",top:"0px",left:"0px",position:"fixed !important","z-index":3},icon:{margin:"7px","max-width":"30px",cursor:"pointer"},icon_record:{color:"#f00"},icon_volume:{color:"#aaa"},icon_play:{color:"#aaa"},icon_mic:{color:"#aaa"},icon_zoom:{color:"#aaa"},icon_share:{color:"#aaa"}}},function(e,i,d){var t=d(7),u=d(4),a=d(40),c=d(14),r=d(52),s=d(3),l=d(53),g=d(19),o=d(0),v=d(5),h=d(6);e=d(1);var k=d.n(e),_=d(8),y=d(9),S=d(16),x=d(56),D=d(61),E=d(62),I=d(67),p=["user","owner","room","session"],B=["all","none"],P=!0,z;window.statsIcon='<svg  viewBox="0 0 16 16" width="16" height="16" xml:space="preserve" fill="green"><rect height="6" width="4" y="10"/><rect height="10" width="4" x="6" y="6"/><rect height="16" width="4" x="12"/></svg>',window.lowBwIcon='<svg id="icon_low_bw" height="20" viewBox="0 0 24 24" width="20" title="Low Bandwidth"><path d="m16.155 13.799-5.284 7.908c-.43.665.048 1.542.84 1.542h10.507c.789 0 1.268-.872.843-1.538l-5.223-7.908c-.392-.613-1.288-.616-1.683-.004z" fill="#ffc107"/><path fill="#f44236" d="m22.288 24.031h-10.576c-.944 0-1.712-.747-1.712-1.665 0-.333.098-.647.281-.908l5.271-8.206c.294-.479.852-.784 1.448-.784s1.154.305 1.456.796l5.28 8.221c.166.235.264.549.264.882 0 .918-.768 1.664-1.712 1.664zm-5.288-10.062c-.088 0-.154.042-.179.082l-5.296 8.245c-.025.148.062.235.187.235h10.576c.125 0 .212-.087.212-.165 0-.027-.006-.042-.008-.044l-5.306-8.26c-.032-.051-.098-.093-.186-.093z"/><path fill="#f44236" d="m17 19.719c-.414 0-.75-.336-.75-.75v-1.917c0-.414.336-.75.75-.75s.75.336.75.75v1.917c0 .414-.336.75-.75.75z"/><ellipse cx="17" cy="21.365" rx=".75" ry=".719"/><path fill="#f44236" d="m.75 24c-.414 0-.75-.336-.75-.75v-7.5c0-.414.336-.75.75-.75s.75.336.75.75v7.5c0 .414-.336.75-.75.75z"/><path fill="#f44236" d="m6.75 24c-.414 0-.75-.336-.75-.75v-11.5c0-.414.336-.75.75-.75s.75.336.75.75v11.5c0 .414-.336.75-.75.75z"/><path fill="#f44236" d="m12.75 13.74c-.414 0-.75-.336-.75-.75v-7.24c0-.414.336-.75.75-.75s.75.336.75.75v7.24c0 .414-.336.75-.75.75z"/><path fill="#f44236" d="m18.75 11.11c-.414 0-.75-.336-.75-.75v-9.61c0-.414.336-.75.75-.75s.75.336.75.75v9.61c0 .414-.336.75-.75.75z"/></svg>',i.a=function(te,W,K){function re(n){return!(n==null||typeof n!="string"||p.includes(n)==0)}if(k.a.is_supported()){var f=Object(u.c)(K),ae;f.filesToUpload=[],f.f2rec={},f.availableFiles=[];var ce=new Map,he=new Map,ye=new Map,R=[],O=10485760,j="",J="";f.showFsUi=!1,f.internetDetectionUrl=k.a.internetDetectionUrl,f.remoteStreams=Object(l.a)(),f.remotePendingStreams=Object(l.a)(),f.numATSubscribersAdded=0,f.localStreams=Object(l.a)(),f.roomID="",f.talkerCount=0,f.userAudioTalkerCount=0,f.userVideoTalkerCount=0,f.state=0,f.allStreamsActive=!1,f.streamsHealthTimerId=0,f.Connection=W===void 0?t.a:W,f.receiveVideoQuality=new Map,f.receiveVideoQuality.set("talker","Auto"),f.receiveVideoQuality.set("canvas","HD"),f.mediaStatsMode="disable",f.liveTranscription=!1,f.liveRoomTranscription=!1,f.transcriptionLanguage="";var q=Object(a.a)(te);f.socket=q,f.userList=new Map,f.dialOutList=new Map,f.cControlReq=void 0,f.cCrequest=[],f.awaitedParticipants=new Map,f.floorGranted=!1,f.floorInvited=!1,f.floorAccepted=!1,f.roomJson=void 0,f.clientId=void 0,f.mode=void 0,f.activeTalker=!1,f.shareStatus=!1,f.share_override_room=!1,f.shareOverRide=!1,f.shareOverRideCallback=void 0,f.isOverRidingShare=!1,f.ScreenSharelocalStream=null,f.isSharingClient=!1,f.forcedStopSharing=!1,f.isCanvasSharing=!1,f.isCanvasSharingClient=!1,f.canvasStatus=!1,f.activeTalkerList=new Map,f.audioOnlyMode=!1,f.roomMuted=!1;var se=JSON.parse(g.a.decodeBase64(K.token));f.reconnectionState=!1,f.reconnectAttempt=0,f.connectAttempt=0;var _e=3;f.isStreamingClient=!1,f.sendRecvBitrateStats=!1,f.speakerInfo={id:K&&K.speakerId?K.speakerId:void 0,volume:1};var Se="none",ve=0,we=!1,xe=!1,Me=!1,de=!1,X=!1,w;K.hasOwnProperty("reconnectInfo")?(o.a.info("reconnect parameter",K.reconnectInfo),f.reconnectionAllowed=K.reconnectInfo.allow_reconnect,f.reconnectionTimeOutInterval=K.reconnectInfo.timeout_interval,_e=K.reconnectInfo.number_of_attempts):(f.reconnectionAllowed=!0,f.reconnectionTimeOutInterval=45e3,_e=3),k.a.alertNotifyInfo={mode:"image"},K.alertNotifyInfo&&typeof K.alertNotifyInfo=="object"&&K.alertNotifyInfo.mode&&(K.alertNotifyInfo.mode=="text"||K.alertNotifyInfo.mode=="image"||K.alertNotifyInfo.mode=="none")&&(k.a.alertNotifyInfo=Object.assign(k.a.alertNotifyInfo,K.alertNotifyInfo));var M=!1,N=-1;f.localStreamsBeforeReconnect=Object(l.a)(),f.oldSpecInfo=void 0,f.mediaConfiguration=se.roomMeta.settings.media_configuration?se.roomMeta.settings.media_configuration:"Default",f.maxVideoLayers=0,f.defaultBandwidth=new Map,f.defaultBandwidth.set(1,2e5),f.defaultBandwidth.set(2,3e5),f.defaultBandwidth.set(3,4e5),f.defaultBandwidth.set(4,6e5),f.defaultBandwidth.set(5,8e5),f.defaultBandwidth.set(6,1e6),f.defaultBandwidth.set(7,12e5),f.videoMutedUsers={};var F,Y,Q=f.remoteStreams,ee=f.remotePendingStreams,Z=f.numATSubscribersAdded,ie=f.localStreams,oe={},le={};f.hardMuteRoom=!1;var Ce=Object(r.a)(null,null);f.breakOutRoom=Ce,f.me={},f.roomSettings={},f.mute=!1,f.muteInfo={room:{audio:!1,video:!1},stream:{hard:{audio:!1,video:!1}}},f.muteAudioOnJoin=!1,f.muteVideoOnJoin=!1,f.cCapprovedHands=[],f.externalIp="",f.subscribeSessionStats=!1,f.canvasOptions={width:1280,height:720,domHandle:""},f.inputContext=null,f.canvasVideoPlayer="";var fe=k.a.video_resolution_range[se.roomMeta.settings.quality],be=document.createElement("style");be.innerHTML=`.stats-container{ 
                         position: absolute;
                         z-index: 5;
                         padding: 2px;
                         top: 2px;
                         right: 2px;
                         font-size: 12px;
                         width: 22px;
                         height: 22px;
                         text-align: center;
                         background: white;
                         border-radius: 10px;
                     }
                     .stats-button{
                         cursor:pointer;
                         width: 15px;
                         height: 15px;
                         padding: 0 0 0 2px;
                     }
                     .stats-detail{ height: 100%;}
                     .stats-overlay-inner{
                         display: flex;
                         flex-direction: row;
                         justify-content: space-between;
                         padding: 8px 2px 6px 10px;
                     }
                     .stats-right-partition, .stats-left-partition {}
                     .stats-left-partition {margin-right: 10px;}
                     .stats-button svg {width: 12px;height: 12px;}
                         `;var Re=document.createElement("style");Re.innerHTML=`.bw-notification{
                                 position: absolute;
                                 //z-index: 5;
                                 top:1%;
                                 left:50%;
                                 //bottom: 5px;
                                 //right: 5px;
                                 //margin-top:-50px;
                                 //margin-left:-100px;
                                 padding: 5px;
                                 color: #fff;
                                 //background: rgba(50,50,50,0.5);
                                 }`;var C=!1,V=!1,G=0,ne=function(n){o.a.info(" in Remove stream : stream.stream : "+n.stream),n.stream&&(n.hide(),n.stop(),n.close(),delete n.stream),n.pc&&(n.pc.close(),delete n.pc)},ge=function(n,m){ot(n,"add",function(b){})},Te=function(n,m){o.a.info("Stream subscribed"),m.stream&&(n.initRemoteStream(m.stream),f.remoteStreams.remove(n.getID()),f.remoteStreams.add(n.getID(),n)),m=Object(u.f)({type:"stream-subscribed",stream:n}),f.dispatchEvent(m),n.room=f,n.screen!==!0&&n.canvas!==!0||n.updateVideo(n.getID())},ke=function(n,m,b){var T={callback:function(A){o.a.debug("Sending message",A),q.sendSDP("signaling_message",{streamId:n.getID(),msg:A,browser:n.pc.browser},void 0,function(){})},nop2p:!0,audio:m.audio&&n.ifAudio(),video:m.video&&n.ifVideo(),maxAudioBW:m.maxAudioBW,maxVideoBW:m.maxVideoBW,limitMaxAudioBW:K.maxAudioBW,limitMaxVideoBW:K.maxVideoBW,iceServers:f.iceServers,forceTurn:n.forceTurn};return b||(T.simulcast=m.simulcast),T},Ae=function(){f.state==2&&f.allStreamsActive&&(Q.forEach(function(n,m){f.state==2&&n.state=="connected"&&(m=je(n),m.audio&&m.video||ot(n,"add",function(b){}))}),ie.forEach(function(n,m){f.state==2&&n.state=="connected"&&(m=je(n),m.audio&&m.video||(o.a.debug(" stream state: id "+n.getID()+" health: "+JSON.stringify(m)),n.ifScreen()&&n.ifCanvas()?(m=n.ifScreen()?" stream-screen failed ":" stream-canvas failed",f.dispatchEvent({type:m,stream:n})):(m.audio||n.muteAudio(function(b){n.unmuteAudio(function(T){T.result!==h.a.error_000.result&&f.dispatchEvent({type:"stream-audio failed",stream:n})},!1)},!1),m.video||n.muteVideo(function(b){n.unmuteVideo(function(T){T.result!==h.a.error_000.result&&f.dispatchEvent({type:"stream-video failed",stream:n})},!1)},!1))))}))},je=function(n){var m={audio:!0,video:!0};if(n){var b=function($,ue,Ie){if(n.tracksInfo==null&&(n.tracksInfo={audio:{numSecsMuted:0},video:{numSecsMuted:0}}),ue){var Ne=$.getAudioTracks();$=n.tracksInfo.audio}else Ne=$.getVideoTracks(),$=n.tracksInfo.video;ue="NA",Ne=H.makeIterator(Ne);for(var pe=Ne.next();!pe.done;pe=Ne.next())pe=pe.value,pe.enabled===!0?pe.readyState==="live"?Ie&&pe.muted?3>++$.numSecsMuted?o.a.error("Track ready but muted ,wait timeout id: "+n.getID()+" - "+pe.kind+"num secs muted: "+$.numSecsMuted):(ue="INACTIVE",$.numSecsMuted=0,o.a.error("Track not ready - muted with timeout id: "+n.getID()+" - "+pe.kind+"num secs muted: "+$.numSecsMuted)):(o.a.debug("Track ready  id: "+n.getID()+" - "+pe.kind),$.numSecsMuted&&($.numSecsMuted=0),ue="ACTIVE"):(o.a.error("Track not ready id : "+n.getID()+" - "+pe.kind+" state: "+pe.readyState),$.numSecsMuted=0,ue="INACTIVE"):o.a.debug("Track not ready  and not enabled : id "+n.getID()+" - "+pe.kind);return ue},T=!1,A=!1;if(n.local)n.audioStream&&(m.audio=b(n.audioStream,!0,!n.ifCanvas())),n.videoStream&&(m.video=b(n.videoStream,!1,!n.ifCanvas()));else{if(n.ifScreen()||n.ifCanvas())n.ifScreen()&&f.shareStatus&&!f.isSharingClient&&(T=!0);else{var U=f.activeTalkerList.get(n.getID());if(U)switch(U.mediatype){case"audiovideo":T=A=!0;break;case"video":T=!0;break;case"audio":case"audioOnly":A=!0}}n.stream&&(m.audio=b(n.stream,!0,A)!="INACTIVE",m.video=b(n.stream,!1,T)!="INACTIVE",m.video&&f.isStreamingClient&&n.player&&n.player.video&&(b=n.player.video,b.player_stats&&3e3<b.getVideoPlaybackQuality().creationTime-b.player_stats.creationTime&&!(b.getVideoPlaybackQuality().totalVideoFrames>b.player_stats.totalVideoFrames)&&(console.error(" video player stats stopped : frames prev: "+b.player_stats.totalVideoFrames+" new: "+b.getVideoPlaybackQuality().totalVideoFrames),b={streamId:n.getID(),currTotalFrames:b.getVideoPlaybackQuality().totalVideoFrames,prevTotalFrames:b.player_stats.totalVideoFrames},y.a.error("stream-event",_.a.event_stream_player_failed,{error:b}))))}}return m},We=function(n,m){n.pc=f.Connection.buildPair(ke(n,m,!0)),o.a.info("Create remote connection for subscribe:-"+JSON.stringify(m)),n.pc.onaddstream=Te.bind(null,n),o.a.info("Registering the peer connection timer for the subscriber stream "+n.getID()),setTimeout(je,1e4,n);var b=function(T,A){o.a.debug(" stream state ICE remote id - "+n.getID()+" : "+T+" source: "+A),T==="failed"?(n.reconnect=!1,o.a.error(A+" connection state failed - streamId: "+n.getID()),ge(n),y.a.error("room-event",_.a.event_ice_failed,{error:{}})):(o.a.debug("stream ID",n.getID()),o.a.debug("ice connection state",T),T==="connected"&&(o.a.info("ice connection state connected - streamId : "+n.getID()),y.a.info("room-event",_.a.event_ice_success,{message:"ICE connected successfully"}),n.reconnect&&(n.reconnect=!1,n.reconnectAttempt=0,(T=ye.get(n.getID()))?(T.mediatype!="none"&&(A=JSON.parse(JSON.stringify(T)),A.mediatype="none",n.reloadPlayer(A,Me)),n.reloadPlayer(T,Me)):o.a.info(" stream state ICE remote id - "+n.getID()+" : ICE reconnected "))))};n.pc.oniceconnectionstatechange=function(T){b(T,"ice")},n.pc.onconnectionstatechange=function(T){b(T,"pc")},n.pc.createOffer(!0)},ot=function(n,m,b){if(b=b===void 0?function(){}:b,(f.socket.state==0||f.reconnectionState===!0)&&(o.a.error("checkWaitReconnectStream() room/socket not connected id : "+n.getID()+" sock state: "+f.socket.state+" recon state: "+f.reconnectionState),b(!1)),m=="add")if(n.state!=="connected")o.a.error("checkWaitReconnectStream() invalid state - stream id : "+n.getID()+" state: "+n.state),b(!1);else if(n.reconnectAttempt>=_e)o.a.error("checkWaitReconnectStream() reconnect retries exceed - global reconnect stream id: "+n.getID()),f.state==2&&f.socket.disconnect(),b(!1);else{if(n.reconnect=!0,n.state="wait_for_reconnect",k.a.browser_info.device_type=="mobile"){var T=Object.keys(oe).length||Object.keys(le).length;if(n.local?n.ifCanvas()||n.ifScreen()?n.ifScreen()?oe.screen=n:n.ifCanvas()&&(oe.canvas=n):oe.main=n:le[n.getID().toString()]=n,T){o.a.warning("reconnectStream() queue > 1 waiting id: "+n.getID()+" len loc: "+Object.keys(oe).length+" rem: "+Object.keys(le).length),b(!0);return}}ve||(ve++,f.dispatchEvent(Object(u.e)({type:"network-reconnecting",message:"Connection issues - reconnecting, please wait"}))),Xe(n,function(U){U===!1&&(o.a.error("checkWaitReconnectStream () failed streamId: "+n.getID(),f.state==2?" global reconnect":"room not connected ignoring "),f.state==2&&f.socket.disconnect()),b(U)})}else if(k.a.browser_info.device_type=="mobile"){n.local?n.ifCanvas()||n.ifScreen()?n.ifScreen()?oe.screen&&delete oe.screen:oe.canvas&&delete oe.canvas:oe.main&&delete oe.main:le[n.getID().toString()]&&delete le[n.getID().toString()],m=0;for(T in oe)if(oe[T].state=="wait_for_reconnect"){Xe(oe[T],b),m++;break}if(!m){for(var A in le)if(le[A].state=="wait_for_reconnect"){Xe(le[A],b),m++;break}}m||(ve==1&&f.dispatchEvent(Object(u.e)({type:"network-reconnected"})),b(!0)),ve&&ve--}},Xe=function(n,m){m=m===void 0?function(){}:m,n.state="reconnecting",n.reconnectAttempt++,n.reconnectsTotal+=1;var b=n.userRequestOptions,T="none",A=setTimeout(function(){o.a.info("reconnectStream() fail timeout stream local: "+n.local+" id: "+n.getID()+" cmd: "+T),m(!1)},3e3);n.local?(o.a.info("reconnectStream()  streamId: "+n.getID()+" calling unpublish()"),T="unpublish",f.unpublish(n,function(U,$){o.a.info("reconnectStream()  streamId: "+n.getID()+" unpublish callback calling publish()"),T="publish",f.publish(n,b,function(){o.a.info("reconnectStream()  streamId: "+n.getID()+" publish callback"),T="publish-done",clearTimeout(A),m(!0)})})):(o.a.info("reconnectStream()  streamId: "+n.getID()+" calling unsubscribe()"),T="unsubscribe",f.unsubscribe(n,function(U,$){T="subscribe",o.a.info("reconnectStream()  streamId: "+n.getID()+" unsubscribe callback calling publish()"),f.subscribe(n,b,function(){T="subscribe-done",o.a.info("reconnectStream()  streamId: "+n.getID()+" subscribe callback"),clearTimeout(A),m(!0)})}))};f.reconnectStream=function(n,m){ot(n,"add",m===void 0?function(){}:m)},f.notifyDeviceUpdate=function(){ie.forEach(function(n,m){n.ifScreen()||n.ifCanvas()}),t.a.mediaDeviceUpdate(function(n){n=Object(u.e)({type:"user-media-device-list-change",message:n.added}),f.dispatchEvent(n)})};var Gs=function(n,m){if(n.pc=f.Connection.buildPair(ke(n,m)),n.audioStream)for(var b=H.makeIterator(n.audioStream.getAudioTracks()),T=b.next();!T.done;T=b.next())n.pc.addTrack(T.value);if(T=n.ifCanvas()||n.ifScreen()?n.videoStream:n.inputMediaSource.video[n.inputMediaSource.video.selected])for(b=H.makeIterator(T.getVideoTracks()),T=b.next();!T.done;T=b.next())n.pc.addTrack(T.value);o.a.info("Registering the peer connection timer for the subscriber stream "+n.getID()),setTimeout(je,1e4,n);var A=function(U,$){var ue=n.ifCanvas()?"canvas":n.ifScreen()?"screen":"main";U==="failed"?(n.reconnect=!1,o.a.error(" stream state  local  "+ue+" : "+U+" source: "+$+" reconnect: "+n.reconnect),ge(n)):U==="connected"&&(n.reconnect=!1,n.reconnectAttempt=0,o.a.info(" stream state local  "+ue+" : "+U+" source: "+$)),o.a.info("handleConnectionStateChange state:",U)};n.pc.oniceconnectionstatechange=function(U){A(U,"ice")},n.pc.onconnectionstatechange=function(U){A(U,"pc")},m.createOffer||n.pc.createOffer()},Ei=function(n){var m=Object(c.a)(f.Connection,{streamID:n.id,local:!1,clientId:n.clientId,audio:n.audio,video:n.video,data:n.data,screen:n.screen,attributes:n.attributes});m.room=f,Q.add(n.id,m),n=Object(u.f)({type:"stream-added",stream:m}),y.a.info("room-event",_.a.event_general_success,{message:"socketOnAddStream - stream added"}),f.dispatchEvent(n)},qs=function(n){n=n.id.streamId;var m=Object(c.a)(f.Connection,{streamID:n}),b=s.a.getById("screen_saver_"+n);s.a.getByClass("icon_play",b.parentNode).disabled=!0,b&&b.style.display==="none"?b.style.display="block":b&&b.style.display==="block"&&(b.style.display="none"),n=Object(u.e)({type:"track-removed",streams:[m],message:"tracked removed from stream: "+n}),y.a.info("room-event",_.a.event_general_success,{message:"socketOnRemoveTrack - tracked removed from stream"}),f.dispatchEvent(n)},Ci=function(n){var m=n.name,b=n.role,T=n.permissions,A={name:n.name,permissions:n.permissions,role:n.role,user_ref:n.user_ref,videoMuted:n.videoMuted,audioMuted:n.audioMuted};A.audioEnabled=n.audioEnabled!=null?n.audioEnabled:!0,A.videoEnabled=n.videoEnabled!=null?n.videoEnabled:!0,n.data!=null&&(A.data=n.data),n.role!="audience"&&f.userList.set(n.clientId,A),n.role=="audience"&&(f.audienceCount=n.audienceCount?n.audienceCount:0);var U=A.numActiveATSubs?A.numActiveATSubs:f.userList.size;if(U>Z&&ee.size()){var $=Z+1,ue=ee.get($);ue?(ee.remove($),Q.add($,ue),Z=$,Li(ue,ue.userRequestOptions,function(){})):o.a.error("susbcribe failed user connected stream not found streams id: "+(Z+1)+" numActiveATSubs: "+U+" First: "+ee.get($)+" second: "+ee.get($.toString()))}f.awaitedParticipants.get(n.clientId)&&f.awaitedParticipants.delete(n.clientId),o.a.info("userConnected() user name: "+m),y.a.info("room-event",_.a.event_room_user_connect_success,{message:"userConnect - user connected"}),f.dispatchEvent(Object(u.g)({type:"user-connected",name:m,clientId:n.clientId,role:b,permission:T,user:A}))},Js=function(n){var m=f.userList.get(n.clientId);m!=null?n.key=="media-modes"?n.info!=null&&n.info.publish!=null?(m.audioEnabled!=n.info.publish.audio&&(m.audioEnabled=n.info.publish.audio,f.dispatchEvent(Object(u.g)({type:m.audioEnabled?"user-audio-enabled":"user-audio-disabled",clientId:n.clientId}))),m.videoEnabled!=n.info.publish.video&&(m.videoEnabled=n.info.publish.video,f.dispatchEvent(Object(u.g)({type:m.videoEnabled?"user-video-enabled":"user-video-disabled",clientId:n.clientId})))):o.a.error("userUpdate() failed - filed missing for media-modes : "+JSON.stringify(n)):o.a.error("userUpdate() failed - invalid key : "+JSON.stringify(n)):o.a.error("userUpdate() failed - user not found : "+JSON.stringify(n))},Ti=function(n){var m=n.name,b=n.role,T=n.permissions,A=n.clientId;b!="audience"&&f.userList.delete(n.clientId),n.role=="audience"&&f.audienceCount&&0<f.audienceCount&&f.audienceCount--,f.isStreamingClient===!0&&f.userList.size===0&&(o.a.info("S.T. Client :true  and all users have disconnected"),Fi("streaming-client-disconnect")),f.mode==="lecture"&&f.me.role==="moderator"&&Rn(A),n=Object(u.g)({type:"user-disconnected",name:m,clientId:A,role:b,permission:T}),y.a.info("room-event",_.a.event_room_user_disconnect_success,{message:"userDisConnect - user disconnected"}),f.dispatchEvent(n)},ki=function(n){n=Object(u.d)({type:"user-subscribed",name:n.name,role:n.role,user_ref:n.user_ref,socket:n.socket}),y.a.info("room-event",_.a.event_general_success,{message:"userSubcribe - user subscribed"}),f.dispatchEvent(n)},Ii=function(n){n=Object(u.d)({type:"user-subscribed",name:n.name,role:n.role,user_ref:n.user_ref,socket:n.socket}),y.a.info("room-event",_.a.event_general_success,{message:"userUnSubcribe - user unsubscribed"}),f.dispatchEvent(n)},Ri=function(n){var m;if((m=n.peerId?Q.get(n.peerId):ie.get(n.streamId))&&!m.failed&&m.pc)if(m.pc.processSignalingMessage(n.msg,f.mediaConfiguration),n.msg&&typeof n.msg=="object"&&n.msg.type==="ready"){if(m.local)if(xn(m.ifScreen(),m.ifCanvas()),m.ifCanvas())o.a.info("stream state local canvas ready");else if(m.ifScreen()||m.ifCanvas())o.a.info(" stream state local share: ready");else{o.a.info(" stream state local main: ready"),1<f.maxVideoLayers&&(n={0:1e3*k.a.video_bandwidth_range[se.roomMeta.settings.quality][2].max,1:1e3*k.a.video_bandwidth_range[se.roomMeta.settings.quality][1].max,2:1e3*k.a.video_bandwidth_range[se.roomMeta.settings.quality][0].max},o.a.info("updating simulcast bps for quality: "+se.roomMeta.settings.quality+" bitrates: "+JSON.stringify(n)),m.updateSimulcastLayersBitrate(n));var b=!0;n={local:!1,hard:!1,eventInfo:void 0};var T={local:!1,hard:!1,eventInfo:void 0};f.muteInfo.stream.hard.audio&&!f.hardMuteInitiator&&(n.hard|=1),o.a.info("streamId: "+m.getID()+" local cam Publish ready state"),f.videoMuteOnJoin!=null&&(T.local|=f.videoMuteOnJoin.local,T.hard|=f.videoMuteOnJoin.hard,b=!1,delete f.videoMuteOnJoin),f.audioMuteOnJoin!=null&&(n.local|=f.audioMuteOnJoin.local,n.hard|=f.audioMuteOnJoin.hard,b=!1,delete f.audioMuteOnJoin),n.local|=m.config.audioMuted,T.local|=m.config.videoMuted,m.video==0&&(T={local:!1,hard:!1}),m.audio==0&&(n={local:!1,hard:!1}),va(m,n,T,b),m.config.audioMuted&&(m.config.audioMuted=!1),m.config.videoMuted&&(m.config.videoMuted=!1)}else o.a.info(" stream state remote id - "+m.getID()+" : ready");m.onConnectionStateChanged(!0),ot(m,"del")}else f.speakerInfo.id!=null&&m.setSpeaker(f.speakerInfo.id)},$s=function(n){var m=ie.get(n.streamId);m&&!m.failed?m.pc.get(n.peerSocket).processSignalingMessage(n.msg):(m=Q.get(n.streamId),m.pc.processSignalingMessage(n.msg))},xi=function(n){ie.get(n.streamId)},Ys=function(n){ie.get(n.streamId)},Oi=function(n){if(o.a.debug("Received SocketOnSelfBandwidthAlert",JSON.stringify(n)),n.message==="SubscriberBandWidth"){var m=Object(u.e)({type:"room-bandwidth-alert",message:n.bandwidth});f.dispatchEvent(m)}else ie.forEach(function(b,T){n.bandwidth===1?(o.a.info("mute publisher video due to low bandwidth"),y.a.info("room-event",_.a.event_low_bandwidth_update,{message:"socketOnSelfBandwidthAlert - muted publisher video due to low bandwidth"}),b.muteVideo()):n.message==="ShareBandwidth"&&b.screen?b.setVideoParamsRange(n.bandwidth,void 0,void 0,void 0,!0):n.message==="PublisherBandwidth"&&(z=n.bandwidth,b.setVideoParamsRange(n.bandwidth,void 0,void 0,void 0,!0))})},Ks=function(n){n.id==="bw-alert"?Mi(n.msg):n.id==="publisher-bw"||n.id==="share-bw"?Oi(n.msg):(n=Object(u.e)({type:n.id,message:n.msg}),f.dispatchEvent(n))},Mi=function(n){o.a.info("OnbandwidthAlert:",n);for(var m=0;m<n.length;m++){var b=f.remoteStreams.getAll()[n[m].streamId];b==null?o.a.info("Stream not found"):b.setBandwidthAlert(n[m])}},Xs=function(n){if(f.activeTalker)if(f.eventsList&&f.eventsList!==void 0&&"message-received"in f.eventsList){var m=Object(u.e)({type:"message-received",message:n.msg});f.dispatchEvent(m)}else m=Object(u.e)({type:"active-talker-data-in",message:n.msg}),f.dispatchEvent(m);else m=Q.get(n.id),n=Object(u.f)({type:"stream-data-in",msg:n.msg,stream:m}),m.dispatchEvent(n)},In=function(n,m,b,T){switch(T=document.createElement("div"),T.setAttribute("id","fs-notif-id-"+Math.random()),T.setAttribute("class","fs-notification"),T.setAttribute("style","display:block;position:relative;z-index:3;padding:5px 10px;top:50%;right:50%;transform:translateX(50%);background:rgba(0,0,0,0.29);border-radius:5px;color:rgb(255,255,255)"),m.appendChild(T),m=T,b){case"fs-upload-init":b="upload started for file "+n.data[n.data.length-1].name+" of size "+n.data[n.data.length-1].size/1e3+" KB",T=n.message,n=document.createElement("br"),m.appendChild(n),b=document.createTextNode(b),m.appendChild(b),m.appendChild(n);break;case"fs-file-uploaded":b="uploaded 100 % "+n.name+"  of size "+n.size/1e3+" KB",T=n.message,n=document.createElement("br"),m.appendChild(n),b=document.createTextNode(b),m.appendChild(b),m.appendChild(n);break;case"fs-upload-started":b=n.sender+" is sharing file "+n.message.data[n.message.data.length-1].name+"  of size "+n.message.data[n.message.data.length-1].size/1e3+" KB",T=n.message,n=document.createElement("br"),m.appendChild(n),b=document.createTextNode(b),m.appendChild(b),m.appendChild(n);break;case"fs-file-available":T=n.message,n=document.createElement("br"),m.appendChild(n);var A=document.createElement("BUTTON");b=document.createTextNode(T.name),A.setAttribute("style","color:red;font-size:23px"),A.setAttribute("id",R.length-1),A.appendChild(b),m.appendChild(A),A.onclick=function(){f.recvFiles(A.id)},m.appendChild(n);break;default:o.a.info("random data to fantom UI ")}},Qs=function(n,m){switch(o.a.debug("socketOnDataStreamToRoom",n.type),n.type){case"chat":var b="message-received";break;case"data-internal-in":switch(b=n.message.type,n.message.type){case"fs-upload-started":n.message.broadcast=n.broadcast,n.message.sender=n.sender,n.message.senderId=n.senderId,o.a.info(" file is being shared with you fs-upload-started",n.message),f.showFsUi===!0&&document.getElementById(J)!==null&&(In(n,document.getElementById(J),"fs-upload-started"),y.a.info("room-event",_.a.event_file_download_success,{error:{}}));break;case"fs-file-available":n.message.broadcast=n.broadcast,n.message.sender=n.sender,n.message.senderId=n.senderId,R.push(n.message);var T={broadcast:n.broadcast,sender:n.sender,senderId:n.senderId,name:n.message.name,size:n.message.size,speed:n.message.speed,createdAt:n.message.createdAt,dlimit:n.message.dlimit,time:n.message.time,expiresAt:n.message.expiresAt,timeLimit:n.message.timeLimit,index:R.length-1};f.availableFiles.push(T),o.a.info("file is available to download fs-file-available",T),T=Object(u.e)({type:"fs-download-result",message:{messageType:"download-available",result:0,description:"file-available",response:{downloadStatus:"available",jobId:T.index,downloadInfo:T}}}),f.dispatchEvent(T),f.showFsUi===!0&&document.getElementById(J)!==null&&In(n,document.getElementById(J),"fs-file-available");break;case"fs-upload-cancelled":break;default:o.a.info("unknown internal data type from signaling server ",n.type),y.a.error("room-event",_.a.event_file_download_failed,{error:{}})}break;default:b="user-data-received"}f.eventsList&&b in f.eventsList?(n=Object(u.e)({type:b,message:n}),f.dispatchEvent(n),m&&m(h.a.error_000)):m&&m(h.a.error_1169)},Zs=function(n){var m=Q.get(n.id),b=Object(u.f)({type:"stream-attributes-updated",attrs:n.attrs,stream:m});m.updateLocalAttributes(n.attrs),m.dispatchEvent(b)},Ai=function(n){var m=ie.get(n.id);m?ge(m):(m=Q.get(n.id))&&(Q.remove(n.id),ne(m),n=Object(u.f)({type:"stream-removed",stream:m}),y.a.info("room-event",_.a.event_general_success,{message:"socketOnRemoveStream - stream removed"}),f.dispatchEvent(n))},ea=function(){o.a.info("Socket disconnected, lost connection to Signalling Server, room state: "+f.state),f.state!==0&&f.state!==3&&(f.breakOutRoom.disconnectAll(),St(!1,!1))},ta=function(n){if(n.streamId){var m="ICE Connection Failed on "+n.type+" "+n.streamId+" "+f.state;o.a.error(m),y.a.error("room-event",_.a.event_ice_failed,{arg:n}),n=n.type==="publish"?ie.get(n.streamId):Q.get(n.streamId),ge(n,m)}},na=function(n){o.a.error("Cannot connect to client Controller"),y.a.info("room-event",_.a.event_general_success,{message:"socketOnError - Cannot connect to signalling"}),f.dispatchEvent(Object(u.e)({type:"room-error",message:n}))},dr=function(n){o.a.debug("sendDataSocketFromStreamEvent");var m=n.stream;n=n.msg,m.local?q.sendMessage("sendDataStream",{id:m.getID(),msg:n}):(o.a.error("You can not send data through a remote stream"),y.a.error("room-event",_.a.event_general_failed,{message:"sendDataSocketFromStreamEvent - You can not send data through a remote stream"}))},cr=function(n,m,b,T,A,U){n&&m!==void 0&&typeof m=="boolean"&&(m!==!1||b&&Array.isArray(b)&&b.length)&&typeof T=="number"?T>k.a.senduserDataMaximumLimit?(o.a.error("message: content-length must be <= 2048, entered value : "+T+" kB"),U(h.a.error_1196)):f.socket.emitEvent("sendDataStreamToRoom",{msg:n,broadcast:m,clients:b,type:A},U):(o.a.error("message: invalid parameter, msg/broadcast/clients/contentLength undefined or type mistmatch"),U(h.a.error_1155))};f.sendUserData=function(n,m,b,T){T=T===void 0?function(){}:T;var A=100;n["content-length"]&&(A=n["content-length"],delete n["content-length"]),JSON.stringify(n).length/1024>A?(o.a.error("message: large data, failed - larger text-data. Max allowed length is "+A+" kB"),T(h.a.error_1195)):cr(n,m,b,A,"user_data",T)};var Pi=function(n,m,b,T,A){n.type=m,cr(n,b,T,0,"data-internal-in",A===void 0?function(){}:A)};f.sendMessage=function(n,m,b,T){T=T===void 0?function(){}:T;var A=0;typeof n=="string"?A=n.length/1024:typeof n=="object"&&(A=JSON.stringify(n).length/1024),cr(n,m,b,A,"chat",T)};var ra=function(n,m){m=m===void 0?function(){}:m;var b=["grid","talker","presenter"],T=["liveRecording","streaming","screenShare","all"],A=n.service;n=n.layout,m==null||typeof m!="function"?o.a.error("message: invalid value for callback parameter"):f.me.role!=="moderator"?(o.a.warning("User should be a moderator to change layout details."),m(h.a.error_1168)):f.state===0?(o.a.info("Room is disconnected"),m(h.a.error_7079)):n!=null&&typeof n=="string"&&b.includes(n)?A!=null&&typeof A=="string"&&T.includes(A)?(b={},b.layout=n,b.service=A,f.socket.sendParamEvent("sendLayoutData",b,function(U,$){o.a.info("sending sendLayoutData"),U===null?(o.a.error("Error in layout update: ",$),m($)):(o.a.info("Layout updated successfully."),m(U))})):(o.a.error("message: invalid value for service parameter"),m&&m(h.a.error_1193)):(o.a.error("message: invalid value for layout parameter"),m&&m(h.a.error_1192))},ht=function(n){var m=0,b=0,T=0,A=0,U=0,$=0,ue="";return n&&(Object.keys(n).forEach(function(Ie){switch(Ie){case"bitrateCalculated":A=Math.round(n[Ie]/1e3);break;case"framerateCalculated":U=n[Ie];break;case"bandwidth":T=Math.round(n[Ie]/1e3);break;case"packetsLost":$=n[Ie];break;case"frameHeight":m=n[Ie];break;case"frameWidth":b=n[Ie]}}),!k.a.csp_enabled&&(ue+='<div> <strong style="color:black;" > '+b+"X"+m+"p"+U+"@"+A+"Kbps</strong>:</div>",T||$))&&(ue+='<div> <strong style="color:black;" > AvailBw:'+T+"Kbps, loss:"+$+"</strong>:</div>"),k.a.csp_enabled?{resHeight:m,resWidth:b,packetsLost:$,bandwidth:T,frameRate:U,bitrate:A}:{displayString:ue,resHeight:m,resWidth:b,packetsLost:$,bandwidth:T,frameRate:U,bitrate:A}},ia=function(n){var m=[],b={},T={},A={};n.statData.stats.forEach(function(U){var $=U.streamType;if($==="actStat"){var ue={};if(k.a.csp_enabled)for(m[U.subscriberStreamId]==null&&(m[U.subscriberStreamId]={id:U.subscriberStreamId}),ue.video=[],Object.keys(U.total).forEach(function(pe){pe==="bitrateCalculated"&&(pe=Math.round(U.total[pe]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display")&&(ue["total-bitrate-kbps"]=pe)}),$=0;$<U.videoStats.length;$++)ue.video[$]=ht(U.videoStats[$]);else $=document.querySelectorAll("#stats-left-part-"+U.subscriberStreamId),m[U.subscriberStreamId]==null&&(m[U.subscriberStreamId]={id:U.subscriberStreamId}),ue.video=[],$.forEach(function(pe){if(pe!=null){var De="";Object.keys(U.total).forEach(function(Le){Le==="bitrateCalculated"&&(Le=Math.round(U.total[Le]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display"?ue["total-bitrate-kbps"]=Le:(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+="<div> <strong>Tx Total:</strong>:  "+Le+"Kbps </div>"))});for(var me=0;me<U.videoStats.length;me++)ue.video[me]=ht(U.videoStats[me]),(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+=ue.video[me].displayString,pe.innerHTML=`<div id="" class="stats-detail"> 
                                    `+De+`
                                </div>`)}});m[U.subscriberStreamId].publisher=ue}else if($==="selfPcStat"){m[U.subscriberStreamId]==null&&(m[U.subscriberStreamId]={id:U.subscriberStreamId});var Ie={video:[]};if(k.a.csp_enabled)for(parseInt(U.streamId),Object.keys(U.total).forEach(function(pe){pe==="bitrateCalculated"&&(pe=Math.round(U.total[pe]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display")&&(Ie["total-bitrate-kbps"]=pe)}),$=0;$<U.videoStats.length;$++)Ie.video[$]=ht(U.videoStats[$]);else{var Ne=parseInt(U.streamId)+1;document.querySelectorAll("#stats-right-part-"+U.subscriberStreamId).forEach(function(pe){if(pe!=null){var De="";Object.keys(U.total).forEach(function(Le){Le==="bitrateCalculated"&&(Le=Math.round(U.total[Le]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display"?Ie["total-bitrate-kbps"]=Le:(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+="<div> <strong>Rx ID: "+Ne+", Total:</strong>:  "+Le+"Kbps </div>"))}),pe.innerHTML=`<div id="" class="stats-detail"> 
                                        `+De+`
                                    </div>`;for(var me=0;me<U.videoStats.length;me++)Ie.video[me]=ht(U.videoStats[me]),(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+=Ie.video[me].displayString,pe.innerHTML=`<div id="" class="stats-detail"> 
                                `+De+`
                                </div>`)}})}o.a.debug(" subscriberStreamId: "+U.subscriberStreamId+" substat: "+JSON.stringify(Ie)),m[U.subscriberStreamId].subscriber=Ie}else if($==="selfPubStat")if(k.a.csp_enabled)for(Object.keys(U.total).forEach(function(pe){pe==="bitrateCalculated"&&(pe=Math.round(U.total[pe]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display")&&(b["total-bitrate-kbps"]=pe)}),b.video=[],$=0;$<U.videoStats.length;$++)b.video[$]=ht(U.videoStats[$]);else $=document.querySelectorAll("#stats-left-part-"+U.streamId),$.forEach(function(pe){if(pe!=null){var De="";Object.keys(U.total).forEach(function(Le){Le==="bitrateCalculated"&&(Le=Math.round(U.total[Le]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display"?b["total-bitrate-kbps"]=Le:(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+="<div> <strong>Tx Total</strong>: "+Le+"Kbps</div>"))}),b.video=[];for(var me=0;me<U.videoStats.length;me++)b.video[me]=ht(U.videoStats[me]),(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+=b.video[me].displayString,pe.innerHTML=`<div id="" class="stats-detail"> 
                                        `+De+`
                                    </div>`)}});else $==="canvasStat"?k.a.csp_enabled?(Object.keys(U.total).forEach(function(pe){pe==="bitrateCalculated"&&(pe=Math.round(U.total[pe]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display")&&(T["total-bitrate-kbps"]=pe)}),T.video=ht(U.videoStats)):($=document.querySelectorAll("#stats-left-part-"+U.subscriberStreamId),$.forEach(function(pe){if(pe!=null){var De="";Object.keys(U.total).forEach(function(me){me==="bitrateCalculated"&&(me=Math.round(U.total[me]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display"?T["total-bitrate-kbps"]=me:(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+="<div> <strong>Tx Total:</strong>:  "+me+"Kbps </div>"))}),T.video=ht(U.videoStats),(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+=T.video.displayString,pe.innerHTML=`<div id="" class="stats-detail"> 
                                            `+De+`
                                        </div>`)}})):$==="shareStat"&&(k.a.csp_enabled?(Object.keys(U.total).forEach(function(pe){pe==="bitrateCalculated"&&(pe=Math.round(U.total[pe]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display")&&(A["total-bitrate-kbps"]=pe)}),A.video=ht(U.videoStats)):($=document.querySelectorAll("#stats-left-part-"+U.subscriberStreamId),$.forEach(function(pe){if(pe!=null){var De="";Object.keys(U.total).forEach(function(me){me==="bitrateCalculated"&&(me=Math.round(U.total[me]/1e3),f.mediaStatsMode=="notify"||f.mediaStatsMode=="notify-display"?A["total-bitrate-kbps"]=me:(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+="<div> <strong>Tx Total:</strong>:  "+me+"Kbps </div>"))}),A.video=ht(U.videoStats),(f.mediaStatsMode=="display"||f.mediaStatsMode=="notify-display")&&(De+=A.video.displayString,pe.innerHTML=`<div id="" class="stats-detail"> 
                                            `+De+`
                                        </div>`)}})))}),o.a.info("that.mediaStatsMode : "+f.mediaStatsMode+" talkers: "+JSON.stringify(m)+" selfPublisherStat: "+JSON.stringify(b)),f.mediaStatsMode!="notify"&&f.mediaStatsMode!="notify-display"||f.dispatchEvent({type:"media-stats",talkers:m,publisher:b,share:A,canvas:T})},Di=function(n){var m=n.stream;n=n.attrs,m.local?(m.updateLocalAttributes(n),q.sendMessage("updateStreamAttributes",{id:m.getID(),attrs:n}),y.a.info("room-event",_.a.event_general_success,{message:"updateAttributesFromStreamEvent - updateStreamAttributes - success"})):o.a.error("You can not update attributes in a remote stream")},Ee=function(n,m){m.args?n.apply(null,H.arrayFromIterable(m.args)):n()},lr=function(n,m,b){return{state:n,data:m.ifData(),audio:m.ifAudio(),video:m.ifVideo(),screen:m.ifScreen(),canvas:m.ifCanvas(),canvasType:b.canvasType,attributes:m.getAttributes(),metadata:b.metadata,createOffer:b.createOffer,muteStream:b.muteStream,shareMetadata:b.shareMetadata}},ur=function(n,m,b,T){T=T===void 0?function(){}:T,n===null?(o.a.error("Error when publishing the stream",b),y.a.error("room-event",_.a.event_stream_publish_failed,{error:b}),T(void 0,b)):(o.a.info("Stream published"),y.a.info("room-event",_.a.event_stream_publish_success,{error:{}}),m.setID(n),m.on("internal-send-data",dr),m.on("internal-set-attributes",Di),ie.add(n,m),m.room=f,T(n))},oa=function(n,m,b){if(b=b===void 0?function(){}:b,n.url)var T="url",A=n.url;else T="recording",A=n.recording;o.a.info("Checking publish options for",n.getID()),n.checkOptions(m),q.sendSDP("publish",lr(T,n,m),A,function(U,$){ur(U,n,$,b)})},sa=function(n,m,b){b=b===void 0?function(){}:b,q.sendSDP("publish",lr("data",n,m),void 0,function(T,A){ur(T,n,A,b)})},fr=function(n,m,b){if(b=b===void 0?function(){}:b,n.screen!==void 0&&n.screen!=0||n.canvas!==void 0&&n.canvas!=0)n.canvas!==void 0&&n.canvas==1?o.a.info("Publishing Canvas spatiallayers 3 createOffer",m.createOffer):o.a.info("Publishing Share createOffer",m.createOffer);else{var T=m.maxVideoLayers?m.maxVideoLayers:f.maxVideoLayers;1<T&&3>=T&&(m.simulcast={numSpatialLayers:T,spatialLayerBitrates:k.a.video_layer_bitrates}),o.a.info("Publishing Main, createOffer",m.createOffer," Max video layers: "+T)}T=lr("media_engine",n,m),T.minVideoBW=m.minVideoBW,T.maxVideoBW=m.maxVideoBW,T.scheme=m.scheme,o.a.info("publish video: constraints: "+JSON.stringify(T)+" options: "+JSON.stringify(m)),q.sendSDP("publish",T,void 0,function(A){A&&A.result===0&&(ur(A.id,n,void 0,void 0),Gs(n,m),n.clientId=f.clientId,n.maxVideoBwKbpsReqByServer=m.maxVideoBW),b(A)}),F!=null&&clearTimeout(F),o.a.debug("calling mediaConnectionTimer pub streamId: "+n.getID()),F=setTimeout(function(){Bi(n.getID(),!0)},3e4)},aa=function(n,m){n=m&&n.ifVideo();var b=m&&m.width,T=m&&m.height;return m=m&&m.frameRate,b||T||m?{width:b,height:T,frameRate:m}:n},Li=function(n,m,b){b=b===void 0?function(){}:b,m.maxVideoBW=m.maxVideoBW||K.defaultVideoBW,m.maxVideoBW>K.maxVideoBW&&(m.maxVideoBW=K.maxVideoBW),m.audio=m.audio===void 0?!0:m.audio,m.video=m.video===void 0?!0:m.video,m.data=m.data===void 0?!0:m.data,m.canvas=m.canvas===void 0?!0:m.canvas,n.checkOptions(m);var T={streamId:n.getID(),audio:m.audio&&n.ifAudio(),video:aa(n,m.video),data:m.data&&n.ifData(),canvas:m.canvas&&n.ifCanvas(),browser:f.Connection.browserEngineCheck(),createOffer:m.createOffer,metadata:m.metadata,muteStream:m.muteStream,slideShowMode:m.slideShowMode};o.a.debug("SOCKET EVENT subscribe:- "+JSON.stringify(T)),q.sendSDP("subscribe",T,void 0,function(A,U){A===null?(o.a.error("Error subscribing to stream ",U),y.a.error("room-event",_.a.event_stream_subscribe_failed,{error:U}),b(void 0,U)):(o.a.info("Subscriber added"),o.a.info("stream subscription result",A),We(n,m),b(!0))})},da=function(n,m,b){b=b===void 0?function(){}:b,q.sendSDP("subscribe",{streamId:n.getID(),data:m.data,metadata:m.metadata},void 0,function(T,A){T===null?(o.a.error("Error subscribing to stream ",A),y.a.error("room-event",_.a.event_stream_subscribe_failed,{error:A}),b(void 0,A)):(o.a.info("Stream subscribed"),T=Object(u.f)({type:"stream-subscribed",stream:n}),f.dispatchEvent(T),b(!0))})},St=function(n,m){!n&&f.reconnectAttempt<_e?(o.a.info("validateProcessNetworkTimeout() rejoin room:"+m+" retries: "+f.reconnectAttempt),f.reconnectionAllowed=!0,m?(f.dispatchEvent(Object(u.e)({type:"network-reconnecting",message:"Network issues - reconnecting, please wait "})),f.rejoinRoom()):pr()):(o.a.info("force disconnect"),f.reconnectionAllowed=!1,pr(),n={type:"network-reconnect-timeout",error:h.a.error_1165.result,message:h.a.error_1165.error},f.dispatchEvent(Object(u.e)(n)),y.a.error("room-event",_.a.event_network_reconnect_timeout,n))},Ni=function(){if(o.a.info("detect doesConnectionExist"),f.state===0){var n=0,m=new XMLHttpRequest,b=f.internetDetectionUrl!==void 0?f.internetDetectionUrl:k.a.internetDetectionUrl,T=Math.round(1e4*Math.random());m.timeout=15e3,m.open("HEAD",b+"?rand="+T,!0),m.ontimeout=function(A){o.a.info("xhr timeout---------------")},m.addEventListener("readystatechange",function(A){m.readyState===4?200<=m.status&&304>m.status?(n++,o.a.info("internet is back connection exists !"),ji(),n===1&&St(!1,!0)):(o.a.info("internet connection doesn't exist!"),Date.now()-f.reconStartTime>f.reconnectionTimeOutInterval?(ji(),o.a.info("Internet not resumed timeout :",f.reconnectionTimeOutInterval/1e3,"seconds"),St(!0,!1)):St(!1,!1)):o.a.debug("ajax req readystate: ",m.readyState,"status ",m.status,"timer",ae)},!1),m.send()}},ji=function(){ae!==void 0?(o.a.info("stopInternetDetection kill it"),clearInterval(ae)):o.a.info("stopInternetDetection handle is undefined",ae)},pr=function(n){if(o.a.debug("room-disconnected clear all "),f.reconnectionAllowed===!1){o.a.debug("room-disconnected ---- reconnection not allowed---- clear all normal closer"),Q.forEach(function(A,U){ne(A),Q.remove(U),A&&!A.failed&&(A=Object(u.f)({type:"stream-removed",stream:A}),f.dispatchEvent(A))}),Q=Object(l.a)(),ie.forEach(function(A,U){A.ifCanvas()&&f.stopCanvas(function(){}),ne(A),ie.remove(U)}),ie=Object(l.a)();try{o.a.debug("normal socket closure, disconnect socket room state:"+f.state);var m=function(A){o.a.debug("disconnectSocket() room state: "+f.state+" initiator: "+A),f.state!=0&&(f.state=0,f.allStreamsActive=!1,f.streamsHealthTimerId!==0&&(clearInterval(f.streamsHealthTimerId),f.streamsHealthTimerId=0),q.disconnect(),q.state=q.DISCONNECTED,q=void 0),n&&n(h.a.error_000)};if(f.state==2){f.state=3,f.allStreamsActive=!1,f.streamsHealthTimerId!==0&&(clearInterval(f.streamsHealthTimerId),f.streamsHealthTimerId=0);var b=setTimeout(m,1e3,"timer");f.socket.emitEvent(v.a.RoomEvent.drop,{self:!0},function(A){clearTimeout(b),m("disc callback")})}else f.state!=3&&m("direct")}catch{o.a.debug("Socket already disconnected"),n&&(y.a.error("room-event",_.a.event_general_failed,{message:h.a.error_1163}),n(h.a.error_1163))}}else{o.a.debug("in clear all - unexpected disconnection and the case for reconnect"),Q.forEach(function(A,U){A!==void 0&&A.stream!==void 0?A.stream.getTracks().forEach(function($){$.onended=null,$.stop()}):o.a.debug("remote stream or media stream is undefined id: "+U),A.pc&&(A.pc.close(),delete A.pc),Q.remove(U)}),ie.forEach(function(A,U){A.pc&&(A.pc.close(),delete A.pc),Vi(A),A&&A.local&&(o.a.info("stream off for internal send data"),A.off("internal-send-data",dr)),ie.remove(U)}),q.state=q.DISCONNECTED,f.state=0,f.allStreamsActive=!1,f.streamsHealthTimerId!==0&&(clearInterval(f.streamsHealthTimerId),f.streamsHealthTimerId=0),o.a.info("send network disconnected event");var T=Object(u.e)({type:"network-disconnected",error:h.a.error_1163.result,message:h.a.error_1163.error});f.dispatchEvent(T),f.reconStartTime=Date.now(),Ni(),ae=setInterval(Ni,15e3),n&&(y.a.error("room-event",_.a.event_general_failed,{message:h.a.error_1163}),n(h.a.error_1163))}};f.connect=function(n,m){n=n===void 0?{allow_reconnect:!0,number_of_attempts:3,timeout_interval:45e3}:n,m=m===void 0?function(){}:m;var b=JSON.parse(g.a.decodeBase64(K.token));f.reconnectionAllowed=n.allow_reconnect,f.reconnectionTimeOutInterval=n.timeout_interval,_e=n.number_of_attempts,o.a.debug(" connection attempt check :"+f.connectAttempt),7<=f.connectAttempt||f.reconnectAttempt>=_e?St(!0,!1):(f.reconnectionState===!0&&(f.reconnectAttempt++,b.isReconnecting=!0,b.reconnectAttempt=f.reconnectAttempt,b.oldClientIdForReconnect=f.clientId,b.room=f.roomID,b.role=f.me.role,b.name=f.me.name,o.a.info("new token request for the reconnection: ",b)),b.logId&&k.a.setLocalStorageItem("logID",b.logId),f.state=1,f.me.logId=b.logId,f.allStreamsActive=!1,f.streamsHealthTimerId!==0&&(clearInterval(f.streamsHealthTimerId),f.streamsHealthTimerId=0),b.hostType=k.a.browser_info.name,b.hostVersion=k.a.browser_info.version,b.hostDeviceType=k.a.browser_info.device_type,b.userAgent=k.a.user_agent,b.advancedOptions=K.options,b.version=k.a.product.version,K.maxActiveTalkers!=null&&typeof K.maxActiveTalkers=="number"&&(b.maxActiveTalkers=K.maxActiveTalkers),f.connectAttempt++,o.a.info("calling socket connect that.connectAttempt: "+f.connectAttempt),q.connect(b,function(T){o.a.info("socket response: ",T),T.result===0?(f.connectAttempt=0,o.a.info("socket.connect token accepted"),f.externalIp=T.connectedIP,m(h.a.error_000)):(o.a.info("connect error",T),St(!0,!1),f.dispatchEvent(Object(u.e)({type:"room-error",error:T.result,message:T.msg})),f.createEventLog("clientConnFailed",{clientId:"",hostType:k.a.browser_info.name,hostVersion:k.a.browser_info.version,error:T.msg,externalIp:f.externalIp}),m(h.a.error_1161))},function(T){if(o.a.error("Not Connected! Error: "+T),St(!0,!1),typeof T=="object"&&T.result!=null){o.a.error("socket.connect failed with error: "+JSON.stringify(T));var A=T.result}else A=T;A=Object(u.e)({type:"room-error",error:A,message:T}),y.a.error("room-event",_.a.event_general_failed,{message:"clientConnFailed - error"}),f.dispatchEvent(A),f.createEventLog("clientConnFailed",{clientId:"",hostType:k.a.browser_info.name,hostVersion:k.a.browser_info.version,error:T,externalIp:f.externalIp}),m(h.a.error_1161)}))},f.rejoinRoom=function(){oe={},le={},o.a.debug("=========== port of hope--- reconnect"),f.externalIp!=""&&(f.reconnectionState=!0),q===void 0&&f.reconnectionState===!0?(o.a.info("reconnect creating a new socket"),f.state=0,f.allStreamsActive=!1,f.streamsHealthTimerId!==0&&(clearInterval(f.streamsHealthTimerId),f.streamsHealthTimerId=0),o.a.info("reconnect force a new socket"),q=Object(a.a)(void 0),f.socket=q):o.a.debug("previous connection is still there or the reconnection state is false"),f.userList.clear(),f.connect()},f.disconnect=function(n){o.a.debug("that.disconnect() clearing all "),f.reconnectionAllowed=!1,pr(function(m){n==null&&(n={cause:h.a.CC006}),m=Object(u.e)({type:"room-disconnected",message:n}),o.a.debug("that.disconnect() sending room-disconnected event"),f.dispatchEvent(m)})},f.removeTrack=function(n){q.sendSDP("removeTrack",{streamId:n,msg:"track-removed"},void 0,function(){})},f.getWaitingUserList=function(n){f.socket.sendMessage("getAwaitedUser",function(m){if(m.result===0)for(var b in m.awaitedParticipants)f.awaitedParticipants.set(m.awaitedParticipants[b].clientId,{clientId:m.awaitedParticipants[b].clientId,name:m.awaitedParticipants[b].name});n&&n(m)})},f.updateLayout=function(n,m){ra(n,m)};var pn=function(n,m){o.a.info("event: "+n+":"+m.clientId+"::::"+m.name),f.cCrequest.push({clientId:m.clientId,name:m.name,type:"raised"}),n=Object(u.e)({type:n,users:m}),f.dispatchEvent(n)},Rn=function(n){for(var m=0;m<f.cCapprovedHands.length;m++)if(f.cCapprovedHands[m].clientId==n){f.cCapprovedHands.splice(m,1);break}},mn=function(n,m){switch(n){case"floor-granted":m.clientId===f.clientId?f.floorGranted=!0:f.cCapprovedHands.push({clientId:m.clientId,moderatorId:m.moderatorId});break;case"floor-invited":m.clientId===f.clientId&&(f.floorInvited=!0);break;case"floor-denied":m.clientId===f.clientId&&(f.floorGranted=!1);break;case"floor-cancelled":m.clientId===f.clientId?f.floorInvited=!1:Rn(m.clientId);break;case"floor-released":m.clientId===f.clientId?(f.localStreams.getAll(),ie.forEach(function(b,T){o.a.info(b.getID()+"::::"+T),f.unpublish(b,function(A){A==1?(o.a.info("stream has been un-published"),y.a.info("room-event",_.a.event_stream_unpublish_success,{error:{}})):(o.a.info("error during stream un-publishing"),y.a.error("room-event",_.a.event_stream_unpublish_failed,{stream:b})),f.floorGranted=!1})})):Rn(m.clientId)}n=="floor-released"&&f.dispatchEvent(Object(u.e)({type:"release-floor",users:m})),f.dispatchEvent(Object(u.e)({type:n,users:m}))},ca=function(n){switch(o.a.info(" onFloorManagementEvents: "+JSON.stringify(n)),n.id){case"floorRequested":pn("floor-requested",n);break;case"floorCancelled":pn("floor-cancelled",n);break;case"floorFinished":pn("floor-finished",n);break;case"floorRejected":f.floorInvited=!1,pn("floor-rejected",n);break;case"floorAccepted":pn("floor-accepted",n);break;case"inviteToFloor":mn("floor-invited",n);break;case"floorGranted":mn("floor-granted",n);break;case"floorDenied":mn("floor-denied",n);break;case"floorReleased":mn("floor-released",n);break;case"cancelFloorInvite":mn("floor-invite-cancelled",n)}},la=function(n){o.a.info(n),n=Object(u.e)({type:"hard-mute",users:n}),f.dispatchEvent(n)},ua=function(n,m){Kt(!1,!0,!1,!0,m,!0,{type:"hard-unmute-room",message:n}),f.mute=f.muteInfo.room.audio=!1,f.hardMuteInitiator=!1},fa=function(n,m){Kt(!0,!0,!1,!0,m,!0,{type:"hard-mute-room",message:n}),f.mute=f.muteInfo.room.audio=!0,f.hardMuteInitiator=!1};f.enableKnock=function(n,m){n!==void 0&&typeof n=="boolean"?f.socket.emitEvent("enableKnock",n,function(b){o.a.info("enableKnock response"+JSON.stringify(b)),b.result===0&&n===!1&&f.awaitedParticipants.clear(),m&&m(b)}):m(!1)},f.openFloor=function(n,m){n!==void 0&&typeof n=="boolean"?f.socket.emitEvent("openFloor",n,function(b){o.a.info("openFloor response"+JSON.stringify(b)),b.result===0&&(f.floorOpen=n),m&&m(b)}):m(!1)};var pa=function(n){n=Object(u.e)({type:"room-awaited",message:"waiting for moderator approval"}),f.dispatchEvent(n)},ma=function(n){var m={clientId:n.clientId,name:n.name};n.data&&(m.data=n.data),f.awaitedParticipants.set(n.clientId,m),n=Object(u.e)({type:"user-awaited",message:{user:m}}),f.dispatchEvent(n)};f.approveAwaitedUser=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?f.socket.emitEvent("user-allowed",n,function(b,T){b===null?o.a.error("Error on knock approve request",T):(f.awaitedParticipants.delete(n),m(b,T))}):o.a.error("approveAwaitedUser() invalid param - callback")},f.denyAwaitedUser=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?f.socket.emitEvent("user-denied",n,function(b,T){b===null?o.a.error("Error on knock deny request",T):(f.awaitedParticipants.delete(n),m(b,T))}):o.a.error("denyAwaitedUser() invalid param - callback")};var ha=function(n){o.a.info("onRoomConnected() - reconnection: "+f.reconnectionState);var m=[],b=n.streams||[],T=n.id,A=n.userList,U=n.room;f.me=n.user||{},f.roomSettings=n.room.settings||{},f.mute=f.muteInfo.room.audio=n.room.mute,f.reconnectionState||(f.muteInfo.stream.hard.audio=f.muteInfo.room.audio),f.mediaRecord=n.mediaRecord,f.subscription=n.subscription,f.mode=n.room.settings.mode,f.share_override_room=n.room.settings.screen_share_override||!1,k.a.csp_enabled||(document.head.append(be),document.head.append(Re)),f.mode==="lecture"&&n.user.role==="moderator"&&(0<n.raisedHands.length&&n.raisedHands.forEach(function(me){f.cCrequest.push(me)}),0<n.floorInvites.length&&n.floorInvites.forEach(function(me){f.cCrequest.push(me)}),0<n.approvedHands.length&&n.approvedHands.forEach(function(me){f.cCapprovedHands.push(me)})),f.activeTalker=U.settings.active_talker;for($ in n.awaitedParticipants)f.awaitedParticipants.set(n.awaitedParticipants[$].clientId,{clientId:n.awaitedParticipants[$].clientId,name:n.awaitedParticipants[$].name});if(f.iceServers=n.iceServers,f.state=2,f.mediaConfiguration=n.mediaConfiguration,n.nonTalkerMediaParams&&(f.nonTalkerMediaParams=n.nonTalkerMediaParams),f.videoMutedUsers=n.videoMutedUsers,K.defaultVideoBW=n.defaultVideoBW,K.maxVideoBW=n.maxVideoBW,f.clientId=n.clientId,f.confId=n.room.conf_num,f.maxVideoLayers=n.maxVideoLayers||0,f.maxCanvasRefreshRate=n.maxCanvasRefreshRate||0,f.share=n.room.share,f.locked=n.room.locked||!1,f.waitRoom=n.room.waitRoom||!1,f.knockEnabled=n.room.knockEnabled||!1,f.userAudioTalkerCount=n.numAudioTalkers||0,f.userVideoTalkerCount=n.numVideoTalkers||0,K.minVideoBW=n.minVideoBW,K.maxVideoFps=n.maxVideoFps,f.liveRoomTranscription=n.transcription,n.transcription===!0&&(f.transcriptionLanguage=n.transcriptionLanguage),f.internetDetectionUrl=n.internetDetectionUrl!=null?n.internetDetectionUrl:k.a.internetDetectionUrl,f.floorOpen=n.room.openFloor!==void 0?n.room.openFloor:!0,k.a.setVideoBwQualityMapper(n.videoBitrateQualityMap),y.a.setClientId(n.clientId),n.utilToken&&y.a.setEventLoggerToken(n.utilToken),n.room.fileShareService!==void 0){var $={};$=n.room.fileShareService;var ue={};ue.call_num=n.clientId,ue.room_id=n.id,ue.service_id=n.room.service_id,ue.conf_num=n.room.conf_num,ue.userName=n.user.name||"",O=n.room.fileShareService.maxSize,$.callInfo=ue,Object(S.f)($)}n.isStreamingClient!=null?n.isStreamingClient===!0?(o.a.info("is a streaming client"),f.isStreamingClient=!0):(o.a.debug("NOT A S T Client"),f.isStreamingClient=!1):o.a.info(" server does not support file sharing ",n.room.fileShareService),n.room.hls!=null&&(f.hls=n.room.hls),f.audienceCount=n.audienceCount?n.audienceCount:0,n.room.customRoomData&&(f.customRoomData=n.room.customRoomData),n.room.customSessionData&&(f.customSessionData=n.room.customSessionData),ue=n.initialNumATs?parseInt(n.initialNumATs):1;var Ie=Object.keys(b);o.a.info(" onRoomConnected() num subs streams: "+Ie.length+" activate: "+ue);for(var Ne=0;Ne<Ie.length;Ne+=1){var pe=b[Ie[Ne]];$=Object(c.a)(f.Connection,{streamID:pe.id,local:!1,audio:pe.audio,video:pe.video,data:pe.data,screen:pe.screen,canvas:!(typeof pe.canvas>"u"||pe.canvas===!1),attributes:pe.attributes}),m.push($),$.screen||$.canvas||parseInt(pe.id)<=ue||f.isStreamingClient?Q.add(pe.id,$):ee.add(pe.id,$)}Z=ue,f.roomID=T,f.confID=U.conf_num,o.a.info("Connected to room "+f.roomID);for(var De in A)f.userList.set(A[De].clientId,A[De]);f.getMaxTalkers(function(me){f.talkerCount=me.maxTalkers}),b={conf_num:U.conf_num,name:U.name,owner_ref:U.owner_ref,mode:U.settings.mode,moderators:U.settings.moderators,participants:U.settings.participants,auto_recording:U.settings.auto_recording,canvas:U.settings.canvas,description:U.settings.description,created:U.created,mute:U.mute,quality:U.settings.quality,screen_share:U.share,locked:U.locked,wait_room:U.wait_room,duration:U.remainingDuration,analyzer:U.analyzer,screen_share_override:U.settings.screen_share_override},f.screenResolutionRange=n.room.screenResolutionRange!=null?n.room.screenResolutionRange:k.a.screen_resolution_range[b.quality],f.speakerInfo.id!=null&&Ui(f.speakerInfo.id,function(me){me||(f.speakerInfo.id=void 0),o.a.error("selected speaker id valid : "+me)}),o.a.debug("room-connected event - room Info : "+JSON.stringify(b)),m=Object(u.e)({type:"room-connected",streams:m,users:A,room:b,me:f.me,mediaRecord:f.mediaRecord}),f.dispatchEvent(m),o.a.info("that.externalIp: ",f.externalIp),f.reconnectClientName=n.user.name,f.createEventLog("clientConnSuccess",{clientId:n.clientId,clientName:n.user.name,hostType:k.a.browser_info.name,hostVersion:k.a.browser_info.version,externalIp:f.externalIp})},Bi=function(n,m){var b=0;f.localStreams.forEach(function(T,A){T.state!="connected"&&(b++,o.a.error(" pub stream not connected id: "+A))}),f.remoteStreams.forEach(function(T,A){T.state!="connected"&&o.a.error(" sub stream not connected id: "+A)}),o.a.debug("mediaConnectionTimeout (): streamId: "+n+" disc streams: "+b),b&&St(!1,!0)},Fi=function(n){o.a.info(" onRoomDisconnected() : calling that.disconnect  with msg : "+JSON.stringify(n)),n==null&&(n=h.a.CC002),f.disconnect(n)},Kt=function(n,m,b,T,A,U,$){var ue=!1,Ie=function(pe,De,me,Le){o.a.info("hardMuteMediaDevices callback resp : "+JSON.stringify(De)),De.result===h.a.error_000.result&&Le&&(me?f.dispatchEvent(Object(u.e)(Le)):pe.dispatchEvent(Object(u.f)(Le)),ue=!0)};if(o.a.info("hardMuteMediaDevices muteOn: "+n+" audio: "+m+" video: "+b+" sendsendServerEvent : "+T),f.localStreams.forEach(function(pe,De){m&&pe.ifAudio()?n?(f.muteInfo.stream.hard.audio=!0,pe.muteAudio(function(me){Ie(pe,me,U,$),A(me)},T,0,!1)):(f.muteInfo.stream.hard.audio=!1,pe.unmuteAudio(function(me){Ie(pe,me,U,$),A(me)},T,0,!1)):b&&pe.ifVideo()&&(n?(f.muteInfo.stream.hard.video=!0,pe.muteVideo(function(me){Ie(pe,me,U,$),A(me)},T,0,!1)):(f.muteInfo.stream.hard.video=!1,pe.unmuteVideo(function(me){Ie(pe,me,U,$),A(me)},T,0,!1)))}),!ue&&U&&$){var Ne=Object(u.e)($);f.dispatchEvent(Ne)}A&&(y.a.error("room-event",_.a.event_general_failed,{message:h.a.error_1159.error}),A(h.a.error_1159))},va=function(n,m,b,T){var A=function(U,$){$.result===h.a.error_000.result?o.a.info("mediaDeviceMuteOnJoin() "+U+" audio: "+JSON.stringify(m)+" video: "+JSON.stringify(b)+" success"):o.a.error("mediaDeviceMuteOnJoin() "+U+" audio: "+JSON.stringify(m)+" video: "+JSON.stringify(b)+" failed. result: "+JSON.stringify($))};b.local?n.muteVideo(function(U){A("videoSelfMuteCallback",U)},T,1e3,!0):n.selfMuteVideo&&n.unmuteVideo(function(U){A("videoSelfUnmuteCallback",U)},T,1e3,!0),b.hard?n.muteVideo(function(U){A("videoHardMuteCallback",U)},T,1e3,!1):n.hardVideoMuted&&n.unmuteVideo(function(U){A("videoHardUnmuteCallback",U)},T,1e3,!1),m.local?n.muteAudio(function(U){A("AudioSelfMuteCallback",U)},T,1e3,!0):n.selfMuteAudio&&n.unmuteAudio(function(U){A("AudioSelfUnmuteCallback",U)},T,1e3,!0),m.hard?n.muteAudio(function(U){A("AudioHardMuteCallback",U)},T,1e3,!1):n.hardAudioMuted&&n.unmuteAudio(function(U){A("AudioHardUnmuteCallback",U)},T,1e3,!1)},ga=function(n,m){f.hardMuteInitiator=!1,Kt(!0,!0,!1,!0,m,!0,{type:"hardmute-user-audio",message:n})},ya=function(n,m){f.hardMuteInitiator=!1,Kt(!1,!0,!1,!0,m,!0,{type:"hardunmute-user-audio",message:n})},_a=function(n,m){Kt(!0,!1,!0,!0,m,!0,{type:"hardmute-user-video",message:n})},Sa=function(n,m){Kt(!1,!1,!0,!0,m,!0,{type:"hardunmute-user-video",message:n})},ba=function(n){It(!0,f.canvasStatus);var m=Object(u.e)({type:"share-started",message:{clientId:n.clientId,name:n.name,streamId:n.streamId,layout:n.layout}});f.shareStatus=!0,f.clientId==n.clientId&&(f.isSharingClient=!0),o.a.debug(" share-started event : "+JSON.stringify(m)),f.dispatchEvent(m)},wa=function(n){n.result===0&&n.mediaConfiguration!==f.mediaConfiguration&&(f.mediaConfiguration=n.mediaConfiguration,f.localStreams.forEach(function(m,b){m.resetMediaConfiguration(n.mediaConfiguration)}))},Ea=function(n){o.a.info("Stop sharing requested by client: ",n.clientId),f.forcedStopSharing=!0,console.log("that.forcedStopSharing: ",f.forcedStopSharing),f.isSharingClient&&(o.a.info("stopScreenShare for current client"),f.stopScreenShare(function(m){})),f.isCanvasSharingClient==1&&(o.a.info("stopCanvasShare for current client"),f.stopAnnotation(function(m){}))},Ca=function(n){o.a.info("Update Layout requested by client: ",n.clientId),f.clientId!=n.clientId&&(n=Object(u.e)({type:"layout-updated",message:n}),f.dispatchEvent(n))},Ta=function(n){It(!1,f.canvasStatus);var m={streamType:"share",streamId:n.streamId,negotiatedCodecs:{video:{codec:f.mediaConfiguration==="default"||f.mediaConfiguration==="Default"?"VP8":f.mediaConfiguration},audio:{codec:"OPUS"}},externalIp:f.externalIp};console.log("that.forcedStopSharing: ",f.forcedStopSharing),n=f.forcedStopSharing==0?Object(u.e)({type:"share-stopped",message:{clientId:n.clientId,name:n.name,streamId:n.streamId}}):Object(u.e)({type:"share-stopped",message:{clientId:n.clientId,name:n.name,streamId:n.streamId,stoppedBy:"moderator"}}),f.forcedStopSharing=!1,f.shareStatus=!1,console.log(" share-stopped event : "+JSON.stringify(n)),f.dispatchEvent(n),o.a.info("additionalOptions: ",m),f.createEventLog("clientStreamShareStopped",m),f.isSharingClient=!1,f.isOverRidingShare&&(console.log("onShareStopped start sharing for this client"),m=f.startScreenShare(f.shareOverRideCallback),f.ScreenSharelocalStream=m,m=Object(u.e)({type:"start-new-screen-share",message:{clientId:f.clientId}}),f.dispatchEvent(m),f.isOverRidingShare=!1)},ka=function(n){console.log("onScreenShareOverride"),f.isSharingClient&&(f.stopScreenShare(function(m){console.log("stopScreenShare response: ",m)}),n=Object(u.e)({type:"stop-old-screen-share",message:{clientId:f.clientId}}),f.dispatchEvent(n))},Ia=function(n){f.userList.get(n.clientId).audioMuted=n.user.audioMuted,f.userList.set(n.clientId,n.user),n=Object(u.g)({type:"user-audio-muted",clientId:n.clientId}),f.dispatchEvent(n)},Ra=function(n){f.userList.get(n.clientId).audioMuted=n.user.audioMuted,f.userList.set(n.clientId,n.user),n=Object(u.g)({type:"user-audio-unmuted",clientId:n.clientId}),f.dispatchEvent(n)},xa=function(n){f.userList.get(n.clientId).videoMuted=n.user.videoMuted,f.userList.set(n.clientId,n.user),n=Object(u.g)({type:"user-video-muted",clientId:n.clientId}),f.dispatchEvent(n)},Oa=function(n){f.userList.get(n.clientId).videoMuted=n.user.videoMuted,f.userList.set(n.clientId,n.user),n=Object(u.g)({type:"user-video-unmuted",clientId:n.clientId}),f.dispatchEvent(n)},It=function(n,m){f.localStreams.forEach(function(b){if(!b.ifCanvas()&&!b.ifScreen()&&b.video&&b.local&&1<f.maxVideoLayers){var T=n||m?"ND":se.roomMeta.settings.quality;T={0:1e3*k.a.video_bandwidth_range[T][2].max,1:1e3*k.a.video_bandwidth_range[T][1].max,2:1e3*k.a.video_bandwidth_range[T][0].max},o.a.info("updating main video simulcast bps: "+JSON.stringify(T)),b.updateSimulcastLayersBitrate(T)}})};f.publish=function(n,m,b){if(m=m===void 0?{}:m,b=b===void 0?function(){}:b,typeof b=="function"){var T=m;if(f.subscription&&(!f.subscription.audio_video&&n.video||!f.subscription.audio_only&&!f.subscription.audio_video&&n.audio||!f.subscription.audio_video&&n.canvas||!f.subscription.audio_video&&n.share))o.a.error("Licence error : feature not supported subscription - av: "+f.subscription.audio_video+" audio: "+f.subscription.audio_only+" canvas: "+f.subscription.audio_video+" share: "+f.subscription.audio_video+" req audio: "+n.audio+" video: "+n.video+" share: "+n.share+" canvas: "+n.canvas),y.a.error("room-event",_.a.event_general_failed,{message:h.a.error_1170.error}),b(h.a.error_1170);else{if(n.video&&!n.canvas&&!n.share&&n.videoStream!=null){var A=n.videoSize==null,U=qi(n,!0);if(U.result!==h.a.error_000.result){o.a.error(" Failed : room.publish video size invalid video size req: "+n.videoSize+" default : "+JSON.stringify(fe)),y.a.error("room-event",_.a.event_general_failed,{message:"room.publish video size invalid video size req: "+n.videoSize+" default : "+JSON.stringify(fe)}),b(U);return}!A||n.videoSize===void 0||k.a.browser_info.device_type==="mobile"||n.videoSize[0]==k.a.video_resolution_range.Default.min.wdith&&n.videoSize[1]==k.a.video_resolution_range.Default.min.height&&n.videoSize[2]==k.a.video_resolution_range.Default.min.wdith&&n.videoSize[3]==k.a.video_resolution_range.Default.max.height||n.setVideoQualityParams(n.videoSize[0],n.videoSize[1],n.videoSize[2],n.videoSize[3]),n.maxVideoLayers=f.maxVideoLayers}n.userRequestOptions=JSON.parse(JSON.stringify(m)),!n.audio||n.canvas||n.share||n.audioStream!=null||(n.audio=!1),f.reconnectionState===!1?n.ifScreen()?T.forceTurn=de:n.ifCanvas()?(T.forceTurn=X,w=T.canvasType):(X=de=we=T.forceTurn?T.forceTurn:!1,(T.maxVideoBW||T.minVideoBW||T.maxVideoFps)&&n.setVideoParamsRange(T.maxVideoBW,T.minVideoBW,T.maxVideoFps,void 0,!1),(K.maxVideoBW||K.minVideoBW||K.maxVideoFps)&&n.setVideoParamsRange(K.maxVideoBW,K.minVideoBW,K.maxVideoFps,void 0,!0),o.a.info(" options.maxVideoBW: "+T.maxVideoBW+" spec.maxVideoBW: "+K.maxVideoBW),T.maxVideoBW==null&&(T.maxVideoBW=K.maxVideoBW,T.minVideoBW=K.minVideoBW)):n.ifScreen()?T.forceTurn=de:n.ifCanvas()?(T.forceTurn=X,T.canvasType=w):T.forceTurn=we,T.maxVideoBW=T.maxVideoBW||K.defaultVideoBW,T.maxVideoBW>K.maxVideoBW&&(T.maxVideoBW=K.maxVideoBW),T.minVideoBW===void 0&&(T.minVideoBW=0),T.minVideoBW>K.defaultVideoBW&&(T.minVideoBW=K.defaultVideoBW),T.forceTurn&&(n.forceTurn=T.forceTurn),T.simulcast=T.simulcast||!1,T.muteStream={audio:n.ifCanvas()?!0:n.audioMuted,video:n.videoMuted},f.muteAudioOnJoin=!!T.audioMuted,f.muteVideoOnJoin=!!T.videoMuted,o.a.debug("Publish forceTurn: ( "+T.forceTurn+","+we+" ) reconnect state: "+f.reconnectionState),n&&n.local&&!n.failed?f.waitRoom?(o.a.error("Publish() : failed Moderator not present and  waiting for moderator "),y.a.error("room-event",_.a.event_general_failed,{message:h.a.error_1130.error}),b(h.a.error_1130)):n.ifMedia()?n.ifExternal()?oa(n,T,b):(f.videoMuteOnJoin!=null&&delete f.videoMuteOnJoin,f.audioMuteOnJoin!=null&&delete f.audioMuteOnJoin,!f.reconnectionState&&!n.reconnect||n.ifCanvas()||n.ifScreen()?(o.a.info("Publish stream options : ",T),fr(n,T,b)):(f.audioMuteOnJoin={local:n.selfMuteAudio,hard:n.hardAudioMuted},n.selfMuteVideo||n.hardVideoMuted?(f.videoMuteOnJoin={local:n.selfMuteVideo,hard:n.hardVideoMuted},n.unmuteVideo(function($){$.result==0?(n.muteVideo(function(){},!1,0,!0,!0),o.a.info("Publish stream options after unmute video success")):o.a.error("Publish stream options after unmute video failed :"+JSON.stringify($)),fr(n,T,b)},!1,0,!n.hardVideoMuted)):fr(n,T,b))):n.ifData()&&sa(n,T,b):(o.a.error("Trying to publish invalid stream"),y.a.info("room-event",_.a.event_stream_publish_failed,{stream:n}),b(void 0,"Invalid Stream"),m={streamId:n.getID(),selectedCandidates:{local:"",remote:""},negotiatedCodecs:{video:{codec:f.mediaConfiguration==="default"||f.mediaConfiguration==="Default"?"VP8":f.mediaConfiguration},audio:{codec:"OPUS"}},selectedCam:n.video.deviceId,selectedMic:n.audio.deviceId,error:"Invalid stream",externalIp:f.externalIp},f.createEventLog("clientStreamPublishFailed",m))}}else o.a.error("publish() invalid param - callback")};var Ma=function(n){n=Object(u.e)({type:"room-record-on",message:{moderatorId:n.moderatorId}}),f.dispatchEvent(n)},Aa=function(n){n=Object(u.e)({type:"room-record-off",message:{moderatorId:n.moderatorId}}),f.dispatchEvent(n)},Pa=function(n){n=Object(u.e)({type:"room-live-recording-on",message:{message:"live recording is running"}}),f.dispatchEvent(n)},Da=function(n){n=Object(u.e)({type:"room-live-recording-off",message:{message:""}}),f.dispatchEvent(n)},La=function(n){n=Object(u.e)({type:"room-live-recording-failed",message:{error:n.error}}),f.dispatchEvent(n)},Na=function(n){n=Object(u.e)({type:"change-layout",message:{layout:n.layout}}),f.dispatchEvent(n)},ja=function(n){f.liveRoomTranscription=!0,f.transcriptionLanguage=n.language,n=Object(u.e)({type:"room-transcription-on",message:{language:n.language}}),f.dispatchEvent(n)},Ba=function(n){f.liveRoomTranscription=!1,f.liveTranscription===!1&&(f.transcriptionLanguage=""),n=Object(u.e)({type:"room-transcription-off",message:{}}),f.dispatchEvent(n)},Fa=function(n){f.liveTranscription=!0,f.transcriptionLanguage=n.language,n=Object(u.e)({type:"self-transcription-on",message:{language:n.language}}),f.dispatchEvent(n)},Va=function(n){f.liveTranscription=!1,f.liveRoomTranscription===!1&&(f.transcriptionLanguage=""),n=Object(u.e)({type:"self-transcription-off",message:{}}),f.dispatchEvent(n)},Ua=function(n){if(t.a.browserEngineCheck()==="safari"&&f.sendRecvBitrateStats===!1&&Gi(),f.nonTalkerMediaParams&&n.active!=P){if(n.active){if(z==null&&(z=K.maxVideoBW),K.minVideoBW!=null)var m={min:K.minVideoBW,max:z},b=K.maxVideoFps}else m={min:f.nonTalkerMediaParams.video.bw,max:f.nonTalkerMediaParams.video.bw},b=f.nonTalkerMediaParams.video.fps;m!=null&&(P=n.active,f.localStreams.forEach(function($,ue){!$.ifVideo()||$.ifScreen()||$.ifCanvas()||(o.a.debug("onActiveList (): setting video param for AT: "+n.active+" kbps: "+m.max+" fps:"+b),$.setVideoParamsRange(m.max,m.min,b,void 0,!0))}))}for(var T=new Map,A=0;A<n.activeList.length;A++)if(f.remoteStreams.getAll()[n.activeList[A].streamId]){n.activeList[A].mediatype==="audio"&&f.videoMutedUsers[n.activeList[A].clientId]?(f.remoteStreams.getAll()[n.activeList[A].streamId].audioOnly=!0,o.a.info("Recieved active talker list, videomuted: "+n.activeList[A].videomuted+" reason: "+n.activeList[A].reason),f.remoteStreams.getAll()[n.activeList[A].streamId].setVideoMutedMessage(n.activeList[A]),delete f.videoMutedUsers[n.activeList[A].clientId]):n.activeList[A].mediatype==="audioOnly"&&(f.remoteStreams.getAll()[n.activeList[A].streamId].audioOnly=!0),f.remoteStreams.getAll()[n.activeList[A].streamId].audioOnly&&n.activeList[A].mediatype==="audiovideo"&&delete f.remoteStreams.getAll()[n.activeList[A].streamId].audioOnly,f.remoteStreams.getAll()[n.activeList[A].streamId].reloadPlayer(n.activeList[A],Me),T.set(n.activeList[A].streamId,n.activeList[A]);var U=ye.get(n.activeList[A].streamId);if(U&&U.mediatype!=n.activeList[A].mediatype){switch(n.activeList[A].mediatype){case"audiovideo":case"video":f.remoteStreams.getAll()[n.activeList[A].streamId].setVideoMutedMessage(n.activeList[A]),f.remoteStreams.getAll()[n.activeList[A].streamId].blankFrameSet&&delete f.remoteStreams.getAll()[n.activeList[A].streamId].blankFrameSet;break;case"audio":case"audioOnly":f.remoteStreams.getAll()[n.activeList[A].streamId].setVideoMutedMessage(n.activeList[A]),f.remoteStreams.getAll()[n.activeList[A].streamId].blankFrameSet||(f.remoteStreams.getAll()[n.activeList[A].streamId].blankFrameSet=!0);break;default:o.a.info("mediatype not handled entry:",JSON.stringify(n.activeList[A]))}ye.set(n.activeList[A].streamId,n.activeList[A])}else U||ye.set(n.activeList[A].streamId,n.activeList[A])}else o.a.error("onNewActiveTalker() remote stream undefined streamId: "+n.activeList[A].streamId);f.activeTalkerList=T,T=Object(u.e)({type:"active-talkers-updated",message:{activeList:n.activeList,active:n.active}}),f.dispatchEvent(T),f.allStreamsActive||(f.allStreamsActive=!0,f.streamsHealthTimerId==0&&(F!=null&&(clearTimeout(F),F=void 0),f.streamsHealthTimerId=setInterval(Ae,1e4)))};f.startRecord=function(n){n=n===void 0?function(){}:n,typeof n=="function"?f.startRecording(void 0,n):o.a.error("startRecord() invalid param - callback")},f.stopRecord=function(n){n=n===void 0?function(){}:n,typeof n=="function"?f.stopRecording(void 0,n):o.a.error("stopRecord() invalid param - callback")},f.startStreaming=function(n,m){if(m=m===void 0?function(){}:m,typeof m=="function"&&typeof n=="object"&&n.hasOwnProperty("rtmpDetails")){o.a.info("start streaming called");var b=!0;if(f.me.role!=="moderator")b=!1,o.a.info("user is trying to start streaming and he is not a moderator"),y.a.error("room-event",_.a.event_general_failed,{message:"startStreaming - "+h.a.error_7008.desc}),m(h.a.error_7008);else if(n.rtmpDetails===void 0)y.a.error("room-event",_.a.event_general_failed,{message:"startStreaming - "+h.a.error_7009.desc}),m(h.a.error_7009);else if(n.rtmpDetails.rtmpUrl!==void 0&&3<n.rtmpDetails.rtmpUrl.split(",").length)m(h.a.error_7101);else if(/(http|https|rtmp|rtmps):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(n.rtmpDetails.rtmpUrl)){var T={};f.state===0?(T=h.a.error_7103,o.a.info(" room is disconnected"),m(T)):(m&&typeof m=="function"||(m=function(A){o.a.info("SDK defined callback streaming response ",A)}),o.a.info("start streaming called with callback "),b?q.sendMessage("startStreaming",n,function(A,U){A===null?(o.a.error("Error on start streaming",U),U.result!==void 0?m(U):U.status!==void 0&&m({result:U.status.resultCode,error:"streaming error",desc:U.status.error.errorDesc,status:U.status})):m({result:A.status.resultCode,error:"",desc:"",status:A.status},U)}):m(h.a.error_7000))}else o.a.info(" invalid rtmp or page input url"),b=!1,y.a.error("room-event",_.a.event_general_failed,{message:"startStreaming - "+h.a.error_7102.desc}),m(h.a.error_7102)}else o.a.error("startStreaming() invalid param - streamingConfig/callback")},f.stopStreaming=function(n,m){var b;n!=null&&typeof n=="function"?b=n:m!=null&&typeof m=="function"&&(b=m),typeof b=="function"?(o.a.info("stop streaming called"),f.me.role!=="moderator"?(o.a.info("user is trying to stop streaming and he is not a moderator"),b(h.a.error_7044)):(n={options:{confNum:"12345",roomId:"9876"},rtmpDetails:{rtmpUrl:"rtmp://a.rtmp.youtube.com/live2/4rjb-hprf-7wf5-9923"},urlDetails:{url:"https://vc-manu.vcloudx.com:9074/room/?token=",layOut:{}}},m={},f.state===0?(m=h.a.error_7045,o.a.info(" room is disconnected"),b(m)):(b&&typeof b=="function"||(b=function(T){o.a.info("SDK defined callback streaming response ",T)}),o.a.info("stop called with callback "),q.sendMessage("stopStreaming",n,function(T,A){T===null?(o.a.error("Error on stop streaming",A),A.status!==void 0&&b({result:A.status.resultCode,error:"streaming error",desc:A.status.error.errorDesc,status:A.status})):(o.a.info("Stop streaming"),b({result:T.status.resultCode,error:"",desc:"",status:T.status},A))})))):o.a.error("stopStreaming() invalid param - streamingConfig/callback")},f.setStreamingParams=function(n,m){if(o.a.info("set Streaming Params called"),f.me.role!=="moderator")o.a.warning("User should be a moderator user to change Streaming params"),m(h.a.error_7072);else{var b={};f.state===0?(b=h.a.error_7078,o.a.info(" room is disconnected"),m(b)):(m&&typeof m=="function"||(m=function(T){o.a.info("SDK defined callback Streaming params change response ",T)}),o.a.info("Streaming params change called with callback "),q.sendMessage("setStreamingParams",n,function(T,A){T===null?(o.a.error("Error on Streaming param change: ",A),y.a.error("room-event",_.a.event_streaming_param_change_failed,{error:A,message:A.status.error}),m(A)):(o.a.info("Streaming param change Success"),y.a.info("room-event",_.a.event_streaming_param_change_success,{error:{}}),m(T,A))}))}},f.startLiveRecording=function(n,m){o.a.info("start Live Recording called");var b=!0;if(f.me.role!=="moderator")b=!1,o.a.warning("User should be a moderator to start live recording"),m(h.a.error_7201);else{var T={};f.state===0?(T=h.a.error_7203,o.a.info(" room is disconnected"),m(T)):(m&&typeof m=="function"||(m=function(A){o.a.info("SDK defined callback Live recording response ",A)}),o.a.info("start Live Recording called with callback "),b?q.sendMessage("startLiveRecording",n,function(A,U){if(A===null&&(o.a.error("Error on start Live Recording",U),y.a.error("room-event",_.a.event_start_live_recording_failed,{error:U,message:U.message}),U.status!==void 0)){m({result:U.status.resultCode,error:"live recording error",desc:U.status.error.errorDesc});return}A.status.resultCode===7014&&(M=!0),y.a.info("room-event",_.a.event_start_live_recording_success,{error:{}}),o.a.info("Start Live Recording Success"),m({result:A.status.resultCode,error:"",desc:""},U)}):m(h.a.error_7204))}},f.stopLiveRecording=function(n){if(n=n===void 0?function(){}:n,o.a.info("stop Live Recording called"),f.me.role!=="moderator")o.a.warning("User should be a moderator user to start live recording"),n(h.a.error_7036);else{var m={urlDetails:{url:"",layOut:{}}},b={};f.state===0?(b=h.a.error_7037,o.a.info(" room is disconnected"),n(b)):(n&&typeof n=="function"||(n=function(T){o.a.info("SDK defined callback Live Recording response ",T)}),o.a.info("stop Live Recording called with callback "),q.sendMessage("stopLiveRecording",m,function(T,A){T===null?(o.a.error("Error on stop stop live recording",A),y.a.error("room-event",_.a.event_stop_live_recording_failed,{error:A,message:A.message}),A.status!==void 0&&n({result:A.status.resultCode,error:"live recording error",desc:A.status.error.errorDesc})):(T.status.resultCode===7034&&(M=!1,T.status.resultCode=0),o.a.info("Stop Live Recording Success"),y.a.info("room-event",_.a.event_stop_live_recording_success,{error:{}}),n({result:T.status.resultCode,error:"",desc:""},A))}))}},f.setLiveRecordingParams=function(n,m){if(o.a.info("set Live Recording Params called"),f.me.role!=="moderator")o.a.warning("User should be a moderator user to change live recording params"),h.a.error_7071.desc="Only moderator can change live recording params",m(h.a.error_7071);else{var b={};f.state===0?(b=h.a.error_7079,o.a.info(" room is disconnected"),m(b)):(m&&typeof m=="function"||(m=function(T){o.a.info("SDK defined callback Live Recording params change response ",T)}),o.a.info("Live Recording params change called with callback "),q.sendMessage("setLiveRecordingParams",n,function(T,A){T===null?(o.a.error("Error on live recording param change: ",A),y.a.error("room-event",_.a.event_live_recording_param_change_failed,{error:A,message:A.status.error}),m(A)):(o.a.info("Live Recording param change Success"),y.a.info("room-event",_.a.event_live_recording_param_change_success,{error:{}}),m(T,A))}))}},f.invalidateTranscoding=function(n,m){o.a.info("Invalidate Transcoding called");var b={};f.state===0?(b=h.a.error_8000,o.a.info(" room is disconnected"),m(b)):(m&&typeof m=="function"||(m=function(T){o.a.info("SDK defined callback Invalidate Transcoding response ",T)}),o.a.info("Invalidate Transcoding called with callback "),q.sendMessage("invalidateTranscoding",n,function(T,A){T===null?(o.a.error("Error on Invalidate Transcoding",A),m(A)):(o.a.info("Invalidate Transcoding"),m(T,A))}))},f.requestFloor=function(n){n=n===void 0?function(){}:n,typeof n=="function"?bt(f.clientId,"requestFloor",function(m,b){n(m,b),m!==void 0&&(f.cCrequest=f.cCrequest.filter(function(T){return T.clientId!==options}))}):o.a.error("requestFloor() invalid param - callback")},f.cancelFloor=function(n){n=n===void 0?function(){}:n,typeof n=="function"?bt(f.clientId,"cancelFloor",function(m,b){n(m,b),m!==null&&(f.cCrequest=f.cCrequest.filter(function(T){return T.clientId!==options}))}):o.a.error("cancelFloor() invalid param - callback")},f.finishFloor=function(n){n=n===void 0?function(){}:n,typeof n=="function"?bt(f.clientId,"finishFloor",function(m,b){ie.forEach(function(T,A){o.a.info("finishFloor: unpulish "+T.getID()+"::::"+A),f.unpublish(T,function(U){})}),f.floorGranted=!1,n(m,b)}):o.a.error("finishFloor() invalid param - callback")},f.grantFloor=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?bt(n,"grantFloor",function(b,T){b!==null&&(f.cCrequest=f.cCrequest.filter(function(A){return A.clientId!==n}),f.cCapprovedHands.push({clientId:n,moderatorId:f.clientId})),m(b,T)}):o.a.error("grantFloor() invalid param - callback")},f.denyFloor=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?bt(n,"denyFloor",function(b,T){m(b,T),b!==null&&(f.cCrequest=f.cCrequest.filter(function(A){return A.clientId!==n}))}):o.a.error("denyFloor() invalid param - callback")},f.relaseFloor=function(n,m){f.releaseFloor(n,m===void 0?function(){}:m)},f.releaseFloor=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?bt(n,"releaseFloor",function(b,T){b!==null&&(f.cCrequest=f.cCrequest.filter(function(A){return A.clientId!==n}),Rn(n)),m(b,T)}):o.a.error("releaseFloor() invalid param - callback")},f.inviteToFloor=function(n,m){m=m===void 0?function(){}:m;var b={clientId:n};f.socket.sendMessage("inviteToFloor",b,function(T){T.result===0&&f.cCrequest.push({clientId:b.clientId,name:f.userList.get(n).name,type:"requested"}),m(T)})},f.acceptInviteFloorRequest=function(n){n=n===void 0?function(){}:n,bt(f.clientId,"acceptFloor",function(m,b){n(m,b),m!==void 0&&(f.cCrequest=f.cCrequest.filter(function(T){return T.clientId!==options}))})},f.rejectInviteFloor=function(n){n=n===void 0?function(){}:n,bt(f.clientId,"rejectFloor",function(m,b){f.floorInvited=!1,n(m,b),m!==void 0&&(f.cCrequest=f.cCrequest.filter(function(T){return T.clientId!==options}))})},f.cancelFloorInvite=function(n,m){m=m===void 0?function(){}:m,bt(n,"cancelFloorInvite",function(b,T){m(b,T),b!==void 0&&(f.cCrequest=f.cCrequest.filter(function(A){return A.clientId!==options}))})},f.chairControlMuteAll=function(n){n=n===void 0?function(){}:n,f.socket.sendEvent("room-muted",function(m,b){m===null?(o.a.error("Error on floor request",b),n(void 0,b)):n(m)})},f.chairControlUnMuteAll=function(n){n=n===void 0?function(){}:n,f.socket.sendEvent("room-unmuted",function(m,b){m===null?(o.a.error("Error on floor request",b),n(void 0,b)):n(m)})},f.muteOne=function(n,m){m=m===void 0?function(){}:m,f.socket.sendParamEvent("muteUser",n,function(b,T){b===null?(o.a.error("Error on floor request",T),m(void 0,T)):m(b)})},f.unMuteOne=function(n,m){m=m===void 0?function(){}:m,f.socket.sendParamEvent("unMuteUser",n,function(b,T){b===null?(o.a.error("Error on floor request",T),m(void 0,T)):m(b)})},f.muteRoom=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?n===void 0||n.audio===void 0&&n.video===void 0?m(h.a.error_1155):n.video===!1&&n.audio===!1?(o.a.error("at least one of the constraints should be false"),m(h.a.error_1155)):(ie.forEach(function(b,T){b.screen||b.canvas||(n.audio===!0&&b.ifAudio()&&!b.selfMuteAudio&&b.muteAudio(function(A){o.a.info("Mute Audio for the call")},!0,0,!1,!0),b.ifVideo()&&n.video===!0&&!b.selfMuteVideo&&b.muteVideo(function(A){o.a.info("Mute Video for the call")},!0,0,!1,!1,!0))}),f.socket.sendMessage("muteRoom",n,function(b,T){b===null?(o.a.error("Error on mute room request",T),y.a.error("room-event",_.a.event_room_mute_failed,{message:"mute room request failed"}),m(void 0,T)):(f.roomMuted=!0,y.a.info("room-event",_.a.event_room_mute_success,{message:"mute room request succeeded"}),m(b))})):o.a.error("muteRoom() invalid param - callback")},f.unMuteRoom=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?n===void 0||n.audio===void 0&&n.video===void 0?m(h.a.error_1155):n.video!=0&&n.audio!=0?(o.a.error("at least one of the constraints should be false"),m(h.a.error_1155)):(ie.forEach(function(b,T){b.screen||b.canvas||(o.a.info("SelfMuteAudio: "+b.selfMuteAudio+" hardMutedAudio: "+b.hardAudioMuted),n.audio||!b.ifAudio()||b.hardAudioMuted||b.unmuteAudio(function(A){o.a.info("UnMute Audio for the call")},!0,0,!1,!0),o.a.info("SelfMuteVideo: "+b.selfMuteVideo+" hardMutedVideo: "+b.hardVideoMuted),n.video||!b.ifVideo()||b.hardVideoMuted||b.unmuteVideo(function(A){o.a.info("UnMute Video for the call")},!0,0,!1,!0))}),f.socket.sendMessage("unMuteRoom",n,function(b,T){b===null?(o.a.error("Error on mute room request",T),y.a.error("room-event",_.a.event_room_unmute_failed,{message:"unmute room request failed"}),m(void 0,T)):(f.roomMuted=!1,y.a.info("room-event",_.a.event_room_unmute_success,{message:"unmute room request succeeded"}),m(b))})):o.a.error("unMuteRoom() invalid param - callback")},f.pauseRoom=function(n){n=n===void 0?function(){}:n,typeof n=="function"?(o.a.info("Pausing the room"),f.muteRoom({audio:!0,video:!0},function(m){n(m)})):o.a.error("pauseRoom() invalid param - callback")},f.resumeRoom=function(n){n=n===void 0?function(){}:n,typeof n=="function"?(o.a.info("Resuming the room"),f.unMuteRoom({audio:!1,video:!1},function(m){n(m)})):o.a.error("resumeRoom() invalid param - callback")},f.switchRoomMode=function(n,m){m=m===void 0?function(){}:m,f.socket.sendParamEvent("switchRoomMode",n,function(b,T){b===null?(o.a.error("Error on floor request",T),m(void 0,T)):m(b)})},f.startRecording=function(n,m){m=m===void 0?function(){}:m,o.a.debug("Trying to start recording...");var b,T=!(f.subscription&&f.subscription.recording===!1);T&&(n&&n.local===!1||!n)?(n&&(b=n.getID()),q.sendMessage("startRecord",{to:b},function(A,U){A===null?(o.a.error("Error on start recording",U),y.a.error("room-event",_.a.event_start_recording_failed,{error:U,message:U.msg}),m(U),f.createEventLog("roomRecordingFailed",{error:U,externalIp:f.externalIp})):(o.a.info("Started recording"),y.a.info("room-event",_.a.event_start_recording_success,{error:{}}),A.result===0&&(M=!0),m(A,U),f.createEventLog("roomRecordingSuccess",{externalIp:f.externalIp}))})):T||(y.a.info("room-event",_.a.event_start_recording_failed,{message:h.a.error_1170.desc}),m(h.a.error_1170))},f.onMediaDeviceStateChanged=function(n,m,b){if(b=b===void 0?function(){}:b,m.state=="active")if(m.type=="cam")if(n.state!="connected"||n.negotiatedMedia.video)b(h.a.error_000);else{if(n.userRequestOptions.video)var T=n.userRequestOptions.video;za(T,n,b)}else b(h.a.error_000);else m.state=="inactive"&&(o.a.error("mediaDeviceError() errr: "+JSON.stringify(m.error)+"reconencting"),f.socket.disconnect(),b(h.a.error_000))},f.manageLiveTranscription=function(){console.log("Calling startLiveTranscription",f.liveTranscription),f.liveTranscription===!0&&0<f.reconnectAttempt&&f.reconnectionAllowed===!0&&f.socket.sendMessage("startLiveTranscription",{language:f.transcriptionLanguage},function(n){f.liveTranscription=!!(n&&n.result===0)})},f.manageRecordingStatus=function(n){o.a.info("reconnected manage recording status ",n),f.me.role==="moderator"&&M==1&&0<f.reconnectAttempt&&f.reconnectionAllowed===!0?(o.a.info("room recording was enabled before reconnect"),f.startRecord(function(m,b){m!==null?(o.a.info("reconnected manage recording success "),y.a.info("room-event",_.a.event_start_recording_success,{message:"reconnected manage recording success"})):(o.a.info("Failed to restart recording after reconnection."),y.a.error("room-event",_.a.event_start_recording_failed,{message:"Failed to restart recording after reconnection."}))})):(o.a.info("reenbling recording for this role is not allowed ",f.me.role),y.a.info("room-event",_.a.event_start_recording_failed,{message:"reenbling recording for role "+f.me.role+" is not allowed"}))},f.stopRecording=function(n,m){m=m===void 0?function(){}:m,f.subscription&&f.subscription.recording===!1?(y.a.info("room-event",_.a.event_stop_recording_failed,{message:h.a.error_1170.desc}),m(h.a.error_1170)):q.sendMessage("stopRecord",{id:n},function(b,T){b===null?(o.a.error("Error on stop recording",T),y.a.error("room-event",_.a.event_stop_recording_failed,{error:T}),m(T)):(M=!1,o.a.info("Stop recording",n),y.a.info("room-event",_.a.event_stop_recording_success,{error:{}}),m(b,T),f.createEventLog("roomRecordingStopped",{externalIp:f.externalIp}))})};var xn=function(n,m){var b=[];f.localStreamsBeforeReconnect.forEach(function(A,U){(A.canvas&&m||A.screen&&n||!(A.canvas||m||A.screen||n))&&b.push(A)});for(var T=0;T<b.length;T++)f.localStreamsBeforeReconnect.remove(b[T].getID())},Vi=function(n){return o.a.debug("Inside storeLocalStreamForReconnect() reconnect: "+n.reconnect+" that.reconnectionState: "+f.reconnectionState+" that.reconnectionAllowed: "+f.reconnectionAllowed+" streamId: "+n.getID()+" canvas: "+n.canvas+" screen: "+n.screen),n.reconnect||f.reconnectionState||f.reconnectionAllowed?(xn(n.screen,n.canvas),f.localStreamsBeforeReconnect.add(n.getID(),n),!0):!1};f.unpublish=function(n,m){if(m=m===void 0?function(){}:m,typeof m=="function")if(n&&n.local){q.sendMessage("unpublish",n.getID(),function(T,A){T===null?(o.a.error("Error unpublishing stream",A),y.a.error("room-event",_.a.event_stream_unpublish_failed,{error:A}),m(void 0,A)):(delete n.failed,y.a.error("room-event",_.a.event_stream_unpublish_success,{error:{}}),o.a.info("Stream unpublished"),m(!0))}),n.room=void 0;var b=ie.get(n.getID());b!==void 0&&(b.hardVideoMuted&&b.unmuteVideo(function(T){o.a.info("videoHardUnmuteCallback: "+JSON.stringify(T))},!1,0,!1),b.hardAudioMuted&&b.unmuteAudio(function(T){o.a.info("audioHardUnmuteCallback: "+JSON.stringify(T))},!1,0,!1),b.pc.close(),b.pc=null,b.reconnect&&Vi(b)),ie.remove(n.getID()),n.setID(0),n.off("internal-send-data",dr),n.off("internal-set-attributes",Di)}else y.a.info("room-event",_.a.event_stream_unpublish_failed,{error:"Cannot unpublish, stream does not exist or is not local"}),o.a.error("Cannot unpublish, stream does not exist or is not local"),m(void 0,"Cannot unpublish, stream does not exist or is not local");else o.a.error("unpublish() invalid param - callback")},f.sendControlMessage=function(n,m,b){n&&n.getID()&&(m={type:"control",action:b},q.sendSDP("signaling_message",{streamId:n.getID(),msg:m}))},f.subscribe=function(n,m,b){m=m===void 0?{}:m,b=b===void 0?function(){}:b;var T=JSON.parse(JSON.stringify(m));if(o.a.debug("room.subscribe streamId: "+n.getID()+" options: "+JSON.stringify(T)),!n||n.local||n.failed)m="Error on subscribe",n?n.local?(o.a.warning("Cannot subscribe to local stream, you should subscribe to the remote version of your local stream"),m="Local copy of stream",y.a.error("room-event",_.a.event_stream_subscribe_failed,{error:m,stream:n})):n.failed&&(o.a.warning("Cannot subscribe to failed stream."),m="Failed stream",y.a.error("room-event",_.a.event_stream_subscribe_failed,{error:m,stream:n})):(o.a.warning("Cannot subscribe to invalid stream"),m="Invalid or undefined stream",y.a.error("room-event",_.a.event_stream_subscribe_failed,{error:m})),b(void 0,m),b={streamType:n.ifScreen()?"share":"main",streamId:n.getID(),selectedCandidates:{local:"",remote:""},negotiatedCodecs:{video:{codec:f.mediaConfiguration==="default"||f.mediaConfiguration==="Default"?"VP8":f.mediaConfiguration},audio:{codec:"OPUS"}},error:m,externalIp:f.externalIp},f.createEventLog("clientStreamSubscribeFailed",b);else{if(n.ifMedia())n.ifVideo()||n.ifScreen()||(T.video=!1),n.ifAudio()||(T.audio=!1),n.ifCanvas()&&(T.data=!1),n.ifCanvas()||(T.canvas=!1),f.mediaConfiguration!==v.a.constant.H264_CODEC&&k.a.browser_info.name==="safari"&&k.a.browser_info.version<=v.a.constant.SAFARI_VERSION_NOT_SUPPORTING_VP8?(T.video=!1,o.a.debug("Stream for subscribe in room.subscribe:- SAFARI - false")):f.mediaConfiguration!==v.a.constant.H264_CODEC&&k.a.browser_info.name==="safari"&&k.a.browser_info.version>=v.a.constant.SAFARI_VERSION_SUPPORTING_VP8&&(T.video=!0,o.a.debug("Stream publish in Init publish:- SAFARI - true")),o.a.info("Stream for subscribe in room.subscribe:- options:: "+JSON.stringify(T)),T.muteStream={audio:n.ifCanvas()?!0:n.audioMuted!=null?n.audioMuted:!1,video:n.videoMuted},o.a.info("subscribe() streamId: ",n.getID()," options  ",JSON.stringify(T)),f.reconnectionState===!1?(xe=T.forceTurn?T.forceTurn:!1,Me=T.imageOnVideoMute?T.imageOnVideoMute:!1):T.forceTurn=xe,o.a.debug(" Subscribe forceTurn: ( "+T.forceTurn+","+xe+" ) reconnect state: "+f.reconnectionState),n.forceTurn=T.forceTurn,n.userRequestOptions=JSON.parse(JSON.stringify(m)),ee.get(n.getID())?b(h.a.error_000):Li(n,T,b);else if(n.ifData()&&T.data!==!1)da(n,T,b);else{o.a.warning("There's nothing to subscribe to"),b(void 0,"Nothing to subscribe to");return}o.a.debug("Subscribing to: "+n.getID()),y.a.info("room-event",_.a.event_stream_subscribe_success,{message:"Subscribing to: "+n.getID()}),F!=null&&clearTimeout(F),F=setTimeout(function(){Bi(n.getID(),!1)},3e4)}},f.unsubscribe=function(n,m){m=m===void 0?function(){}:m,q!==void 0?n&&!n.local?n.reconnect?(o.a.info(" in that.unsubscribe() remove stream"),ne(n),delete n.failed,m(h.a.error_000)):q.sendMessage("unsubscribe",n.getID(),function(b,T){b===null?m(h.a.error_1167):(ne(n),delete n.failed,y.a.error("room-event",_.a.event_stream_unsubscribe_success,{message:"Unsubscribe from stream - success"}),m(h.a.error_000))},function(){o.a.error("Error calling unsubscribe."),y.a.error("room-event",_.a.event_stream_unsubscribe_failed,{stream:n})}):m(h.a.error_1156):m(h.a.error_1163)},f.hardMute=function(n){n=n===void 0?function(){}:n,typeof n=="function"?Xt("room-muted",!0,!1,!0,void 0,function(m){m.result==0&&(f.hardMuteInitiator=!0),n(m)}):o.a.error("hardMute() invalid param - callback")},f.hardUnmute=function(n){n=n===void 0?function(){}:n,typeof n=="function"?Xt("room-unmuted",!0,!1,!0,void 0,function(m){m.result==0&&(f.hardMuteInitiator=!1),n(m)}):o.a.error("hardUnmute() invalid param - callback")},f.hardMuteUserAudio=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?Xt("hardmute-user-audio",!0,!1,!1,n,m):o.a.error("hardMuteUserAudio() invalid param - callback")},f.hardUnmuteUserAudio=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?Xt("hardunmute-user-audio",!0,!1,!1,n,m):o.a.error("hardUnmuteUserAudio() invalid param - callback")},f.hardMuteUserVideo=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?Xt("hardmute-user-video",!1,!0,!1,n,m):o.a.error("hardMuteUserVideo() invalid param - callback")},f.hardUnmuteUserVideo=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?Xt("hardunmute-user-video",!1,!0,!1,n,m):o.a.error("hardUnmuteUserVideo() invalid param - callback")},f.subscriberVideoMute=function(n,m){f.socket.emitEvent(v.a.RoomEvent.subscriber_video_mute,{streamId:n},function(b){b.result==0&&m(b)})},f.setTalkerCount=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?typeof n<"u"&&typeof n=="number"&&0<=n&&n===parseInt(n)?(N=n,f.socket.emitEvent(v.a.RoomEvent.set_active_talker,{numTalkers:n,numAudioTalkers:3>=n?3:n,numVideoTalkers:f.audioOnlyMode?0:n},function(b){b.result==0&&(f.userAudioTalkerCount=b.numAudioTalkers,f.audioOnlyMode===!1&&(f.userVideoTalkerCount=b.numVideoTalkers)),m(b)})):m(h.a.error_1155):o.a.error("setTalkerCount() invalid param - callback")},f.getTalkerCount=function(n){typeof n=="function"?f.socket.sendEvent(v.a.RoomEvent.get_active_talker,function(m){n(m)}):o.a.error("getTalkerCount() invalid param - callback")},f.getMaxTalkers=function(n){typeof n=="function"?f.socket.sendEvent(v.a.RoomEvent.get_active_max_talker,function(m){n(m)}):o.a.error("getMaxTalkers() invalid param - callback")},f.setAdvancedOptions=function(n,m){m=m===void 0?function(b){}:m,n&&Array.isArray(n)&&n.length&&typeof m=="function"?f.socket.emitEvent(v.a.RoomEvent.set_adavanced_options,n,m):m(h.a.error_1155)},f.getAdvancedOptions=function(n){n=n===void 0?function(m){}:n,typeof n=="function"?f.socket.sendEvent(v.a.RoomEvent.get_adavanced_options,function(m){n(m)}):n(h.a.error_1155)},f.switchUserRole=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?f.me.role==="moderator"&&n&&f.clientId&&n!=f.clientId?f.socket.emitEvent(v.a.RoomEvent.switch_user_role,n,function(b){m(b)}):m(f.me.role!=="moderator"?h.a.error_1168:f.clientId?h.a.error_1155:h.a.error_1171):o.a.error("switchUserRole() invalid param - callback")},f.setSpeakerVolume=function(n,m){if(m=m===void 0?function(){}:m,n==null||typeof n!="number"&&typeof n!="boolean"||typeof m!="function")m(h.a.error_1155);else{var b=typeof n=="boolean"?Number(n):n;0<=b&&1>=b&&f.speakerInfo.volume!=n?(f.remoteStreams.forEach(function(T){T.setSpeaker(void 0,n)}),n?f.speakerInfo.volume||f.dispatchEvent(Object(u.e)({type:"speaker-unmuted",message:{}})):f.dispatchEvent(Object(u.e)({type:"speaker-muted",message:{}})),f.speakerInfo.volume=n,m(h.a.error_000)):m(f.speakerInfo.volume!=n?h.a.error_1188:h.a.error_1155)}},f.switchSpeaker=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?n==null||f.speakerInfo.id!=null&&n==f.speakerInfo.id||m!=null&&typeof m!="function"||t.a.browserEngineCheck()==="safari"?typeof m=="function"&&m(t.a.browserEngineCheck()==="safari"?h.a.error_1153:n==null?h.a.error_1155:h.a.error_1177):Ui(n,function(b){b?(Q.forEach(function(T){T.setSpeaker(n)}),f.speakerInfo.id=n,m(h.a.error_000)):m(h.a.error_1142)}):o.a.error("switchSpeaker() invalid param - callback")},f.startLocalRecord=function(n,m,b){if(n=n===void 0?"remote":n,m=m===void 0?10:m,Se==="none"){var T=[],A=0;(n==="remote"||n==="all")&&(Q.forEach(function(U){T[A]=new Promise(function($,ue){U.startLocalRecord(respCallback=function(Ie){$({id:U.getID(),status:Ie})})}),A++}),Se=n),(n==="local"||n==="all")&&(ie.forEach(function(U){T[A]=new Promise(function($,ue){U.startLocalRecord(respCallback=function(Ie){$({id:U.getID(),status:Ie})})}),A++}),Se=n),Se!=="none"?(m!==0&&(T[A]=new Promise(function(U,$){setTimeout(function(){f.stopLocalRecord(respCallback=function(ue,Ie){U(Ie)})},1e3*m)})),Promise.all(T).then(function(U){b&&(y.a.info("room-event",_.a.event_start_recording_success,{error:{}}),b(h.a.error_000,U))})):(o.a.error("invalid param type"),y.a.info("room-event",_.a.event_start_recording_failed,{error:"invalid param type"}),b&&b(h.a.error_1155))}else o.a.error("recording already in progress"),y.a.info("room-event",_.a.event_start_recording_failed,{error:"recording already in progress"}),b&&b(h.a.error_1174)},f.stopLocalRecord=function(n){Se!=="none"?(Se!=="remote"&&Se!=="all"||Q.forEach(function(m){new Promise(function(b,T){m.stopLocalRecord(respCallback=function(A){b({id:m.getID(),status:A})})})}),Se!=="local"&&Se!=="all"||ie.forEach(function(m){new Promise(function(b,T){m.stopLocalRecord(respCallback=function(A){b({id:m.getID(),status:A})})})}),Se="none",y.a.error("room-event",_.a.event_stop_recording_success,{error:{}})):(o.a.error("recoding not stopped"),y.a.info("room-event",_.a.event_stop_recording_failed,{message:h.a.error_1175.desc}),n&&n(h.a.error_1175))},f.setReceiveVideoQuality=function(n,m){if(Object.prototype.toString.call(n)==="[object Object]"&&typeof m=="function"){var b={},T={},A={};A=n.videoQuality;var U=n.streamType;if(A===void 0&&(A="Auto"),U===void 0&&(U="talker"),o.a.info("Dumping opts in setReceiveVideoQuality"+JSON.stringify(n)+" streamType"+U),U!="talker"&&U!="canvas")o.a.info("setReceiveVideoQuality Failed Invalid Param -StreamType: "+U),m(h.a.error_1155);else{switch(A){case"HD":T.width=1280,T.height=720;break;case"SD":T.width=960,T.height=540;break;case"LD":T.width=640,T.height=360;break;case"Auto":break;default:o.a.info("setReceiveVideoQuality for "+U+". Failed Invalid Param -videoQuality: "+A),m(h.a.error_1155);return}T.frameRate=30,b.video=T,(U=="talker"&&f.receiveVideoQuality.get("talker")!==A||U=="canvas"&&f.receiveVideoQuality.get("canvas")!==A)&&(Q.forEach(function($){U==="talker"&&$.canvas===!1&&$.screen===!1?$.updateConfiguration(b,function(ue){o.a.info("stream.updateConfiguration for talker stream result : "+ue)}):U==="canvas"&&$.canvas===!0&&$.updateConfiguration(b,function(ue){o.a.info("stream.updateConfiguration for canvas stream result : "+ue)})}),f.receiveVideoQuality.set(U,A)),A={result:0,msg:"Video quality successfully updated."},m(A)}}else typeof m!="function"?o.a.error("setReceiveVideoQuality() invalid param - callback() "):(o.a.error("setReceiveVideoQuality() invalid param - QualityOpt "),m(h.a.error_1155))},f.getReceiveVideoQuality=function(n){return n==="talker"||n==="canvas"?{result:0,videoQuality:f.receiveVideoQuality.get(n)}:h.a.error_1156},f.getStats=function(n,m,b){if(m=m===void 0?{intervalSecs:2,log:!0}:m,b=b===void 0?function(){}:b,n!=null&&typeof n=="boolean"&&typeof b=="function")if(n){var T=function($,ue,Ie,Ne){$.pc&&$.pc.peerConnection&&$.pc.peerConnection.getStats(null).then(function(pe){var De;pe.forEach(function(me){switch(me.type){case"candidate-pair":me.nominated&&(De=me);break;case"outbound-rtp":case"inbound-rtp":Ie[$.getID()+"-"+me.kind]==null&&(Ie[$.getID()+"-"+me.kind]={id:$.getID(),ssrc:0,reconnects:0,availKbps:0},Ne[$.getID()+"-"+me.kind]={});var Le=me.type==="outbound-rtp",Ve=Ie[$.getID()+"-"+me.kind],He=Ne[$.getID()+"-"+me.kind];Ve.ssrc=me.ssrc,Ve.id=$.getID(),Ve.reconnects=$.reconnectsTotal,Le?(Ve.type="pub",Ve.kbps=He.bytes?8*(me.bytesSent-He.bytes)/(1e3*m.intervalSecs):0,Ve.targetkbps=me.targetBitrate/1e3):(Ve.type="sub",Ve.kbps=He.bytes?8*(me.bytesReceived-He.bytes)/(1e3*m.intervalSecs):0,Ve.packetsLost=me.packetsLost),me.kind=="video"?(Ve.id="vid:"+$.getID(),Le?(Ve.fps=He.framesSent?(me.framesSent-He.frames)/m.intervalSecs:0,He.frames=me.framesSent,Ve.retransmitKbps=He.retransmittedBytesSent?8*(me.retransmittedBytesSent-He.retransmittedBytesSent)/(1e3*m.intervalSecs):0,He.retransmittedBytesSent=me.retransmittedBytesSent,Ve.keyFrames=me.keyFramesEncoded,Ve.targetFps=me.framesPerSecond):(Ve.fps=He.framesDecoded?(me.framesDecoded-He.framesDecoded)/m.intervalSecs:0,He.framesDecoded=me.framesDecoded,Ve.recivedfps=He.frames?(me.framesReceived-He.frames)/m.intervalSecs:0,He.frames=me.framesReceived,Ve.droppedfps=He.framesDropped?(me.framesDropped-He.framesDropped)/m.intervalSecs:0,He.framesDropped=me.framesDropped),Ve.resoln=me.frameWidth+"X"+me.frameHeight,Ve.firs=me.firCount,Ve.plis=me.pliCount,Ve.nacks=me.nackCount):Ve.id="aud:"+$.getID(),He.bytes=Le?me.bytesSent:me.bytesReceived,Ve.type+=$.ifScreen()?"sh":$.ifCanvas()?"cn":"mn"}}),De&&(pe=(ue?De.availableOutgoingBitrate:De.availableIncomingBitrate)/1e3,Ie[$.getID()+"-audio"]&&(Ie[$.getID()+"-audio"].availKbps=pe),Ie[$.getID()+"-video"]&&(Ie[$.getID()+"-video"].availKbps=pe))},function(pe){return console.log(" peerconnection getStats failed err : "+pe)})},A={},U={};Y=setInterval(function(){f.state==2&&(ie.forEach(function($,ue){$.state=="connected"?T($,!0,A,U):A[$.getID()+"-video"]&&(delete A[$.getID()+"-audio"],delete A[$.getID()+"-video"],delete U[$.getID()+"-audio"],delete U[$.getID()+"-video"])}),Q.forEach(function($,ue){$.state=="connected"?(f.activeTalkerList.get(parseInt(ue))||100<parseInt(ue)&&(f.shareStatus||f.canvasStatus))&&T($,!1,A,U):A[$.getID()+"-video"]&&(delete A[$.getID()+"-audio"],delete A[$.getID()+"-video"],delete U[$.getID()+"-audio"],delete U[$.getID()+"-video"])}),m.log&&console.table(Object.values(A)))},1e3*m.intervalSecs)}else Y&&(clearTimeout(Y),Y=void 0);else o.a.error("Invalid paramaters "),b&&typeof b=="function"&&b(h.a.error_1155)},f.getStreamStats=function(n,m){if(m=m===void 0?function(){}:m,!q)return"Error getting stats - no socket";if(!n)return"Error getting stats - no stream";q.sendMessage("getStreamStats",n.getID(),function(b){b&&m(b)})},f.getStreamsByAttribute=function(n,m){var b=[];return Q.forEach(function(T){T.getAttributes()!==void 0&&T.getAttributes()[n]===m&&b.push(T)}),b},f.installPlugin=function(){if(!document.getElementById("WebrtcEverywherePluginId")){var n=!!(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window);navigator.userAgent.indexOf("Safari");var m=document.createElement("object");n?m.setAttribute("classid","CLSID:7FD49E23-C8D7-4C4F-93A1-F7EACFA1EC53"):m.setAttribute("type","application/webrtc-everywhere"),m.setAttribute("id","WebrtcEverywherePluginId"),document.body.appendChild(m),m.setAttribute("width","0"),m.setAttribute("height","0"),m.isWebRtcPlugin||typeof navigator.plugins<"u"&&(navigator.plugins["WebRTC Everywhere"]||navigator.plugins["WebRTC Everywhere Plug-in for Safari"])?(o.a.info("Installed WEBRTC plugin for IE"),y.a.info("room-event",_.a.event_general_success,{message:"Installed WEBRTC plugin for IE"})):(o.a.info("Browser does not appear to be WebRTC-capable"),y.a.warn("room-event",_.a.event_incompatible_browser,{message:"Browser does not appear to be WebRTC-capable"}),window.open("/assets/plugin/VCXIE_PLUGINS.exe","new"))}},f.sendStoredLogs=function(n,m){f.socket.sendSDP("clientLogPosted",n,o.a.storedBuff,function(b,T){b?b&&(b={result:0,message:"Log posted successfully"},m(b)):(b={result:1340,message:"Error in posing log"},m(b))})},f.postClientLogs=function(n,m){if(m=m===void 0?function(){}:m,typeof m=="function"){var b=g.a.decodeBase64(n);n=k.a.getLocalStorageItem("vcxRTCLib-log"),n!=null&&(b=JSON.parse(b).logId,JSON.parse(n),JSON.stringify(n).replace(",",", ").replace("{","").replace("}",""),f.sendStoredLogs(b,m))}else o.a.error("postClientLogs() invalid param - callback")},f.whoAmI=function(n){n=n===void 0?function(b){}:n;var m;f.userList.forEach(function(b,T){T===f.clientId&&(m=b)}),n(m)};var za=function(n,m,b){m.userRequestOptions.video=n??!0,m.config.video=m.video=!0,o.a.info("addRenegotiateVideo() : caling reconnectStream"),ot(m,"add",function(T){b(T?h.a.error_000:h.a.error_1167)})};f.startScreenShare=function(n,m){var b;if(n!=null&&typeof n=="function")var T=n;else m!=null&&typeof m=="function"&&(n!=null&&(b=n),T=m);return typeof T!="function"||!f.share||f.subscription&&!f.subscription.audio_video?typeof T=="function"?o.a.error("startScreenShare() invalid param - callback"):(o.a.info("Room not connected../ licence error"),y.a.info("room-event",_.a.event_start_screenshare_failed,{error}),T(h.a.error_1171)):(b==null?b={audio:k.a.browser_info.name==="chrome-stable"||k.a.browser_info.name==="edge"}:b.audio==null&&(b.audio=!1),b.layout=b.layout!=null?b.layout:"grid",f.socket.emitEvent("auxilaryPublishRequests",{req:"start",pubType:"share",override:!0},function(A){if(A.result==h.a.error_000.result)var U=Ga(b,function($){$===!0?(U.addEventListener("stream-ended",function(ue){o.a.info(" screen share stream ended, stopping share"),f.stopScreenShare(function(Ie){o.a.info("stopScreenShare callback resp: "+JSON.stringify(Ie))})}),f.publish(U,{share:!0,shareMetadata:{layout:b.layout},maxVideoBW:k.a.video_bandwidth_range.share.max,minVideoBW:k.a.video_bandwidth_range.share.min},function(ue){T(ue);var Ie={streamId:U.getID(),externalIp:f.externalIp,negotiatedCodecs:{audio:{codec:"OPUS"},video:{codec:"VP8"}}};ue.result===h.a.error_000.result?(y.a.info("room-event",_.a.event_start_screenshare_success,{error:{}}),It(!0,f.canvasStatus)):ue.result===4108&&(Ie.error=ue.msg,f.createEventLog("clientStreamShareFailed",Ie),y.a.info("room-event",_.a.event_start_screenshare_failed,{addOpt:Ie}),U.stream.getTracks().forEach(function(Ne){Ne.stop()}))})):(o.a.error("startShare failed: err "+JSON.stringify($)),f.socket.emitEvent("auxilaryPublishRequests",{req:"stop",pubType:"share"},function(ue){}),T($))});else T(A)})),localStream&&(f.ScreenSharelocalStream=localStream),localStream},f.getScreenShareStream=function(){return f.ScreenSharelocalStream},f.stopScreenShare=function(n,m){if(m=m===void 0?function(){}:m,typeof m=="function"){var b=h.a.error_1159;if(f&&f.share&&(!f.subscription||f.subscription.audio_video)){var T;f.localStreams.forEach(function(A){A.ifScreen()&&A.local&&(xn(!0,!1),A.close(),T=A,b=h.a.error_000,y.a.error("room-event",_.a.event_stop_screenshare_success,{error:{}}))}),It(!1,f.canvasStatus),T!=null&&f.localStreams.remove(T.getID())}else b=f?h.a.error_1170:h.a.error_1171,o.a.info("Room not connected../ licence error"),y.a.info("room-event",_.a.event_stop_screenshare_failed,{error:b});f.ScreenSharelocalStream=null,m?m(b):n&&typeof n=="function"&&n(b)}else o.a.error("stopScreenShare() invalid param - callback")},f.stopAllSharing=function(n){console.log("stopAllSharing"),f.shareStatus!=1&&f.isCanvasSharing!=1||f.socket.sendParamEvent("stopAllSharing",f.clientId,function(m){m.result!=0&&(o.a.error(m.msg),m.result=-1),n(m)})};var Wa=function(n){n=Object(u.e)({type:"custom-data-saved",message:{result:n.result,scope:n.scope}}),f.dispatchEvent(n)},Ha=function(n){var m=n.data,b=n.scope;b=="room"?f.customRoomData=m:b=="session"?f.customSessionData=m:b=="user"&&(b=f.userList.get(n.clientId),b.customUserData=m,f.userList.set(n.clientId,b)),n=Object(u.e)({type:"custom-data-updated",message:{result:n.result,scope:n.scope,msg:n.msg}}),f.dispatchEvent(n)};f.saveCustomData=function(n,m,b){if(!f.subscription||f.subscription.datastore!==void 0&&f.subscription.datastore!==!1){var T={result:0},A=n.scope,U=n.query;if(re(A)==0)T.result=1,T.msg="Invalid scope parameter: "+A,b(T);else if(m==null||typeof m!="object"||typeof m=="object"&&Array.isArray(m))o.a.error("Invalid data: "+m),T.result=1,T.msg="Invalid  data",b(T);else if(U&&typeof U!="string")o.a.error("Invalid data type of query: "+U),T.result=1,T.msg="Invalid  data type",b(T);else{U=Object.keys(m),U=H.makeIterator(U);for(var $=U.next();!$.done;$=U.next())if($.value===""){T.result=1,T.msg="Empty string as key not allowed.",b(T);return}f.socket.sendParamEvent("saveCustomData",{scope:A,data:m,query:n.query},function(ue){ue.result!=0&&o.a.error(ue.msg),b(ue)})}}else o.a.error("Customer datastore subsciption isn't supported for the room !!"),b(h.a.error_1170)},f.setCustomData=function(n,m,b){var T=n.scope,A=n.query;if(n=n.broadcast,!f.subscription||f.subscription.datastore!==void 0&&f.subscription.datastore!==!1){var U={result:0};if(T=="owner"||re(T)==0)U.result=1,U.msg=T=="owner"?"Owner scope not allowed.":"Invalid scope parameter: "+T,b(U);else{var $;if(($=n)&&($=!(typeof n!="string"||B.includes(n)==0),$=$==0),$)U.result=1,U.msg="Invalid broadcast parameter: "+n,b(U);else if(m==null||typeof m!="object"||typeof m=="object"&&Array.isArray(m))o.a.error("Invalid data: "+m),U.result=1,U.msg="Invalid  data",b(U);else if(T!="user"||n!=null&&n!="none"){$=Object.keys(m),$=H.makeIterator($);for(var ue=$.next();!ue.done;ue=$.next())if(ue.value===""){U.result=1,U.msg="Empty string as key not allowed.",b(U);return}if(A&&typeof A!="string")o.a.error("Invalid data type of query: "+A),U.result=1,U.msg="Invalid  data type",b(U);else if(A&&2<A.split(".").length)o.a.error("Object level access exceeded, current size : "+A.split(".").length),U.result=1,U.msg="Object level access exceeded, It mustn't be greater than 2.",b(U);else{if(T=="room"){if(A)if($=A.split("."),$.length==0)f.customRoomData=Object.assign(f.customRoomData,m);else if($.length==1)f.customRoomData[A]=f.customRoomData[A]?Object.assign(f.customRoomData[A],m):m;else if($.length==2)f.customRoomData[$[0]]?f.customRoomData[$[0]][$[1]]=f.customRoomData[$[0]][$[1]]?Object.assign(f.customRoomData[$[0]][$[1]],m):m:(f.customRoomData[$[0]]={},f.customRoomData[$[0]][$[1]]=m);else{o.a.error("Object access level exceeded, it must be atmost 2 : "+A),U.result=1,U.msg="Object level access exceeded",b(U);return}else f.customRoomData=Object.assign(f.customRoomData,m);m=f.customRoomData}else if(T=="session"){if(A)if($=A.split("."),$.length==0)f.customSessionData=Object.assign(f.customSessionData,m);else if($.length==1)f.customSessionData[A]=f.customSessionData[A]?Object.assign(f.customSessionData[A],m):m;else if($.length==2)f.customSessionData[$[0]]?f.customSessionData[$[0]][$[1]]=f.customSessionData[$[0]][$[1]]?Object.assign(f.customSessionData[$[0]][$[1]],m):m:(f.customSessionData[$[0]]={},f.customSessionData[$[0]][$[1]]=m);else{o.a.error("Object access level exceeded, it must be atmost 2 : "+A),U.result=1,U.msg="Object level access exceeded",b(U);return}else f.customSessionData=Object.assign(f.customSessionData,m);m=f.customSessionData}n=="all"?f.socket.sendParamEvent("setCustomData",{scope:T,data:m,query:A},function(Ie){Ie.result!=0&&o.a.error(Ie.msg),b(Ie)}):(m=Object(u.e)({type:"custom-data-updated",message:{result:0,scope:T,msg:"success"}}),f.dispatchEvent(m))}}else U.result=1,U.msg="Invalid broadcast option for scope USER, it mustn't be undefined or set to none.",b(U)}}else o.a.error("Customer datastore subsciption isn't supported for the room !!"),b(h.a.error_1170)},f.getCustomData=function(n,m){if(!f.subscription||f.subscription.datastore!==void 0&&f.subscription.datastore!==!1){var b={result:0};if(n==null||typeof n!="object"||typeof n=="object"&&Array.isArray(n))o.a.error("Invalid data: "+n),b.result=1,b.msg="Invalid  options",m(b);else{var T=n.scope,A=n.query,U=n.db;if(U&&typeof U!="boolean")o.a.error("Invalid data type of db: "+A),b.result=1,b.msg="Invalid  data type",m(b);else if(re(T)==0)b.result=1,b.msg="Invalid scope parameter: "+T,m(b);else if(A&&typeof A!="string")o.a.error("Invalid data type of query: "+A),b.result=1,b.msg="Invalid  data type",m(b);else if(A&&2<A.split(".").length)o.a.error("Object level access exceeded, current size : "+A.split(".").length),b.result=1,b.msg="Object level access exceeded, It mustn't be greater than 2.",m(b);else if(U==null||U==0){if(T=="room")var $=f.customRoomData;else T=="session"?$=f.customSessionData:T=="user"&&f.userList.get(f.clientId)&&($=f.userList.get(f.clientId).customUserData);A?(n=A.split("."),2<n.length?(o.a.error("Object access level exceeded, it must be atmost 2 : "+A),b.result=1,b.msg="Object level access exceeded",m(b)):$==null?m("No data is set wrt provided scope : "+T+", Data : "+$):n.length==0?m($):n.length==1?$[A]?m($[A]):m("Data wrt query doesn't exist"):n.length==2&&($[n[0]]&&$[n[0]][n[1]]?m($[n[0]][n[1]]):m("Data wrt query doesn't exist"))):m($)}else U==1&&T!="session"?(b.result=1,b.msg="Option true for db paramereter is valid for session scope only, scope used  : "+T,m(b)):f.socket.sendParamEvent("getCustomData",{scope:T,options:n,query:A},function(ue){ue.result!=0&&o.a.error(ue.msg),m(ue)})}}else o.a.error("Customer datastore subsciption isn't supported for the room !!"),m(h.a.error_1170)},f.lock=function(n){zi(!0,n)},f.unlock=function(n){zi(!1,n)},f.dropUser=function(n,m){if(m=m===void 0?function(){}:m,n==null||Array.isArray(n)&&typeof m=="function"&&f.me.role==="moderator"){var b={all:!1};b.clientIds=n??[],f.socket.emitEvent(v.a.RoomEvent.drop,b,m)}else typeof m=="function"?m(f.me.role!=="moderator"?h.a.error_1168:h.a.error_1155):o.a.error("dropUser() invalid param - callback")},f.pinUsers=function(n,m){Wi(!0,n,m===void 0?function(){}:m)},f.unpinUsers=function(n,m){Wi(!1,n,m===void 0?function(){}:m)},f.addSpotlightUsers=function(n,m){Hi(!0,n,m===void 0?function(){}:m)},f.removeSpotlightUsers=function(n,m){Hi(!1,n,m===void 0?function(){}:m)},f.destroy=function(n){n=n===void 0?function(){}:n,typeof n=="function"&&f.me.role==="moderator"?f.socket.emitEvent(v.a.RoomEvent.drop,{all:!0,clients:null},function(m){}):typeof n=="function"?(y.a.info("room-event",_.a.event_general_success,{message:"destroy - "+h.a.error_1168}),n(h.a.error_1168)):o.a.error("() invalid param - callback")},f.setAudioOnlyMode=function(n,m){if(m=m===void 0?function(){}:m,n!==void 0&&typeof n=="boolean"&&n!=f.audioOnlyMode&&typeof m=="function"){var b=[],T={numTalkers:f.userVideoTalkerCount,numAudioTalkers:f.userAudioTalkerCount};b[0]=new Promise(function(A,U){T.numVideoTalkers=n?0:f.userVideoTalkerCount,f.socket.emitEvent(v.a.RoomEvent.set_active_talker,T,function($){A($)})}),b[1]=new Promise(function(A,U){ie.forEach(function($,ue){$&&$.ifVideo()&&(n?$.muteVideo:$.unmuteVideo)(function(Ie){A(Ie)})})}),Promise.all(b).then(function(A){for(var U=0;U<A.length;U++)if(A[U].result!==0&&A[U].result!==h.a.error_1177.result){m(A[U].result);return}f.audioOnlyMode=n,m(h.a.error_000)})}else b=n===void 0||typeof n!="boolean"?h.a.error_1168:h.a.error_1188,typeof m=="function"?m(b):o.a.error("setAudioOnlyMode() invalid param - callback")};var Ui=function(n,m){t.a.getDeviceList({speaker:!0},function(b){var T=!1;if(b.result==0){for(var A=0;A<b.devices.speaker.length;A++)if(b.devices.speaker[A].deviceId==n){T=!0;break}}m(T)})},zi=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"?f.me.role==="moderator"&&n!=f.locked?f.socket.emitEvent(v.a.RoomEvent.lock_room,n,function(b){b.result===0&&(f.locked=n),m(b)}):m(f.me.role!=="moderator"?h.a.error_1168:h.a.error_4121):o.a.error("lockRoom() invalid param - callback")},Wi=function(n,m,b){b=b===void 0?function(){}:b,m==null||Array.isArray(m)&&m.length&&typeof b=="function"&&f.me.role==="moderator"?f.setAdvancedOptions([{id:"update-pin-users",request:n?"add":"remove",clientIds:m}],b):typeof b=="function"?b(f.me.role!=="moderator"?h.a.error_1168:h.a.error_1155):o.a.error("pinUsers() invalid param - callback")},Hi=function(n,m,b){b=b===void 0?function(){}:b,m==null||Array.isArray(m)&&m.length&&typeof b=="function"&&f.me.role==="moderator"?f.setAdvancedOptions([{id:"spotlight-users",request:n?"add":"remove",clientIds:m}],b):typeof b=="function"?b(f.me.role!=="moderator"?h.a.error_1168:h.a.error_1155):o.a.error("spotlightUsers() invalid param - callback")},bt=function(n,m,b){b=b===void 0?function(){}:b,n!==void 0&&typeof n=="string"?f.socket.sendSDP("processFloorRequest",n,m,function(T,A){T===null?(o.a.error("Error on "+m+" error: "+A),b(void 0,A)):b(T)}):(o.a.error(" Floor Req : "+m+"Invalid params"),b(void 0,h.a.error_1155))};f.sendSocketEvent=function(n,m){m=m===void 0?function(){}:m,f.socket.emitEvent("logClientEvents",n,function(b,T){T?m(T,"error"):m(b,"success")})},f.createEventLog=function(n,m){var b={eventType:n,roomId:f.roomID,logId:se.logId,timestamp:new Date};Object.assign(b,m),o.a.info(n+" :",b),f.sendSocketEvent(b,function(T,A){o.a.info("Logging "+n+" response:  "+JSON.stringify(T)+" , "+A+" ")})};var Gi=function(){if(f.reconnectionState===!1){f.sendRecvBitrateStats||(f.sendRecvBitrateStats=!0);var n=[],m=0;Q.forEach(function(b){b.pc&&b.pc.peerConnection&&(n[m]=b.pc.peerConnection.getStats(null).then(function(T){var A;return T.forEach(function(U){U.type==="candidate-pair"&&U.availableIncomingBitrate!==void 0&&(o.a.debug("incoming bitrate: "+U.availableIncomingBitrate),A={streamId:b.getID(),availableRecvBitrate:parseInt(U.availableIncomingBitrate)})}),A||{streamId:b.getID(),availableRecvBitrate:0}},function(T){return console.log(T),{streamId:b.getID(),availableRecvBitrate:0}}),m++)}),Promise.all(n).then(function(b){for(var T=0,A=0;A<b.length;A++)T+=b[A].availableRecvBitrate;o.a.info("Bitrates Total:"+T+" streamInfo: "+JSON.stringify(b)),f.socket.emitEvent(v.a.RoomEvent.client_stats,{media:{subscribers:{totalAvailableBw:T}}},function(U){})}),o.a.debug("Setting timeout again to execute "),setTimeout(Gi,5e3)}else f.sendRecvBitrateStats=!1},qi=function(n,m){if(n.videoSize==null)if(m)n.videoSize=[fe.min.width,fe.min.height,fe.max.width,fe.max.height];else return o.a.error(" Failed : video size undefined"),h.a.error_1184;else{m=n.videoSize[0]*n.videoSize[1];var b=n.videoSize[2]*n.videoSize[3],T=fe.min.width*fe.min.height,A=fe.max.width*fe.max.height;if(m<T||m>A||b>A||b<T||m>b)return o.a.error(" Failed : video size invalid minPixelsSet:"+m+" minPixelsConfig:"+T+" maxPixelsSet: "+b+" maxPixelsConfig: "+A+" req: min: "+n.videoSize[0]+" X "+n.videoSize[1]+" max: "+n.videoSize[2]+" X "+n.videoSize[3]+" config: min: "+fe.min.width+" X "+fe.min.height+" max: "+fe.max.width+" X "+fe.max.height),h.a.error_1184}return h.a.error_000};f.initPublishStream=function(n,m,b,T){if(m!==void 0){if(m.stream!=null){var A=m.stream;if(A.audio||A.video)return A.stream?(n!=null&&document.getElementById(n)!==null&&A.play(n,m.options),b(A)):A.init(),A;o.a.error(" Failed : initPublishStream(): audio and video disabled in input stream"),y.a.error("room-event",_.a.event_general_failed,{message:"initPublishStream - a/v disabled in input stream"}),T(h.a.error_1146);return}if(m.audio||m.video||m.screen||m.canvas){if(m.video&&f.mediaConfiguration!==v.a.constant.H264_CODEC&&k.a.browser_info.name==="safari"&&k.a.browser_info.version<=v.a.constant.SAFARI_VERSION_NOT_SUPPORTING_VP8&&(m.video=!1,o.a.info("Stream publish in Init publish:- SAFARI - false")),m.video&!m.canvas){var U=qi(m,!0);if(U.result!==h.a.error_000.result){o.a.error(" Failed : initPublishStream(): video size invalid"),y.a.error("room-event",_.a.event_general_failed,{message:"initPublishStream - video size invalid"}),T(U);return}}o.a.debug("video Size: "+JSON.stringify(fe)+" config.video_resolution_range: "+k.a.video_resolution_range+" token.roomMeta.settings.quality: "+se.roomMeta.settings.quality+" room meta: "+JSON.stringify(se.roomMeta)+" video Size: "+k.a.video_resolution_range[se.roomMeta.settings.quality]),m.videoSize!=null&&m.videoSize.length||(m.videoSize=[fe.min.width,fe.min.height,fe.max.width,fe.max.height]),A=xt.EnxStream(m)}else o.a.error(" Failed : all stream opions (audio/video/screen/canvas)  false/undefined"),y.a.error("room-event",_.a.event_general_failed,{message:"initPublishStream - all stream opions (audio/video/screen/canvas) false/undefined"}),T(h.a.error_1155)}else y.a.info("room-event",_.a.event_stream_publish_success,{message:"initPublishStream - success"}),A=xt.EnxStream({audio:!0,video:!0,data:!0,videoSize:[fe.min.width,fe.min.height,fe.max.width,fe.max.height]});return t.a.browserEngineCheck()==="IE"?document.getElementById("WebrtcEverywherePluginId").addEventListener("media-access-allowed",function($){o.a.info("got media access:- "+JSON.stringify($)),document.getElementById(n)!==null&&A.play(n),b()}):(A.addEventListener("media-access-denied",T),A.addEventListener("media-access-failed",T),A.addEventListener("media-access-allowed",function($){document.getElementById(n)!==null&&A.play(n,m.options),b($.stream)})),A.init(),A};var Ga=function(n,m){var b={video:!0,data:!0,screen:!0,fps:f.screenResolutionRange.fps,attributes:{name:"share"}};return f.whoAmI(function(T){b.attributes.name=T.name+"_share"}),b.audio=n!=null&&n.audio!=null?n.audio:!1,f.initPublishStream("",b,function(){y.a.info("room-event",_.a.event_start_screenshare_success,{error:{}}),m(!0)},function(T){T.msg.name==="OverconstrainedError"&&o.a.info("Resolution selected is not supported by your webcam"),y.a.error("room-event",_.a.event_start_screenshare_failed,{event:T}),m(T.msg)})},Ji=function(n,m,b){if(m=m===void 0?null:m,n)return n;if(m.style.position="relative",n=document.createElement("div"),n.setAttribute("class","annotate-div"),n.setAttribute("style","display:flex;justify-content: center;align-items: center;height: 100%;width: 100%;"),b){var T=document.querySelector("#player_"+b.getID()).parentElement;if(T){var A=document.createElement("canvas"),U=f.canvasVideoPlayer+"_veneer";if(A.id=U,A.width=m?m.clientWidth:f.canvasOptions.width,A.height=m?m.clientHeight:f.canvasOptions.height,m.style.height=A.height+"px",m.style.width=A.width+"px",A.className=f.canvasVideoPlayer+"_input_veneer",A.setAttribute("style","display:none;"),document.body.appendChild(A),m){f.canvasOptions.width=m.clientWidth,f.canvasOptions.height=m.clientHeight;var $=document.createElement("div");if($.setAttribute("id","canvas-wrapper"),$.setAttribute("class","canvas-wrapper"),!A)return;$.style.width=A.width+"px",$.style.height=A.height+"px",$.style.position="absolute",$.style.top="0%",$.append(A),I.a.appendCustomCanvas($,A.className,A.width,A.height),I.a.appendCanvasFrame($,A.className,A.width,A.height,b),document.getElementById(m.id)&&document.getElementById(m.id).appendChild($)}else document.body.appendChild(wrapper);return m!=null&&(n.appendChild(m),T.prepend(n)),I.a.bindEventListernersForTools(),f.inputContext=A.getContext("2d"),I.a.startFrame(),I.a.pause_play(),qa(),U}}},qa=function(){var n=I.a.getVideoFrameId(),m=document.getElementById(n);if(m){n=I.a.getCanvasId();var b=document.getElementById(n);b&&(G=setInterval(function(){f.inputContext.globalAlpha=.1,0<m.width&&0<m.height&&0<I.a.getCanvasWidth()&&0<I.a.getCanvasHeight()&&f.inputContext.drawImage(m,0,0,I.a.getCanvasWidth(),I.a.getCanvasHeight()),f.inputContext.globalAlpha=1,0<b.width&&0<b.height&&0<I.a.getCanvasWidth()&&0<I.a.getCanvasHeight()&&f.inputContext.drawImage(b,0,0,I.a.getCanvasWidth(),I.a.getCanvasHeight())},.3))}};f.annotateToolAction=function(n,m){I.a.toolBarAction(n,m)},f.startAnnotation=function(n,m){var b=document.getElementById("canvas-wrapper");b&&b.remove();try{if(n){var T=n.getID(),A=document.querySelector("#player_"+T);if(A){var U=mr();if(o.a.info(U,"status"),f.canvas_video_player=document.getElementById("stream"+T),f.canvas_video_player)if(f.canvasVideoPlayer="stream"+T,U.result===h.a.error_000.result){var $=Ji(null,A,n);f.startCanvas({canvasSelector:$,fps:23,canvasType:"Annotation"},function(ue){ue.result==0&&m&&m(U)}),V=!1,C=!0,y.a.info("room-event",_.a.event_start_annotation_success,{error:{}}),I.a.mouseAnnotate($,f.inputContext,"player_"+T,n)}else m&&m(U)}}}catch(ue){console.info(ue,"error"),o.a.error("incorrect annotate params "+ue),y.a.error("room-event",_.a.event_start_annotation_failed,{error:ue}),m&&m(h.a.error_1155)}},f.stopAnnotation=function(n){C=!1,f.stopCanvas(n),I.a.stopAnnotation(),clearInterval(G)},f.adjustCanvas=function(){I.a.resize()},f.startCanvas=function(n,m){if(m=m===void 0?function(){}:m,typeof m=="function"){var b,T,A=n?n.canvasSelector:"";try{var U=mr();U.result===h.a.error_000.result?f.socket.emitEvent("auxilaryPublishRequests",{req:"start",pubType:"canvas"},function($){if($.result==h.a.error_000.result){if(T=Ji(A),n){$=n.fps?n.fps:f.canvasOptions.fps;var ue=n.canvasType?n.canvasType:"default"}else $=f.canvasOptions.fps,ue="default";b=$a({domHandle:T,fps:23<$?23:$,canvasType:ue,refreshFn:n.refreshFn,maxRefreshRate:f.maxCanvasRefreshRate},function(Ie,Ne){Ne==="success"?f.publish(Ie,{canvas:!0,canvasType:ue,maxVideoBW:k.a.video_bandwidth_range.canvas.max,minVideoBW:k.a.video_bandwidth_range.canvas.min},function(pe){pe.result===0&&(o.a.info("startCanvas response.result:",pe),y.a.info("room-event",_.a.event_start_canvas_success,{error:{}}),It(f.shareStatus,!0),m&&m(pe))}):m&&m(Ie)})}else m&&m(U)}):m&&m(U)}catch($){o.a.error("incorrect canvas params "+$),y.a.error("room-event",_.a.event_start_canvas_failed,{error:$}),m&&m(h.a.error_1155)}return b}o.a.error("startCanvas() invalid param - callback")},f.playVideo=function(n,m,b){f.canvasVideoPlayer=n,n=document.querySelector("#"+n),n==null?b(h.a.error_1162):(f.canvas_video_player=n,m&&(f.canvasOptions.width=m.width?m.width:f.canvasOptions.width,f.canvasOptions.height=m.height?m.height:f.canvasOptions.height,f.canvasOptions.fps=m.fps?m.fps:23),f.startCanvas({fps:m.fps},b))},f.stopCanvas=function(n){if(n=n===void 0?function(){}:n,typeof n=="function"){var m=mr();if(m.result===h.a.error_000.result){var b;f.localStreams.forEach(function(T){T&&T.ifCanvas()&&(xn(!1,!0),b=T,T.stream.getTracks().forEach(function(A){A.stop()}),T.onConnectionStateChanged(!1),T.close(),y.a.info("room-event",_.a.event_stop_canvas_success,{error:{}}),n({result:0,msg:"Canvas stopped successfully."}))}),It(f.shareStatus,!1),b!=null&&f.localStreams.remove(b.getID())}else y.a.error("room-event",_.a.event_stop_canvas_failed,{error:{}}),n(m)}else o.a.error("stopCanvas() invalid param - callback")},f.isModerator=function(){return f.me&&f.me.role==="moderator"};var Xt=function(n,m,b,T,A,U){m=Ja(m,b,!0),m.result===h.a.error_000.result&&(T||A&&typeof A=="string")?f.socket.sendMessage(n,{clientId:A},function($){U($)}):U(m.result!==h.a.error_000.result?m:h.a.error_1155)},Ja=function(n,m,b){return n=!f.subscription||(!m||f.subscription.audio_video)&&(!n||f.subscription.audio_only||f.subscription.audio_video),f&&n&&(!b||f.me.role==="moderator")?h.a.error_000:(b=f?n?h.a.error_1168:h.a.error_1170:h.a.error_1171,o.a.error("validateCanvas error code "+b.result),b)},mr=function(){if(f&&(!f.subscription||f.subscription.audio_video)&&(f.mode!=="lecture"||f.me.role==="moderator"||f.floorGranted===!0))return h.a.error_000;var n=f?!f.subscription||f.subscription.audio_video?h.a.error_1173:h.a.error_1170:h.a.error_1171;return o.a.error("validateCanvas error code "+n.result),n},$a=function(n,m){var b=null,T={video:!0,canvas:!0,attributes:{name:"canvas"}};return T.canvas===!1&&(T.canvas=!0),T.video===!1&&(T.video=!0),T.audio===!0&&(T.audio=!1),T.div||(T.div=n.domHandle),T.fps||(T.fps=n.fps),n.refreshFn!=null&&(T.refreshFn=n.refreshFn,T.maxCanvasRefreshRate=n.maxRefreshRate),T.attributes===void 0?T.attributes={name:"canvas"}:(T.attributes.name===void 0||T.attributes.name==="canvas")&&f.whoAmI(function(A){T.attributes.name=A.name+"_canvas"}),T.videoSize=[1920,1080,1920,1080],o.a.info("initcanvas config "+JSON.stringify(T)),f.initPublishStream("",T,function(A){b=A,m(b,"success")},function(A){A.msg.name==="OverconstrainedError"&&o.a.info("Resolution selected is not supported by your webcam"),m(A.msg,"error")}),b},Ya=function(n){var m=null;f.isCanvasSharing=!0,f.clientId==n.clientId&&(f.isCanvasSharingClient=!0),V?m=Object(u.e)({type:"annotation-started-ack",message:{clientId:n.clientId,name:n.name,streamId:n.streamId,canvasType:n.canvasType}}):n.canvasType==="Annotation"?(C=!0,m=Object(u.e)({type:"canvas-started",message:{clientId:n.clientId,name:n.name,streamId:n.streamId,canvasType:n.canvasType}})):(f.canvasStatus=!0,C&&(f.canvasStatus=!1),C=!1,m=Object(u.e)({type:"canvas-started",message:{clientId:n.clientId,name:n.name,streamId:n.streamId,canvasType:n.canvasType?n.canvasType:"default"}})),It(f.shareStatus,!0),f.dispatchEvent(m),o.a.debug("onCanvasStarted event :",JSON.stringify(m)),n.streamId?(n=Q.get(n.streamId))&&!n.failed?n._setStaticQualityLayer(2,-1,function(b){o.a.info("stream._setStaticQualityLayer (2/-1) for canvas result : "+b)}):o.a.error("canvas started:stream is undefined or failed"):o.a.error("canvas arg.streamId is undefined")},Ka=function(n){n=Object(u.e)({type:"canvas-stopped",message:{clientId:n.clientId,name:n.name,streamId:n.streamId}}),f.canvasStatus=!1,f.isCanvasSharing=!1,It(f.shareStatus,!1),o.a.debug("onCanvasStopped event :",JSON.stringify(n)),f.dispatchEvent(n),f.isCanvasSharingClient=!1},Xa=function(n){o.a.info("canvasStateEvents"),n.videomuted===!0?(n=Object(u.e)({type:"canvas-state-events",message:"Canvas stopped",reason:"bw"}),f.dispatchEvent(n)):(n=Object(u.e)({type:"canvas-state-events",message:"Canvas resumed",reason:"bw"}),f.dispatchEvent(n))},Qa=function(n){o.a.info("shareStateEvents"),n.videomuted===!0?(n=Object(u.e)({type:"share-state-events",message:"Share stopped",reason:"bw"}),f.dispatchEvent(n)):(n=Object(u.e)({type:"share-state-events",message:"Share resumed",reason:"bw"}),f.dispatchEvent(n))},Za=function(n){if(n.id==="speaker_notification"){n.id="talker-notification";for(var m={},b=H.makeIterator(n.data),T=b.next();!T.done;T=b.next())T=T.value,T.speech===!0?m.speech=T.users:T.noise===!0&&(m.noise=T.users);n=Object(u.e)({type:n.id,message:m}),f.dispatchEvent(n)}else n=Object(u.e)({type:n.id,message:n.data}),f.dispatchEvent(n)},ed=function(n){o.a.debug("onUserRoleChangedEvent"+JSON.stringify(n)+" ownclientId: "+f.clientId),n.moderator.new===f.clientId?f.me.role==="participant"?(f.me.role="moderator",f.mode==="lecture"&&(f.cCrequest=[],f.cCapprovedHands=[],0<n.raisedHands.length&&n.raisedHands.forEach(function(m){f.cCrequest.push(m)}),0<n.approvedHands.length&&n.approvedHands.forEach(function(m){f.cCapprovedHands.push(m)}))):o.a.info("onUserRoleChangedEvent() Already Moderator - no change"):n.moderator.old===f.clientId&&(f.me.role==="moderator"?(f.me.role="participant",f.mode==="lecture"&&(f.cCrequest=[],f.cCapprovedHands=[],f.localStreams.getAll(),ie.forEach(function(m,b){f.unpublish(m,function(T){T==1?o.a.info("stream has been un-published"):(o.a.info("error during stream un-publishing"),y.a.error("room-event",_.a.event_stream_unpublish_failed,{stream:m}))})}))):o.a.info("onUserRoleChangedEvent() Already partcipant - no change")),n=Object(u.e)({type:"user-role-changed",message:n}),f.dispatchEvent(n)},td=function(n){o.a.debug("onUserRoleChangedEvent"+JSON.stringify(n)+" ownclientId: "+f.clientId),f.mode==="lecture"?(f.mode="group",f.roomSettings.mode="group",f.cCrequest=[],f.cCapprovedHands=[]):f.mode==="group"&&(f.roomSettings.mode="lecture",f.mode="lecture",f.cCrequest=[],f.cCapprovedHands=[],f.me.role==="participant"?ie.forEach(function(m,b){f.unpublish(m,function(T){T==1?o.a.info("stream has been un-published"):(o.a.info("error during stream un-publishing"),y.a.error("room-event",_.a.event_stream_unpublish_failed,{stream:m}))})}):o.a.info("onUserRoleChangedEvent() Already Moderator - no change")),n=Object(u.e)({type:"room-mode-switched",message:{mode:f.mode,moderator:n.moderator}}),f.dispatchEvent(n)},nd=function(n){o.a.info("onRoomManagementEvents:"+JSON.stringify(n));var m={};switch(n.id){case"room-locked":case"room-unlocked":f.locked=n.id==="room-locked",m=n.msg;break;case"floor-opened":f.floorOpen=!0;break;case"floor-closed":f.floorOpen=!1;break;case"knock-enabled":f.knockEnabled=!0;break;case"knock-disabled":f.knockEnabled=!1,f.awaitedParticipants.clear();break;case"wait-room-disabled":f.waitRoom&&(f.waitRoom=!1);for(var b=[],T=n.roomData.streams||[],A=Object.keys(T),U=n.roomData.userList,$=0;$<A.length;$+=1){var ue=T[A[$]];m=Object(c.a)(f.Connection,{streamID:ue.id,local:!1,audio:ue.audio,video:ue.video,data:ue.data,screen:ue.screen,canvas:!(typeof ue.canvas>"u"||ue.canvas===!1),attributes:ue.attributes}),b.push(m),Q.add(ue.id,m)}for(var Ie in U)f.userList.set(U[Ie].clientId,U[Ie]);f.videoMutedUsers=n.roomData.videoMutedUsers||[],m={streams:b,users:U};break;default:m=n.msg}n=Object(u.e)({type:n.id,message:m}),f.dispatchEvent(n)},rd=function(n){if(o.a.info("Recieved an invite to join breakout room "+JSON.stringify(n)),o.a.info("Join Breakout Room event dispatched"),n.force_join===!0){var m=Object(u.e)({type:"breakout-room-joining",message:{room_id:n.room_id,requestor:n.requestor}});f.dispatchEvent(m),f.muteRoom({audio:!0,video:!0},function(b){b.result===0?ie.forEach(function(T,A){T.screen||T.canvas||!T.ifAudio()&&!T.ifVideo()||f.joinBreakOutRoom({room_id:n.room_id,role:"participant"},{audio:!0,video:!1},function(U,$){U?(U=Object(u.e)({type:"breakout-room-connected",streams:U.streams,room:U.room,roomData:U.roomData,localBreakoutStream:U.localBreakoutStream}),f.dispatchEvent(U)):$&&(U=Object(u.e)({type:"breakout-room-error",message:$}),f.dispatchEvent(U))})}):(b=Object(u.e)({type:"breakout-room-error"},{message:"mute room request failed"}),f.dispatchEvent(b))})}else m=Object(u.e)({type:"join-breakout-room",message:{room_id:n.room_id,requestor:n.requestor}}),f.dispatchEvent(m)};f.rejectBreakoutRoomInvite=function(n,m){m=m===void 0?function(){}:m,o.a.info("Rejecting the breakout room invite ",n),n?f.socket.sendMessage("reject-breakout-room",n,function(b){b&&(o.a.info("Reject breakout room, result: "+JSON.stringify(b)),m(b))}):(o.a.info("Invalid value room_id"),m&&m(h.a.error_1155))};var id=function(n){o.a.info("Recieved user joined breakout room "+JSON.stringify(n)),n=Object(u.e)({type:"user-joined-breakout-room",message:{clientId:n.client}}),f.dispatchEvent(n)},od=function(n){o.a.info("USER DISCONNECTED BREAKOUT ROOM "+JSON.stringify(n)),n=Object(u.e)({type:"user-disconnected-breakout-room",message:{name:n.name,clientId:n.clientId,room:n.room}}),f.dispatchEvent(n)},sd=function(n){o.a.info("BREAKOUT ROOM DESTROYED"+JSON.stringify(n)),n=Object(u.e)({type:"breakout-room-destroyed",message:{room_id:n.room_id}}),f.dispatchEvent(n)},ad=function(n){o.a.debug("Received transcription events: "+JSON.stringify(n)),n.type==="transcription-started"?(n.transcription_type==="room"?f.liveRoomTranscription=!0:f.liveTranscription=!0,f.transcriptionLanguage=n.language):n.type==="transcription-stopped"&&(n.transcription_type==="room"?f.liveRoomTranscription=!1:f.liveTranscription=!1),n=Object(u.e)({type:"transcription-events",message:{data:n}}),f.dispatchEvent(n)};f.extendConferenceDuration=function(n){n=n===void 0?function(){}:n,typeof n=="function"?f.socket.emitEvent(v.a.RoomEvent.extend_conference_duration,{},function(m){n(m)}):o.a.error("extendConferenceDuration() : failed Invalid param. callback is not function")},f.subscribeMediaStats=function(n,m){if(m=m===void 0?function(){}:m,n!==void 0&&typeof n=="string"&&typeof m=="function")if(f.state!==2||f.mediaStatsMode==n||n!="disable"&&n!="notify"&&n!="display"&&n!="notify-display"){var b=f.state!==2?h.a.error_1171:f.mediaStatsMode==n?h.a.error_1188:h.a.error_1155;o.a.error("that.subscribeMediaStats () error: "+JSON.stringify(b)),m(b)}else{var T=function(A){var U=document.querySelectorAll(".stats-container"),$=document.querySelectorAll(".stats-overlay");U.forEach(function(ue){ue!=null&&(ue.style.display=A)}),$.forEach(function(ue){ue!=null&&(ue.style.display=A)})};n=="disable"||f.mediaStatsMode=="disable"?ie.forEach(function(A,U){A.ifCanvas()||A.ifScreen()||q.sendMessage("subscribeStreamStatsForClient",{streamId:U,statsEnabled:n!="disable"},function($){$!=null&&($.status==="Success"&&T(n=="display"||n=="notify-display"?"block":"none"),f.mediaStatsMode=n)})}):(T(n=="display"||n=="notify-display"?"block":"none"),f.mediaStatsMode=n)}else o.a.error("that.subscribeMediaStats () invalid param "),typeof m=="function"&&m(h.a.error_1155)},f.subscribeStreamStatsForClient=function(n,m,b){if(b=b===void 0?function(){}:b,!q)return"Error getting stats - no socket";if(!n)return"Error getting stats - no stream";q.sendMessage("subscribeStreamStatsForClient",{streamId:n.getID(),statsEnabled:m},function(T){if(T){var A=document.querySelectorAll(".stats-container"),U=document.querySelectorAll(".stats-overlay");T.status==="Success"&&m===!0?(f.mediaStatsMode="display",f.subscribeSessionStats=!0,A.forEach(function($){$!=null&&($.style.display="block")}),U.forEach(function($){$!=null&&($.style.display="block")})):(f.mediaStatsMode="disable",f.subscribeSessionStats=!1,A.forEach(function($){$!=null&&($.style.display="none")}),U.forEach(function($){$!=null&&($.style.display="none")})),b(T)}})},f.subscribeForTalkerNotification=function(n,m){if(m=m===void 0?function(){}:m,typeof m=="function"){if(!q)return"Error subscribing - no socket";f.setAdvancedOptions([{id:"speaker-notification",enable:n}],m)}else o.a.error("subscribeForTalkerNotification() invalid param - Callback")},f.manageStatsSubscription=function(n){f.mediaStatsMode!="disable"?(n=f.mediaStatsMode,f.mediaStatsMode="disable",f.subscribeMediaStats(n,function(m){})):f.subscribeSessionStats===!0?(o.a.info("resubscribe session stats"),f.subscribeStreamStatsForClient(n,f.subscribeSessionStats)):o.a.info("session stats not subscribed")},f.reconPubSubFailed=function(n){o.a.info("reconnect publish or subscribe failed",n),St(!0,!1)},f.manageNumTalker=function(){o.a.info("Reset the preferred number of active talkers"),N!==-1?f.setTalkerCount(N,function(n){o.a.info("reset active talker",n)}):o.a.info("Use default prefrence of number of active talkers")},f.startLiveTranscription=function(n,m){var b={};o.a.info("Starting the live transcription for the room"),n===void 0&&m===void 0?(b.language="english_us",b.room=!0):m===void 0?n&&typeof n=="function"?(m=n,b.room=!0,b.language="english_us",o.a.info("Parameter null callback is params",JSON.stringify(b))):(b.room=!0,n===void 0?(o.a.error("Language parameter undefined, going ahead with default english_us"),b.language="english_us"):(b.language=n,o.a.info("Parameter null callback is params",JSON.stringify(b)))):(b.room=!0,b.language=n),f.liveRoomTranscription===!1?f.socket.sendMessage("startLiveTranscription",b,function(T){T&&T.result===0&&(o.a.info("Setting the live transcription for room"),f.liveRoomTranscription=!0),m&&(o.a.info("Sending the callbacks"),m(T))}):m&&m(h.a.error_8001)},f.subscribeForLiveTranscription=function(n,m){var b={};n===void 0||m===void 0?(o.a.error("subscribeForLiveTranscription() invalid parameters"),n!==void 0&&typeof n=="function"&&n(response.error_1155)):n!==void 0&&n.enable!==void 0&&typeof n.enable=="boolean"?n.enable===!0?(f.liveRoomTranscription===!0?b.language=f.transcriptionLanguage:n.language!==void 0&&(b.language=n.language),f.liveTranscription===!1?f.socket.sendMessage("startLiveTranscription",b,function(T){T&&T.result===0&&(f.liveTranscription=!0),m&&m(T)}):m&&m(h.a.error_8001)):(n={client:!0},f.liveTranscription===!0?f.socket.sendMessage("stopLiveTranscription",n,function(T){f.liveTranscription=!1,m(T)}):m(h.a.error_8002)):m(response.error_1155)},f.stopLiveTranscription=function(n){n=n===void 0?function(){}:n;var m={};f.liveRoomTranscription===!0?(m.room=!0,f.socket.sendMessage("stopLiveTranscription",m,function(b){f.liveRoomTranscription=!1,n(b)})):n(h.a.error_8002)},f.makeOutboundCall=function(n,m,b,T){if(T=T===void 0?function(){}:T,typeof T=="function"){var A=!(f.subscription&&f.subscription.sip_outbound===!1),U={};b===void 0?U.silent_join=!0:(b.name!==void 0&&(U.name=b.name),b.early_media!==void 0&&typeof b.early_media=="boolean"?U.early_media=b.early_media:U.silent_join=b.silent_join!==void 0&&typeof b.silent_join=="boolean"?b.silent_join:!0),A===!0?n!=null&&(console.log("Options: "+JSON.stringify(U)),f.socket.sendMessage("makeOutboundCall",{number:n,caller_id:m,options:U},function($){$&&$.result===0?(f.dialOutList.set(n,{initiator:!0,state:"initiated"}),o.a.info("Outbound call initiated for the number: "+n)):$&&$.result===1141?o.a.error("Outbound call is in progress for the number: "+n):o.a.info("Received "+JSON.stringify($)+" for outbound number: "+n),T&&T($)})):!A&&T&&(y.a.error("room-event",_.a.event_general_failed,{message:"makeOutboundCall - not allowed"}),T(h.a.error_1170))}else o.a.error("makeOutboundCall() invalid param - callback")},f.cancelOutboundCall=function(n,m){var b=f.dialOutList.get(n);b===void 0?f.me.role==="moderator"?f.socket.sendMessage("cancelOutboundCall",{number:n},function(T){o.a.info("Cancel outbound call, response received is "+JSON.stringify(T)),y.a.info("room-event",_.a.event_general_success,{message:"cancelOutboundCall - success"}),m&&m(T)}):m&&(y.a.error("room-event",_.a.event_general_failed,{message:"cancelOutboundCall - Insufficient Privileges"}),m({result:1705,msg:"Insufficient Privileges"})):f.me.role==="moderator"||b.initiator===!0?f.socket.sendMessage("cancelOutboundCall",{number:n},function(T){o.a.info("Cancel outbound call, response received is "+JSON.stringify(T)),y.a.info("room-event",_.a.event_general_success,{message:"cancelOutboundCall - success"}),m&&m(T)}):(o.a.error(" You need to be moderator or the initiator of the oubound call to disconnect the call."),y.a.error("room-event",_.a.event_general_failed,{message:"cancelOutboundCall - Insufficient Privileges"}),m&&m({result:1705,msg:"Insufficient Privileges"}))};var dd=function(n){o.a.debug("recieved dialStateEvents");var m=f.dialOutList.get(n.number);switch(n.status){case"dialing":m===void 0&&(m={initiator:!1,state:"dialing"},f.dialOutList.set(n.number,m));break;case"proceeding":case"connected":m.state=n.status;break;case"failed":case"timeout":case"disconnected":f.dialOutList.delete(n.number);break;default:o.a.debug("Unknown response received")}n=Object(u.e)({type:"dial-state-events",message:{number:n.number,state:n.status,description:n.description}}),o.a.debug("Dispatching dial state event: "+JSON.stringify(n)),f.dispatchEvent(n)};f.pingBack=function(n){f.socket.sendMessage("pingBack",{},function(m){n&&n(m)})},f.startClientUsage=function(n,m){f.socket.sendMessage("startClientUsage",n,function(b){m&&m(b)})},f.stopClientUsage=function(n,m){f.socket.sendMessage("stopClientUsage",n,function(b){o.a.info("callback received "+JSON.stringify(b)),m&&m(b)})},f.createBreakOutRoom=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"&&typeof n=="object"&&n.hasOwnProperty("participants")?n&&0<n.participants?f.socket.sendMessage("create-breakout-room",n,function(b){b&&(o.a.info("Create breakout room, result: "+JSON.stringify(b)),y.a.info("room-event",_.a.event_general_success,{message:"createBreakOutRoom - success"}),m(b))}):(o.a.info("Invalid value for participants "+JSON.stringify(n)),y.a.error("room-event",_.a.event_general_failed,{message:"createBreakOutRoom - Invalid value for participants "+JSON.stringify(n)}),m&&m(h.a.error_1155)):o.a.error("createBreakOutRoom() invalid param - callback/RoomDefinition")},f.createAndInviteBreakOutRoom=function(n,m){n&&0<n.max_rooms?(n.force_join=!0,f.socket.sendMessage("create-invite-breakout-room",n,function(b){b&&(o.a.info("Create breakout room, result: "+JSON.stringify(b)),y.a.info("room-event",_.a.event_general_success,{message:"createAndInviteBreakOutRoom - success"}),m(b))})):(o.a.info("Invalid value for participants "+JSON.stringify(n)),y.a.error("room-event",_.a.event_general_failed,{message:"createAndInviteBreakOutRoom - Invalid value for participants "+JSON.stringify(n)}),m&&m(h.a.error_1155))},f.joinBreakOutRoom=function(n,m,b){b=b===void 0?function(){}:b,typeof b=="function"?n&&n.room_id!==null&&n.role!==null?f.socket.sendMessage("join-breakout-room",n,function(T){T&&T.result===0?f.breakOutRoom.joinRoom(T.token,m,function(A,U){A&&(o.a.info("****Join Breakout Room Success****, sending user-joined-event****"+JSON.stringify(A.roomData)),f.socket.sendMessage("user-joined-breakout-room",{name:A.roomData.name}),y.a.info("room-event",_.a.event_general_success,{message:"joinBreakOutRoom - success"}),b&&b(A,null)),U&&(y.a.error("room-event",_.a.event_general_failure,{message:"joinBreakOutRoom - failure"}),b&&b(null,U))}):(o.a.error("Invalid data, room id not found "+JSON.stringify(n)),y.a.error("room-event",_.a.event_general_failure,{message:"joinBreakOutRoom - Invalid data, room id not found "+JSON.stringify(n)}),b&&b(h.a.error_1155))}):(o.a.error("Invalid data, room id not found"+JSON.stringify(n)),y.a.error("room-event",_.a.event_general_failure,{message:"joinBreakOutRoom - Invalid data, room id not found "+JSON.stringify(n)}),b&&b(h.a.error_1155)):o.a.error("joinBreakoutRoom() invalid param - callback")},f.inviteToBreakoutRoom=function(n,m){m=m===void 0?function(){}:m,typeof m=="function"&&typeof n=="object"&&n.hasOwnProperty("room_id")?n===void 0||n.room_id===void 0?(o.a.info("Invalid data, room id not found"+JSON.stringify(n)),y.a.error("room-event",_.a.event_general_failure,{message:"inviteToBreakoutRoom - Invalid data, room id not found "+JSON.stringify(n)}),m&&m(h.a.error_1155)):f.socket.sendMessage("invite-breakout-room",n,function(b){b&&(o.a.info("Create breakout room, result:"+JSON.stringify(b)),y.a.info("room-event",_.a.event_general_success,{message:"inviteToBreakoutRoom - success"}),m&&m(b))}):o.a.error("inviteToBreakoutRoom() invalid param - callback/invitee")},f.clearAllBreakOutSession=function(n){n!==void 0&&typeof n=="function"&&(f.breakOutRoom.disconnectAll(),f.resumeRoom(n))},f.destroyAllBreakOutSession=function(n){f.me.role==="moderator"&&(f.breakOutRoom.destroyAll(),f.resumeRoom(n))};var cd=function(n,m,b){m=m===void 0?{isMobile:!1,broadcast:!0,clientList:[]}:m;var T,A,U,$,ue,Ie,Ne,pe,De,me;return H.asyncExecutePromiseGeneratorProgram(function(Le){if(Le.nextAddress==1)return o.a.info(" init file upload "),T=ce.size,A={messageType:"upload-started",result:0,description:"upload started",response:{uploadStatus:"started",upJobId:T,uploadInfo:{upJobId:T,name:n.name,size:n.size,type:n.type}}},Le.setCatchFinallyBlocks(2),U=new x.a,$={sender:U,status:"started"},ce.set(T,$),ue=Object(u.e)({type:"fs-upload-result",message:A}),f.dispatchEvent(ue),Le.yield(U.upload(n),4);if(Le.nextAddress!=2)return Ie=Le.yieldResult,Ne=Ie.toJSON(),$.status="completed",ce.set(T,$),A.messageType="upload-completed",A.response.uploadStatus=$.status,A.response.upJobId=T,A.description=" upload completed",A.response.uploadInfo={upJobId:T,name:Ne.name,size:Ne.size,speed:Ne.speed,createdAt:Ne.createdAt,dlimit:Ne.dlimit,time:Ne.time,expiresAt:Ne.expiresAt,timeLimit:Ne.timeLimit},m.isMobile===!0?(o.a.info(" file sharing mobile client "),A.response.uploadInfo=Ne,A.response.uploadInfo.upJobId=T,ue=Object(u.e)({type:"fs-upload-result",message:A}),f.dispatchEvent(ue),b(A),Le.return()):(o.a.info(" is mobile  false ",m.isMobile),f.showFsUi===!0&&document.getElementById(J)!==null&&In(Ne,document.getElementById(J),"fs-file-uploaded"),Pi(Ne,"fs-file-available",m.broadcast,m.clientList,function(Ve){A.response.sentStatus=Ve,o.a.info("sent message to all participants: file is available for download ",Ve,"fupload result",A),ue=Object(u.e)({type:"fs-upload-result",message:A}),f.dispatchEvent(ue),b(A)}),ue=Object(u.e)({type:"fs-upload-result",message:A}),f.dispatchEvent(ue),y.a.error("room-event",_.a.event_file_shared_success,{error:{}}),b(A),Le.leaveTryBlock(0));pe=Le.enterCatchBlock(),o.a.info("upload to file server failed",pe),ce.delete(T),A.messageType="upload-failed",A.response.uploadStatus="failed",A.description=" upload failed",A.result=1,De=Object(u.e)({type:"fs-upload-result",message:A}),f.dispatchEvent(De),o.a.error("exception in file upload ",pe),me=h.a.error_1182,o.a.info(" send file failed",me),y.a.error("room-event",_.a.event_file_shared_failed,{error:{}}),b(me),Le.jumpToEnd()})};f.sendFiles=function(n,m,b){if(n=n===void 0?[]:n,m=m===void 0?{isMobile:!1,broadcast:!0,clientList:[]}:m,o.a.info("Send file called options "+JSON.stringify(m)+" file object "+JSON.stringify(n)),f.state===0&&m.isMobile===!1)n=h.a.error_1180,o.a.info(" file upload: room is disconnected, file operations are not allowed"),y.a.error("room-event",_.a.event_file_shared_failed,{message:"file upload: room is disconnected, file operations are not allowed"}),b(n);else if(b&&typeof b=="function"?o.a.info("send file called with callback "):b=function(U){o.a.info("SDK defined callback send file response ",U)},0<n.length){o.a.info("preparing to upload files"),f.filesToUpload=n;try{if(0>=f.filesToUpload[f.filesToUpload.length-1].size)o.a.info(" file size is 0 bytes ",f.filesToUpload[f.filesToUpload.length-1].size),b(h.a.error_1186+f.filesToUpload[f.filesToUpload.length-1].size);else{if(!m.isMobile){if(f.filesToUpload[f.filesToUpload.length-1].size>O){o.a.info(" file upload limit exceeded. max allowed limit is ",O),b(h.a.error_1187+O);return}var T={};T.data=n,f.showFsUi===!0&&document.getElementById(J)!==null&&In(T,document.getElementById(J),"fs-upload-init"),Pi(T,"fs-upload-started",m.broadcast,m.clientList,function(U){o.a.info(" file-upload-started sent to all participants",U)})}var A=new D.a(n);cd(A,m,b),y.a.info("room-event",_.a.event_file_shared_success,{error:{}})}}catch(U){o.a.error("exception occured in send file ",U),n=h.a.error_1182,o.a.info(" send file failed",n),y.a.error("room-event",_.a.event_file_shared_failed,{error:{}}),b(n)}}else m=h.a.error_1185,o.a.info(" input file list to upload is empty",m," length of file array",n.length),b(m)},f.recvFiles=function(n,m,b){m=m===void 0?{isMobile:!1}:m,b=b===void 0?function(){}:b;var T,A,U,$,ue,Ie,Ne,pe,De,me,Le,Ve,He,$i,Yi;return H.asyncExecutePromiseGeneratorProgram(function(nt){switch(nt.nextAddress){case 1:if(typeof b!="function"){o.a.error("recvFiles() invalid param - callback"),nt.jumpTo(0);break}return f.state===0&&m.isMobile===!1?(T=h.a.error_1180,o.a.info(" file download: room is disconnected file operations are not allowed"),b!=null&&b(T),nt.return()):n>R.length?(A=h.a.error_1181,o.a.info(" file download: file is not available"),b!=null&&b(A),nt.return()):(U={messageType:"download-started",result:0,description:"download-started",response:{downloadStatus:"started",jobId:n,downloadInfo:f.availableFiles[n]}},nt.setCatchFinallyBlocks(3),$=R[n],ue=$.url.split("#")[0],nt.yield(fetch(ue),5));case 5:return Ie=nt.yieldResult,Ne=Ie.headers.get("WWW-Authenticate"),pe=Ne.replace("send-v1 ",""),De=new E.a({secretKey:$.secretKey,id:$.id,nonce:pe,requiresPassword:!1}),me={receiver:De,status:"started"},he.set(n,me),Le=Object(u.e)({type:"fs-download-result",message:U}),f.dispatchEvent(Le),nt.yield(De.getMetadata(),6);case 6:return nt.yield(De.download(m),7);case 7:Ve=nt.yieldResult,o.a.info(" file downloaded successfully ",Ve),me.status="completed",he.set(n,me),U.messageType="download-completed",U.response.downloadStatus=me.status,U.response.jobId=n,U.description=" upload completed",Le=Object(u.e)({type:"fs-download-result",message:U}),y.a.info("room-event",_.a.event_file_download_success,{error:{}}),f.dispatchEvent(Le),b!=null&&b(Ve),nt.leaveTryBlock(0);break;case 3:He=nt.enterCatchBlock(),o.a.info(" file download failed",He),he.delete(n),U.messageType="download-failed",U.response.downloadStatus="failed",U.description=" download failed",U.result=1,$i=Object(u.e)({type:"fs-download-result",message:U}),f.dispatchEvent($i),Yi=h.a.error_1183,y.a.error("room-event",_.a.event_file_download_failed,{error:h.a.error_1183.desc}),b!=null&&b(Yi),nt.jumpToEnd()}})},f.mobileSetAvailableFile=function(n,m){o.a.info("mobile sdk wants to set the available file list ",n),n.message.type==="fs-file-available"&&(R.push(n.message),f.availableFiles.push({name:n.message.name,size:n.message.size,speed:n.message.speed,createdAt:n.message.createdAt,dlimit:n.message.dlimit,time:n.message.time,expiresAt:n.message.expiresAt,timeLimit:n.message.timeLimit,index:R.length-1})),m(!0)},f.setFsEndPoint=function(n){n=n===void 0?{isMobile:!1,fsDetails:{}}:n,n.isMobile===!0&&Object(S.f)(n.fsDetails,n.callInfo)},f.inJectFsUI=function(n){(n=n===void 0?{enable:!0,uploadElToAppend:"",recvElToAppend:""}:n)&&n.enable===!0&&n.uploadElToAppend!==""&&document.getElementById(n.uploadElToAppend)!==null&&n.recvElToAppend!==""&&document.getElementById(n.recvElToAppend)!==null?(o.a.info(" show file sharing UI "),f.showFsUi=!0,j=n.uploadElToAppend,J=n.recvElToAppend,f.testFT()):o.a.info(" file UI injection failed")},f.testFT=function(){if(f.showFsUi===!1||f.showFsUi===!0&&document.getElementById(j)===null)o.a.info(" file upload  UI can not be appended");else{var n=document.createElement("INPUT");n.setAttribute("type","file"),n.setAttribute("id","filesID"),document.getElementById(j).appendChild(n),document.getElementById("filesID").addEventListener("change",function(m){m=m.target.files,f.sendFiles(m);for(var b=0,T;T=m[b];b++)console.log(T)},!1),document.getElementById("filesID").addEventListener("click",function(m){m.target.value=null},!1)}},f.cancelUploads=function(n,m,b){n=n===void 0?!1:n;var T={description:"failed",result:1};if(m===void 0&&n===!1){if(o.a.error(" upJobId must be defined for cancelling a particular upload "),T.description="upJobId is undefined.",T.result=1,b!==void 0)return b(T)}else if(n===!0){for(m=H.makeIterator(ce),n=m.next();!n.done;n=m.next())n=H.makeIterator(n.value),n.next(),n=n.next().value,n.status==="started"?(n.sender.cancel(),o.a.info(" running jobs are",n)):o.a.info(" status is ",n.status);T.description="Cancelled all uploads",T.result=0,b!==void 0&&b(T)}else m!=null&&(o.a.info("cancelling specified upload with id",m),n=ce.get(m),n!=null?n.status==="started"?(o.a.info("canceled upload",m),n.sender.cancel(),T.description="Cancelled upload "+m,T.result=0,b!=null&&b(T)):n.status==="completed"&&(o.a.info("upload can not be cancelled because it is already completed"),T.description="upload is already completed.",T.result=1,b!=null&&b(T)):(o.a.info("Uplode id is invalid"),T.description="Uplode id is invalid. ",T.result=1,b!=null&&b(T)))},f.cancelDownloads=function(n,m,b){n=n===void 0?!1:n;var T={description:"failed",result:1};if(m===void 0&&n===!1){if(o.a.error("ID must be defined for cancelling a particular upload "),T.description="ID is undefined.",T.result=1,b!==void 0)return b(T)}else if(n===!0){for(m=H.makeIterator(he),n=m.next();!n.done;n=m.next())n=H.makeIterator(n.value),n.next(),n=n.next().value,n.status==="started"?(n.receiver.cancel(),o.a.info(" running jobs are",n)):o.a.info(" status is ",n.status);T.description="Cancelled all downloads",T.result=0,b!==void 0&&b(T)}else m!=null&&(o.a.info("cancelling specified download with id",m),m=m.toString(),n=he.get(m),n!=null?n.status==="started"?(o.a.info("cancelling download",m),n.receiver.cancel(),T.description="Cancelled download "+m,T.result=0,b!=null&&b(T)):n.status==="completed"&&(o.a.info("Download can not be cancelled because it is already completed"),T.description="download is already completed.",T.result=1,b!=null&&b(T)):(o.a.info("download id is invalid"),T.description="Download id is invalid. ",T.result=1,b!=null&&b(T)))},f.testFtMobile=function(n){n=n===void 0?!1:n;var m=document.createElement("INPUT");m.setAttribute("type","file"),m.setAttribute("id","files-mobile");var b="";b=n===!1?document.getElementById("chat_btn"):document.body,b.appendChild(m),document.getElementById("files-mobile").addEventListener("change",function(T){T=T.target.files,o.a.info("mobile list of files to upload",T[0]),f.filesToUpload=T;for(var A=0,U;U=T[A];A++)console.log("iterating file list",U)},!1)};var ld=function(n){o.a.debug("onstreamingnotification events"+JSON.stringify(n)),n=Object(u.e)({type:n.type,message:n.data}),f.dispatchEvent(n)},ud=function(n){o.a.debug("socketOnHlsStreamingNotificationToPublisher events"+JSON.stringify(n)),n=Object(u.e)({type:n.type,message:n.data}),f.dispatchEvent(n)},fd=function(n){n=Object(u.e)({type:n.type,message:n.data}),f.dispatchEvent(n)},pd=function(n){n=Object(u.e)({type:n.type,message:n.data}),f.dispatchEvent(n)};if(t.a.browserEngineCheck()!=="IE")q.on(v.a.SocketEvent.onAddStream,Ee.bind(null,Ei)),q.on(v.a.SocketEvent.media_engine_connecting,Ee.bind(null,Ri)),q.on(v.a.SocketEvent.signaling_message_peer,Ee.bind(null,$s)),q.on(v.a.SocketEvent.publish_me,Ee.bind(null,xi)),q.on(v.a.SocketEvent.unpublish_me,Ee.bind(null,Ys)),q.on(v.a.SocketEvent.onBandwidthAlert,Ee.bind(null,Mi)),q.on(v.a.SocketEvent.onBandwidthEvents,Ee.bind(null,Ks)),q.on(v.a.SocketEvent.onSelfBandwidthAlert,Ee.bind(null,Oi)),q.on(v.a.SocketEvent.onDataStream,Ee.bind(null,Xs)),q.on(v.a.SocketEvent.onUpdateAttributeStream,Ee.bind(null,Zs)),q.on(v.a.SocketEvent.onRemoveStream,Ee.bind(null,Ai)),q.on(v.a.SocketEvent.disconnect,Ee.bind(null,ea)),q.on(v.a.SocketEvent.connection_failed,Ee.bind(null,ta)),q.on(v.a.SocketEvent.error,Ee.bind(null,na)),q.on(v.a.SocketEvent.onRemoveTrack,Ee.bind(null,qs)),q.on(v.a.SocketEvent.user_connected,Ee.bind(null,Ci)),q.on(v.a.SocketEvent.user_updated,Ee.bind(null,Js)),q.on(v.a.SocketEvent.user_disconnected,Ee.bind(null,Ti)),q.on(v.a.SocketEvent.user_subscribed,Ee.bind(null,ki)),q.on(v.a.SocketEvent.user_unsubscribed,Ee.bind(null,Ii)),q.on(v.a.SocketEvent.floor_management_events,Ee.bind(null,ca)),q.on(v.a.SocketEvent.dial_state_events,Ee.bind(null,dd)),q.on(v.a.UserEvent.user_awaited,Ee.bind(null,ma)),q.on(v.a.SocketEvent.data_stream_room,Ee.bind(null,Qs)),q.on(v.a.RoomEvent.room_awaited,Ee.bind(null,pa)),q.on(v.a.RoomEvent.room_connected,Ee.bind(null,ha)),q.on(v.a.RoomEvent.room_disconnected,Ee.bind(null,Fi)),q.on(v.a.RoomEvent.room_record_on,Ee.bind(null,Ma)),q.on(v.a.RoomEvent.room_record_off,Ee.bind(null,Aa)),q.on(v.a.RoomEvent.change_layout,Ee.bind(null,Na)),q.on(v.a.RoomEvent.new_active_talker,Ee.bind(null,Ua)),q.on(v.a.RoomEvent.hard_mute_audio,Ee.bind(null,ga)),q.on(v.a.RoomEvent.hard_unmute_audio,Ee.bind(null,ya)),q.on(v.a.RoomEvent.hard_mute_video,Ee.bind(null,_a)),q.on(v.a.RoomEvent.hard_unmute_video,Ee.bind(null,Sa)),q.on(v.a.RoomEvent.share_started,Ee.bind(null,ba)),q.on(v.a.RoomEvent.share_stopped,Ee.bind(null,Ta)),q.on(v.a.RoomEvent.screen_share_override,Ee.bind(null,ka)),q.on(v.a.RoomEvent.stop_sharing,Ee.bind(null,Ea)),q.on(v.a.RoomEvent.update_layout,Ee.bind(null,Ca)),q.on(v.a.RoomEvent.share_state_events,Ee.bind(null,Qa)),q.on(v.a.RoomEvent.custom_data_saved,Ee.bind(null,Wa)),q.on(v.a.RoomEvent.custom_data_updated,Ee.bind(null,Ha)),q.on(v.a.RoomEvent.canvas_started,Ee.bind(null,Ya)),q.on(v.a.RoomEvent.canvas_stopped,Ee.bind(null,Ka)),q.on(v.a.RoomEvent.canvas_state_events,Ee.bind(null,Xa)),q.on(v.a.RoomEvent.generic_events,Ee.bind(null,Za)),q.on(v.a.RoomEvent.user_role_changed,Ee.bind(null,ed)),q.on(v.a.RoomEvent.switch_codec,Ee.bind(null,wa)),q.on(v.a.RoomEvent.invite_breakout_room,Ee.bind(null,rd)),q.on(v.a.RoomEvent.user_joined_breakout_room,Ee.bind(null,id)),q.on(v.a.RoomEvent.user_left_breakout_room,Ee.bind(null,od)),q.on(v.a.RoomEvent.breakout_room_destroyed,Ee.bind(null,sd)),q.on(v.a.RoomEvent.transcription_events,Ee.bind(null,ad)),q.on(v.a.UserEvent.user_audio_muted,Ee.bind(null,Ia)),q.on(v.a.UserEvent.user_audio_unmuted,Ee.bind(null,Ra)),q.on(v.a.UserEvent.user_video_muted,Ee.bind(null,xa)),q.on(v.a.UserEvent.user_video_unmuted,Ee.bind(null,Oa)),q.on(v.a.SocketEvent.room_management_events,Ee.bind(null,nd)),q.on(v.a.SocketEvent.hard_mute,Ee.bind(null,la)),q.on(v.a.SocketEvent.hard_mute_room,Ee.bind(null,fa)),q.on(v.a.SocketEvent.hard_unmute_room,Ee.bind(null,ua)),q.on(v.a.SocketEvent.onStatSubscription,Ee.bind(null,ia)),q.on(v.a.SocketEvent.onStreamingNotification,Ee.bind(null,fd)),q.on(v.a.SocketEvent.onHlsStreamingNotification,Ee.bind(null,ld)),q.on(v.a.SocketEvent.onHlsStreamingNotificationToPublisher,Ee.bind(null,ud)),q.on(v.a.SocketEvent.onLiveRecordingNotification,Ee.bind(null,pd)),q.on(v.a.SocketEvent.onRoomLiveRecordingOn,Ee.bind(null,Pa)),q.on(v.a.SocketEvent.onRoomLiveRecordingOff,Ee.bind(null,Da)),q.on(v.a.SocketEvent.onRoomLiveRecordingFailed,Ee.bind(null,La)),q.on(v.a.SocketEvent.switched_room,Ee.bind(null,td)),q.on(v.a.RoomEvent.room_transcription_on,Ee.bind(null,ja)),q.on(v.a.RoomEvent.room_transcription_off,Ee.bind(null,Ba)),q.on(v.a.RoomEvent.self_transcription_on,Ee.bind(null,Fa)),q.on(v.a.RoomEvent.self_transcription_off,Ee.bind(null,Va));else{document.getElementById("WebrtcEverywherePluginId")===null&&f.installPlugin();var Rt=document.getElementById("WebrtcEverywherePluginId");Rt.addEventListener(v.a.SocketEvent.onAddStream,function(n){for(arg in n.data.args)Ei(n.data.args[arg])}),Rt.addEventListener(v.a.SocketEvent.onRemoveStream,function(n){for(arg in n.data.args)Ai(n.data.args[arg])}),Rt.addEventListener(v.a.SocketEvent.media_engine_connecting,function(n){for(arg in n.data.args)Ri(n.data.args[arg])}),Rt.addEventListener(v.a.SocketEvent.publish_me,function(n){for(arg in n.data.args)xi(n.data.args[arg])}),Rt.addEventListener(v.a.SocketEvent.user_connected,function(n){for(arg in n.data.args)Ci(n.data.args[arg])}),Rt.addEventListener(v.a.SocketEvent.user_disconnected,function(n){for(arg in n.data.args)Ti(n.data.args[arg])}),Rt.addEventListener(v.a.SocketEvent.user_subscribed,function(n){for(arg in n.data.args)ki(n.data.args[arg])}),Rt.addEventListener(v.a.SocketEvent.user_unsubscribed,function(n){for(arg in n.data.args)Ii(n.data.args[arg])})}return f}o.a.info("Failed - Webrtc support is missing ")}},function(e,i,d){function t(s){return s=s===void 0?100:s,new Promise(function(l){return setTimeout(l,s)})}var u=d(29),a=!(typeof Intl!="object"||!Intl||typeof Intl.NumberFormat!="function"||typeof navigator!="object"),c=["bytes","kb","mb","gb"],r=function(){throw Error("uninitialized translate function. call setTranslate first")};e.exports={fadeOut:function(s){return s=document.querySelector(s).classList,s.remove("effect--fadeIn"),s.add("effect--fadeOut"),t(300)},delay:t,allowedCopy:function(){return document.queryCommandSupported?document.queryCommandSupported("copy"):!1},bytes:function(s){if(1>s)return"0B";var l=Math.min(Math.floor(Math.log10(s)/3),c.length-1);s=Number(s/Math.pow(1024,l));var g=Math.floor(s)===s?0:1,o=s.toFixed(g);if(a)try{o=s.toLocaleString(locale(),{minimumFractionDigits:g,maximumFractionDigits:g})}catch{}return r("fileSize",{num:o,units:r(c[l])})},percent:function(s){if(a)try{return s.toLocaleString(locale(),{style:"percent"})}catch{}return Math.floor(100*s)+"%"},number:function(s){return a?s.toLocaleString(locale()):s.toString()},copyToClipboard:function(s){var l=document.createElement("input");if(l.setAttribute("value",s),l.contentEditable=!0,l.readOnly=!0,document.body.appendChild(l),navigator.userAgent.match(/iphone|ipad|ipod/i)){var g=document.createRange();g.selectNodeContents(l);var o=getSelection();o.removeAllRanges(),o.addRange(g),l.setSelectionRange(0,s.length)}else l.select();return s=document.execCommand("copy"),document.body.removeChild(l),s},arrayToB64:function(s){return u.fromByteArray(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},b64ToArray:function(s){return u.toByteArray(s+"===".slice((s.length+3)%4))},isFile:function(s){return/^[0-9a-fA-F]{10,16}$/.test(s)},openLinksInNewTab:function(s,l){return l=l===void 0?!0:l,s=s||Array.from(document.querySelectorAll("a:not([target])")),l?s.forEach(function(g){g.setAttribute("target","_blank"),g.setAttribute("rel","noopener noreferrer")}):s.forEach(function(g){g.removeAttribute("target"),g.removeAttribute("rel")}),s},browserName:function(){try{return/firefox/i.test(navigator.userAgent)?"firefox":/edge/i.test(navigator.userAgent)?"edge":/trident/i.test(navigator.userAgent)?"ie":/chrome/i.test(navigator.userAgent)?"chrome":/safari/i.test(navigator.userAgent)?"safari":/send android/i.test(navigator.userAgent)?"android-app":"other"}catch{return"unknown"}},streamToArrayBuffer:function(s,l){var g,o,v,h,k,_,y,S,x,D,E;return H.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:return g=s.getReader(),I.yield(g.read(),2);case 2:if(o=I.yieldResult,!l){I.jumpTo(3);break}v=new Uint8Array(l),h=0;case 4:if(o.done){I.jumpTo(5);break}return v.set(o.value,h),h+=o.value.length,I.yield(g.read(),6);case 6:o=I.yieldResult,I.jumpTo(4);break;case 5:return I.return(v.buffer);case 3:k=[],_=0;case 7:if(o.done){I.jumpTo(8);break}return k.push(o.value),_+=o.value.length,I.yield(g.read(),9);case 9:o=I.yieldResult,I.jumpTo(7);break;case 8:for(y=0,S=new Uint8Array(_),x=H.makeIterator(k),D=x.next();!D.done;D=x.next())E=D.value,S.set(E,y),y+=E.length;return I.return(S.buffer)}})},list:function(s,l,g){return l=l===void 0?"":l,g=g===void 0?"":g,s=s.map(function(o){return html(Or,g,o)}),html(xr,l,s)},secondsToL10nId:function(s){return 3600>s?{id:"timespanMinutes",num:Math.floor(s/60)}:86400>s?{id:"timespanHours",num:Math.floor(s/3600)}:{id:"timespanDays",num:Math.floor(s/86400)}},timeLeft:function(s){if(1>s)return{id:"linkExpiredAlt"};s=Math.floor(s/1e3/60);var l=Math.floor(s/60),g=Math.floor(l/24);return 1<=g?{id:"expiresDaysHoursMinutes",days:g,hours:l%24,minutes:s%60}:1<=l?{id:"expiresHoursMinutes",hours:l,minutes:s%60}:l===0?s===0?{id:"expiresMinutes",minutes:"< 1"}:{id:"expiresMinutes",minutes:s}:null},platform:function(){return typeof Android=="object"?"android":"web"},encryptedSize:function(s,l,g){return g=(g===void 0?16:g)+1,21+s+g*Math.ceil(s/((l===void 0?65536:l)-g))},setTranslate:function(s){r=s}}},function(e,i){function d(u){this.max_=this.count_=this.sum_=this.startTime_=0,this.rampUpThreshold_=u,this.rampUpTime_=1/0}var t;d.prototype={add:function(u,a){this.startTime_===0&&(this.startTime_=u),this.sum_+=a,this.max_=Math.max(this.max_,a),this.rampUpTime_===1/0&&a>this.rampUpThreshold_&&(this.rampUpTime_=u),this.count_+=1},getAverage:function(){return this.count_===0?0:Math.round(this.sum_/this.count_)},getMax:function(){return this.max_},getRampUpTime:function(){return Math.round(this.rampUpTime_-this.startTime_)}},e.exports={arrayAverage:function(u){for(var a=u.length,c=0,r=0;r<a;r++)c+=u[r];return Math.floor(c/a)},arrayMax:function(u){return u.length===0?NaN:Math.max.apply(Math,H.arrayFromIterable(u))},arrayMin:function(u){return u.length===0?NaN:Math.min.apply(Math,H.arrayFromIterable(u))},enumerateStats:function(u,a,c){var r={audio:{local:{audioLevel:0,bytesSent:0,clockRate:0,codecId:"",mimeType:"",packetsSent:0,payloadType:0,timestamp:0,trackId:"",transportId:""},remote:{audioLevel:0,bytesReceived:0,clockRate:0,codecId:"",fractionLost:0,jitter:0,mimeType:"",packetsLost:-1,packetsReceived:0,payloadType:0,timestamp:0,trackId:"",transportId:""}},video:{local:{bytesSent:0,clockRate:0,codecId:"",firCount:0,framesEncoded:0,frameHeight:0,framesSent:-1,frameWidth:0,nackCount:0,packetsSent:-1,payloadType:0,pliCount:0,qpSum:0,timestamp:0,trackId:"",transportId:""},remote:{bytesReceived:-1,clockRate:0,codecId:"",firCount:-1,fractionLost:0,frameHeight:0,framesDecoded:0,framesDropped:0,framesReceived:0,frameWidth:0,nackCount:-1,packetsLost:-1,packetsReceived:0,payloadType:0,pliCount:-1,qpSum:0,timestamp:0,trackId:"",transportId:""}},connection:{availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,localCandidateId:"",localCandidateType:"",localIp:"",localPort:0,localPriority:0,localProtocol:"",remoteCandidateId:"",remoteCandidateType:"",remoteIp:"",remotePort:0,remotePriority:0,remoteProtocol:"",requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,timestamp:0,totalRoundTripTime:0}};return u&&(u.forEach((function(s,l){switch(s.type){case"outbound-rtp":s.hasOwnProperty("trackId")&&(s.trackId.indexOf(a.audio)!==1&a.audio!==""?(r.audio.local.bytesSent=s.bytesSent,r.audio.local.codecId=s.codecId,r.audio.local.packetsSent=s.packetsSent,r.audio.local.timestamp=s.timestamp,r.audio.local.trackId=s.trackId,r.audio.local.transportId=s.transportId):s.trackId.indexOf(a.video)!==1&a.video!==""&&(r.video.local.bytesSent=s.bytesSent,r.video.local.codecId=s.codecId,r.video.local.firCount=s.firCount,r.video.local.framesEncoded=s.framesEncoded,r.video.local.framesSent=s.framesSent,r.video.local.packetsSent=s.packetsSent,r.video.local.pliCount=s.pliCount,r.video.local.qpSum=s.qpSum,r.video.local.timestamp=s.timestamp,r.video.local.trackId=s.trackId,r.video.local.transportId=s.transportId));break;case"inbound-rtp":s.hasOwnProperty("trackId")&&(s.trackId.indexOf(c.audio)!==1&c.audio!==""&&(r.audio.remote.bytesReceived=s.bytesReceived,r.audio.remote.codecId=s.codecId,r.audio.remote.fractionLost=s.fractionLost,r.audio.remote.jitter=s.jitter,r.audio.remote.packetsLost=s.packetsLost,r.audio.remote.packetsReceived=s.packetsReceived,r.audio.remote.timestamp=s.timestamp,r.audio.remote.trackId=s.trackId,r.audio.remote.transportId=s.transportId),s.trackId.indexOf(c.video)!==1&c.video!==""&&(r.video.remote.bytesReceived=s.bytesReceived,r.video.remote.codecId=s.codecId,r.video.remote.firCount=s.firCount,r.video.remote.fractionLost=s.fractionLost,r.video.remote.nackCount=s.nackCount,r.video.remote.packetsLost=s.packetsLost,r.video.remote.packetsReceived=s.packetsReceived,r.video.remote.pliCount=s.pliCount,r.video.remote.qpSum=s.qpSum,r.video.remote.timestamp=s.timestamp,r.video.remote.trackId=s.trackId,r.video.remote.transportId=s.transportId));break;case"candidate-pair":s.hasOwnProperty("availableOutgoingBitrate")&&(r.connection.availableOutgoingBitrate=s.availableOutgoingBitrate,r.connection.bytesReceived=s.bytesReceived,r.connection.bytesSent=s.bytesSent,r.connection.consentRequestsSent=s.consentRequestsSent,r.connection.currentRoundTripTime=s.currentRoundTripTime,r.connection.localCandidateId=s.localCandidateId,r.connection.remoteCandidateId=s.remoteCandidateId,r.connection.requestsReceived=s.requestsReceived,r.connection.requestsSent=s.requestsSent,r.connection.responsesReceived=s.responsesReceived,r.connection.responsesSent=s.responsesSent,r.connection.timestamp=s.timestamp,r.connection.totalRoundTripTime=s.totalRoundTripTime)}}).bind()),u.forEach((function(s){switch(s.type){case"track":s.hasOwnProperty("trackIdentifier")&&(s.trackIdentifier.indexOf(a.video)!==1&a.video!==""&&(r.video.local.frameHeight=s.frameHeight,r.video.local.framesSent=s.framesSent,r.video.local.frameWidth=s.frameWidth),s.trackIdentifier.indexOf(c.video)!==1&c.video!==""&&(r.video.remote.frameHeight=s.frameHeight,r.video.remote.framesDecoded=s.framesDecoded,r.video.remote.framesDropped=s.framesDropped,r.video.remote.framesReceived=s.framesReceived,r.video.remote.frameWidth=s.frameWidth),s.trackIdentifier.indexOf(a.audio)!==1&a.audio!==""&&(r.audio.local.audioLevel=s.audioLevel),s.trackIdentifier.indexOf(c.audio)!==1&c.audio!==""&&(r.audio.remote.audioLevel=s.audioLevel));break;case"codec":s.hasOwnProperty("id")&&(s.id.indexOf(r.audio.local.codecId)!==1&a.audio!==""&&(r.audio.local.clockRate=s.clockRate,r.audio.local.mimeType=s.mimeType,r.audio.local.payloadType=s.payloadType),s.id.indexOf(r.audio.remote.codecId)!==1&c.audio!==""&&(r.audio.remote.clockRate=s.clockRate,r.audio.remote.mimeType=s.mimeType,r.audio.remote.payloadType=s.payloadType),s.id.indexOf(r.video.local.codecId)!==1&a.video!==""&&(r.video.local.clockRate=s.clockRate,r.video.local.mimeType=s.mimeType,r.video.local.payloadType=s.payloadType),s.id.indexOf(r.video.remote.codecId)!==1&c.video!==""&&(r.video.remote.clockRate=s.clockRate,r.video.remote.mimeType=s.mimeType,r.video.remote.payloadType=s.payloadType));break;case"local-candidate":s.hasOwnProperty("id")&&s.id.indexOf(r.connection.localCandidateId)!==-1&&(r.connection.localIp=s.ip,r.connection.localPort=s.port,r.connection.localPriority=s.priority,r.connection.localProtocol=s.protocol,r.connection.localType=s.candidateType);break;case"remote-candidate":s.hasOwnProperty("id")&&s.id.indexOf(r.connection.remoteCandidateId)!==-1&&(r.connection.remoteIp=s.ip,r.connection.remotePort=s.port,r.connection.remotePriority=s.priority,r.connection.remoteProtocol=s.protocol,r.connection.remoteType=s.candidateType)}}).bind())),r},doGetUserMedia:function(u,a,c){try{navigator.mediaDevices.getUserMedia(u).then(function(r){r.onremovetrack=function(){},a(r)}).catch(function(r){c(r)})}catch(r){c(r.message)}},setTimeoutWithProgressBar:function(u,a){var c=window.performance.now(),r=setInterval(function(){var g=window.performance.now();t.setProgress(100*(g-c)/a)},100),s=function(){clearInterval(r),t.setProgress(100),u()},l=setTimeout(s,a);return function(){clearTimeout(l),s()}},setActiveTest:function(u){t=u},appendSourceId:function(u,a,c){u!==""&&(c[a]===!0?c[a]={optional:[{sourceId:u}]}:typeof c[a]=="object"&&(typeof c[a].optional>"u"&&(c[a].optional=[]),c[a].optional.push({sourceId:u})))},StatisticsAggregate:d,enumerateStatsFirefox:function(u){var a={audio:{local:{bytesSent:0,packetsSent:0},remote:{bytesReceived:-1,packetsReceived:0,packetsLost:-1,jitter:0,roundTripTime:0,timestamp:0}},video:{local:{bytesSent:0,packetsSent:-1,bitrateMean:0,bitrateStdDev:0,qpSum:0},remote:{bytesReceived:-1,packetsReceived:0,packetsLost:-1,bitrateMean:0,bitrateStdDev:0,roundTripTime:0,timestamp:0}},connection:{bytesSent:0,bytesReceived:0,timestamp:0}};return u&&u.forEach((function(c,r){switch(c.type){case"outbound-rtp":c.mediaType=="audio"?(a.audio.local.bytesSent=c.bytesSent,a.audio.local.packetsSent=c.packetsSent):c.mediaType=="video"&&(a.video.local.bytesSent=c.bytesSent,a.video.local.packetsSent=c.packetsSent,a.video.local.bitrateMean=c.bitrateMean,a.video.local.bitrateStdDev=c.bitrateStdDev,a.video.local.qpSum=c.qpSum);break;case"remote-outbound-rtp":c.mediaType=="audio"?(a.audio.local.bytesSent=c.bytesSent,a.audio.local.packetsSent=c.packetsSent):c.mediaType=="video"&&(a.video.local.bytesSent=c.bytesSent,a.video.local.packetsSent=c.packetsSent);break;case"inbound-rtp":c.mediaType=="audio"?(a.audio.remote.bytesReceived=c.bytesReceived,a.audio.remote.packetsLost=c.packetsLost,a.audio.remote.packetsReceived=c.packetsReceived,a.audio.remote.jitter=c.jitter):c.mediaType=="video"&&(a.video.remote.bytesReceived=c.bytesReceived,a.video.remote.packetsLost=c.packetsLost,a.video.remote.packetsReceived=c.packetsReceived,a.video.remote.bitrateMean=c.bitrateMean,a.video.remote.bitrateStdDev=c.bitrateStdDev,a.video.remote.qpSum=c.qpSum);break;case"remote-inbound-rtp":c.mediaType=="audio"?(a.audio.remote.bytesReceived=c.bytesReceived,a.audio.remote.packetsLost=c.packetsLost,a.audio.remote.packetsReceived=c.packetsReceived,a.audio.remote.jitter=c.jitter,a.audio.remote.roundTripTime=c.roundTripTime,a.audio.remote.timestamp=c.timestamp):c.mediaType=="video"&&(a.video.remote.bytesReceived=c.bytesReceived,a.video.remote.packetsLost=c.packetsLost,a.video.remote.packetsReceived=c.packetsReceived,a.video.remote.roundTripTime=c.roundTripTime,a.video.remote.timestamp=c.timestamp);break;case"candidate-pair":a.connection.bytesReceived=c.bytesReceived,a.connection.bytesSent=c.bytesSent,a.connection.timestamp=c.timestamp}}).bind()),a}}},function(e,i,d){var t=d(4),u=d(42),a=d(27),c=d(7),r=d(0),s=d(26),l=d(6),g=d(5);d(28);var o=d(8),v=d(9);e=d(1);var h=d.n(e),k=d(51),_=void 0;h.a.noise_analysis==1&&h.a.browser_info.device_type=="desktop"&&function(){return H.asyncExecutePromiseGeneratorProgram(function(y){if(y.nextAddress==1)return y.yield(Object(k.a)(),2);_=y.yieldResult,y.jumpToEnd()})}(),i.a=function(y,S){function x(w){return 0<w.length?w.reduce(function(M,N){return M+N})/w.length:0}function D(w){return w.filter(function(M){return 0<=M})}function E(){if(0<p.scoreArrayVoice.length){if(.6<x(p.scoreArrayVoice).toFixed(2)){r.a.info("Your microphone is muted");var w=Object(t.f)({type:"talking-while-muted",stream:p});p.dispatchEvent(w)}p.scoreArrayVoice.length=0,p.processing_voice_while_mute=!1}}function I(){if(0<p.scoreArrayNoise.length){var w=x(p.scoreArrayNoise),M=x(p.audioLevelArray);.2>w&&.04<M&&(r.a.info("noise-detected"),w=Object(t.f)({type:"noise-detection",stream:p}),p.dispatchEvent(w)),p.scoreArrayNoise.length=0,p.processing_noise_detection=!1}}if(h.a.is_supported()){var p=Object(t.c)(S);p.config=S,p.stream=S.stream,p.url=S.url,p.recording=S.recording,p.recordingId=void 0,p.room=void 0,p.showing=!1,p.local=!1,p.video=S.video,p.audio=S.audio,p.screen=S.screen,p.videoSize=S.videoSize,p.videoFrameRate=S.videoFrameRate,p.extensionId=S.extensionId,p.desktopStreamId=S.desktopStreamId,p.recordingId=S.recordingId,p.clientId=S.clientId,p.videoMutedDueToBw=!1,p.hardAudioMuted=!1,p.hardVideoMuted=!1,p.softVideoMuted=!1,p.selfMuteVideo=!1,p.selfMuteAudio=!1,p.ATVideoMuted=!1,p.selfPausedVideo=!1,p.selfPausedAudio=!1,p.processingVideoMute=!1,p.attributes=S.attributes,p.Connection=y===void 0?c.a:y,p.playerDivs=[],p.canvas=S.canvas,p.transactions=new Map,p.audioStream=S.audioStream,p.audioStreamClone=void 0,p.videoStream=S.videoStream,p.recordedBlobs=[],p.negotiatedMedia={audio:S.audio!=null,video:S.video!=null},p.state="idle";var B={},P=!1,z=!1,te=!1;p.inputMediaSource={audio:{},video:{user:null,self:null,selected:"self"}},p.config.videoMuted==null&&(p.config.videoMuted=!1),p.config.audioMuted==null&&(p.config.audioMuted=!1),p.abwdEnabled=!0,p.abwdNotification="sdk",p.abwdLanguage="en";var W="none",K="none",re=!1,f="none",ae;p.maxVideoBwKbpsReqByUser=0,p.maxVideoBwKbpsReqByServer=0,p.maxVideoBwKbpsSet=0,p.reconnect=!1,p.reconnectAttempt=0,p.reconnectsTotal=0,p.pcmInputBuf=void 0,p.pcmOutputBuf=void 0,p.pcmInputIndex=void 0,p.rnn=void 0,p.bufferResidue=new Float32Array([]),p.scoreArrayVoice=[],p.scoreArrayNoise=[],p.audioLevelArray=[],p.processing_voice_while_mute=!1,p.processing_noise_detection=!1,p.audioContext=void 0;var ce={videoFps:{set:0,max:{user:0,server:0},min:{user:0,server:0}},videoBw:{set:0,max:{user:0,server:0},min:{user:0,server:0}}};S.local===void 0||S.local===!0?p.local=!0:P=z=!0,p.isAudioMuted=function(){return P},p.isVideoMuted=function(){return z||p.config.videoMuted},p.setID=function(w){(S.streamID=w)&&p.player&&p.player.streamUpdated(w)},p.getID=function(){return p.local&&!S.streamID?"local":S.streamID},p.getAttributes=function(){return S.attributes},p.setAttributes=function(w){p.local?p.emit(Object(t.f)({type:"internal-set-attributes",stream:p,attrs:w})):r.a.error("Error! Stream Object is not published. Failed to update attributes.")},p.updateLocalAttributes=function(w){S.attributes=w},p.ifAudio=function(){return S.audio!==!1&&S.audio!==void 0},p.ifVideo=function(){return S.video!==!1&&S.video!==void 0},p.ifData=function(){return S.data!==!1&&S.data!==void 0},p.ifScreen=function(){return S.screen},p.ifMedia=function(){return S.audio!==!1&&S.audio!==void 0||S.video!==!1&&S.video!==void 0||S.screen!==!1},p.ifExternal=function(){return p.url!==void 0||p.recording!==void 0},p.ifCanvas=function(){return S.canvas},p.sendData=function(w){p.local&&p.ifData()?p.emit(Object(t.f)({type:"internal-send-data",stream:p,msg:w})):(r.a.error("Error! Stream Object is not published. Failed to send data."),v.a.error("stream-event",o.a.event_send_data_failed,{error:"Error! Stream Object is not published. Failed to send data."}))};var he=function(){p.Connection.mediaDeviceUpdate({mic:p.audio,cam:p.video,speaker:!1},!0,function(w){var M=w.current,N=w.added;w=w.removed;var F=function(le,Ce,fe,be,Re,C){var V=!1,G=!1,ne=typeof be=="object"?be.deviceId.exact:be.deviceId;be=be.groupId;var ge=typeof Re=="object"?Re.deviceId.exact:Re.deviceId;Re=Re.groupId;for(var Te in Ce)ne!="default"&&Ce[Te].deviceId!=ne||Ce[Te].groupId!=be||(V=!1),ge!="default"&&Ce[Te].deviceId!=ge||Ce[Te].groupId!=Re||(G=!1);for(var ke in le)ne!="default"&&le[ke].deviceId!=ne||le[ke].groupId!=be||(V=!0),ge!="default"&&le[ke].deviceId!=ge||le[ke].groupId!=Re||(G=!0);if(!V||!G)for(var Ae in fe)ne!="default"&&fe[Ae].deviceId!=ne||fe[Ae].groupId!=be||(V=!0),ge!="default"&&fe[Ae].deviceId!=ge||fe[Ae].groupId!=Re||(G=!0);if((ne!=ge||be!=Re||!C)&&G)return ge;if(!V){if(fe.length)return fe[0].deviceId;if(le.length)return le[0].deviceId}};if(S.params){var Y=null,Q=null;if(S.params.set.video&&p.videoStream){var ee=!1;p.videoStream.getVideoTracks().forEach(function(le){le.readyState!="ended"&&(ee=!0)}),Y=F(M.cam,w.cam,N.cam,S.params.set.video,S.params.config.video,ee)}else r.a.error("spec.params.set.video not defined");if(S.params.set.audio&&p.audioStream){var Z=!1;p.audioStream.getAudioTracks().forEach(function(le){le.readyState!="ended"&&(Z=!0)}),Q=F(M.mic,w.mic,N.mic,S.params.set.audio,S.params.config.audio,Z)}else r.a.error("spec.params.set.audio not defined");var ie,oe;Q!=null?(p.selfMuteAudio||p.hardAudioMuted||(ie=Q),p.selectedMicId=Q):p.selectedMicId=S.params.set.audio.deviceId,Y!=null?(p.selfMuteVideo||p.hardVideoMuted||(oe={deviceId:Y}),p.selectedCam={deviceId:Y}):p.selectedCam={deviceId:typeof S.params.set.video.deviceId=="object"?S.params.set.video.deviceId.exact:S.params.set.video.deviceId},oe==null&&ie==null||se(p,ie,oe,!0,function(le){le.result===l.a.error_000.result?(le={},oe!=null&&(ve(p.inputMediaSource.video[p.inputMediaSource.video.selected]),le.video={deviceId:oe.deviceId}),ie!=null&&(le.audio={deviceId:ie}),le=Object(t.f)({type:"media-device-updated",evntDetails:le}),p.dispatchEvent(le)):(r.a.error("setMediaDevicesTrack() returned failure : "+JSON.stringify(le)),le.result===l.a.error_1145&&h.a.browser_info.device_type=="mobile"&&p.room!==void 0&&p.room.onMediaDeviceStateChanged(p,{type:"mic",state:"inactive",error:le}))})}else r.a.error("spec.params not defined")})},ye=function(w){h.a.browser_info.device_type!="mobile"&&(w.width={},w.height={},p.videoSize!==void 0?(w.width.min=p.videoSize[0],w.height.min=p.videoSize[1],w.width.max=p.videoSize[2],w.height.max=p.videoSize[3]):(w.width.min=h.a.video_resolution_range.Default.min.wdith,w.height.min=h.a.video_resolution_range.Default.min.height,w.width.max=h.a.video_resolution_range.Default.max.width,w.height.max=h.a.video_resolution_range.Default.max.height),c.a.browserEngineCheck()==="chrome-stable"&&(w.width.ideal=w.width.max,w.height.ideal=w.height.max))};p.init=function(){try{if(r.a.info("requested getUsermedia options: "+JSON.stringify(S)),S.audio||S.video||S.screen||S.canvas||S.url===void 0){r.a.info("Note! Requested access to local media");var w=!1,M=!1,N=!1;S.video&&S.video!==!1&&(S.disableGUMOptions!=null&&S.disableGUMOptions?w=!0:(w={},ye(w),p.videoFrameRate!==void 0&&(w.frameRate={min:p.videoFrameRate[0],max:p.videoFrameRate[1]}),typeof S.video=="object"&&(S.video.deviceId!==void 0&&S.video.deviceId!==""&&(w.deviceId=c.a.browserEngineCheck()!=="safari"?{exact:S.video.deviceId}:S.video.deviceId),S.video.facingMode!==void 0&&S.video.facingMode!==""&&h.a.browser_info.device_type=="mobile"&&(w.facingMode=S.video.facingMode)))),S.screen&&S.screen!==!1&&(w=!0),S.canvas&&S.canvas!==!1&&(N={},N=p.videoSize===void 0?{width:{min:p.videoSizeForCanvas[0],max:p.videoSizeForCanvas[2]},height:{min:p.videoSizeForCanvas[1],max:p.videoSizeForCanvas[3]},canvasId:S.div,fps:S.fps}:{width:{min:p.videoSize[0],max:p.videoSize[2]},height:{min:p.videoSize[1],max:p.videoSize[3]},canvasId:S.div,fps:S.fps}),S.audio&&S.audio!==!1&&(S.disableGUMOptions!=null&&S.disableGUMOptions?M=!0:(M={echoCancellation:{exact:!0},googEchoCancellation:{exact:!0},autoGainControl:{exact:!0},noiseSuppression:{exact:!0},googHighpassFilter:{exact:!0},googExperimentalNoiseSuppression:{exact:!0},googExperimentalEchoCancellation:{exact:!0},googExperimentalAutoGainControl:{exact:!0}},typeof S.audio=="object"&&S.audio.deviceId&&S.audio.deviceId!==""&&(M.deviceId=S.audio.deviceId)));var F={video:w,audio:M,screen:S.screen,canvas:N,fake:S.fake,extensionId:p.extensionId,desktopStreamId:p.desktopStreamId};S.screen&&S.screen!==!1&&(F.fps=S.fps),S.canvas&&S.canvas!==!1?(p.state="initing",p.Connection.GetCanvasStream(F,function(Y){p.videoStream=Y,p.stream=Y,r.a.debug("Got stream from canvas opt: "+F+" refreshFn: "+S.refreshFn),p.state="inited",p.videoStream.getTracks().forEach(function(Q){r.a.info("getTracks canvas: ",Q),Q.onended=function(){p.videoStream.getTracks().forEach(function(Z){Z.onended=null});var ee=Object(t.f)({type:"stream-ended",stream:p,msg:Q.kind});p.dispatchEvent(ee)}}),Y=Object(t.f)({type:"media-access-allowed",stream:p}),p.dispatchEvent(Y),v.a.info("stream-event",o.a.event_media_access_success,{error:{}})},function(Y){r.a.error("GetCanvasStream: ",Y);var Q=Object(t.f)({type:"media-access-denied",msg:Y});p.dispatchEvent(Q),v.a.error("stream-event",o.a.event_media_access_denied,{error:Y})})):(r.a.debug("Note!! calling getUserMedia "+JSON.stringify(F)),!S.screen&&p.local&&S.params==null&&(S.params={},S.params.config=JSON.parse(JSON.stringify(F)),S.params.set=JSON.parse(JSON.stringify(F))),p.state="initing",O(F,function(Y,Q){Q?(p.ifScreen(),r.a.error("Error! local media access Failed - share: "+p.ifScreen()+" Err : "+JSON.stringify(Q)),p.dispatchEvent(Object(t.f)({type:"media-access-denied",msg:Q})),v.a.error("stream-event",o.a.event_media_access_denied,{error:Q})):(S.params==null&&(S.params={set:{},config:{}}),r.a.info("Note!!!!! User has granted access to local media."),v.a.info("stream-event",o.a.event_media_access_success,{error:{}}),p.stream=Y,_&&(p.audioContext=new(window.AudioContext||window.webkitAudioContext)),p.stream.getTracks().forEach(function(ee,Z){ee.kind==="video"?(p.videoStream=Y,p.inputMediaSource.video.self=Y,r.a.info(" GUM success vidtrack muted : "+ee.muted+" state: "+ee.readyState+" enabled: "+ee.enabled),typeof S.video!="object"&&(S.video={}),S.video.trackIndex=Z,ee.getSettings().deviceId&&(S.video.deviceId=ee.getSettings().deviceId,S.params.set.video={},S.params.config.video={},S.params.config.video.deviceId=c.a.browserEngineCheck()!=="safari"?{exact:S.video.deviceId}:S.video.deviceId,S.params.config.video.groupId=ee.getSettings().groupId,S.params.set.video=JSON.parse(JSON.stringify(S.params.config.video))),r.a.info(" Checking and setting soft video muted : "+p.config.videoMuted+" firstGumcall: "+p.firstGumCall),p.config.videoMuted&&p.firstGumCall===void 0&&(ee.enabled=!1,p.softVideoMuted=!0,r.a.debug(" soft muted video "))):ee.kind==="audio"&&(p.audioStream=Y,_&&(p.audioStreamClone=Y.clone(),p.audioStreamClone.getVideoTracks().forEach(function(ie){ie.enabled=!1,ie.onended=null,ie.stop()})),typeof S.audio!="object"&&(S.audio={}),S.audio.trackIndex=Z,ee.getSettings().deviceId&&(S.audio.deviceId=ee.getSettings().deviceId,S.params.set.audio={},S.params.config.audio={},S.params.config.audio.deviceId=(c.a.browserEngineCheck(),S.audio.deviceId),S.params.config.audio.groupId=ee.getSettings().groupId,S.params.set.audio=JSON.parse(JSON.stringify(S.params.config.audio))),p.config.audioMuted&&p.firstGumCall===void 0&&(ee.enabled=!1,P=!0,p.selfMuteAudio=!0,r.a.debug(" soft muted aduio"))),!p.local||p.ifScreen()||p.ifCanvas()||h.a.browser_info.device_type=="mobile"||c.a.browserEngineCheck()=="safari"||he(),r.a.info("getTracks",ee," kind: ",ee.kind),ee.onended=function(){p.stream.getTracks().forEach(function(oe){oe.onended=null});var ie=Object(t.f)({type:"stream-ended",stream:p,msg:ee.kind});p.dispatchEvent(ie)}}),p.videoStream==null&&(p.config.videoMuted=!0),p.audioStream==null&&(p.audio=!1,p.config.audioMuted=!0),S.audio!==!0&&S.video!==!0||(p.audio!==!1||p.ifScreen)&&p.video!==!1||(Q={},p.video===!1&&(Q.video=p.video),p.audio===!1&&(Q.audio=p.audio),Q=Object(t.f)({type:"media-access-failed",evntDetails:Q}),p.dispatchEvent(Q)),p.state="inited",Q=Object(t.f)({type:"media-access-allowed",stream:p}),p.dispatchEvent(Q),v.a.info("stream-event",o.a.event_media_access_success,{error:{}})),p.fistGumCall=!0}))}else w=Object(t.f)({type:"media-access-allowed"}),p.dispatchEvent(w),v.a.info("stream-event",o.a.event_media_access_success,{error:{}})}catch(Y){r.a.error("Error! Failed to get access to local media. Error was "+Y+"."),w=Object(t.f)({type:"media-access-denied",msg:Y}),p.dispatchEvent(w),v.a.error("stream-event",o.a.event_media_access_denied,{error:Y})}},p.initRemoteStream=function(w){p.local||(p.stream=w,(p.ifAudio()||p.audioOnly)&&(p.audioStream=new MediaStream,p.stream.getAudioTracks().forEach(function(M){p.audioStream.addTrack(M)})),p.mediaStream=new MediaStream,p.stream.getTracks().forEach(function(M){p.mediaStream.addTrack(M)}))},p.close=function(){p.local&&(p.room!==void 0&&p.room.unpublish(p),p.hide(),p.videoStream!==void 0&&(p.videoStream.getVideoTracks().forEach(function(w){w.enabled=!1,w.onended=null,w.stop()}),p.videoStream=void 0),p.audioStream!==void 0&&(p.audioStream.getAudioTracks().forEach(function(w){w.onended=null,w.stop()}),p.audioStream=void 0),p.pc&&p.pc.peerConnection!==void 0&&p.pc.peerConnection.close(),p.stream=void 0)},p.disableTrack=function(w){p.room.removeTrack(w)},p.attachMediaStream=function(w,M){if(!w)return null;if(w.isWebRtcPlugin)return w.src=M,w;if(w.nodeName.toLowerCase()==="video"){if(r.a.info("Checked element is video"),!w.pluginObj&&M){r.a.info("Plugins and stream validated");var N=document.createElement("object");if(Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(window,"ActiveXObject")||"ActiveXObject"in window){r.a.info("Browser IE validated");var F=document.createElement("param");F.setAttribute("name","windowless"),F.setAttribute("value",!0),N.appendChild(F),N.setAttribute("classid","CLSID:7FD49E23-C8D7-4C4F-93A1-F7EACFA1EC53")}else r.a.info("Other browser got"),N.setAttribute("type","application/webrtc-everywhere");w.pluginObj=N,N.setAttribute("className",w.className),N.setAttribute("innerHTML",w.innerHTML),F=w.getAttribute("width");var Y=w.getAttribute("height"),Q=w.getBoundingClientRect();F||(F=Q.right-Q.left),Y||(Y=Q.bottom-Q.top),"getComputedStyle"in window&&(r.a.info("computing style"),Q=window.getComputedStyle(w,null),F||Q.width=="auto"||Q.width=="0px"||(F=Q.width),Y||Q.height=="auto"||Q.height=="0px"||(Y=Q.height)),F?N.setAttribute("width",F):N.setAttribute("autowidth",!0),Y?N.setAttribute("height",Y):N.setAttribute("autoheight",!0),document.body.appendChild(N),w.parentNode&&(r.a.info("parent node found"),w.parentNode.replaceChild(N,w),document.body.appendChild(w),w.style.visibility="hidden")}return w.pluginObj&&(r.a.info("plugin object found"),w.pluginObj.bindEventListener("play",function(ee){w.pluginObj&&(w.pluginObj.getAttribute("autowidth")&&ee.videoWidth&&w.pluginObj.setAttribute("width",ee.videoWidth),w.pluginObj.getAttribute("autoheight")&&ee.videoHeight&&w.pluginObj.setAttribute("height",ee.videoHeight))}),w.pluginObj.src=M),w.pluginObj}if(w.nodeName.toLowerCase()==="audio")return w};var R=1,O=function(w,M,N){N=N===void 0?!0:N;var F=JSON.parse(JSON.stringify(w));r.a.info("getusermedia called  opt "+JSON.stringify(F)),(w=p.Connection.getSupportedDeviceConstraints())&&F.video&&typeof F.video=="object"&&(h.a.browser_info.device_type=="mobile"?(w.hasOwnProperty("facingMode")&&F.video.facingMode?F.video.deviceId&&delete F.video.deviceId:(w.hasOwnProperty("deviceId")&&F.video.deviceId||F.video.deviceId&&delete F.video.deviceId,F.video.facingMode&&delete F.video.facingMode),F.video.height&&delete F.video.height,F.video.width&&delete F.video.width):w.hasOwnProperty("deviceId")&&F.video.deviceId?F.video.facingMode&&delete F.video.facingMode:w.hasOwnProperty("facingMode")&&F.video.facingMode?F.video.deviceId&&delete F.video.deviceId:(F.video.deviceId&&delete F.video.deviceId,F.video.facingMode&&delete F.video.facingMode),w.hasOwnProperty("frameRate")||F.video.frameRate==null||delete F.video.frameRate),r.a.debug("calling gum with options: "+JSON.stringify(F)),p.Connection.GetUserMedia(F,function(Y){r.a.info("getUserMedia success"),v.a.info("stream-event",o.a.event_gum_success,{error:{}}),R=0,M(Y)},function(Y){r.a.error("Get User Media screen  failed streamId: ",p.getID()," Error ",Y),Y=Object(s.a)(Y),F.video.height&&F.video.height.min&&F.video.width&&F.video.width.min&&(r.a.info("getUserMedia failed error: "+Y.result+" min Res: "+F.video.height.min+"X"+F.video.width.min),v.a.error("stream-event",o.a.event_gum_failed,{error:Y}));var Q={};switch(Object.assign(Q,F),Y.result){case 1143:case 1144:r.a.error(" ERROR : "+Y.result+" newOpt: "+JSON.stringify(Q)),Q.screen||S.media_order&&S.media_order=="exact"?(r.a.error("getUserMedia() Failed with device denied/unvailable . no retry "),N=!1):Q.video&&Q.audio?(r.a.error("getUserMedia() Failed with device denied/unvailable .. retrying with audio only"),Q.video=!1):N=!1;break;case 1147:case 1148:case 1149:switch(Q.video.height.min){case 720:Q.video.height.min=540,Q.video.width.min=960;break;case 540:Q.video.height.min=540,Q.video.width.min=960;break;case 480:Q.video.height.min=360,Q.video.width.min=480;break;default:N=!1}break;case 1145:r.a.error(" ERROR : "+Y.result+" Opt: "+JSON.stringify(Q)+" check and retry");break;default:r.a.error(" ERROR Default : "+Y.result+" newOpt: "+JSON.stringify(Q)),N=!1}!p.ifScreen()&&N===!0&&5>=R?(R+=1,r.a.info("getUserMedia() failed retry count: "+R),O(Q,M)):(r.a.error("getUserMedia() failed for screen or no retry allowed  or retry count exceeded: "),R=0,M(void 0,Y))})};p.setQualityLayers=function(w){p.pc&&p.stream&&p.local&&p.pc.peerConnection&&p.pc.peerConnection.getSenders?(r.a.info(" that.setQulaityLayers numSpatialLayers:"+w),p.pc.peerConnection.getSenders().forEach(function(M){if(M.track&&M.track.kind==="video"){var N=M.getParameters();if(N!=null&&N.encodings!=null){for(var F=0;F<N.encodings.length;F++)w>F?(r.a.info(" Layer :"+F+" enabled"),N.encodings[F].active=!0):(r.a.info(" Layer :"+F+" disabled"),N.encodings[F].active=!1);M.setParameters(N)}else r.a.info(" that.setQulaityLayers: no sender params/encodings-  Not in simulcast mod")}})):r.a.info("setQulaityLayers Failed invalid stream :"+p.stream+" local: "+p.local)},p.onConnectionStateChanged=function(w){if(r.a.debug(" that.onConnectionStateChanged() active : "+w+" "),p.local)if(w)if(p.ifCanvas()){if(S.refreshFn!==void 0){S.refreshFn();var M=S.fps>S.maxCanvasRefreshRate?1e3/S.maxCanvasRefreshRate:1e3/S.fps;r.a.info(" that.onConnectionStateChanged ()  timerVal : "+M+" spec.fps: "+S.fps),p.refreshTimer=setInterval(function(){r.a.debug("refresh called timer "),S.refreshFn()},M)}}else p.ifScreen()||(p.negotiatedMedia.video=p.videoStream!=null,p.negotiatedMedia.audio=p.audioStream!=null,p.video&&p.negotiatedMedia.video&&(0>=p.maxVideoLayers?(ce.videoBw.set=ce.videoFps.set=0,j(ce.videoBw,ce.videoFps)):p.videoStream.getVideoTracks().forEach(function(N){var F=N.getConstraints();F.height.max=p.videoSize[3],F.height.ideal=p.videoSize[3],F.width.max=p.videoSize[2],F.width.ideal=p.videoSize[2],F.frameRate={max:26},N.applyConstraints(F).then(function(){r.a.debug("applying constraints for simulcast video success")}).catch(function(Y){r.a.error(" error in applying constraints for simulcast video error: "+Y)})})));else p.ifCanvas()&&p.refreshTimer!=null&&(clearInterval(p.refreshTimer),p.refreshTimer=void 0);w&&(p.state="connected")},p.setVideoParamsRange=function(w,M,N,F,Y){1<p.maxVideoLayers||(Y?(w!==void 0&&(ce.videoBw.max.server=parseInt(w)),N!==void 0&&(ce.videoFps.max.server=parseInt(N)),M!==void 0&&(ce.videoBw.min.server=parseInt(M)),F!==void 0&&(ce.videoFps.min.server=parseInt(F))):(w!==void 0&&(ce.videoBw.max.user=parseInt(w)),N!==void 0&&(ce.videoFps.max.user=parseInt(N)),M!==void 0&&(ce.videoBw.min.user=parseInt(M)),F!==void 0&&(ce.videoFps.min.user=parseInt(F))),r.a.debug("setVideoParamsRange() id: "+p.getID()+" :: "+w+": "+M+":"+N+":"+F+":"+Y),j(ce.videoBw,ce.videoFps))};var j=function(w,M){var N=0,F=0;if(N=w.max.user&&w.max.user<w.min.user?w.min.user:w.max.user&&(!w.max.server||w.max.user<=w.max.server)?w.max.user:w.max.server&&w.max.server<w.min.user?w.min.user:w.max.server&&w.max.server<w.min.server?w.min.server:w.max.server,F=M.max.user<M.min.user?M.min.user:M.max.user&&(!M.max.server||M.max.user<=M.max.server)?M.max.user:M.max.server&&M.max.server<M.min.user?M.min.user:M.max.server&&M.max.server<M.min.server?M.min.server:M.max.server,p.pc==null||p.pc.peerConnection==null||p.room==null)r.a.error("setVideoParams() not set pc/room not defined "+JSON.stringify(ce)+" b2Set: "+N+" fps2Set: "+F);else{if(N&&w.min.server!=N&&w.max.server!=N){var Y=[{id:"publisher-video-bw-update",streamId:p.getID(),min:w.min.user,max:w.max.user}];p.room.setAdvancedOptions(Y,function(){})}if(r.a.debug(" setVideoParams: id: "+p.getID()+" b2Set "+N+" fps2Set "+F+" bwrange: "+JSON.stringify(w)),N&&w.set!=N||F&&M.set!=F)if(Y=c.a.browserEngineCheck(),Y==="chrome-stable"||Y==="mozilla"&&!c.a.isCurrentVerLess(g.a.constant.FIREFOX_VERSION_SENDER_ENCODINGS_PARAM_SUPPORT)||Y==="safari"&&!c.a.isCurrentVerLess(g.a.constant.SAFARI_VERSION_SENDER_ENCODINGS_PARAM_SUPPORT)){p.pc.peerConnection.getSenders().forEach(function(ee){if(ee.track&&ee.track.kind==="video"){var Z=ee.getParameters();if(Z!=null){Z.encodings||(Z.encodings=[{}]);for(var ie=0;ie<Z.encodings.length;ie++)N&&(r.a.info(" that.setMaxVideoBitarte: bw: ",N),Z.encodings[ie].maxBitrate=1e3*N,w.set=N),F&&(r.a.info(" that.setMaxVideoFramerate: fps: ",F),Z.encodings[ie].maxFramerate=F,M.set=F);ee.setParameters(Z)}else r.a.error(" that.setMaxVideoBitarte: no sender params/encodings-  ")}});var Q=function(ee,Z,ie,oe,le,Ce,fe,be){if(oe<ie.length){var Re=ee.getConstraints(),C=!1;Z.height&&(Z.height.max=ie[oe].res[le].height,Z.height.ideal=ie[oe].res[le].height,Re.height&&Re.height.max&&Re.height.max==Z.height.max||(C=!0)),Z.width&&(Z.width.max=ie[oe].res[le].width,Z.width.ideal=ie[oe].res[le].width,Re.width&&Re.width.max&&Re.width.max==Z.width.max||(C=!0)),Z.frameRate={max:Ce},Re.frameRate&&Re.frameRate.max&&Re.frameRate.max==Z.frameRate.max||(C=!0),C?ee.applyConstraints(Z).then(function(){be(Z,fe)}).catch(function(V){fe.push({res:ie[oe].res[le],error:V}),ie[oe].res.length<le+1?le++:(oe++,le=0,Ce=30),Q(ee,Z,ie,oe,le,Ce,fe,be)}):be(Z,fe)}else be(null,fe)};p.ifScreen()||p.ifCanvas()||Y==="safari"||p.videoStream.getVideoTracks().forEach(function(ee){var Z=h.a.getCamResTableToCheck(w.set),ie=ee.getConstraints();Z==null?(r.a.error("reverting kbps: "+w.set+" constraints: curr: "+JSON.stringify(ie)+" original: "+p.videoSize[3]+" X "+p.videoSize[2]),ie.height==null||ie.width==null||ie.height.max!=null&&ie.width.max!=null&&p.videoSize[3]==ie.height.max&&p.videoSize[2]==ie.width.max||(ie.height.max=p.videoSize[3],ie.height.ideal=p.videoSize[3],ie.width.max=p.videoSize[2],ie.width.ideal=p.videoSize[2],ie.frameRate={max:26},ee.applyConstraints(ie).then(function(){r.a.info("apply constraints to original value")}).catch(function(oe){r.a.error("failed  - apply constraints to original value")}))):(ie.height&&ie.width||(ie.width={min:h.a.video_resolution_range.Default.min.width},ie.height={min:h.a.video_resolution_range.Default.min.height}),Q(ee,ie,Z.resTable,0,0,Z.fps,[],function(oe,le){r.a.debug("setVideoQualityConstraints() "+(oe!=null?"Succes":"Failure")+" constraints old: "+JSON.stringify(ie)+" new: "+JSON.stringify(oe)+"  errors: "+JSON.stringify(le))}))})}else r.a.error("Setting Max Bw  using sdp reneg videoBwKbps= ",videoBwKbps),Y={maxVideoBW:N,Sdp:!0},w.set=N,p.pc.updateSpec(Y,function(){r.a.info("that.setMaxVideoBitarte: sdp reneg success")}),v.a.warn("stream-event",o.a.event_incompatible_browser,{message:"Setting Max Bw  using traditional way of sdp renegotiation videoBwKbps= "+N});else r.a.debug("setVideoParams Failed id: "+p.getID()+" b2Set "+N+" bwrange: "+JSON.stringify(w))}};p.setVideoQualityParams=function(w,M,N,F,Y){p.videoStream.getVideoTracks().forEach(function(Q){var ee=Q.getConstraints();if(r.a.info("RESOLUTION Set track before constariants : "+JSON.stringify(ee)),w!=null&&M!=null&&(ee.width==null&&(ee.width={}),ee.height==null&&(ee.height={}),ee.width.min=w,ee.height.min=M),F!=null&&N!=null&&(ee.width==null&&(ee.width={}),ee.height==null&&(ee.height={}),ee.height.max=F,ee.width.max=N,c.a.browserEngineCheck()==="chrome-stable"&&(ee.width.ideal=N,ee.height.ideal=F)),ee.width.min&&ee.height.min&&ee.width.max&&ee.height.max&&ee.width.min*ee.height.min>ee.width.max*ee.height.max)return r.a.error("setVideoResolution() : constraint mismatch : "+JSON.stringify(ee)),!1;Y!=null&&(ee.frameRate={max:Y}),Q.applyConstraints(ee).then(function(){console.log("RESOLUTION Set track constariants success : "+JSON.stringify(ee))}).catch(function(Z){r.a.error("RESOLUTION Set trac constraints failed: "+Z+" constraints: "+JSON.stringify(ee)),v.a.error("stream-event",o.a.event_general_failed,{message:"RESOLUTION Set trac constraints failed: "+Z+" constraints: "+JSON.stringify(ee)})})})},p.switchMicrophone=function(w,M,N,F){F=F===void 0?!0:F,p.negotiatedMedia.audio?J("setMicrophoneTrack")==0?(v.a.warn("stream-event",o.a.event_general_failed,{message:"switchMicrophone - Previous similar request in process"}),N(l.a.error_1140)):(p.selfMuteAudio||p.hardAudioMuted)&&F?(B.switchMicrophone={newStream:w,deviceInfo:M},q("setMicrophoneTrack"),N({result:0,msg:"set but not active"})):se(w,M,void 0,!0,function(Y){q("setMicrophoneTrack"),r.a.error("setMediaDevicesTrack() in switch mic returned failure : "+JSON.stringify(Y)+"device type: "+h.a.browser_info.device_type),Y.result===l.a.error_1145&&h.a.browser_info.device_type=="mobile"?p.room!==void 0?p.room.onMediaDeviceStateChanged(w,{type:"mic",state:"inactive",error:Y}):N(Y):N(Y.result===0?w:Y)}):(v.a.error("stream-event",o.a.event_general_failed,{message:"switchMicrophone - Stream not found"}),N(l.a.error_1159))},p.switchCamera=function(w,M,N,F,Y){if(N=N===void 0?function(){}:N,F=F===void 0?!0:F,Y=Y===void 0?!0:Y,typeof N=="function")if(p.stream==null)N(l.a.error_1159);else if(p.stream.getVideoTracks().length!==1)N(l.a.error_1159);else if(p.negotiatedMedia.video)if(J("setCameraTrack")==0)v.a.warn("stream-event",o.a.event_general_failed,{message:"switchCamera - Previous similar request in process"}),N(l.a.error_1140);else if((p.selfMuteVideo||p.hardVideoMuted)&&!te&&F)B.switchCamera={newStream:w,deviceInfo:M},N({result:0,msg:"set but not active"}),q("setCameraTrack");else{var Q={};if(M!=null){if(typeof M=="string")Q.deviceId=M;else if(typeof M=="object"){if(M.deviceId!=null&&typeof M.deviceId=="string"&&(Q.deviceId=M.deviceId),M.facingMode!=null&&typeof M.facingMode=="string"&&(Q.facingMode=M.facingMode),Q.deviceId==null&&Q.facingMode==null){r.a.error("Error switchCamera(), error: invalid camera options "+JSON.stringify(M)),v.a.error("stream-event",o.a.event_general_failed,{message:"Error switchCamera(), error: invalid camera options "+JSON.stringify(M)}),N(l.a.error_1155);return}}else{r.a.error("Error switchCamera(), error: invalid camera options type "+JSON.stringify(M)),v.a.error("stream-event",o.a.event_general_failed,{message:"Error switchCamera(), error: invalid camera options type "+JSON.stringify(M)}),N(l.a.error_1155),q("setCameraTrack");return}p.stream.getVideoTracks().forEach(function(ee){ee.enabled=!1,ee.stop(),ee.onended=se(w,void 0,Q,Y,function(Z){var ie=!1;w.stream.getVideoTracks().forEach(function(oe){ie=oe.readyState}),Z.result===0?(ve(p.inputMediaSource.video[p.inputMediaSource.video.selected]),q("setCameraTrack"),N(Z.result===0?w:Z)):Z.result===1150?ie=="live"&&(ve(p.inputMediaSource.video[p.inputMediaSource.video.selected]),q("setCameraTrack"),N(w)):(q("setCameraTrack"),r.a.error("setMediaDevicesTrack() switch cam returned failure : "+JSON.stringify(Z)+"device type: "+h.a.browser_info.device_type),Z.result===l.a.error_1145&&h.a.browser_info.device_type=="mobile"?p.room!==void 0?p.room.onMediaDeviceStateChanged(w,{type:"cam",state:"inactive",error:Z}):N(Z):(q("setCameraTrack"),N(Z)))})})}else r.a.error("Error switchCamera(), error: camera options undefined"),v.a.error("stream-event",o.a.event_general_failed,{message:"Error switchCamera(), error: camera options undefined"}),N(l.a.error_1155),q("setCameraTrack")}else v.a.error("stream-event",o.a.event_general_failed,{message:"switchCamera - Stream not found"}),N(l.a.error_1159);else r.a.error("switchCamera() invalid param - callback")},p.switchMediaDevices=function(w,M,N,F){if(p.negotiatedMedia.audio&&p.negotiatedMedia.video){if(N!==void 0){if(p.selfMuteVideo||p.hardVideoMuted){v.a.warn("stream-event",o.a.event_general_failed,{message:"switchMediaDevices - Media device switching not allowed in video mute state"}),F(l.a.error_1189);return}if(J("setCameraTrack")==0){v.a.warn("stream-event",o.a.event_general_failed,{message:"switchMediaDevices - Previous similar request in process"}),F(l.a.error_1140);return}}if(M!==void 0){if(p.selfMuteAudio||p.hardAudioMuted){v.a.warn("stream-event",o.a.event_general_failed,{message:"switchMediaDevices - Media device switching not allowed in audio mute state"}),F(l.a.error_1189),N!==void 0&&q("setCameraTrack");return}if(J("setMicrophoneTrack")==0){N!==void 0&&q("setCameraTrack"),F(l.a.error_1140),v.a.warn("stream-event",o.a.event_general_failed,{message:"switchMediaDevices - Previous similar request in process"});return}}var Y={};if(N!=null)if(typeof N=="string")Y.deviceId=N;else if(typeof N=="object"){if(N.deviceId!=null&&typeof N.deviceId=="string"&&(Y.deviceId=N.deviceId),N.facingMode!=null&&typeof N.facingMode=="string"&&(Y.facingMode=N.facingMode),Y.deviceId==null&&Y.facingMode==null){r.a.error("Error switchMediaDevices(), error: invalid camera options "+JSON.stringify(N)),v.a.error("stream-event",o.a.event_general_failed,{message:"Error switchMediaDevices(), error: invalid camera options "+JSON.stringify(N)}),F(l.a.error_1155);return}}else{r.a.error("Error switchMediaDevices(), error: invalid camera options type "+JSON.stringify(N)),v.a.error("stream-event",o.a.event_general_failed,{message:"Error switchMediaDevices(), error: invalid camera options type "+JSON.stringify(N)}),F(l.a.error_1155);return}else Y=void 0;p.stream==null?(F(l.a.error_1159),q("setCameraTrack")):p.stream.getVideoTracks().forEach(function(Q){Q.stop(),Q.onended=se(w,M,Y,!0,function(ee){var Z=!1;w.stream.getVideoTracks().forEach(function(ie){Z=ie.readyState}),ee.result===0?(ve(p.inputMediaSource.video[p.inputMediaSource.video.selected]),q("setCameraTrack"),q("setMicrophoneTrack"),F(ee.result===0?w:ee)):ee.result===1150?(ve(p.inputMediaSource.video[p.inputMediaSource.video.selected]),F(w),Z=="live"?(ve(p.inputMediaSource.video[p.inputMediaSource.video.selected]),q("setCameraTrack"),q("setMicrophoneTrack"),F(w)):(q("setCameraTrack"),q("setMicrophoneTrack"),F(ee))):(q("setCameraTrack"),q("setMicrophoneTrack"),console.log("setMediaDevicesTrack() switch media dev  failure : "+JSON.stringify(ee)+"device type: "+h.a.browser_info.device_type),ee.result===l.a.error_1145&&h.a.browser_info.device_type=="mobile"&&p.room!==void 0?p.room.onMediaDeviceStateChanged(w,{type:"mic",state:"inactive",error:ee}):F(ee))})})}else v.a.error("stream-event",o.a.event_general_failed,{message:"switchMediaDevices - Stream not found"}),F(l.a.error_1159)},p.setSpeaker=function(w,M){var N=p.getPlayerId();document.querySelector("#"+N.stream)!==void 0&&document.querySelector("#"+N.stream)!==null&&document.querySelectorAll("#"+N.stream).forEach(function(F){typeof F.setSinkId=="function"&&w!=null&&F.setSinkId(w),M!=null&&(F.volume=M)})};var J=function(w){return p.transactions.get(w)?(r.a.error("Invalid state: previous request in progress. transId: "+w),v.a.warn("stream-event",o.a.event_general_failed,{message:"setTrasactionIfNotExists - Invalid state: previous request in progress. transId: "+w}),!1):(p.transactions.set(w,{state:"inprogress"}),!0)},q=function(w){return p.transactions.delete(w)},se=function(w,M,N,F,Y){var Q=new MediaStream;if(!w||w.local!==!0||w.ifScreen()||w.ifCanvas())r.a.info("Cannot switch devices over invalid stream"),v.a.error("stream-event",o.a.event_general_failed,{message:"setMediaDevicesTrack - Cannot switch devices over invalid stream"}),Y(l.a.error_1155);else{var ee={};ee.audio=M!==void 0?M!=="none"?{deviceId:M}:!0:!1,N!==void 0?(ee.video={},ye(ee.video),N.deviceId!=null&&N.deviceId!=="none"&&(ee.video={deviceId:{exact:N.deviceId}}),N.facingMode!=null&&(ee.video={facingMode:{exact:N.facingMode}}),p.videoFrameRate!==void 0&&(ee.video.frameRate={min:p.videoFrameRate[0],max:p.videoFrameRate[1]})):ee.video=!1,O(ee,function(Z,ie){ie==null?(w.pc&&w.pc.peerConnection&&F&&(N?(ie=p.inputMediaSource.video.selected==="user"?p.inputMediaSource.video.user:Z,p.inputMediaSource.video.self=Z):ie=Z,_e(w,M!==void 0,N!==void 0,ie,p.inputMediaSource.video.selected=="self")),N?(w.videoStream=Z,S.params.set.video&&typeof S.params.set.video=="object"||(S.params.set.video={}),p.inputMediaSource.video.self=Z,Z.getVideoTracks().forEach(function(oe,le){Q.addTrack(oe),S.params.set.video.groupId=oe.getSettings().groupId}),N.deviceId!=null?N.deviceId!=="none"&&(S.video.deviceId=N.deviceId,S.params.set.video.deviceId=JSON.parse(JSON.stringify(ee.video.deviceId))):Z.getVideoTracks().forEach(function(oe,le){oe.getSettings().deviceId!=null&&(S.video.deviceId=oe.getSettings().deviceId),Q.addTrack(oe)}),r.a.log("Got video access from devices:- ",S.video.deviceId),v.a.info("stream-event",o.a.event_gum_success,{message:"Got video access from devices:- "+S.video.deviceId})):w.videoStream&&w.videoStream.getVideoTracks().forEach(function(oe,le){Q.addTrack(oe)}),M?(w.audioStream=Z,Z.getAudioTracks().forEach(function(oe,le){Q.addTrack(oe),S.params.set.audio.groupId=oe.getSettings().groupId}),M!=="none"&&(S.audio&&(S.audio.deviceId=M),S.params.set.audio.deviceId=JSON.parse(JSON.stringify(ee.audio.deviceId))),r.a.log("Got audio access from devices:- ",M),v.a.info("stream-event",o.a.event_gum_success,{message:"Got audio access from devices:- "+M})):w.audioStream&&w.audioStream.getAudioTracks().forEach(function(oe){return Q.addTrack(oe)}),Y(l.a.error_000)):(Z=N?N.deviceId:"null",r.a.info("Error getUserMedia(), error: "+ie+" cam: "+Z+" mic: ",M),v.a.error("stream-event",o.a.event_gum_failed,{cam_id:Z,mic_id:M}),Y(ie)),w.stream=Q})}},_e=function(w,M,N,F,Y){Y=Y===void 0?!0:Y;var Q=!1,ee=!1;w.pc&&w.pc.peerConnection?w.pc.peerConnection.getSenders().forEach(function(Z,ie){Z.track&&(N&&Z.track.kind==="video"?(S.video.trackIndex=ie,ee=!0,F?F.getVideoTracks().forEach(function(oe){oe.enabled=!0,Z.replaceTrack(oe)}):Z.replaceTrack(null),Y&&w.videoStream.getVideoTracks().forEach(function(oe){oe.enabled=!1,oe.onended=null,oe.stop()})):M&&Z.track.kind==="audio"&&(S.audio.trackIndex=ie,Q=!0,F?F.getAudioTracks().forEach(function(oe){oe.enabled=!0,Z.replaceTrack(oe)}):Z.replaceTrack(null),w.audioStream&&w.audioStream.getAudioTracks().forEach(function(oe){oe.enabled=!1,oe.onended=null,oe.stop()})))}):(N&&w.videoStream&&Y&&w.videoStream.getVideoTracks().forEach(function(Z){console.log("without replace track setting current videotracks to stop"),Z.enabled=!1,Z.onended=null,Z.stop()}),M&&w.audioStream&&w.audioStream.getAudioTracks().forEach(function(Z){Z.enabled=!1,Z.onended=null,Z.stop()})),w.pc&&w.pc.peerConnection&&(M&&!Q||N&&!ee)&&(w.pc.peerConnection.getSenders().forEach(function(Z,ie){!Z.track&&F&&(M&&!Q&&S.audio.trackIndex!==void 0&&ie===S.audio.trackIndex&&(Q=!0,F.getAudioTracks().forEach(function(oe){oe.enabled=!0,Z.replaceTrack(oe)})),N&&!ee&&S.video.trackIndex!==void 0&&ie===S.video.trackIndex&&(ee=!0,F.getVideoTracks().forEach(function(oe){oe.enabled=!0,Z.replaceTrack(oe)})))}),M&&!Q||N&&!ee)&&(r.a.error("Error: Not finding sender track::  audio: "+M+" found: "+Q+" index: "+S.audio.trackIndex+" video: "+N+" found: "+ee+" index: "+S.video.trackIndex),v.a.error("stream-event",o.a.event_general_failed,{message:"replaceNewMediaStreamTrack - Not finding sender track::  audio: "+M+" found: "+Q+" index: "+S.audio.trackIndex+" video: "+N+" found: "+ee+" index: "+S.video.trackIndex}),w.pc.peerConnection.getSenders().forEach(function(Z,ie){r.a.error("index : "+ie+" sender.track: "+Z.track+" kind : "+(Z.track?Z.track.kind:"none"))}))},Se=function(w,M,N){return w&&(K==M||K=="none")&&(W=="video"||W=="audiovideo"||re&&!N)};p.getPlayerId=function(w){w=w===void 0?null:w;var M=p.getID();return w=w||p.room,w=(w&&w.roomSettings&&w.roomSettings.room_type?w.roomSettings.room_type:null)==="breakout-room"?"br_"+w.roomID+"_":"",{stream:w+"stream"+M,player:w+"player_"+M}},p.reloadPlayer=function(w,M){var N=w.mediatype,F=w.clientId;if(W!=N||re||M&&f!="none"&&f!=w.reason){r.a.debug("reloadPlayer() streamId: "+p.getID()+" mediatype:( "+N+" , "+W+" ), clientId:( "+F+" , "+K+" ), reason:( "+w.reason+" , "+f+" )  imageOnVideoMute: "+M),p.getID();var Y=p.getPlayerId();if(document.querySelector("#"+Y.stream)!==void 0&&document.querySelector("#"+Y.stream)!==null){var Q=!1;document.querySelectorAll("#"+Y.stream).forEach(function(ee){try{switch(N){case"audio":if(f=w.reason,Se(M,F,w.reason=="user")){p.mediaStream&&p.mediaStream.getAudioTracks().length==0&&p.stream.getAudioTracks().forEach(function(Z){p.mediaStream.addTrack(Z)}),Q=re=!0,P=!1,z=!0;break}case"audioOnly":p.audioStream?(ee.srcObject=p.audioStream,re=!1,Q=!0,P=!1,z=!0):r.a.error("reloadPlayer() failed id : "+p.getID()+" audiostream null medtype - curr: "+(W+" new: "+N));break;case"video":p.mediaStream?(W=="audiovideo"?(p.mediaStream.getVideoTracks().length==0&&p.stream.getVideoTracks().forEach(function(Z){p.mediaStream.addTrack(Z)}),p.mediaStream.getAudioTracks().length!=0&&p.mediaStream.getAudioTracks().forEach(function(Z){p.mediaStream.removeTrack(Z)})):ee.srcObject=p.mediaStream,re=!1,f="none",P=Q=!0,z=!1):(r.a.error("reloadPlayer() failed id : "+p.getID()+" videostream null, medtype - curr: "+W+" new: "+N),v.a.error("stream-event",o.a.event_general_failed,{message:"reloadPlayer() failed id : "+p.getID()+" videostream null, medtype - curr: "+W+" new: "+N}));break;case"audiovideo":p.mediaStream?(p.mediaStream.getAudioTracks().length==0&&p.stream.getAudioTracks().forEach(function(Z){p.mediaStream.addTrack(Z)}),p.mediaStream.getVideoTracks().length==0&&p.stream.getVideoTracks().forEach(function(Z){p.mediaStream.addTrack(Z)}),(W!="video"||c.a.browserEngineCheck()==="safari")&&(ee.srcObject=p.mediaStream),re=!1,f="none",Q=!0,P=z=!1):(r.a.error("reloadPlayer() failed id : "+p.getID()+" stream null, medtype - curr: "+W+" new: "+N),v.a.error("stream-event",o.a.event_general_failed,{message:"reloadPlayer() failed id : "+p.getID()+" stream null, medtype - curr: "+W+" new: "+N}));break;default:f=w.reason,P=z=!0,Se(M,F,w.reason=="user")?re=!0:(ee.srcObject=null,re=!1),Q=!0}}catch{r.a.error("reloadPlayer() id : "+p.getID()+" NULL set medtype - curr: "+W+" new: "+N),v.a.error("stream-event",o.a.event_general_failed,{message:"reloadPlayer() id : "+p.getID()+" NULL set medtype - curr: "+W+" new: "+N})}}),Q&&(W=N,K=F)}else r.a.error("reloadPlayer() id : "+p.getID()+" ID selector null medtype - curr: "+W+" new: "+N+" storing AT req"),v.a.error("stream-event",o.a.event_general_failed,{message:"reloadPlayer() id : "+p.getID()+" ID selector null medtype - curr: "+W+" new: "+N+" storing AT req"})}else{if(r.a.debug("reloadPlayer() id : "+p.getID()+" no change in media type: "+N),K==="none")switch(W){case"audio":case"audioOnly":P=!1,z=!0;break;case"video":P=!0,z=!1;break;case"audiovideo":P=z=!1;break;default:P=z=!0}K=F}ae={talkerInfo:JSON.parse(JSON.stringify(w)),imageOnVideoMute:M}},p.setBandwidthAlert=function(w){p.getID(),p.player&&p.abwdEnabled===!0&&(w.bw==="low"?p.abwdNotification==="sdk"?p.player.setBwAlert(!0,w.type,w.name):(w=Object(t.f)({type:"bw-alert",stream:p,stream_type:w.type,msg:w.type==="subscriber"?"subscriber low":w.name+" publisher low"}),p.dispatchEvent(w)):p.abwdNotification==="sdk"?p.player.setBwAlert(!1):(w=Object(t.f)({type:"bw-restored",stream:p}),p.dispatchEvent(w)))},p.setVideoMutedMessage=function(w){p.player!=null&&(w.videomuted===!0&&w.reason==="bw"?(p.videoMutedDueToBw=!0,p.player.setVideoMutedMsg(w)):p.videoMutedDueToBw===!0&&p.player.setVideoMutedMsg(w))};var ve=function(w){for(var M=0;M<p.playerDivs.length;M++){var N=document.getElementById(p.playerDivs[M].elementId);N&&(N=N.querySelectorAll("video"),0<N.length&&document.querySelectorAll("#"+N[0].id).forEach(function(F){try{F.srcObject=w}catch(Y){r.a.error("Exception:: attachStreamOnPlayerDivs() streamId: "+p.getID()+" error: "+Y),v.a.error("stream-event",o.a.event_general_failed,{message:"attachStreamOnPlayerDivs() streamId: "+p.getID()+" error: "+Y})}}))}};p.muteSubscriberStreamVideo=function(w){p.stream&&!p.local&&p.stream.getVideoTracks().forEach(function(M){M.enabled=!w})},p.updateVideo=function(w){w=p.getPlayerId(),document.querySelector("#"+w.stream)!==void 0&&document.querySelector("#"+w.stream)!==null?(r.a.info("Player element exists and playing the video",""+w.stream),p.htmlPlay(""+w.stream)):(r.a.error("Player element does not exist"),v.a.error("stream-event",o.a.event_general_failed,{message:"updateVideo - Player element does not exist"}))},p.play=function(w,M){if(typeof M=="object"&&M.hasOwnProperty("player")){r.a.debug("Element ID is "+w);var N=M||{};if(p.elementID=w,M.player&&M.player.abwd&&(M.player.abwd.enabled!==void 0&&(p.abwdEnabled=M.player.abwd.enabled),p.abwdEnabled===!0&&M.player.abwd.notification&&(p.abwdNotification=M.player.abwd.notification,p.abwdNotification==="sdk"&&M.player.abwd.language!==void 0&&(p.abwdLanguage=M.player.abwd.language==="en"||M.player.abwd.language==="zh"?M.player.abwd.language:"en"))),p.ifVideo()||p.ifScreen()||p.audioOnly||p.ifAudio())if(w!==void 0&&document.getElementById(w)!==null){if(c.a.browserEngineCheck()==="IE"){N=document.getElementById(w);var F=document.getElementById(w);N.nodeName!=="VIDEO"&&(r.a.info("not video tag"),F=document.createElement("video"),F.setAttribute("height",N.getAttribute("height")),F.setAttribute("width",N.getAttribute("width")),N.appendChild(F)),p.attachMediaStream(F,p.stream)}else F={autoplay:!0},c.a.browserEngineCheck()==="safari"&&(F.playsinline=!0),N=Object(a.a)({id:p.getID(),stream:p,elementID:w,options:N,extraPlayerOptions:F,vroom:p.room?p.room:null,videoSource:p.local?p.inputMediaSource.video[p.inputMediaSource.video.selected]:p.stream}),p.local?N.video.muted=!0:p.playerDivs=[],p.player=N,p.showing=!0;p.playerDivs.push({elementId:w,options:M}),W="audiovideo",ae!==void 0&&(r.a.debug("stream.play currentActiveTalkerList : calling reload player()"),p.reloadPlayer(ae.talkerInfo,ae.imageOnVideoMute)),p.local||p.room==null||p.room.speakerInfo.id==null||p.setSpeaker(p.room.speakerInfo.id)}else r.a.error("Element not found");else(p.ifAudio()||p.audioOnly)&&(N=Object(u.a)({id:p.getID(),stream:p,elementID:w,options:N,vroom:p.room?p.room:null}),p.local?N.audio.muted=!0:p.playerDivs=[],p.player=N,p.showing=!0,p.playerDivs.push({elementId:w,options:M}),W="audio");p.reload&&delete p.reload,p.room!==void 0?p.room.subscribeSessionStats===!0?p.ShowSessionStats(!0):p.ShowSessionStats(!1):r.a.info("room is not allocated to stream , stats UI will not be shown")}else r.a.error("play() invalid param - callback/RoomDefinition")},p.resetMediaConfiguration=function(w){p.pc.resetSDP(w)},p.htmlPlay=function(w,M){p.elementID=w,(p.ifVideo()||p.ifScreen())&&w!==void 0&&document.querySelectorAll("#"+w).forEach(function(N){try{N.srcObject=p.local?p.videoStream:p.stream}catch{N.src=URL.createObjectURL(p.local?p.videoStream:p.stream)}N.play().then(function(){}).catch(function(F){r.a.error("Error playing video stream: "+F),v.a.error("stream-event",o.a.event_general_failed,{message:"Error playing video stream: "+F})})})},p.stop=function(w){if(p.showing){if(w!=null&&(p.playerDivs=p.playerDivs.filter(function(M){return M.elementId!=w}),!p.playerDivs.length))return;p.player!==void 0&&(p.player.destroy(),p.showing=!1)}},p.show=p.play,p.hide=p.stop;var we=function(w){if(p.player!==void 0&&p.stream!==void 0){var M=document.defaultView.getComputedStyle(p.player.video),N=parseInt(M.getPropertyValue("width"),10),F=parseInt(M.getPropertyValue("height"),10);parseInt(M.getPropertyValue("left"),10),parseInt(M.getPropertyValue("top"),10),M=typeof p.elementID=="object"&&typeof p.elementID.appendChild=="function"?p.elementID:document.getElementById(p.elementID);var Y=document.defaultView.getComputedStyle(M);if(M=parseInt(Y.getPropertyValue("width"),10),Y=parseInt(Y.getPropertyValue("height"),10),document.getElementById(w))var Q=document.getElementById(w);else Q=document.createElement("canvas"),Q.id=w,Q.width=M,Q.height=Y,Q.className="canvas_input",Q.setAttribute("style","position: absolute;top: 15%;left: 45%;z-index: 897;"),document.body.appendChild(Q);return p.inputContext=Q.getContext("2d"),p.inputContext.drawImage(p.player.video,0,0,N,F),Q}return null};p.getVideoFrameURL=function(w){var M=we();return M!==null?w?M.toDataURL.apply(M,H.arrayFromIterable(w)):M.toDataURL():null},p.getVideoFrameImage=function(w){return w=we(w),w!==null?w.getContext("2d").getImageData(10,10,w.width,w.height):null},p.checkOptions=function(w,M){M===!0?(w.audio||w.screen)&&(r.a.warning("Error! Cannot update type of subscription"),w.audio=void 0,w.screen=void 0):p.local===!1&&(w.video===!0&&p.ifVideo()===!1&&(r.a.warning("Error! Stream doesn't have Video Track. Can't subscribe to Video"),w.video=!1),w.audio===!0&&p.ifAudio()===!1&&(r.a.warning("Error! Stream doesn't have Audio Track. Can't subscribe to Audio"),w.audio=!1)),p.local!==!1||p.ifVideo()||w.slideShowMode!==!0||(r.a.warning("Error! Stream doesn't have Video Track. Cannot enable slideShowMode. Check parameters"),w.slideShowMode=!1)};var xe=function(w,M,N){if(N=N===void 0?function(){}:N,console.log("Muting the stream : enable "+w),p.negotiatedMedia.audio)if(w===P)v.a.error("stream-event",o.a.event_general_failed,{message:"muteStreamAudio - MediaDevice state is already in same state"}),N(l.a.error_1177);else if(J("setMicrophoneTrack")==0)v.a.error("stream-event",o.a.event_general_failed,{message:"muteStreamAudio - Previous similar request in process"}),N(l.a.error_1140);else{var F=function(Y,Q){try{var ee=!1;if(c.a.browserEngineCheck()==="safari"){var Z=p.pc.peerConnection.getSenders().find(function(oe){return oe.track&&oe.track.kind==="audio"||oe.track===null});Z&&p.audioStream.getAudioTracks().forEach(function(oe){oe.enabled=!Y,Y||oe.readyState=="live"?Z.replaceTrack(Y?null:p.audioStream.getAudioTracks()[0]):(console.log(" setAudioTrack(): safari trackstate: ended"),ee=!0)})}else p.audioStream.getAudioTracks().forEach(function(oe){oe.enabled=!Y,ee||oe.readyState!="ended"||(ee=!0),console.log(" setAudioTrack(): trackstate: ended")});if(P=Y,q("setMicrophoneTrack"),p.selectedMicId!=null&&console.log("that.selectedMicId: "+p.selectedMicId),!Y&&ee){var ie=p.selectedMicId!=null?p.selectedMicId:S.audio.deviceId;ie?se(p,ie,void 0,!0,function(oe){console.log("setMediaDevicesTrack : audio  status: "+oe),oe.result===l.a.error_000.result&&(c.a.browserEngineCheck()==="safari"&&(p.pc.peerConnection.getSenders().find(function(le){return le.track&&le.track.kind==="audio"||le.track===null}).replaceTrack(p.audioStream.getAudioTracks()[0]),P=Y),Q(oe))}):(v.a.error("stream-event",o.a.event_general_failed,{message:"muteStreamAudio - error - stream ended"}),Q(l.a.error_1191))}else P=Y,v.a.info("stream-event",o.a.event_general_success,{message:"muteStreamAudio - success"}),Q(l.a.error_000)}catch(oe){r.a.error("Excpetion happend : "+oe),q("setMicrophoneTrack"),v.a.error("stream-event",o.a.event_general_failed,{message:"muteStreamAudio - error - "+oe}),Q(l.a.error_1150)}};M?setTimeout(F,M,w,N):F(w,N)}else v.a.error("stream-event",o.a.event_general_failed,{message:"muteStreamAudio - Stream not found"}),N(l.a.error_1159)},Me=function(w,M,N,F){F=F===void 0?function(){}:F,!w||p.negotiatedMedia.video||N?w!==z||N?J("setCameraTrack")==0?F(l.a.error_1140):(console.log("muteSTreamVideo() enable: "+w+" localVideoOn: "+te),N=function(Y,Q){try{if(Y)_e(p,!1,!0,null,!te),z=Y,q("setCameraTrack"),Q(l.a.error_000);else if(te)z=Y,p.pc&&p.pc.peerConnection&&_e(p,!1,!0,p.videoStream,!1),q("setCameraTrack"),Q(l.a.error_000);else{var ee={};S.video.deviceId!=null?ee.deviceId=S.video.deviceId:S.video.facingMode!==void 0&&h.a.browser_info.device_type=="mobile"&&(ee.facingMode=S.video.facingMode),ee.deviceId==null&&ee.facingMode==null&&(ee.deviceId="none"),se(p,void 0,ee,!0,function(Z){if(Z.result===l.a.error_000.result)z=Y;else{var ie=h.a.getLocalStorageItem("vcxRTCLib-log");ie!=null&&(ie=JSON.parse(ie),v.a.error("stream-event",Y?o.a.event_mute_self_video_failed:o.a.event_unmute_self_video_failed,{message:ie}))}q("setCameraTrack"),Q(Z)})}}catch(Z){console.log("Excpetion happend : "+Z),q("setCameraTrack"),ee=h.a.getLocalStorageItem("vcxRTCLib-log"),ee!=null&&(ee=JSON.parse(ee),v.a.error("stream-event",Y?o.a.event_mute_self_video_failed:o.a.event_unmute_self_video_failed,{message:ee})),Q(l.a.error_1150)}},M?setTimeout(N,M,w,F):N(w,F)):(v.a.error("stream-event",o.a.event_general_failed,{message:"muteStreamVideo - MediaDevice state is already in same state"}),F(l.a.error_1177)):(v.a.error("stream-event",o.a.event_general_failed,{message:"muteStreamVideo - Stream not found"}),F(l.a.error_1159))};p.muteAudio=function(w,M,N,F,Y){w=w===void 0?function(){}:w,M=M===void 0?!0:M,N=N===void 0?0:N,F=F===void 0?!0:F,Y=Y===void 0?!1:Y,typeof w=="function"?(console.log("muteAudio() selfSet : "+F+" selfMuteAudio: "+p.selfMuteAudio+" hardAudioMuted: "+p.hardAudioMuted+" audioMuted: "+P+" paused: "+p.selfPausedAudio+" config.audioMuted: "+p.config.audioMuted),F&&p.selfMuteAudio||!F&&(p.hardAudioMuted||p.selfPausedAudio)?(Y===!0&&(p.selfPausedAudio=!0),M&&p.sendEvent("user-audio-muted"),w(l.a.error_1177)):p.pc!==void 0&&p.pc!=null||p.audioStream==null?xe(!0,N,function(Q){(Q.result===l.a.error_000.result||Q.result===l.a.error_1177.result)&&(F?p.selfMuteAudio=!0:Y?p.selfPausedAudio=!0:p.hardAudioMuted=!0,Q.result===l.a.error_000.result&&M?p.sendEvent("user-audio-muted"):M||(Q=l.a.error_000)),w(Q)}):(p.audioStream.getAudioTracks().forEach(function(Q){Q.onended=null,Q.enabled=!1}),P=!0,F?(p.selfMuteAudio=!0,p.config.audioMuted=!0):Y?p.selfPausedAudio=!0:p.hardAudioMuted=!0,w(l.a.error_000))):r.a.error("muteAudio() invalid param - callback")},p.setMediaDeviceMuteState=function(w,M,N,F,Y){try{if(M){if(w===P){Y(l.a.error_1177);return}p.audioStream.getAudioTracks().forEach(function(Q){Q.enabled=!w}),P=w,F&&p.sendEvent(P?"user-audio-muted":"user-audio-unmuted")}if(N){if(w===z){Y(l.a.error_1177);return}p.stream.getVideoTracks().forEach(function(Q){Q.enabled=!w}),z=w,F&&p.sendEvent(z?"user-video-muted":"user-video-unmuted")}Y(l.a.error_000)}catch(Q){console.log("Excpetion happend : "+Q),Y(l.a.error_1150)}},p.muteAudioNotSelf=function(w,M){xe(!0,0,w===void 0?function(){}:w),M!==void 0&&M===!1||p.sendEvent("user-audio-muted")};var de=function(w){w.data&&0<w.data.size&&p.recordedBlobs.push(w.data)};p.startLocalRecord=function(w){if(w=w===void 0?function(){}:w,p.mediaRecorder)r.a.error("Recording started already:"),w(l.a.error_1174);else try{p.mediaRecorder=new MediaRecorder(p.stream,{mimeType:"video/webm"}),p.mediaRecorder.ondataavailable=de,p.recordedBlobs=[],p.mediaRecorder.start(10),w(l.a.error_000)}catch(M){r.a.error("Exception while creating MediaRecorder:",M),w(l.a.error_000)}},p.stopLocalRecord=function(w){if(w=w===void 0?function(){}:w,p.mediaRecorder&&0<p.recordedBlobs.length){var M=new Date,N=M.getFullYear()+"-"+(M.getMonth()+1)+"-"+M.getDate();M=M.getHours()+":"+M.getMinutes()+":"+M.getSeconds(),N="stream_"+p.getID()+"_"+N+"::"+M+".webm",M=new Blob(p.recordedBlobs,{type:"video/webm"}),M=window.URL.createObjectURL(M);var F=document.createElement("a");F.style.display="none",F.href=M,F.download=N,F.click(),window.URL.revokeObjectURL(M),w(l.a.error_000)}else w(l.a.error_1175);p.mediaRecorder=void 0,p.recordedBlobs=[]},p.sendEvent=function(w){p.room&&p.room.socket.sendEvent(w,function(M){})},p.sendMessage=function(w,M,N){N=N===void 0?function(){}:N,p.room&&p.room.socket.emitEvent(w,M,function(F){N(F)})},p.unmuteAudio=function(w,M,N,F,Y){if(w=w===void 0?function(){}:w,M=M===void 0?!0:M,N=N===void 0?0:N,F=F===void 0?!0:F,Y=Y===void 0?!1:Y,typeof w=="function")if(console.log("unmuteAudio() selfSet : "+F+" selfMuteAudio: "+p.selfMuteAudio+" hardAudioMuted: "+p.hardAudioMuted+" audioMuted: "+P+" paused: "+p.selfPausedAudio+" config.audioMuted: "+p.config.audioMuted),(!F||p.selfMuteAudio||p.hardAudioMuted||p.selfPausedAudio)&&(F||p.hardAudioMuted||p.selfPausedAudio))if(!F||!p.hardAudioMuted||!p.selfPausedAudio||p.room&&p.room.isModerator())if(!F&&p.selfMuteAudio)p.hardAudioMuted=!1,Y&&(p.selfPausedAudio=!1),w(l.a.error_000);else if(B.switchMicrophone!=null){var Q=B.switchMicrophone;p.switchMicrophone(Q.newStream,Q.deviceInfo,function(ee){delete B.switchMicrophone,ee.result==null?w(l.a.error_000):p.unmuteAudio(w,M,N,F,Y)},!1)}else p.pc!==void 0&&p.pc!=null||p.audioStream==null?xe(!1,N,function(ee){(ee.result===l.a.error_000.result||ee.result===l.a.error_1177.result)&&(F?p.selfMuteAudio=!1:Y?p.selfPausedAudio=!1:p.hardAudioMuted=!1,ee.result===l.a.error_000.result&&M?p.sendEvent("user-audio-unmuted"):M||(ee=l.a.error_000)),w(ee)}):(p.audioStream.getAudioTracks().forEach(function(ee){ee.enabled=!0}),p.config.audioMuted===!0&&(p.config.audioMuted=!1),P=!1,F?p.selfMuteAudio=!1:Y?p.selfPausedAudio=!1:p.hardAudioMuted=!1,w(l.a.error_000));else w(l.a.error_1176);else console.log(" that.unmuteAudio() error177: selfSet: "+F+"  that.selfMuteAudio: "+p.selfMuteAudio+" that.hardAudioMuted: "+p.hardAudioMuted+" that.selfPausedAudio: "+p.selfPausedAudio),!M||p.selfMuteAudio||p.hardAudioMuted||p.sendEvent("user-audio-unmuted"),w(l.a.error_1177);else r.a.error("unmuteAudio() invalid param - callback")},p.hardMuteAudio=function(w){p.room&&!p.local&&p.sendMessage("hardmute-user-audio",{clientId:p.clientId})},p.hardUnmuteAudio=function(w){p.room&&!p.local&&p.sendMessage("hardunmute-user-audio",{clientId:p.clientId})},p.hardMuteVideo=function(w){p.room&&!p.local&&p.sendMessage("hardmute-user-video",{clientId:p.clientId})},p.hardUnmuteVideo=function(w){p.room&&!p.local&&p.sendMessage("hardunmute-user-video",{clientId:p.clientId})},p.muteNonATPubVideo=function(w){p.videoStream&&(p.ATVideoMuted=!0,p.videoStream.getVideoTracks().forEach(function(M){M.enabled=!1}))},p.unmuteNonATPubVideo=function(w){p.videoStream&&p.hardAudioMuted===!1&&p.selfMuteVideo===!1&&p.ATVideoMuted===!0&&(p.ATVideoMuted=!1,p.videoStream.getVideoTracks().forEach(function(M){M.enabled=!0}))},p.muteVideo=function(w,M,N,F,Y,Q,ee){w=w===void 0?function(){}:w,M=M===void 0?!0:M,N=N===void 0?0:N,F=F===void 0?!0:F,Y=Y===void 0?!1:Y,Q=Q===void 0?!1:Q,ee=ee===void 0?!1:ee,typeof w=="function"?(console.log("SelfSet:"+F+"selfMuteVideo"+p.selfMuteVideo+"selfPausedVideo:"+p.selfPausedVideo),F&&p.selfMuteVideo||!F&&(p.hardVideoMuted||p.selfPausedVideo)?(Q&&(p.selfPausedVideo=!0),M&&p.sendEvent("user-video-muted"),w(l.a.error_1177)):p.pc!==void 0&&p.pc!=null||p.room==null||p.videoStream==null?Y?(te||p.videoStream.getVideoTracks().forEach(function(Z){Z.enabled=!1}),p.softVideoMuted=!0,w(l.a.error_000)):Me(!0,N,ee,function(Z){(Z.result===l.a.error_000.result||Z.result===l.a.error_1177.result)&&(F?p.selfMuteVideo=!0:Q?p.selfPausedVideo=!0:p.hardVideoMuted=!0,Z.result===l.a.error_000.result?(te||ve(null),M&&p.sendEvent("user-video-muted")):Z=l.a.error_000),w(Z)}):(te||p.videoStream.getVideoTracks().forEach(function(Z){Z.onended=null,Z.enabled=!1}),z=p.config.videoMuted=!0,F?p.selfMuteVideo=!0:Q?p.selfPausedVideo=!0:p.hardVideoMuted=!0,w(l.a.error_000))):r.a.error("muteVideo() invalid param - callback")},p.unmuteVideo=function(w,M,N,F,Y,Q){if(w=w===void 0?function(){}:w,M=M===void 0?!0:M,N=N===void 0?0:N,F=F===void 0?!0:F,Y=Y===void 0?!1:Y,Q=Q===void 0?!1:Q,typeof w=="function")if(console.log("unmuteVideo() selfSet : "+F+" that.selfMuteVideo: "+p.selfMuteVideo+" that.softVideoMuted: "+p.softVideoMuted+" that.hardVideoMuted: "+p.hardVideoMuted+" paused: "+p.selfPausedAudio),Q||(!F||p.selfMuteVideo||p.softVideoMuted||p.hardVideoMuted||p.selfPausedVideo)&&(F||p.hardVideoMuted||p.selfPausedVideo))if(!F||!p.hardVideoMuted||!p.selfPausedVideo||p.room&&p.room.isModerator())if(!F&&p.selfMuteVideo)p.hardVideoMuted=!1,Y&&(p.selfPausedVideo=!1),w(l.a.error_000);else if(B.switchCamera!=null){var ee=B.switchCamera;p.switchCamera(ee.newStream,ee.deviceInfo,function(Z){delete B.switchCamera,Z.result==null?(z=p.softVideoMuted=!1,F?p.selfMuteVideo=!1:Y?p.selfPausedVideo=!1:p.hardVideoMuted=!1,console.log("unmuteVideo() switchCamera () NOT attaching playerdivs"),M&&p.sendEvent("user-video-unmuted"),w(l.a.error_000)):p.unmuteVideo(w,M,N,F,Y)},!1,!0)}else p.pc!==void 0&&p.pc!=null||!p.room||p.videoStream==null?Me(!1,N,Q,function(Z){if((Z.result===l.a.error_000.result||Z.result===l.a.error_1177.result)&&(p.softVideoMuted=!1,F?p.selfMuteVideo=!1:Y?p.selfPausedVideo=!1:p.hardVideoMuted=!1,Z.result===l.a.error_000.result?(console.log("unmuteVideo() muteStreamVideo() success"),te||ve(p.inputMediaSource.video[p.inputMediaSource.video.selected]),M&&p.sendEvent("user-video-unmuted")):Z=l.a.error_000,p.room&&!Q)){p.room.onMediaDeviceStateChanged(p,{type:"cam",state:"active"},w);return}w(Z)}):(p.videoStream.getVideoTracks().forEach(function(Z){Z.enabled=!0}),p.config.videoMuted===!0&&(p.config.videoMuted=!1),z=p.softVideoMuted=!1,F?p.selfMuteVideo=!1:Y?p.selfPausedVideo=!1:p.hardVideoMuted=!1,w(l.a.error_000));else w(l.a.error_1176);else!M||p.selfMuteVideo||p.softVideoMuted||p.hardVideoMuted||p.sendEvent("user-video-unmuted"),w(l.a.error_1177);else r.a.error("unmuteVideo() invalid param - callback")},p.setLocalView=function(w,M){if(M=M===void 0?function(){}:M,typeof M=="function")if(te==w)r.a.error("setLocalVideo() already in same state"),M(l.a.error_1177);else if(J("setCameraTrack")==0)v.a.warn("stream-event",o.a.event_general_failed,{message:"setLocalVideo - Previous similar camera request in process"}),M(l.a.error_1140);else if(console.log("setLocalView() enable : "+w),w)if(p.isVideoMuted()){var N={};if(S.params&&S.params.set.video&&typeof S.params.set.video.deviceId=="object"&&(N.deviceId=S.params.set.video.deviceId.exact),B.switchCamera!=null){var F=B.switchCamera;p.switchCamera(F.newStream,F.deviceInfo,function(Y){delete B.switchCamera,Y.result==null?te=!0:p.setLocalView(w,M)},!1,!1)}else F=JSON.parse(JSON.stringify(S.video)),S.params&&S.params.set&&S.params.set.video&&(S.params.set.video.deviceId?F.deviceId=typeof S.params.set.video.deviceId=="object"?S.params.set.video.deviceId.exact:S.params.set.video.deviceId:S.params.set.video.facingMode&&(F.facingMode=typeof S.params.set.video.facingMode=="object"?S.params.set.video.facingMode.exact:S.params.set.video.facingMode)),F.deviceId!=null?N.deviceId=F.deviceId:F.facingMode!==void 0&&h.a.browser_info.device_type=="mobile"&&(N.facingMode=F.facingMode),N.deviceId==null&&N.facingMode==null&&(N.deviceId="none"),se(p,void 0,N,!1,function(Y){Y.result===l.a.error_000.result?(console.log("setMediaDevicesTrack() success attaching playerdiv "),te=!0,ve(p.inputMediaSource.video[p.inputMediaSource.video.selected])):(console.log("setMediaDevicesTrack() failed "),r.a.info("Error setMediaDevicesTrack(), error: "+JSON.stringify(Y)+" cam: "+N.deviceId)),q("setCameraTrack"),M(Y,te?p.videoStream:null)})}else p.negotiatedMedia.video&&p.videoStream!=null?(te=!0,q("setCameraTrack"),console.log("not muted sending stream "),M(l.a.error_000,p.videoStream)):(q("setCameraTrack"),console.log("error not muted but no video stream"),M(l.a.error_1159));else te=!1,p.isVideoMuted()&&(console.log("muted disabling localview by replace track"),p.videoStream!==void 0&&p.videoStream.getTracks().forEach(function(Y){Y.enabled=!1,Y.onended=null,Y.stop()})),console.log("disabling localview detaching player divs"),ve(null),q("setCameraTrack"),M(l.a.error_000);else r.a.error("setLocalView() invalid param - callback")},p._setStaticQualityLayer=function(w,M,N){N=N===void 0?function(){}:N,p.room&&p.room.p2p?(r.a.warning("Error! p2p streams don't support setStaticQualityLayer"),N("error")):(w={qualityLayer:{spatialLayer:w,temporalLayer:M}},p.checkOptions(w,!0),p.pc.updateSpec(w,N))},p._setDynamicQualityLayer=function(w){if(p.room&&p.room.p2p)r.a.warning("Error! p2p streams don't support setDynamicQualityLayer"),w("error");else{var M={qualityLayer:{spatialLayer:-1,temporalLayer:-1}};p.checkOptions(M,!0),p.pc.updateSpec(M,w)}};var X=function(w,M,N){M!==!0&&(M=!1),w=typeof w=="string"?[w]:w,w=w instanceof Array?w:[],0<w.length&&p.room.sendControlMessage(p,"control",{name:"controlhandlers",enable:N,publisherSide:M,handlers:w})};return p.disableHandlers=function(w,M){X(w,M,!1)},p.enableHandlers=function(w,M){X(w,M,!0)},p.updateSimulcastLayersBitrate=function(w,M){p.pc&&p.local&&(p.pc.updateSimulcastLayersBitrate(w),M&&(config.maxVideoLayeredBitrates=w))},p.updateConfiguration=function(w,M){if(M=M===void 0?function(){}:M,w!==void 0)if(p.pc)if(p.checkOptions(w,!0),p.local)if(p.room.p2p)for(var N=0;N<p.pc.length;N+=1)p.pc[N].updateSpec(w,M);else w.maxVideoBW!=null||w.minVideoBW!=null||w.maxVideoFps!=null||w.minVideoFps!=null?1>=p.maxVideoLayers&&p.setVideoParamsRange(w.maxVideoBW,w.minVideoBW,w.maxVideoFps,w.minVideoFps,!1):p.pc.updateSpec(w,M);else p.pc.updateSpec(w,M);else M("Error! This stream has no peerConnection attached, Skipping")},p.ShowSessionStats=function(w){w===!0?p.player!==void 0?p.player.ShowSessionStats(!0):r.a.info("stream does not have a player to show stats"):p.player!==void 0?p.player.ShowSessionStats(!1):r.a.info("stream does not have a player to hide stats")},p.changeInputMediaSource=function(w,M){M=M===void 0?function(){}:M,typeof M!="function"?r.a.error("changeInputMediaSource() invalid param - callback"):!p.local||p.ifCanvas()||p.ifScreen()?(r.a.error("changeInputMediaSource() not supported "),M(l.a.error_1156)):w==null||typeof w!="object"||w.video==null&&w.audio==null?(r.a.error("changeInputMediaSource() invalid param - options"),M(l.a.error_1155)):w.video&&(!w.stream||w.stream.getVideoTracks()&&w.stream.getVideoTracks().length?J("setCameraTrack")==0?(v.a.warn("stream-event",o.a.event_general_failed,{message:"changeInputMediaSource() - Previous similar camera request in process"}),M(l.a.error_1140)):(p.inputMediaSource.video.user=w.stream!=null&&w.stream!=null?w.stream:null,p.inputMediaSource.video.user!=null?(w=p.inputMediaSource.video.user,M="user"):(w=p.inputMediaSource.video.self,M="self"),p.isVideoMuted()||p.inputMediaSource.video.selected==M||(_e(p,!1,!0,w,!1),ve(w)),p.inputMediaSource.video.selected=M,q("setCameraTrack")):(r.a.error("changeInputMediaSource() video tracks not found"),M(l.a.error_1156)))},p.replaceLocalTrack=function(w,M){w.pc.peerConnection.getSenders().forEach(function(N,F){N.track&&(N.track.kind==="video"?M&&M.getVideoTracks().forEach(function(Y){console.log(Y),Y.enabled=!0,N.replaceTrack(Y)}):N.track.kind==="audio"&&w&&w.audioStream.getAudioTracks().forEach(function(Y){console.log(Y),Y.enabled=!0,N.replaceTrack(Y)}))})},p.startAudioAnalysis=function(){_==null?r.a.info("AudioAnalysis feature not enabled"):p.rnn!=null?r.a.info("startAudioAnalysis already enabled"):p.audioStreamClone&&(r.a.info("startAudioAnalysis enabled for audio track"),p.audioSource=p.audioContext.createMediaStreamSource(p.audioStreamClone),p.pcmInputBuf=_._malloc(1920),p.pcmOutputBuf=_._malloc(1920),p.pcmInputIndex=p.pcmInputBuf/4,p.rnn=_._rnnoise_create(),p.processor=p.audioContext.createScriptProcessor(512,1,1),p.processor.onaudioprocess=function(w){w=w.inputBuffer.getChannelData(0),w=[].concat(H.arrayFromIterable(p.bufferResidue),H.arrayFromIterable(w));for(var M=0;M+480<w.length;M+=480){for(var N=w.slice(M,M+480),F=H.makeIterator(N.entries()),Y=F.next();!Y.done;Y=F.next()){var Q=H.makeIterator(Y.value);Y=Q.next().value,Q=Q.next().value,N[Y]=32767*Q}_.HEAPF32.set(N,p.pcmInputIndex),F=_._rnnoise_process_frame(p.rnn,p.pcmOutputBuf,p.pcmInputBuf),p.isAudioMuted()?p.processing_voice_while_mute?p.scoreArrayVoice.push(F):.9<F&&(p.processing_voice_while_mute=!0,setTimeout(E,700)):p.processing_noise_detection?(p.scoreArrayNoise.push(F),N=D(N),N=x(N),p.scoreArrayNoise.push(F),p.audioLevelArray.push(N)):.2<F&&(N=D(N),N=x(N),.02<N&&(p.processing_noise_detection=!0,p.scoreArrayNoise.push(F),p.audioLevelArray.push(N),setTimeout(I,1500)))}p.bufferResidue=w.slice(M,w.length)},p.audioSource.connect(p.processor),p.processor.connect(p.audioContext.destination))},p.stopAudioAnalysis=function(){_==null?r.a.info("AudioAnalysis feature not enabled"):p.rnn==null?r.a.info("startAudioAnalysis not enabled"):(r.a.info("startAudioAnalysis disabled for audio track"),p.pcmInputBuf&&_._free(p.pcmInputBuf),p.pcmOutputBuf&&_._free(p.pcmOutputBuf),_._rnnoise_destroy(p.rnn),p.pcmInputBuf=void 0,p.pcmOutputBuf=void 0,p.rnn=void 0,p.processor.onaudioprocess=function(){},p.processor.disconnect(),p.audioSource.disconnect())},p}console.log("Webrtc not supported")}},function(e,i,d){i.a=function(){return{player:{default:{autoplay:"autoplay",name:"",nameDisplayMode:"",frameFitMode:"bestFit",skin:"default",class:"",height:"240px",width:"320px",minHeight:"200px",minWidth:"250px",aspectRatio:"16:9",volume:5,media:"",loader:{show:!0,style:"default",class:""}}},brand:{default:{display:!0,url:"http://www.vcloudx.com",logo:"/assets/favicon.png",show:!0,target:"_blank",title:"VCloudX Infotech"}},toolbar:{default:{skin:"default",buttons:{play:!0,resize:!0,share:!0,mic:!0,volume:!0,mute:!0,record:!0,playtime:!0,zoom:!0},position:"bottom",class:"",displayMode:!0,autoDisplayTimeout:0}}}}},function(e,i,d){function t(E,I){var p={"Content-Type":"application/json"};return I&&(p.Authentication="Bearer "+I),{method:"POST",headers:new Headers(p),body:JSON.stringify(E)}}function u(E,I,p){var B,P,z,te;return H.asyncExecutePromiseGeneratorProgram(function(W){return W.nextAddress==1?(B={},I=I||{},W.yield(p.authHeader(),2)):W.nextAddress!=3?(P=W.yieldResult,I.headers=new Headers({Authorization:P}),W.yield(fetch(E,I),3)):(z=W.yieldResult,B.response=z,B.ok=z.ok,te=(z.headers.get("WWW-Authenticate")||"").split(" ")[1],B.shouldRetry=z.status===401&&te!==p.nonce,p.nonce=te,W.return(B))})}function a(E,I,p){var B;return H.asyncExecutePromiseGeneratorProgram(function(P){return P.nextAddress==1?P.yield(u(E,I,p),2):(B=P.yieldResult,B.shouldRetry?P.return(u(E,I,p)):P.return(B))})}function c(E){return new Promise(function(I,p){try{var B=new WebSocket(E);B.addEventListener("open",function(){return I(B)},{once:!0})}catch(P){h.a.info("asyncInitWebSocket exception while creating websocket",P),p(new S(!1))}})}function r(E,I){return new Promise(function(p,B){function P(te){E.removeEventListener("message",z),B(new S(I.cancelled))}function z(te){E.removeEventListener("close",P);try{var W=JSON.parse(te.data);if(W.error)throw h.a.error(" listenForResponse throw exception ",W.error),Error(W.error);p(W)}catch(K){h.a.error(" listenForResponse exception ",K),B(K)}}E.addEventListener("message",z,{once:!0}),E.addEventListener("close",P,{once:!0})})}function s(E,I,p,B,P,z,te,W,K){var re,f,ae,ce,he,ye,R,O,j,J,q,se,_e,Se,ve;return H.asyncExecutePromiseGeneratorProgram(function(we){switch(we.nextAddress){case 1:return re=0,f=Date.now(),ae=window.location.protocol==="https:"?"wss:":"ws:",ce=window.location.protocol==="file:"?k:ae+"//"+_+(y?":":"")+y+"/api/ws",we.yield(c(ce),2);case 2:he=we.yieldResult,we.setCatchFinallyBlocks(3,4),ye=Object(o.arrayToB64)(new Uint8Array(I)),R={};var xe=te;return xe=xe===void 0?{}:xe,D.file_meta=xe,D.trans_dt=Date.now(),R=D,O={fileMetadata:ye,authorization:"send-v1 "+p,bearer:z,timeLimit:B,dlimit:P,callInfo:R},j=r(he,K),he.send(JSON.stringify(O)),we.yield(j,6);case 6:return J=we.yieldResult,q=r(he,K),se=E.getReader(),we.yield(se.read(),7);case 7:_e=we.yieldResult;case 8:if(_e.done){we.jumpTo(9);break}if(K.cancelled&&(h.a.info(" websocket upload cancelled"),he.close()),he.readyState!==WebSocket.OPEN){we.jumpTo(9);break}return Se=_e.value,he.send(Se),W(re),re+=Se.length,we.yield(se.read(),10);case 10:_e=we.yieldResult;case 11:if(!(he.bufferedAmount>2*v.a&&he.readyState===WebSocket.OPEN)||K.cancelled){we.jumpTo(8);break}return we.yield(Object(o.delay)(),11);case 9:return he.readyState===WebSocket.OPEN&&he.send(new Uint8Array([0])),we.yield(q,14);case 14:return J.duration=Date.now()-f,we.return(J);case 4:we.enterFinallyBlock(),[WebSocket.CLOSED,WebSocket.CLOSING].includes(he.readyState)||he.close(),we.leaveFinallyBlock(0);break;case 3:throw ve=we.enterCatchBlock(),ve.size=re,ve.duration=Date.now()-f,h.a.info(" websocket upload failed",ve),ve}})}function l(E,I,p,B){var P,z;return H.asyncExecutePromiseGeneratorProgram(function(te){return te.nextAddress==1?te.yield(I.authHeader(),2):(P=te.yieldResult,z=new XMLHttpRequest,B.oncancel=function(){z.abort()},te.return(new Promise(function(W,K){z.addEventListener("loadend",function(){B.oncancel=function(){};var re=z.getResponseHeader("WWW-Authenticate");if(re&&(I.nonce=(re||"").split(" ")[1]),z.status!==200)return K(Error(z.status));re=new Blob([z.response]),W(re)}),z.addEventListener("progress",function(re){re.target.status===200&&p(re.loaded)}),z.open("get",x+("/api/download/blob/"+E)),z.setRequestHeader("Authorization",P),z.responseType="blob",z.send(),p(0)})))})}function g(E,I,p,B,P){P=P===void 0?2:P;var z,te;return H.asyncExecutePromiseGeneratorProgram(function(W){if(W.nextAddress==1)return W.setCatchFinallyBlocks(2),W.yield(l(E,I,p,B),4);if(W.nextAddress!=2)return z=W.yieldResult,W.return(z);if(te=W.enterCatchBlock(),te.message==="401"&&0<--P)return W.return(g(E,I,p,B,P));throw te})}i.d=function(E){return x+E},i.f=function(E){E!=null&&E.url!=null&&E.hostName!=null&&E.port!=null&&(x=E.url,_=E.hostName,y=E.port,k="wss://"+_+":"+y+"/api/ws",E=E.callInfo,h.a.info(" file sharing service call details",E),D.userName=E.userName,D.room_id=E.room_id,D.conf_num=E.conf_num,D.call_num=E.call_num,D.service_id=E.service_id)},i.a=function(E,I){var p;return H.asyncExecutePromiseGeneratorProgram(function(B){return B.nextAddress==1?B.yield(fetch(x+("/api/delete/"+E),t({owner_token:I})),2):(p=B.yieldResult,B.return(p.ok))})},i.g=function(E,I,p,B){var P;return H.asyncExecutePromiseGeneratorProgram(function(z){return z.nextAddress==1?z.yield(fetch(x+("/api/params/"+E),t({owner_token:I,dlimit:B.dlimit},p)),2):(P=z.yieldResult,z.return(P.ok))})},i.c=function(E,I){var p,B;return H.asyncExecutePromiseGeneratorProgram(function(P){switch(P.nextAddress){case 1:return P.yield(fetch(x+("/api/info/"+E),t({owner_token:I})),2);case 2:if(p=P.yieldResult,!p.ok){P.jumpTo(3);break}return P.yield(p.json(),4);case 4:return B=P.yieldResult,P.return(B);case 3:throw Error(p.status)}})},i.e=function(E,I){var p,B,P;return H.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return z.yield(a(x+("/api/metadata/"+E),{method:"GET"},I),2);case 2:if(p=z.yieldResult,!p.ok){z.jumpTo(3);break}return z.yield(p.response.json(),4);case 4:return B=z.yieldResult,z.yield(I.decryptMetadata(Object(o.b64ToArray)(B.metadata)),5);case 5:return P=z.yieldResult,z.return({size:P.size,ttl:B.ttl,iv:P.iv,name:P.name,type:P.type,manifest:P.manifest});case 3:throw Error(p.response.status)}})},i.h=function(E,I,p){var B,P;return H.asyncExecutePromiseGeneratorProgram(function(z){return z.nextAddress==1?z.yield(p.authKeyB64(),2):z.nextAddress!=3?(B=z.yieldResult,z.yield(fetch(x+("/api/password/"+E),t({owner_token:I,auth:B})),3)):(P=z.yieldResult,z.return(P.ok))})},i.i=function(E,I,p,B,P,z,te,W){var K={cancelled:!1};return{cancel:function(){K.cancelled=!0},result:s(E,I,p,B,P,z,te,W,K)}},i.b=function(E,I,p){var B={oncancel:function(){}};return{cancel:function(){B.oncancel()},result:g(E,I,p,B)}};var o=d(12);d.n(o);var v=d(30),h=d(0),k=null,_="",y="";k||(k="");var S=function(E,I,p){var B=Error.call(this,E?"0":"connection closed");this.message=B.message,"stack"in B&&(this.stack=B.stack),this.cancelled=E,this.duration=I,this.size=p};H.inherits(S,Error);var x="",D={}},function(e,i,d){(function(t){function u(){try{var R=new Uint8Array(1);return R.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},R.foo()===42&&typeof R.subarray=="function"&&R.subarray(1,1).byteLength===0}catch{return!1}}function a(R,O){if((c.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<O)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(R=new Uint8Array(O),R.__proto__=c.prototype):(R===null&&(R=new c(O)),R.length=O),R}function c(R,O,j){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(R,O,j);if(typeof R=="number"){if(typeof O=="string")throw Error("If encoding is specified then the first argument must be a string");return l(this,R)}return r(this,R,O,j)}function r(R,O,j,J){if(typeof O=="number")throw new TypeError('"value" argument must not be a number');if(typeof ArrayBuffer<"u"&&O instanceof ArrayBuffer){if(O.byteLength,0>j||O.byteLength<j)throw new RangeError("'offset' is out of bounds");if(O.byteLength<j+(J||0))throw new RangeError("'length' is out of bounds");return O=j===void 0&&J===void 0?new Uint8Array(O):J===void 0?new Uint8Array(O,j):new Uint8Array(O,j,J),c.TYPED_ARRAY_SUPPORT?(R=O,R.__proto__=c.prototype):R=g(R,O),R}if(typeof O=="string"){if(J=R,R=j,(typeof R!="string"||R==="")&&(R="utf8"),!c.isEncoding(R))throw new TypeError('"encoding" must be a valid string encoding');return j=h(O,R)|0,J=a(J,j),O=J.write(O,R),O!==j&&(J=J.slice(0,O)),J}return o(R,O)}function s(R){if(typeof R!="number")throw new TypeError('"size" argument must be a number');if(0>R)throw new RangeError('"size" argument must not be negative')}function l(R,O){if(s(O),R=a(R,0>O?0:v(O)|0),!c.TYPED_ARRAY_SUPPORT)for(var j=0;j<O;++j)R[j]=0;return R}function g(R,O){var j=0>O.length?0:v(O.length)|0;R=a(R,j);for(var J=0;J<j;J+=1)R[J]=O[J]&255;return R}function o(R,O){if(c.isBuffer(O)){var j=v(O.length)|0;return R=a(R,j),R.length===0||O.copy(R,0,0,j),R}if(O){if(typeof ArrayBuffer<"u"&&O.buffer instanceof ArrayBuffer||"length"in O)return(j=typeof O.length!="number")||(j=O.length,j=j!==j),j?a(R,0):g(R,O);if(O.type==="Buffer"&&ce(O.data))return g(R,O.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(R){if(R>=(c.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(c.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return R|0}function h(R,O){if(c.isBuffer(R))return R.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(R)||R instanceof ArrayBuffer))return R.byteLength;typeof R!="string"&&(R=""+R);var j=R.length;if(j===0)return 0;for(var J=!1;;)switch(O){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":case void 0:return W(R).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*j;case"hex":return j>>>1;case"base64":return f.toByteArray(te(R)).length;default:if(J)return W(R).length;O=(""+O).toLowerCase(),J=!0}}function k(R,O,j){var J=!1;if((O===void 0||0>O)&&(O=0),O>this.length||((j===void 0||j>this.length)&&(j=this.length),0>=j)||(j>>>=0,O>>>=0,j<=O))return"";for(R||(R="utf8");;)switch(R){case"hex":for(R=O,O=j,j=this.length,(!R||0>R)&&(R=0),(!O||0>O||O>j)&&(O=j),J="",j=R;j<O;++j)R=J,J=this[j],J=16>J?"0"+J.toString(16):J.toString(16),J=R+J;return J;case"utf8":case"utf-8":return x(this,O,j);case"ascii":for(R="",j=Math.min(this.length,j);O<j;++O)R+=String.fromCharCode(this[O]&127);return R;case"latin1":case"binary":for(R="",j=Math.min(this.length,j);O<j;++O)R+=String.fromCharCode(this[O]);return R;case"base64":return O=O===0&&j===this.length?f.fromByteArray(this):f.fromByteArray(this.slice(O,j)),O;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(O=this.slice(O,j),j="",R=0;R<O.length;R+=2)j+=String.fromCharCode(O[R]+256*O[R+1]);return j;default:if(J)throw new TypeError("Unknown encoding: "+R);R=(R+"").toLowerCase(),J=!0}}function _(R,O,j){var J=R[O];R[O]=R[j],R[j]=J}function y(R,O,j,J,q){if(R.length===0)return-1;if(typeof j=="string"?(J=j,j=0):2147483647<j?j=2147483647:-2147483648>j&&(j=-2147483648),j=+j,isNaN(j)&&(j=q?0:R.length-1),0>j&&(j=R.length+j),j>=R.length){if(q)return-1;j=R.length-1}else if(0>j)if(q)j=0;else return-1;if(typeof O=="string"&&(O=c.from(O,J)),c.isBuffer(O))return O.length===0?-1:S(R,O,j,J,q);if(typeof O=="number")return O&=255,c.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(R,O,j):Uint8Array.prototype.lastIndexOf.call(R,O,j):S(R,[O],j,J,q);throw new TypeError("val must be string, number or Buffer")}function S(R,O,j,J,q){function se(we,xe){return _e===1?we[xe]:we.readUInt16BE(xe*_e)}var _e=1,Se=R.length,ve=O.length;if(J!==void 0&&(J=String(J).toLowerCase(),J==="ucs2"||J==="ucs-2"||J==="utf16le"||J==="utf-16le")){if(2>R.length||2>O.length)return-1;_e=2,Se/=2,ve/=2,j/=2}if(q)for(J=-1;j<Se;j++)if(se(R,j)===se(O,J===-1?0:j-J)){if(J===-1&&(J=j),j-J+1===ve)return J*_e}else J!==-1&&(j-=j-J),J=-1;else for(j+ve>Se&&(j=Se-ve);0<=j;j--){for(Se=!0,J=0;J<ve;J++)if(se(R,j+J)!==se(O,J)){Se=!1;break}if(Se)return j}return-1}function x(R,O,j){j=Math.min(R.length,j);for(var J=[];O<j;){var q=R[O],se=null,_e=239<q?4:223<q?3:191<q?2:1;if(O+_e<=j)switch(_e){case 1:128>q&&(se=q);break;case 2:var Se=R[O+1];(Se&192)===128&&(q=(q&31)<<6|Se&63,127<q&&(se=q));break;case 3:Se=R[O+1];var ve=R[O+2];(Se&192)===128&&(ve&192)===128&&(q=(q&15)<<12|(Se&63)<<6|ve&63,2047<q&&(55296>q||57343<q)&&(se=q));break;case 4:Se=R[O+1],ve=R[O+2];var we=R[O+3];(Se&192)===128&&(ve&192)===128&&(we&192)===128&&(q=(q&15)<<18|(Se&63)<<12|(ve&63)<<6|we&63,65535<q&&1114112>q&&(se=q))}se===null?(se=65533,_e=1):65535<se&&(se-=65536,J.push(se>>>10&1023|55296),se=56320|se&1023),J.push(se),O+=_e}if(R=J.length,R<=he)J=String.fromCharCode.apply(String,J);else{for(j="",O=0;O<R;)j+=String.fromCharCode.apply(String,J.slice(O,O+=he));J=j}return J}function D(R,O,j){if(R%1!==0||0>R)throw new RangeError("offset is not uint");if(R+O>j)throw new RangeError("Trying to access beyond buffer length")}function E(R,O,j,J,q,se){if(!c.isBuffer(R))throw new TypeError('"buffer" argument must be a Buffer instance');if(O>q||O<se)throw new RangeError('"value" argument is out of bounds');if(j+J>R.length)throw new RangeError("Index out of range")}function I(R,O,j,J){0>O&&(O=65535+O+1);for(var q=0,se=Math.min(R.length-j,2);q<se;++q)R[j+q]=(O&255<<8*(J?q:1-q))>>>8*(J?q:1-q)}function p(R,O,j,J){0>O&&(O=4294967295+O+1);for(var q=0,se=Math.min(R.length-j,4);q<se;++q)R[j+q]=O>>>8*(J?q:3-q)&255}function B(R,O,j,J,q,se){if(j+J>R.length)throw new RangeError("Index out of range");if(0>j)throw new RangeError("Index out of range")}function P(R,O,j,J,q){return q||B(R,O,j,4),ae.write(R,O,j,J,23,4),j+4}function z(R,O,j,J,q){return q||B(R,O,j,8),ae.write(R,O,j,J,52,8),j+8}function te(R){if(R=R.trim?R.trim():R.replace(/^\s+|\s+$/g,""),R=R.replace(ye,""),2>R.length)return"";for(;R.length%4!==0;)R+="=";return R}function W(R,O){O=O||1/0;for(var j,J=R.length,q=null,se=[],_e=0;_e<J;++_e){if(j=R.charCodeAt(_e),55295<j&&57344>j){if(!q){if(56319<j){-1<(O-=3)&&se.push(239,191,189);continue}else if(_e+1===J){-1<(O-=3)&&se.push(239,191,189);continue}q=j;continue}if(56320>j){-1<(O-=3)&&se.push(239,191,189),q=j;continue}j=(q-55296<<10|j-56320)+65536}else q&&-1<(O-=3)&&se.push(239,191,189);if(q=null,128>j){if(0>--O)break;se.push(j)}else if(2048>j){if(0>(O-=2))break;se.push(j>>6|192,j&63|128)}else if(65536>j){if(0>(O-=3))break;se.push(j>>12|224,j>>6&63|128,j&63|128)}else if(1114112>j){if(0>(O-=4))break;se.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw Error("Invalid code point")}return se}function K(R){for(var O=[],j=0;j<R.length;++j)O.push(R.charCodeAt(j)&255);return O}function re(R,O,j,J){for(var q=0;q<J&&!(q+j>=O.length||q>=R.length);++q)O[q+j]=R[q];return q}var f=d(29),ae=d(54),ce=d(55);i.Buffer=c,i.SlowBuffer=function(R){return+R!=R&&(R=0),c.alloc(+R)},i.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=t.TYPED_ARRAY_SUPPORT!==void 0?t.TYPED_ARRAY_SUPPORT:u(),i.kMaxLength=c.TYPED_ARRAY_SUPPORT?2147483647:1073741823,c.poolSize=8192,c._augment=function(R){return R.__proto__=c.prototype,R},c.from=function(R,O,j){return r(null,R,O,j)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,H.initSymbol(),H.initSymbol(),H.initSymbol(),typeof Symbol<"u"&&Symbol.species&&c[Symbol.species]===c&&(H.initSymbol(),Object.defineProperty(c,Symbol.species,{value:null,configurable:!0}))),c.alloc=function(R,O,j){return s(R),R=0>=R?a(null,R):O!==void 0?typeof j=="string"?a(null,R).fill(O,j):a(null,R).fill(O):a(null,R),R},c.allocUnsafe=function(R){return l(null,R)},c.allocUnsafeSlow=function(R){return l(null,R)},c.isBuffer=function(R){return!(R==null||!R._isBuffer)},c.compare=function(R,O){if(!c.isBuffer(R)||!c.isBuffer(O))throw new TypeError("Arguments must be Buffers");if(R===O)return 0;for(var j=R.length,J=O.length,q=0,se=Math.min(j,J);q<se;++q)if(R[q]!==O[q]){j=R[q],J=O[q];break}return j<J?-1:J<j?1:0},c.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(R,O){if(!ce(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return c.alloc(0);var j;if(O===void 0)for(j=O=0;j<R.length;++j)O+=R[j].length;O=c.allocUnsafe(O);var J=0;for(j=0;j<R.length;++j){var q=R[j];if(!c.isBuffer(q))throw new TypeError('"list" argument must be an Array of Buffers');q.copy(O,J),J+=q.length}return O},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var O=0;O<R;O+=2)_(this,O,O+1);return this},c.prototype.swap32=function(){var R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var O=0;O<R;O+=4)_(this,O,O+3),_(this,O+1,O+2);return this},c.prototype.swap64=function(){var R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var O=0;O<R;O+=8)_(this,O,O+7),_(this,O+1,O+6),_(this,O+2,O+5),_(this,O+3,O+4);return this},c.prototype.toString=function(){var R=this.length|0;return R===0?"":arguments.length===0?x(this,0,R):k.apply(this,arguments)},c.prototype.equals=function(R){if(!c.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:c.compare(this,R)===0},c.prototype.inspect=function(){var R="",O=i.INSPECT_MAX_BYTES;return 0<this.length&&(R=this.toString("hex",0,O).match(/.{2}/g).join(" "),this.length>O&&(R+=" ... ")),"<Buffer "+R+">"},c.prototype.compare=function(R,O,j,J,q){if(!c.isBuffer(R))throw new TypeError("Argument must be a Buffer");if(O===void 0&&(O=0),j===void 0&&(j=R?R.length:0),J===void 0&&(J=0),q===void 0&&(q=this.length),0>O||j>R.length||0>J||q>this.length)throw new RangeError("out of range index");if(J>=q&&O>=j)return 0;if(J>=q)return-1;if(O>=j)return 1;if(O>>>=0,j>>>=0,J>>>=0,q>>>=0,this===R)return 0;var se=q-J,_e=j-O,Se=Math.min(se,_e);for(J=this.slice(J,q),R=R.slice(O,j),O=0;O<Se;++O)if(J[O]!==R[O]){se=J[O],_e=R[O];break}return se<_e?-1:_e<se?1:0},c.prototype.includes=function(R,O,j){return this.indexOf(R,O,j)!==-1},c.prototype.indexOf=function(R,O,j){return y(this,R,O,j,!0)},c.prototype.lastIndexOf=function(R,O,j){return y(this,R,O,j,!1)},c.prototype.write=function(R,O,j,J){if(O===void 0)J="utf8",j=this.length,O=0;else if(j===void 0&&typeof O=="string")J=O,j=this.length,O=0;else if(isFinite(O))O|=0,isFinite(j)?(j|=0,J===void 0&&(J="utf8")):(J=j,j=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var q=this.length-O;if((j===void 0||j>q)&&(j=q),0<R.length&&(0>j||0>O)||O>this.length)throw new RangeError("Attempt to write outside buffer bounds");for(J||(J="utf8"),q=!1;;)switch(J){case"hex":e:{if(O=Number(O)||0,J=this.length-O,j?(j=Number(j),j>J&&(j=J)):j=J,J=R.length,J%2!==0)throw new TypeError("Invalid hex string");for(j>J/2&&(j=J/2),J=0;J<j;++J){if(q=parseInt(R.substr(2*J,2),16),isNaN(q)){R=J;break e}this[O+J]=q}R=J}return R;case"utf8":case"utf-8":return re(W(R,this.length-O),this,O,j);case"ascii":return re(K(R),this,O,j);case"latin1":case"binary":return re(K(R),this,O,j);case"base64":return re(f.toByteArray(te(R)),this,O,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":J=R,q=this.length-O;for(var se=[],_e=0;_e<J.length&&!(0>(q-=2));++_e){var Se=J.charCodeAt(_e);R=Se>>8,Se%=256,se.push(Se),se.push(R)}return re(se,this,O,j);default:if(q)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),q=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var he=4096;c.prototype.slice=function(R,O){var j=this.length;if(R=~~R,O=O===void 0?j:~~O,0>R?(R+=j,0>R&&(R=0)):R>j&&(R=j),0>O?(O+=j,0>O&&(O=0)):O>j&&(O=j),O<R&&(O=R),c.TYPED_ARRAY_SUPPORT)O=this.subarray(R,O),O.__proto__=c.prototype;else{j=O-R,O=new c(j,void 0);for(var J=0;J<j;++J)O[J]=this[J+R]}return O},c.prototype.readUIntLE=function(R,O,j){R|=0,O|=0,j||D(R,O,this.length),j=this[R];for(var J=1,q=0;++q<O&&(J*=256);)j+=this[R+q]*J;return j},c.prototype.readUIntBE=function(R,O,j){R|=0,O|=0,j||D(R,O,this.length),j=this[R+--O];for(var J=1;0<O&&(J*=256);)j+=this[R+--O]*J;return j},c.prototype.readUInt8=function(R,O){return O||D(R,1,this.length),this[R]},c.prototype.readUInt16LE=function(R,O){return O||D(R,2,this.length),this[R]|this[R+1]<<8},c.prototype.readUInt16BE=function(R,O){return O||D(R,2,this.length),this[R]<<8|this[R+1]},c.prototype.readUInt32LE=function(R,O){return O||D(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+16777216*this[R+3]},c.prototype.readUInt32BE=function(R,O){return O||D(R,4,this.length),16777216*this[R]+(this[R+1]<<16|this[R+2]<<8|this[R+3])},c.prototype.readIntLE=function(R,O,j){R|=0,O|=0,j||D(R,O,this.length),j=this[R];for(var J=1,q=0;++q<O&&(J*=256);)j+=this[R+q]*J;return j>=128*J&&(j-=Math.pow(2,8*O)),j},c.prototype.readIntBE=function(R,O,j){R|=0,O|=0,j||D(R,O,this.length),j=O;for(var J=1,q=this[R+--j];0<j&&(J*=256);)q+=this[R+--j]*J;return q>=128*J&&(q-=Math.pow(2,8*O)),q},c.prototype.readInt8=function(R,O){return O||D(R,1,this.length),this[R]&128?-1*(255-this[R]+1):this[R]},c.prototype.readInt16LE=function(R,O){return O||D(R,2,this.length),R=this[R]|this[R+1]<<8,R&32768?R|4294901760:R},c.prototype.readInt16BE=function(R,O){return O||D(R,2,this.length),R=this[R+1]|this[R]<<8,R&32768?R|4294901760:R},c.prototype.readInt32LE=function(R,O){return O||D(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},c.prototype.readInt32BE=function(R,O){return O||D(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},c.prototype.readFloatLE=function(R,O){return O||D(R,4,this.length),ae.read(this,R,!0,23,4)},c.prototype.readFloatBE=function(R,O){return O||D(R,4,this.length),ae.read(this,R,!1,23,4)},c.prototype.readDoubleLE=function(R,O){return O||D(R,8,this.length),ae.read(this,R,!0,52,8)},c.prototype.readDoubleBE=function(R,O){return O||D(R,8,this.length),ae.read(this,R,!1,52,8)},c.prototype.writeUIntLE=function(R,O,j,J){R=+R,O|=0,j|=0,J||E(this,R,O,j,Math.pow(2,8*j)-1,0),J=1;var q=0;for(this[O]=R&255;++q<j&&(J*=256);)this[O+q]=R/J&255;return O+j},c.prototype.writeUIntBE=function(R,O,j,J){R=+R,O|=0,j|=0,J||E(this,R,O,j,Math.pow(2,8*j)-1,0),J=j-1;var q=1;for(this[O+J]=R&255;0<=--J&&(q*=256);)this[O+J]=R/q&255;return O+j},c.prototype.writeUInt8=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,1,255,0),c.TYPED_ARRAY_SUPPORT||(R=Math.floor(R)),this[O]=R&255,O+1},c.prototype.writeUInt16LE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[O]=R&255,this[O+1]=R>>>8):I(this,R,O,!0),O+2},c.prototype.writeUInt16BE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[O]=R>>>8,this[O+1]=R&255):I(this,R,O,!1),O+2},c.prototype.writeUInt32LE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[O+3]=R>>>24,this[O+2]=R>>>16,this[O+1]=R>>>8,this[O]=R&255):p(this,R,O,!0),O+4},c.prototype.writeUInt32BE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255):p(this,R,O,!1),O+4},c.prototype.writeIntLE=function(R,O,j,J){R=+R,O|=0,J||(J=Math.pow(2,8*j-1),E(this,R,O,j,J-1,-J)),J=0;var q=1,se=0;for(this[O]=R&255;++J<j&&(q*=256);)0>R&&se===0&&this[O+J-1]!==0&&(se=1),this[O+J]=(R/q>>0)-se&255;return O+j},c.prototype.writeIntBE=function(R,O,j,J){R=+R,O|=0,J||(J=Math.pow(2,8*j-1),E(this,R,O,j,J-1,-J)),J=j-1;var q=1,se=0;for(this[O+J]=R&255;0<=--J&&(q*=256);)0>R&&se===0&&this[O+J+1]!==0&&(se=1),this[O+J]=(R/q>>0)-se&255;return O+j},c.prototype.writeInt8=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,1,127,-128),c.TYPED_ARRAY_SUPPORT||(R=Math.floor(R)),0>R&&(R=255+R+1),this[O]=R&255,O+1},c.prototype.writeInt16LE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[O]=R&255,this[O+1]=R>>>8):I(this,R,O,!0),O+2},c.prototype.writeInt16BE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[O]=R>>>8,this[O+1]=R&255):I(this,R,O,!1),O+2},c.prototype.writeInt32LE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[O]=R&255,this[O+1]=R>>>8,this[O+2]=R>>>16,this[O+3]=R>>>24):p(this,R,O,!0),O+4},c.prototype.writeInt32BE=function(R,O,j){return R=+R,O|=0,j||E(this,R,O,4,2147483647,-2147483648),0>R&&(R=4294967295+R+1),c.TYPED_ARRAY_SUPPORT?(this[O]=R>>>24,this[O+1]=R>>>16,this[O+2]=R>>>8,this[O+3]=R&255):p(this,R,O,!1),O+4},c.prototype.writeFloatLE=function(R,O,j){return P(this,R,O,!0,j)},c.prototype.writeFloatBE=function(R,O,j){return P(this,R,O,!1,j)},c.prototype.writeDoubleLE=function(R,O,j){return z(this,R,O,!0,j)},c.prototype.writeDoubleBE=function(R,O,j){return z(this,R,O,!1,j)},c.prototype.copy=function(R,O,j,J){if(j||(j=0),J||J===0||(J=this.length),O>=R.length&&(O=R.length),O||(O=0),0<J&&J<j&&(J=j),J===j||R.length===0||this.length===0)return 0;if(0>O)throw new RangeError("targetStart out of bounds");if(0>j||j>=this.length)throw new RangeError("sourceStart out of bounds");if(0>J)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),R.length-O<J-j&&(J=R.length-O+j);var q=J-j;if(this===R&&j<O&&O<J)for(J=q-1;0<=J;--J)R[J+O]=this[J+j];else if(1e3>q||!c.TYPED_ARRAY_SUPPORT)for(J=0;J<q;++J)R[J+O]=this[J+j];else Uint8Array.prototype.set.call(R,this.subarray(j,j+q),O);return q},c.prototype.fill=function(R,O,j,J){if(typeof R=="string"){if(typeof O=="string"?(J=O,O=0,j=this.length):typeof j=="string"&&(J=j,j=this.length),R.length===1){var q=R.charCodeAt(0);256>q&&(R=q)}if(J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!c.isEncoding(J))throw new TypeError("Unknown encoding: "+J)}else typeof R=="number"&&(R&=255);if(0>O||this.length<O||this.length<j)throw new RangeError("Out of range index");if(j<=O)return this;if(O>>>=0,j=j===void 0?this.length:j>>>0,R||(R=0),typeof R=="number")for(J=O;J<j;++J)this[J]=R;else for(R=c.isBuffer(R)?R:W(new c(R,J).toString()),q=R.length,J=0;J<j-O;++J)this[J+O]=R[J%q];return this};var ye=/[^+\/0-9A-Za-z-_]/g}).call(i,d(31))},function(e,i,d){function t(c,r){this.test=r,this.statsGatheringRunning=!1,this.pc1=new RTCPeerConnection(c),this.pc2=new RTCPeerConnection(c),this.pc1.addEventListener("icecandidate",this.onIceCandidate_.bind(this,this.pc2)),this.pc2.addEventListener("icecandidate",this.onIceCandidate_.bind(this,this.pc1)),this.iceCandidateFilter_=t.noFilter}var u=d(13),a=d(1);t.prototype={establishConnection:function(){this.pc1.createOffer().then(this.gotOffer_.bind(this),this.test.reportFatal.bind(this.test))},close:function(){this.pc1.close(),this.pc2.close()},setIceCandidateFilter:function(c){this.iceCandidateFilter_=c},constrainVideoBitrate:function(c){this.constrainVideoBitrateKbps_=c},disableVideoFec:function(){this.constrainOfferToRemoveVideoFec_=!0},gatherStats:function(c,r,s,l){function g(){c.signalingState==="closed"?(S.statsGatheringRunning=!1,l(h,_,k,y)):(c.getStats().then(v).catch(function(x){S.test.reportError("Could not gather stats: "+x),S.statsGatheringRunning=!1,l(h,_)}),r&&r.getStats().then(o))}function o(x){adapter.browserDetails.browser==="chrome"?(x=u.enumerateStats(x,S.localTrackIds,S.remoteTrackIds),k.push(x),y.push(Date.now())):adapter.browserDetails.browser==="firefox"?(x=u.enumerateStatsFirefox(x),k.push(x),y.push(Date.now())):S.test.reportError("Only Firefox and Chrome getStats implementations are supported.")}function v(x){adapter.browserDetails.browser==="chrome"?(x=u.enumerateStats(x,S.localTrackIds,S.remoteTrackIds),h.push(x),_.push(Date.now())):adapter.browserDetails.browser==="firefox"?(x=u.enumerateStatsFirefox(x),h.push(x),_.push(Date.now())):S.test.reportError("Only Firefox and Chrome getStats implementations are supported."),setTimeout(g,100)}var h=[],k=[],_=[],y=[],S=this;S.localTrackIds={audio:"",video:""},S.remoteTrackIds={audio:"",video:""},c.getSenders().forEach(function(x){x.track.kind==="audio"?S.localTrackIds.audio=x.track.id:x.track.kind==="video"&&(S.localTrackIds.video=x.track.id)}),r&&r.getReceivers().forEach(function(x){x.track.kind==="audio"?S.remoteTrackIds.audio=x.track.id:x.track.kind==="video"&&(S.remoteTrackIds.video=x.track.id)}),this.statsGatheringRunning=!0,g()},gotOffer_:function(c){this.constrainOfferToRemoveVideoFec_&&(c.sdp=c.sdp.replace(/(m=video 1 [^\r]+)(116 117)(\r\n)/g,`$1\r
`),c.sdp=c.sdp.replace(/a=rtpmap:116 red\/90000\r\n/g,""),c.sdp=c.sdp.replace(/a=rtpmap:117 ulpfec\/90000\r\n/g,""),c.sdp=c.sdp.replace(/a=rtpmap:98 rtx\/90000\r\n/g,""),c.sdp=c.sdp.replace(/a=fmtp:98 apt=116\r\n/g,"")),this.pc1.setLocalDescription(c),this.pc2.setRemoteDescription(c),this.pc2.createAnswer().then(this.gotAnswer_.bind(this),this.test.reportFatal.bind(this.test))},gotAnswer_:function(c){this.constrainVideoBitrateKbps_&&(c.sdp=c.sdp.replace(/a=mid:video\r\n/g,`a=mid:video\r
b=AS:`+this.constrainVideoBitrateKbps_+`\r
`)),this.pc2.setLocalDescription(c),this.pc1.setRemoteDescription(c)},onIceCandidate_:function(c,r){if(r.candidate){var s=t.parseCandidate(r.candidate.candidate);this.iceCandidateFilter_(s)&&c.addIceCandidate(r.candidate)}}},t.noFilter=function(){return!0},t.isRelay=function(c){return c.type==="relay"},t.isNotHostCandidate=function(c){return c.type!=="host"},t.isReflexive=function(c){return c.type==="srflx"},t.isHost=function(c){return c.type==="host"},t.isIpv6=function(c){return c.address!==void 0&&c.address.indexOf(":")!==-1},t.parseCandidate=function(c){var r=c.indexOf("candidate:")+10;return c=c.substr(r).split(" "),{type:c[7],protocol:c[2],address:c[4]}},t.cachedIceServers_=null,t.cachedIceConfigFetchTime_=null,t.asyncCreateTurnConfig=function(c,r,s){r=a.ice_servers[s],r.turnURI!==""&&setTimeout(c.bind(null,{iceServers:[{username:r.turnUsername,credential:r.turnCredential,urls:r.turnURI}]}),0)},t.asyncCreateStunConfig=function(c,r,s){r=a.ice_servers[s],r.stunURI!==""&&setTimeout(c.bind(null,{iceServers:[{urls:r.stunURI}]}),0)},e.exports=t},function(e,i,d){e=function(){for(var t,u,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),c=[],r=0;r<a.length;r+=1)c[a[r]]=r;var s=function(){if(!t||u>=t.length)return-1;var o=t.charCodeAt(u)&255;return u+=1,o},l=function(){if(!t)return-1;for(;;){if(u>=t.length)return-1;var o=t.charAt(u);if(u+=1,c[o])return c[o];if(o==="A")return 0}},g=function(o){return o=o.toString(16),o.length===1&&(o="0"+o),unescape("%"+o)};return{encodeBase64:function(o){var v;t=o,u=0,o="";var h=Array(3),k=0;for(v=!1;!v&&(h[0]=s())!==-1;)h[1]=s(),h[2]=s(),o+=a[h[0]>>2],h[1]!==-1?(o+=a[h[0]<<4&48|h[1]>>4],h[2]!==-1?(o+=a[h[1]<<2&60|h[2]>>6],o+=a[h[2]&63]):(o+=a[h[1]<<2&60],o+="=",v=!0)):(o+=a[h[0]<<4&48],o+="=",o+="=",v=!0),k+=4,76<=k&&(o+=`
`,k=0);return o},decodeBase64:function(o){var v;t=o,u=0,o="";var h=Array(4);for(v=!1;!v&&(h[0]=l())!==-1&&(h[1]=l())!==-1;)h[2]=l(),h[3]=l(),o+=g(h[0]<<2&255|h[1]>>4),h[2]!==-1?(o+=g(h[1]<<4&255|h[2]>>2),h[3]!==-1?o+=g(h[2]<<6&255|h[3]):v=!0):v=!0;return o}}}(),i.a=e},function(e,i,d){i.c=function(a,c,r){try{return a.pipeThrough(new TransformStream(c))}catch{var s=a.getReader();return new ReadableStream({start:function(g){if(c.start)return c.start(g)},pull:function(g){var o,v,h;return H.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:o=!1,v={enqueue:function(_){o=!0,g.enqueue(_)}};case 2:if(o){k.jumpTo(0);break}return k.yield(s.read(),4);case 4:if(h=k.yieldResult,!h.done){k.jumpTo(5);break}if(!c.flush){k.jumpTo(6);break}return k.yield(c.flush(g),6);case 6:return k.return(g.close());case 5:return k.yield(c.transform(h.value,v),2)}})},cancel:function(g){a.cancel(g),r&&r(g)}})}},i.a=function(a,c){return new ReadableStream(new t(a,c))},i.b=function(a){return new ReadableStream(new u(a))};var t=function(a,c){this.blob=a,this.index=0,this.chunkSize=c||65536};t.prototype.pull=function(a){var c=this;return new Promise(function(r,s){var l=c.blob.size-c.index;if(0>=l)return a.close(),r();l=Math.min(c.chunkSize,l);var g=c.blob.slice(c.index,c.index+l),o=new FileReader;o.onload=function(){a.enqueue(new Uint8Array(o.result)),r()},o.onerror=s,o.readAsArrayBuffer(g),c.index+=l})};var u=function(a){this.streams=a,this.index=0,this.reader=null,this.nextReader()};u.prototype.nextReader=function(){var a=this.streams[this.index++];this.reader=a&&a.getReader()},u.prototype.pull=function(a){var c=this,r;return H.asyncExecutePromiseGeneratorProgram(function(s){if(s.nextAddress==1)return c.reader?s.yield(c.reader.read(),2):s.return(a.close());if(r=s.yieldResult,r.done)return c.nextReader(),s.return(c.pull(a));a.enqueue(r.value),s.jumpToEnd()})}},function(e,i){function d(t,u){if(!t)throw Error(u||"AssertionError")}d.notEqual=function(t,u,a){d(t!=u,a)},d.notOk=function(t,u){d(!t,u)},d.equal=function(t,u,a){d(t==u,a)},d.ok=d,e.exports=d},function(e,i,d){var t=d(12);d.n(t);var u=d(30),a=new TextEncoder,c=new TextDecoder;e=function(r,s){this._nonce=s||"yRCdyQ1EMSA3mo4rqSkuNQ==",this.rawSecret=r?Object(t.b64ToArray)(r):crypto.getRandomValues(new Uint8Array(16)),this.secretKeyPromise=crypto.subtle.importKey("raw",this.rawSecret,"HKDF",!1,["deriveKey"]),this.metaKeyPromise=this.secretKeyPromise.then(function(l){return crypto.subtle.deriveKey({name:"HKDF",salt:new Uint8Array,info:a.encode("metadata"),hash:"SHA-256"},l,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])}),this.authKeyPromise=this.secretKeyPromise.then(function(l){return crypto.subtle.deriveKey({name:"HKDF",salt:new Uint8Array,info:a.encode("authentication"),hash:"SHA-256"},l,{name:"HMAC",hash:{name:"SHA-256"}},!0,["sign"])})},e.prototype.setPassword=function(r,s){this.authKeyPromise=crypto.subtle.importKey("raw",a.encode(r),{name:"PBKDF2"},!1,["deriveKey"]).then(function(l){return crypto.subtle.deriveKey({name:"PBKDF2",salt:a.encode(s),iterations:100,hash:"SHA-256"},l,{name:"HMAC",hash:"SHA-256"},!0,["sign"])})},e.prototype.setAuthKey=function(r){this.authKeyPromise=crypto.subtle.importKey("raw",Object(t.b64ToArray)(r),{name:"HMAC",hash:"SHA-256"},!0,["sign"])},e.prototype.authKeyB64=function(){var r=this,s,l;return H.asyncExecutePromiseGeneratorProgram(function(g){return g.nextAddress==1?g.yield(r.authKeyPromise,2):g.nextAddress!=3?(s=g.yieldResult,g.yield(crypto.subtle.exportKey("raw",s),3)):(l=g.yieldResult,g.return(Object(t.arrayToB64)(new Uint8Array(l))))})},e.prototype.authHeader=function(){var r=this,s,l;return H.asyncExecutePromiseGeneratorProgram(function(g){return g.nextAddress==1?g.yield(r.authKeyPromise,2):g.nextAddress!=3?(s=g.yieldResult,g.yield(crypto.subtle.sign({name:"HMAC"},s,Object(t.b64ToArray)(r.nonce)),3)):(l=g.yieldResult,g.return("send-v1 "+Object(t.arrayToB64)(new Uint8Array(l))))})},e.prototype.encryptMetadata=function(r){var s=this,l,g;return H.asyncExecutePromiseGeneratorProgram(function(o){return o.nextAddress==1?o.yield(s.metaKeyPromise,2):o.nextAddress!=3?(l=o.yieldResult,o.yield(crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(12),tagLength:128},l,a.encode(JSON.stringify({name:r.name,size:r.size,type:r.type||"application/octet-stream",manifest:r.manifest||{},roomMeta:r.roomMeta||{}}))),3)):(g=o.yieldResult,o.return(g))})},e.prototype.encryptStream=function(r){return Object(u.c)(r,this.rawSecret)},e.prototype.decryptStream=function(r){return Object(u.b)(r,this.rawSecret)},e.prototype.decryptMetadata=function(r){var s=this,l,g;return H.asyncExecutePromiseGeneratorProgram(function(o){return o.nextAddress==1?o.yield(s.metaKeyPromise,2):o.nextAddress!=3?(l=o.yieldResult,o.yield(crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12),tagLength:128},l,r),3)):(g=o.yieldResult,o.return(JSON.parse(c.decode(g))))})},H.global.Object.defineProperties(e.prototype,{nonce:{configurable:!0,enumerable:!0,get:function(){return this._nonce},set:function(r){r&&r!==this._nonce&&(this._nonce=r)}}}),i.a=e},function(e,i){function d(){throw Error("setTimeout has not been defined")}function t(){throw Error("clearTimeout has not been defined")}function u(y){if(g===setTimeout)return setTimeout(y,0);if((g===d||!g)&&setTimeout)return g=setTimeout,setTimeout(y,0);try{return g(y,0)}catch{try{return g.call(null,y,0)}catch{return g.call(this,y,0)}}}function a(y){if(o===clearTimeout)return clearTimeout(y);if((o===t||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(y);try{return o(y)}catch{try{return o.call(null,y)}catch{return o.call(this,y)}}}function c(){h&&k&&(h=!1,k.length?v=k.concat(v):_=-1,v.length&&r())}function r(){if(!h){var y=u(c);h=!0;for(var S=v.length;S;){for(k=v,v=[];++_<S;)k&&k[_].run();_=-1,S=v.length}k=null,h=!1,a(y)}}function s(y,S){this.fun=y,this.array=S}function l(){}e=e.exports={};try{var g=typeof setTimeout=="function"?setTimeout:d}catch{g=d}try{var o=typeof clearTimeout=="function"?clearTimeout:t}catch{o=t}var v=[],h=!1,k,_=-1;e.nextTick=function(y){var S=Array(arguments.length-1);if(1<arguments.length)for(var x=1;x<arguments.length;x++)S[x-1]=arguments[x];v.push(new s(y,S)),v.length!==1||h||u(r)},s.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=l,e.addListener=l,e.once=l,e.off=l,e.removeListener=l,e.removeAllListeners=l,e.emit=l,e.prependListener=l,e.prependOnceListener=l,e.listeners=function(y){return[]},e.binding=function(y){throw Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,i,d){var t=d(25),u=d(0),a=d(7),c=d(5);d(8),d(9),e=d(1);var r=d.n(e);i.a=function(s){function l(){return document.getElementById("WebrtcEverywherePluginId")}function g(p,B,P){p=H.makeIterator(p);for(var z=p.next();!z.done;z=p.next())if(z=z.value,z.media.toLowerCase()===B.toLowerCase()){z=H.makeIterator(z.codecs);for(var te=z.next();!te.done;te=z.next())if(te=te.value,te.name.toLowerCase()===P.toLowerCase())return te}}var o={},v;o.remoteDesc=void 0,u.a.info("Starting Base stack",s),o.pcConfig={iceServers:[]},o.con={},s.iceServers!==void 0&&(o.pcConfig.iceServers=s.iceServers),s.forceTurn===!0&&(o.pcConfig.iceTransportPolicy="relay"),s.audio===void 0&&(s.audio=!0),s.video===void 0&&(s.video=!0),s.remoteCandidates=[],s.localCandidates=[],s.remoteDescriptionSet=!1,o.mediaConstraints={offerToReceiveVideo:s.video!==void 0&&s.video!==!1,offerToReceiveAudio:s.audio!==void 0&&s.audio!==!1};var h=function(p){return l().createSessionDescription(p)},k=function(p,B){return l().createPeerConnection(p,B)};a.a.browserEngineCheck()==="IE"?o.peerConnection=k(o.pcConfig,o.con):o.peerConnection=new RTCPeerConnection(o.pcConfig,o.con);var _=function(p){v=p,v.sdp=v.sdp.replace("a=sendrecv","a=sendonly"),x(!1,p)},y=function(p){v=p,x(!0,p)},S=function(p,B,P){u.a.error("message:",P,"in baseStack at",p),B!==void 0&&B("error")},x=function(p,B){v=B,p||(v.sdp=o.enableSimulcast(v.sdp)),p||a.a.browserEngineCheck()!=="safari"||(v.sdp=v.sdp.replace("a=sendrecv","a=sendonly")),v.sdp=t.a.setMaxBW(v.sdp,s),s.callback({type:v.type,sdp:v.sdp})},D=function(p,B){var P={};if(P.sdp=p.sdp,P.type=p.type,B===c.a.constant.H264_CODEC)B=g(p.media,"video","vp8"),p=g(p.media,"video","h264");else if(B===c.a.constant.default)B=g(p.media,"video","h264"),p=g(p.media,"video","vp8"),B!=null&&(P.sdp=P.sdp.replace("a=fmtp:"+B.payload+` level-asymmetry-allowed=1;packetization-mode=1;profile-level-id=42e01f\r
`,""));else return P;return B!=null&&(P.sdp=P.sdp.replace("a=rtpmap:"+B.payload+" "+B.name+`/90000\r
`,""),P.sdp=P.sdp.replace("m=video 1 UDP/TLS/RTP/SAVPF "+p.payload+" "+B.payload+`\r
`,"m=video 1 UDP/TLS/RTP/SAVPF "+p.payload+`\r
`),P.sdp=P.sdp.replace("m=video 1 UDP/TLS/RTP/SAVPF "+B.payload+" "+p.payload+`\r
`,"m=video 1 UDP/TLS/RTP/SAVPF "+p.payload+`\r
`),P.sdp=P.sdp.replace("a=rtcp-fb:"+B.payload+` ccm fir\r
`,""),P.sdp=P.sdp.replace("a=rtcp-fb:"+B.payload+` nack\r
`,""),P.sdp=P.sdp.replace("a=rtcp-fb:"+B.payload+` nack pli\r
`,""),P.sdp=P.sdp.replace("a=rtcp-fb:"+B.payload+` goog-remb\r
`,"")),P};o.resetSDP=function(p){var B=D(o.remoteDesc,p);o.peerConnection.createOffer({offerToReceiveVideo:!0,offerToReceiveAudio:!0,iceRestart:!1}).then(function(P){u.a.info(`OFFER: - 
`+P.sdp),u.a.info(`RECVD ANSWER B4: - 
`+o.remoteDesc.sdp),o.peerConnection.setLocalDescription(P).then(function(){u.a.info(`ANSWER: - 
`+B.sdp),o.peerConnection.setRemoteDescription(new RTCSessionDescription(B))}).catch(S.bind(null,"processAnswer",void 0))}).catch(function(P){u.a.info(P)})};var E=function(p,B){var P=p;if(u.a.info("Set remote and local description"),u.a.debug("Remote Description",P.sdp),u.a.debug("Local Description",v.sdp),P.sdp=t.a.setMaxBW(P.sdp,s),o.remoteDesc=JSON.parse(JSON.stringify(P)),a.a.browserEngineCheck()==="IE"){for(o.peerConnection.setLocalDescription(v),u.a.info("Remote msg details for sdp:- "+JSON.stringify(P)),o.peerConnection.setRemoteDescription(h(P)),s.remoteDescriptionSet=!0,u.a.info("Candidates to be added: ",s.remoteCandidates.length,s.remoteCandidates);0<s.remoteCandidates.length;)o.peerConnection.addIceCandidate(s.remoteCandidates.shift());for(u.a.info("Local candidates to send:",s.localCandidates.length);0<s.localCandidates.length&&!o.peerConnection;)s.callback({type:"candidate",candidate:s.localCandidates.shift()})}else u.a.debug("Remote Description",o.remoteDesc.sdp),o.peerConnection.setLocalDescription(v).then(function(){P=r.a.browser_info.name==="safari"&&r.a.browser_info.version>=c.a.constant.SAFARI_VERSION_SUPPORTING_VP8&&B!==c.a.constant.H264_CODEC?D(P,c.a.constant.default):r.a.browser_info.name==="safari"&&r.a.browser_info.version<=c.a.constant.SAFARI_VERSION_NOT_SUPPORTING_VP8&&B!==c.a.constant.H264_CODEC?D(P,c.a.constant.H264_CODEC):D(P,c.a.constant.default),u.a.debug("Remote Description",o.remoteDesc.sdp),o.peerConnection.setRemoteDescription(new RTCSessionDescription(P)).then(function(){s.remoteDescriptionSet=!0,u.a.info("Candidates to be added: ",s.remoteCandidates.length,s.remoteCandidates);for(var z={};0<s.remoteCandidates.length;)z.$jscomp$loop$prop$cand$225=s.remoteCandidates.shift(),o.peerConnection.addIceCandidate(z.$jscomp$loop$prop$cand$225).then(function(te){return function(){u.a.info("process answer adding remote ice cand Success: "+JSON.stringify(te.$jscomp$loop$prop$cand$225))}}(z)).catch(function(te){return function(W){u.a.error("process answer Failed addIceCandidate(): "+W+" cand: "+JSON.stringify(te.$jscomp$loop$prop$cand$225))}}(z)),z={$jscomp$loop$prop$cand$225:z.$jscomp$loop$prop$cand$225};for(u.a.info("Local candidates to send:",s.localCandidates.length);0<s.localCandidates.length;)s.callback({type:"candidate",candidate:s.localCandidates.shift()})}).catch(S.bind(null,"processAnswer",void 0))}).catch(S.bind(null,"processAnswer",void 0))},I=function(p){try{var B=typeof p.candidate=="object"?p.candidate:JSON.parse(p.candidate);if(B.candidate==="end")console.log("end candidates: ignore");else{B.candidate=B.candidate.replace(/a=/g,""),B.sdpMLineIndex=parseInt(B.sdpMLineIndex,10),B.sdpMid=B.sdpMid=="audio"?0:1;var P=new RTCIceCandidate(B);s.remoteDescriptionSet?o.peerConnection.addIceCandidate(P).then(function(){u.a.info("IN adding remote ice candidate Success: "+JSON.stringify(B))}).catch(function(z){u.a.error("addIceCandidate() Failed err: "+z+" cand: "+JSON.stringify(B))}):(u.a.debug("queuing candidates since remote description not set: "+JSON.stringify(B)),s.remoteCandidates.push(P))}}catch(z){u.a.error("Error parsing candidate error: "+z+" cand:"+p.candidate)}};return o.peerConnection.onicecandidate=function(p){(p=p.candidate)?p={sdpMLineIndex:p.sdpMLineIndex,sdpMid:p.sdpMid,candidate:"a="+p.candidate}:(u.a.info("Gathered all candidates. Sending END candidate"),p={sdpMLineIndex:-1,sdpMid:"end",candidate:"end"}),s.remoteDescriptionSet?s.callback({type:"candidate",candidate:p}):(s.localCandidates.push(p),u.a.info("Storing candidate: ",s.localCandidates.length,p))},o.peerConnection.onaddstream=function(p){o.onaddstream&&o.onaddstream(p)},o.peerConnection.onremovestream=function(p){o.onremovestream&&o.onremovestream(p)},o.peerConnection.oniceconnectionstatechange=function(p){o.oniceconnectionstatechange&&(u.a.debug("ICE connection state changed",p.currentTarget.iceConnectionState),u.a.debug("ICE gathering state changed",p.currentTarget.iceGatheringState),o.oniceconnectionstatechange(p.currentTarget.iceConnectionState))},o.peerConnection.onconnectionstatechange=function(p){o.onconnectionstatechange&&(u.a.debug("Peer connection state changed",o.peerConnection.connectionState),o.onconnectionstatechange(o.peerConnection.connectionState))},o.enableSimulcast=function(p){return u.a.error("Simulcast not implemented"),p},o.updateSimulcastLayersBitrate=function(p){o.simulcast&&(o.simulcast.spatialLayerBitrates=p,o.setSimulcastLayersBitrate())},o.setSimulcastLayersBitrate=function(){u.a.error("Simulcast not implemented")},o.setSimulcast=function(p){o.simulcast=p},o.close=function(){o.state="closed",o.peerConnection.close()},o.updateSpec=function(p,B){B=B===void 0?function(){}:B,(p.maxVideoBW||p.maxAudioBW)&&(p.maxVideoBW&&(u.a.debug("Maxvideo Requested:",p.maxVideoBW,"limit:",s.limitMaxVideoBW),p.maxVideoBW>s.limitMaxVideoBW&&(p.maxVideoBW=s.limitMaxVideoBW),s.maxVideoBW=p.maxVideoBW,u.a.debug("Result",s.maxVideoBW)),p.maxAudioBW&&(p.maxAudioBW>s.limitMaxAudioBW&&(p.maxAudioBW=s.limitMaxAudioBW),s.maxAudioBW=p.maxAudioBW),v.sdp=t.a.setMaxBW(v.sdp,s),p.Sdp||p.maxAudioBW?(u.a.debug("Updating with SDP renegotiation",s.maxVideoBW,s.maxAudioBW),o.peerConnection.setLocalDescription(v).then(function(){return o.remoteDesc.sdp=t.a.setMaxBW(o.remoteDesc.sdp,s),o.peerConnection.setRemoteDescription(new RTCSessionDescription(o.remoteDesc))}).then(function(){s.remoteDescriptionSet=!0,s.callback({type:"updatestream",sdp:v.sdp})}).catch(S.bind(null,"updateSpec",B))):(u.a.debug("Updating without SDP renegotiation, newVideoBW:",s.maxVideoBW,"newAudioBW:",s.maxAudioBW),s.callback({type:"updatestream",sdp:v.sdp}))),(p.minVideoBW||p.slideShowMode!==void 0||p.muteStream!==void 0||p.qualityLayer!==void 0||p.video!==void 0)&&(u.a.debug("MinVideo Changed to ",p.minVideoBW),u.a.debug("SlideShowMode Changed to ",p.slideShowMode),u.a.debug("muteStream changed to ",p.muteStream),u.a.debug("Video Constraints",p.video),s.callback({type:"updatestream",config:p}))},o.createOffer=function(p,B){p!==!0&&(o.mediaConstraints={offerToReceiveVideo:!1,offerToReceiveAudio:!1}),B&&(o.mediaConstraints.iceRestart=B),u.a.debug("Creating offer :-"+JSON.stringify(o.mediaConstraints)),a.a.browserEngineCheck()==="IE"?p!==!0?o.peerConnection.createOffer(_,S):o.peerConnection.createOffer(y,S,{optional:[{OfferToReceiveAudio:!0},{OfferToReceiveVideo:!0}]}):o.peerConnection.createOffer(o.mediaConstraints).then(x.bind(null,p)).catch(S.bind(null,"Create Offer",void 0))},o.addStream=function(p){o.peerConnection.addStream(p)},o.addTrack=function(p){o.peerConnection.addTrack(p)},o.processSignalingMessage=function(p,B){p.type==="answer"?E(p,B):p.type==="candidate"&&I(p)},o}},function(e,i,d){i.a={addSim:function(t){var u="a=ssrc-group:SIM";return t.forEach(function(a){u+=" "+a}),u+`\r
`},addGroup:function(t,u){return"a=ssrc-group:FID "+t+" "+u+`\r
`},addSpatialLayer:function(t,u,a,c,r,s){return"a=ssrc:"+r+" cname:"+t+`\r
a=ssrc:`+(r+" msid:"+u+`\r
a=ssrc:`)+(r+" mslabel:"+a+`\r
a=ssrc:`)+(r+" label:"+c+`\r
a=ssrc:`)+(s+" cname:"+t+`\r
a=ssrc:`)+(s+" msid:"+u+`\r
a=ssrc:`)+(s+" mslabel:"+a+`\r
a=ssrc:`)+(s+" label:"+c+`\r
`)},setMaxBW:function(t,u){var a=t;if(u.video&&u.maxVideoBW){a=a.replace(/b=AS:.*\r\n/g,"");var c=a.match(/m=video.*\r\n/);c==null&&(c=a.match(/m=video.*\n/)),c&&0<c.length&&(t=c[0]+"b=AS:"+u.maxVideoBW+`\r
`,a=a.replace(c[0],t))}return u.audio&&u.maxAudioBW&&(c=a.match(/m=audio.*\r\n/),c==null&&(c=a.match(/m=audio.*\n/)),c&&0<c.length&&(t=c[0]+"b=AS:"+u.maxAudioBW+`\r
`,a=a.replace(c[0],t))),a},enableOpusNacks:function(t){var u=t.match(/a=rtpmap:(.*)opus.*\r\n/);return u!==null&&(t=t.replace(u[0],u[0]+"a=rtcp-fb:"+u[1]+`nack\r
`)),t}}},function(e,i,d){var t=d(6);i.a=function(u){return u.name==="OverconstrainedError"&&u.constraint==="deviceId"?t.a.error_1142:u.name!="OverconstrainedError"&&u.name!="ConstraintNotSatisfiedError"||u.constraint!=="width"?u.name!="OverconstrainedError"&&u.name!="ConstraintNotSatisfiedError"||u.constraint!=="height"?u.name!="OverconstrainedError"&&u.name!="ConstraintNotSatisfiedError"||u.constraint?u.name=="NotFoundError"||u.name=="DevicesNotFoundError"?t.a.error_1143:u.name=="NotReadableError"||u.name=="TrackStartError"?t.a.error_1145:u.name=="NotAllowedError"||u.name=="PermissionDeniedError"?t.a.error_1144:u.name=="TypeError"||u.name=="TypeError"?t.a.error_1146:t.a.error_1150:t.a.error_1149:t.a.error_1148:t.a.error_1147}},function(e,i,d){var t=d(2),u=d(15),a=d(3),c=d(28);e=d(1);var r=d.n(e);i.a=function(s){var l=Object(t.a)({}),g=Object(u.a)().player.default;if(a.a.checkParam(s.options)&&a.a.checkParam(s.options.player)){var o=s.options.player;a.a.checkParam(o.autoplay)&&(g.autoplay=o.autoplay),a.a.checkParam(o.name)&&(g.name=o.name),a.a.checkParam(o.nameDisplayMode)&&(g.nameDisplayMode=o.nameDisplayMode),a.a.checkParam(o.frameFitMode)&&(g.frameFitMode=o.frameFitMode),a.a.checkParam(o.skin)&&(g.skin=o.skin),a.a.checkParam(o.class)&&(g.class=o.class),a.a.checkParam(o.height)&&(g.height=o.height),a.a.checkParam(o.width)&&(g.width=o.width),a.a.checkParam(o.minHeight)&&(g.minHeight=o.minHeight),a.a.checkParam(o.minWidth)&&(g.minWidth=o.minWidth),a.a.checkParam(o.aspectRatio)&&(g.aspectRatio=o.aspectRatio),a.a.checkParam(o.volume)&&(g.volume=o.volume),a.a.checkParam(o.backgroundImg)&&(g.backgroundImg=o.backgroundImg),a.a.checkParam(o.media)&&(g.media=o.media),a.a.checkParam(o.loader)&&(o=o.loader,a.a.checkParam(o.url)&&(g.loader.url=o.url),g.loader.show=o.show,a.a.checkParam(o.class)&&(g.loader.class=o.class),a.a.checkParam(o.style)&&(g.loader.style=o.style))}l.id=s.id,l.stream=s.videoSource,l.elementID=s.elementID,l.abwd={},l.abwd.notification=!0,l.abwd.lang="en",a.a.checkParam(s.options)&&a.a.checkParam(s.options.player)&&a.a.checkParam(s.options.player.abwd)&&(o=s.options.player.abwd,o.enabled===!1?l.abwd.notification=!1:o.enabled===!0&&o.notification==="sdk"?(l.abwd.notification=!0,l.abwd.lang=o.language==="en"||o.language==="zh"?o.language:"en"):o.enabled===!0&&o.notification==="app"&&(l.abwd.notification=!1,l.abwd.lang="")),o=a.a.getById(s.elementID),o.style.height=g.height,o.style.width=g.width,o.style.minHeight=g.minHeight,o.style.minWidth=g.minWidth;var v=function(I,p,B,P){(P?1/I*p>B:1/I*p<B)?(l.video.style.width=p+"px",l.video.style.height=1/I*p+"px",l.video.style.top=-(1/I*p/2-B/2)+"px",l.video.style.left="0px"):(l.video.style.height=B+"px",l.video.style.width=I*B+"px",l.video.style.left=-(I*B/2-p/2)+"px",l.video.style.top="0px"),l.video.style.overflow="hidden"};l.destroy=function(){if(console.log("video player destroy "),l.video.pause(),r.a.csp_enabled)l.container.removeChild(l.div);else{delete l.resizer;try{l.div.removeChild(h),l.div.removeChild(y)}catch(I){console.log("error videoplayer.destroy() removeChild err: "+I)}}},l.resize=function(){var I=l.container.offsetWidth,p=l.container.offsetHeight;s.stream.screen||s.options.crop===!1||s.stream.canvas?v(16/9,I,p,!1):(I!==l.containerWidth||p!==l.containerHeight)&&v(4/3,I,p,!0),l.containerWidth=I,l.containerHeight=p},o=s.stream.getPlayerId(s.vroom?s.vroom:s.stream.room),l.div=Object(a.a)({name:"div",id:""+o.player,class:"vcx_player "+g.skin+"_vcx_player",style:{"object-position":"65% 50%"}}),g.loader.url&&(l.loader=Object(a.a)({name:"img",src:g.loader.url,id:"back_"+l.id,class:"vcx_player_loader "+g.loader.class+" "+g.skin+"_vcx_player_loader"}),g.loader.show||(l.loader.style.display="none")),g.backgroundImg&&(l.screenSaver=Object(a.a)({name:"img",src:g.backgroundImg,id:"screen_saver_"+l.id,class:"vcx_player_screen_saver "+g.skin+"_vcx_player_screen_saver"}),l.screenSaver.style.display="none"),g={name:"video",id:""+o.stream,class:"vcx_stream "+g.skin+"_vcx_stream"},s.extraPlayerOptions.autoplay&&(g.autoplay=s.extraPlayerOptions.autoplay),s.extraPlayerOptions.playsinline&&(g.playsinline=s.extraPlayerOptions.playsinline),l.video=Object(a.a)(g),s.stream.local&&(l.video.volume=0),l.container=l.elementID!==void 0?typeof l.elementID=="object"&&typeof l.elementID.appendChild=="function"?l.elementID:a.a.getById(l.elementID):document.body,l.container.appendChild(l.div),l.parentNode=l.div.parentNode;var h=void 0,k=void 0,_=void 0,y=void 0,S=void 0,x=void 0,D=void 0;if(!r.a.csp_enabled){if(k=document.createElement("div"),k.setAttribute("id","stats-container-"+l.id),k.setAttribute("class","stats-container"),k.setAttribute("style","display:none;"),h=document.createElement("div"),h.setAttribute("id","bw-notif-"+l.id),h.setAttribute("class","bw-notification"),h.setAttribute("style","display:none;"),r.a.alertNotifyInfo&&r.a.alertNotifyInfo.mode&&r.a.alertNotifyInfo.mode=="image"){var E=document.createElement("div");E.setAttribute("id","icon-bw-low-"+l.id),E.setAttribute("class","icon-bw"),E.innerHTML=window.lowBwIcon,h.appendChild(E)}_=document.createElement("div"),_.setAttribute("id","stats-button-"+l.id),_.setAttribute("class","stats-button"),_.setAttribute("title","Click to see stats"),_.innerHTML=window.statsIcon,k.appendChild(_),y=document.createElement("div"),y.setAttribute("class","stats-overlay"),y.setAttribute("id","stats-overlay-"+l.id),y.setAttribute("style",`display: none;
            position: absolute;z-index: 3;
            padding: 5px;top: 0px;right: 0px;
            background: linear-gradient(90deg,rgb(204 41 42 / 62%),#a20a90b0);
            border-radius: 5px;color: #fff;width: 100%;`),S=document.createElement("div"),S.setAttribute("class","stats-overlay-inner"),S.setAttribute("id","stats-overlay-inner-"+l.id),x=document.createElement("div"),D=document.createElement("div"),x.setAttribute("class","stats-left-partition"),x.setAttribute("id","stats-left-part-"+l.id),D.setAttribute("class","stats-right-partition"),D.setAttribute("id","stats-right-part-"+l.id),_.addEventListener("click",function(){y.style.display=y.style.display==="none"?"block":"none"}),l.div.parentNode.style.position="relative",l.div.appendChild(k),l.div.appendChild(y),y.appendChild(S),l.div.appendChild(h),S.appendChild(x),S.appendChild(D)}return l.loader&&l.div.appendChild(l.loader),l.screenSaver&&l.div.appendChild(l.screenSaver),l.div.appendChild(l.video),l.containerWidth=0,l.containerHeight=0,!r.a.csp_enabled&&s.options&&s.options.resizer!==!1&&(l.resizer=L.ResizeSensor(l.container,l.resize),l.resize()),s.options.bar===!1&&(l.media=l.video),l.video.srcObject=l.stream,l.ShowSessionStats=function(I){r.a.csp_enabled||(I===!0?(k.setAttribute("style","display:block;"),y.setAttribute("style","display:block;position: absolute;z-index:3;padding: 5px;top:0;right:0;background: rgba(20, 198, 239, 0.75);")):(k.setAttribute("style","display:none;"),y.setAttribute("style","display:none;position: absolute;z-index:3;padding: 5px;top:0;right:0;background: rgba(20, 198, 239, 0.75);")))},l.streamUpdated=function(I){I!=l.id&&(l.id=I,l.video&&(I=s.stream.getPlayerId(s.vroom?s.vroom:s.stream.room),l.div.setAttribute("id",""+I.player),l.video.setAttribute("id",""+I.stream),l.loader!=null&&l.loader.setAttribute("id","back_"+l.id),l.screenSaver!=null&&l.screenSaver.setAttribute("id","screen_saver_"+l.id),k!=null&&k.setAttribute("id","stats-container-"+l.id),h!=null&&h.setAttribute("id","bw-notif-"+l.id),E!=null&&E.setAttribute("id","icon-bw-low-"+l.id),_!=null&&_.setAttribute("id","bw-notif-"+l.id),y!=null&&y.setAttribute("id","stats-overlay-"+l.id),S!=null&&S.setAttribute("id","stats-overlay-inner-"+l.id),x!=null&&x.setAttribute("id","stats-left-part-"+l.id),D!=null&&D.setAttribute("id","stats-right-part-"+l.id)))},l.setBwAlert=function(I,p,B){l.abwd.notification===!1||r.a.csp_enabled||(I===!0?(I="Low Bandwidth",r.a.alertNotifyInfo.customLowBw?I=r.a.alertNotifyInfo.customLowBw:l.abwd.lang&&l.abwd.lang!=""&&(I=p==="subscriber"?c.a.abwd[l.abwd.lang].bw_alert_subscriber:B+c.a.abwd[l.abwd.lang].bw_alert_publisher),r.a.alertNotifyInfo.mode=="text"?(console.log("videoPlayer - setBwAlert(): setting  text id: "+l.id),h.innerText=I,h.setAttribute("style","display:block;position:absolute;z-index:3;padding:5px 10px;top:50%;right:50%"),h.setAttribute("style","transform:translateX(50%);background:rgba(0,0,0,0.29)"),h.setAttribute("style","border-radius:5px;color:rgb(255,255,255)")):r.a.alertNotifyInfo.mode=="image"&&(console.log("videoPlayer - setBwAlert(): setting  image id: "+l.id),E.setAttribute("title",I),h.setAttribute("style","display:block;position:absolute;z-index:3;padding:5px;bottom:5%;right:5%"))):(console.log("videoPlayer - setBwAlert(): removing image/text  id: "+l.id),h.setAttribute("style","display:none")))},l.setVideoMutedMsg=function(I){if(l.abwd.notification!==!1&&!r.a.csp_enabled)if(I.videomuted===!0&&I.reason==="bw"){var p="Video Muted";r.a.alertNotifyInfo.customVideoMute?p=r.a.alertNotifyInfo.customVideoMute:l.abwd.lang&&l.abwd.lang!=""&&(p=I.name+" "+c.a.abwd[l.abwd.lang].video_muted),r.a.alertNotifyInfo.mode=="text"?(h.innerText=p,h.setAttribute("style","display:block;position:absolute;z-index:3;padding:5px 10px;top:50%;right:50%"),h.setAttribute("style","transform:translateX(50%);background:rgba(0,0,0,0.29)"),h.setAttribute("style","border-radius:5px;color:rgb(255,255,255)")):r.a.alertNotifyInfo.mode=="image"&&(E.setAttribute("title",p),h.setAttribute("style","display:block;position:absolute;z-index:3;padding:5px"))}else h.setAttribute("style","display:none")},l}},function(e,i,d){i.a={abwd:{en:{bw_alert_publisher:" Low upload bandwidth",bw_alert_subscriber:" Low Download bandwidth",video_muted:" Video muted due to low bandwidth"},zh:{bw_alert_publisher:" 网络不好",bw_alert_subscriber:"你的下载带宽很低",video_muted:" 您的视频因带宽而静音"}}}},function(e,i,d){function t(s){var l=s.length;if(0<l%4)throw Error("Invalid string. Length must be a multiple of 4");return s=s.indexOf("="),s===-1&&(s=l),[s,s===l?0:4-s%4]}function u(s,l,g){for(var o=[],v=l;v<g;v+=3)l=(s[v]<<16&16711680)+(s[v+1]<<8&65280)+(s[v+2]&255),o.push(a[l>>18&63]+a[l>>12&63]+a[l>>6&63]+a[l&63]);return o.join("")}i.byteLength=function(s){s=t(s);var l=s[1];return 3*(s[0]+l)/4-l},i.toByteArray=function(s){var l=t(s),g=l[0];l=l[1];for(var o=new r(3*(g+l)/4-l),v=0,h=0<l?g-4:g,k=0;k<h;k+=4)g=c[s.charCodeAt(k)]<<18|c[s.charCodeAt(k+1)]<<12|c[s.charCodeAt(k+2)]<<6|c[s.charCodeAt(k+3)],o[v++]=g>>16&255,o[v++]=g>>8&255,o[v++]=g&255;return l===2&&(g=c[s.charCodeAt(k)]<<2|c[s.charCodeAt(k+1)]>>4,o[v++]=g&255),l===1&&(g=c[s.charCodeAt(k)]<<10|c[s.charCodeAt(k+1)]<<4|c[s.charCodeAt(k+2)]>>2,o[v++]=g>>8&255,o[v++]=g&255),o},i.fromByteArray=function(s){for(var l=s.length,g=l%3,o=[],v=0,h=l-g;v<h;v+=16383)o.push(u(s,v,v+16383>h?h:v+16383));return g===1?(s=s[l-1],o.push(a[s>>2]+a[s<<4&63]+"==")):g===2&&(s=(s[l-2]<<8)+s[l-1],o.push(a[s>>10]+a[s>>4&63]+a[s<<2&63]+"=")),o.join("")};var a=[],c=[],r=typeof Uint8Array<"u"?Uint8Array:Array;for(e=0;64>e;++e)a[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e],c["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;c[45]=62,c[95]=63},function(e,i,d){(function(t){i.c=function(l,g,o,v){return o=o===void 0?65536:o,v===void 0&&(v=new Uint8Array(16),crypto.getRandomValues(v),v=v.buffer),l=Object(a.c)(l,new s(o,"encrypt")),Object(a.c)(l,new r("encrypt",g,o,v))},i.b=function(l,g,o){return o=o===void 0?65536:o,l=Object(a.c)(l,new s(o,"decrypt")),Object(a.c)(l,new r("decrypt",g,o))};var u=d(17);d.n(u);var a=d(20);i.a=65536;var c=new TextEncoder,r=function(l,g,o,v){this.mode=l,this.prevChunk,this.seq=0,this.firstchunk=!0,this.rs=o,this.ikm=g.buffer,this.salt=v};r.prototype.generateKey=function(){var l=this,g;return H.asyncExecutePromiseGeneratorProgram(function(o){return o.nextAddress==1?o.yield(crypto.subtle.importKey("raw",l.ikm,"HKDF",!1,["deriveKey"]),2):(g=o.yieldResult,o.return(crypto.subtle.deriveKey({name:"HKDF",salt:l.salt,info:c.encode("Content-Encoding: aes128gcm\0"),hash:"SHA-256"},g,{name:"AES-GCM",length:128},!0,["encrypt","decrypt"])))})},r.prototype.generateNonceBase=function(){var l=this,g,o,v,h;return H.asyncExecutePromiseGeneratorProgram(function(k){switch(k.nextAddress){case 1:return k.yield(crypto.subtle.importKey("raw",l.ikm,"HKDF",!1,["deriveKey"]),2);case 2:return g=k.yieldResult,o=crypto.subtle,v=o.exportKey,k.yield(crypto.subtle.deriveKey({name:"HKDF",salt:l.salt,info:c.encode("Content-Encoding: nonce\0"),hash:"SHA-256"},g,{name:"AES-GCM",length:128},!0,["encrypt","decrypt"]),4);case 4:return k.yield(v.call(o,"raw",k.yieldResult),3);case 3:return h=k.yieldResult,k.return(t.from(h.slice(0,12)))}})},r.prototype.generateNonce=function(l){if(4294967295<l)throw Error("record sequence number exceeds limit");var g=t.from(this.nonceBase),o=g.readUIntBE(g.length-4,4);return g.writeUIntBE((o^l)>>>0,g.length-4,4),g},r.prototype.pad=function(l,g){var o=l.length;if(o+16>=this.rs)throw Error("data too large for record size");return g?(g=t.alloc(1),g.writeUInt8(2,0),t.concat([l,g])):(g=t.alloc(this.rs-o-16),g.fill(0),g.writeUInt8(1,0),t.concat([l,g]))},r.prototype.unpad=function(l,g){for(var o=l.length-1;0<=o;o--)if(l[o]){if(g){if(l[o]!==2)throw Error("delimiter of final record is not 2")}else if(l[o]!==1)throw Error("delimiter of not final record is not 1");return l.slice(0,o)}throw Error("no delimiter found")},r.prototype.createHeader=function(){var l=t.alloc(5);return l.writeUIntBE(this.rs,0,4),l.writeUIntBE(0,4,1),t.concat([t.from(this.salt),l])},r.prototype.readHeader=function(l){if(21>l.length)throw Error("chunk too small for reading header");var g={};return g.salt=l.buffer.slice(0,16),g.rs=l.readUIntBE(16,4),l=l.readUInt8(20),g.length=l+16+5,g},r.prototype.encryptRecord=function(l,g,o){var v=this,h,k;return H.asyncExecutePromiseGeneratorProgram(function(_){return _.nextAddress==1?(h=v.generateNonce(g),_.yield(crypto.subtle.encrypt({name:"AES-GCM",iv:h},v.key,v.pad(l,o)),2)):(k=_.yieldResult,_.return(t.from(k)))})},r.prototype.decryptRecord=function(l,g,o){var v=this,h,k;return H.asyncExecutePromiseGeneratorProgram(function(_){return _.nextAddress==1?(h=v.generateNonce(g),_.yield(crypto.subtle.decrypt({name:"AES-GCM",iv:h,tagLength:128},v.key,l),2)):(k=_.yieldResult,_.return(v.unpad(t.from(k),o)))})},r.prototype.start=function(l){var g=this,o,v;return H.asyncExecutePromiseGeneratorProgram(function(h){if(h.nextAddress==1){if(g.mode!=="encrypt"){if(g.mode!=="decrypt")throw Error("mode must be either encrypt or decrypt");return h.jumpTo(0)}return o=g,h.yield(g.generateKey(),3)}if(h.nextAddress!=4)return o.key=h.yieldResult,v=g,h.yield(g.generateNonceBase(),4);v.nonceBase=h.yieldResult,l.enqueue(g.createHeader()),h.jumpToEnd()})},r.prototype.transformPrevChunk=function(l,g){var o=this,v,h,k,_,y,S,x;return H.asyncExecutePromiseGeneratorProgram(function(D){switch(D.nextAddress){case 1:return o.mode==="encrypt"?(S=g,x=S.enqueue,D.yield(o.encryptRecord(o.prevChunk,o.seq,l),9)):o.seq===0?(k=o.readHeader(o.prevChunk),o.salt=k.salt,o.rs=k.rs,_=o,D.yield(o.generateKey(),7)):(v=g,h=v.enqueue,D.yield(o.decryptRecord(o.prevChunk,o.seq-1,l),6));case 6:h.call(v,D.yieldResult),D.jumpTo(5);break;case 7:return _.key=D.yieldResult,y=o,D.yield(o.generateNonceBase(),8);case 8:y.nonceBase=D.yieldResult;case 5:o.seq++,D.jumpTo(0);break;case 9:x.call(S,D.yieldResult),o.seq++,D.jumpToEnd()}})},r.prototype.transform=function(l,g){var o=this;return H.asyncExecutePromiseGeneratorProgram(function(v){if(v.nextAddress==1)return o.firstchunk?v.jumpTo(2):v.yield(o.transformPrevChunk(!1,g),2);o.firstchunk=!1,o.prevChunk=t.from(l.buffer),v.jumpToEnd()})},r.prototype.flush=function(l){var g=this;return H.asyncExecutePromiseGeneratorProgram(function(o){return g.prevChunk?o.yield(g.transformPrevChunk(!0,l),0):o.jumpTo(0)})};var s=function(l,g){this.mode=g,this.rs=l,this.chunkSize=g==="encrypt"?l-17:21,this.partialChunk=new Uint8Array(this.chunkSize),this.offset=0};s.prototype.send=function(l,g){g.enqueue(l),this.chunkSize===21&&this.mode==="decrypt"&&(this.chunkSize=this.rs),this.partialChunk=new Uint8Array(this.chunkSize),this.offset=0},s.prototype.transform=function(l,g){var o=0;if(0<this.offset){var v=Math.min(l.byteLength,this.chunkSize-this.offset);this.partialChunk.set(l.slice(0,v),this.offset),this.offset+=v,o+=v,this.offset===this.chunkSize&&this.send(this.partialChunk,g)}for(;o<l.byteLength;)v=l.byteLength-o,v>=this.chunkSize?(v=l.slice(o,o+this.chunkSize),o+=this.chunkSize,this.send(v,g)):(v=l.slice(o,o+v),o+=v.byteLength,this.partialChunk.set(v),this.offset=v.byteLength)},s.prototype.flush=function(l){0<this.offset&&l.enqueue(this.partialChunk.slice(0,this.offset))}}).call(i,d(17).Buffer)},function(e,i){i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(i=window)}e.exports=i},function(e,i,d){function t(r){if(!(this instanceof t))return new t(r);this._name=r||"nanobus",this._starListeners=[],this._listeners={}}var u=d(57),a=d(58),c=d(21);e.exports=t,t.prototype.emit=function(r){c.ok(typeof r=="string"||typeof r=="symbol","nanobus.emit: eventName should be type string or symbol");for(var s=[],l=1,g=arguments.length;l<g;l++)s.push(arguments[l]);return l=a(this._name+"('"+r.toString()+"')"),(g=this._listeners[r])&&0<g.length&&this._emit(this._listeners[r],s),0<this._starListeners.length&&this._emit(this._starListeners,r,s,l.uuid),l(),this},t.prototype.on=t.prototype.addListener=function(r,s){return c.ok(typeof r=="string"||typeof r=="symbol","nanobus.on: eventName should be type string or symbol"),c.equal(typeof s,"function","nanobus.on: listener should be type function"),r==="*"?this._starListeners.push(s):(this._listeners[r]||(this._listeners[r]=[]),this._listeners[r].push(s)),this},t.prototype.prependListener=function(r,s){return c.ok(typeof r=="string"||typeof r=="symbol","nanobus.prependListener: eventName should be type string or symbol"),c.equal(typeof s,"function","nanobus.prependListener: listener should be type function"),r==="*"?this._starListeners.unshift(s):(this._listeners[r]||(this._listeners[r]=[]),this._listeners[r].unshift(s)),this},t.prototype.once=function(r,s){function l(){s.apply(g,arguments),g.removeListener(r,l)}c.ok(typeof r=="string"||typeof r=="symbol","nanobus.once: eventName should be type string or symbol"),c.equal(typeof s,"function","nanobus.once: listener should be type function");var g=this;return this.on(r,l),this},t.prototype.prependOnceListener=function(r,s){function l(){s.apply(g,arguments),g.removeListener(r,l)}c.ok(typeof r=="string"||typeof r=="symbol","nanobus.prependOnceListener: eventName should be type string or symbol"),c.equal(typeof s,"function","nanobus.prependOnceListener: listener should be type function");var g=this;return this.prependListener(r,l),this},t.prototype.removeListener=function(r,s){function l(g,o){if(g&&(o=g.indexOf(o),o!==-1))return u(g,o,1),!0}return c.ok(typeof r=="string"||typeof r=="symbol","nanobus.removeListener: eventName should be type string or symbol"),c.equal(typeof s,"function","nanobus.removeListener: listener should be type function"),r==="*"?(this._starListeners=this._starListeners.slice(),l(this._starListeners,s)):(typeof this._listeners[r]<"u"&&(this._listeners[r]=this._listeners[r].slice()),l(this._listeners[r],s))},t.prototype.removeAllListeners=function(r){return r?r==="*"?this._starListeners=[]:this._listeners[r]=[]:(this._starListeners=[],this._listeners={}),this},t.prototype.listeners=function(r){r=r!=="*"?this._listeners[r]:this._starListeners;var s=[];if(r)for(var l=r.length,g=0;g<l;g++)s.push(r[g]);return s},t.prototype._emit=function(r,s,l,g){if(typeof r<"u"&&r.length!==0)for(l===void 0&&(l=s,s=null),s&&(l=g!==void 0?[s].concat(l,g):[s].concat(l)),s=r.length,g=0;g<s;g++){var o=r[g];o.apply(o,l)}}},function(e,i,d){Object.defineProperty(i,"__esModule",{value:!0}),e=d(0);var t=d(11),u=d(4),a=d(14),c=d(15),r=d(27),s=d(68),l=d(1);l=d.n(l);var g=d(69),o=d(78),v=d(79);v=d.n(v),d(80),l.a.csp_enabled||d(82),d={Logger:e.a,clientDiagnostics:g.a.clientDiagnostics,clientBitrate:g.a.clientBitrate,appData:o.a,audience:v.a,EnxRoom:t.a.bind(null,void 0,void 0),Event:u.b,RoomEvent:u.e,StreamEvent:u.f,EnxStream:a.a.bind(null,void 0),VideoPlayer:r.a,ViewProperties:c.a,isSupported:l.a.is_supported,version:l.a.product.version,getDevices:s.a.getDevice,switchMediaDevice:s.a.switchMediaDevice,notifyDeviceUpdate:s.a.notifyDeviceUpdate,joinRoom:s.a.joinRoom,listParticipants:s.a.listParticipants,getRoom:s.a.getRoom,browserInfo:l.a.browser_info},i.default=d},function(e,i,d){(function(t,u){e.exports=u()})(this,function(){var t=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,u=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,a=function(k,_,y){var S=String(k);return!S||S.length>=_?k:""+Array(_+1-S.length).join(y)+k},c={s:a,z:function(k){k=-k.utcOffset();var _=Math.abs(k),y=_%60;return(0>=k?"+":"-")+a(Math.floor(_/60),2,"0")+":"+a(y,2,"0")},m:function k(_,y){if(_.date()<y.date())return-k(y,_);var S=12*(y.year()-_.year())+(y.month()-_.month()),x=_.clone().add(S,"month"),D=0>y-x;return _=_.clone().add(S+(D?-1:1),"month"),+(-(S+(y-x)/(D?x-_:_-x))||0)},a:function(k){return 0>k?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:"month",y:"year",w:"week",d:"day",D:"date",h:"hour",m:"minute",s:"second",ms:"millisecond",Q:"quarter"}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},r="en",s={};s[r]={name:"en",weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),months:"January February March April May June July August September October November December".split(" ")};var l=function(k){return k instanceof v},g=function k(_,y,S){var x;if(!_)return r;if(typeof _=="string"){var D=_.toLowerCase();if(s[D]&&(x=D),y&&(s[D]=y,x=D),_=_.split("-"),!x&&1<_.length)return k(_[0])}else x=_.name,s[x]=_;return!S&&x&&(r=x),x||!S&&r},o=function(k,_){if(l(k))return k.clone();var y=typeof _=="object"?_:{};return y.date=k,y.args=arguments,new v(y)};c.l=g,c.i=l,c.w=function(k,_){return o(k,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var v=function(){function k(y){this.$L=g(y.locale,null,!0),this.parse(y)}var _=k.prototype;return _.parse=function(y){this.$d=function(S){var x=S.date;if(S=S.utc,x===null)return new Date(NaN);if(c.u(x))return new Date;if(x instanceof Date)return new Date(x);if(typeof x=="string"&&!/Z$/i.test(x)){var D=x.match(t);if(D){x=D[2]-1||0;var E=(D[7]||"0").substring(0,3);return S?new Date(Date.UTC(D[1],x,D[3]||1,D[4]||0,D[5]||0,D[6]||0,E)):new Date(D[1],x,D[3]||1,D[4]||0,D[5]||0,D[6]||0,E)}}return new Date(x)}(y),this.$x=y.x||{},this.init()},_.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},_.$utils=function(){return c},_.isValid=function(){return this.$d.toString()!=="Invalid Date"},_.isSame=function(y,S){return y=o(y),this.startOf(S)<=y&&y<=this.endOf(S)},_.isAfter=function(y,S){return o(y)<this.startOf(S)},_.isBefore=function(y,S){return this.endOf(S)<o(y)},_.$g=function(y,S,x){return c.u(y)?this[S]:this.set(x,y)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(y,S){var x=this,D=!!c.u(S)||S,E=c.p(y);y=function(z,te){return z=c.w(x.$u?Date.UTC(x.$y,te,z):new Date(x.$y,te,z),x),D?z:z.endOf("day")};var I=function(z,te){return c.w(x.toDate()[z].apply(x.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(te)),x)},p=this.$W;S=this.$M;var B=this.$D,P="set"+(this.$u?"UTC":"");switch(E){case"year":return D?y(1,0):y(31,11);case"month":return D?y(1,S):y(0,S+1);case"week":return E=this.$locale().weekStart||0,p=(p<E?p+7:p)-E,y(D?B-p:B+(6-p),S);case"day":case"date":return I(P+"Hours",0);case"hour":return I(P+"Minutes",1);case"minute":return I(P+"Seconds",2);case"second":return I(P+"Milliseconds",3);default:return this.clone()}},_.endOf=function(y){return this.startOf(y,!1)},_.$set=function(y,S){var x;y=c.p(y);var D="set"+(this.$u?"UTC":"");return D=(x={},x.day=D+"Date",x.date=D+"Date",x.month=D+"Month",x.year=D+"FullYear",x.hour=D+"Hours",x.minute=D+"Minutes",x.second=D+"Seconds",x.millisecond=D+"Milliseconds",x)[y],S=y==="day"?this.$D+(S-this.$W):S,y==="month"||y==="year"?(x=this.clone().set("date",1),x.$d[D](S),x.init(),this.$d=x.set("date",Math.min(this.$D,x.daysInMonth())).$d):D&&this.$d[D](S),this.init(),this},_.set=function(y,S){return this.clone().$set(y,S)},_.get=function(y){return this[c.p(y)]()},_.add=function(y,S){var x,D=this;y=Number(y),S=c.p(S);var E=function(I){var p=o(D);return c.w(p.date(p.date()+Math.round(I*y)),D)};return S==="month"?this.set("month",this.$M+y):S==="year"?this.set("year",this.$y+y):S==="day"?E(1):S==="week"?E(7):(S=(x={},x.minute=6e4,x.hour=36e5,x.second=1e3,x)[S]||1,x=this.$d.getTime()+y*S,c.w(x,this))},_.subtract=function(y,S){return this.add(-1*y,S)},_.format=function(y){var S=this,x=this.$locale();if(!this.isValid())return x.invalidDate||"Invalid Date";var D=y||"YYYY-MM-DDTHH:mm:ssZ",E=c.z(this);y=this.$H;var I=this.$m,p=this.$M,B=x.weekdays,P=x.months,z=function(K,re,f,ae){return K&&(K[re]||K(S,D))||f[re].slice(0,ae)},te=x.meridiem||function(K,re,f){return K=12>K?"AM":"PM",f?K.toLowerCase():K},W={YY:String(this.$y).slice(-2),YYYY:this.$y,M:p+1,MM:c.s(p+1,2,"0"),MMM:z(x.monthsShort,p,P,3),MMMM:z(P,p),D:this.$D,DD:c.s(this.$D,2,"0"),d:String(this.$W),dd:z(x.weekdaysMin,this.$W,B,2),ddd:z(x.weekdaysShort,this.$W,B,3),dddd:B[this.$W],H:String(y),HH:c.s(y,2,"0"),h:c.s(y%12||12,1,"0"),hh:c.s(y%12||12,2,"0"),a:te(y,I,!0),A:te(y,I,!1),m:String(I),mm:c.s(I,2,"0"),s:String(this.$s),ss:c.s(this.$s,2,"0"),SSS:c.s(this.$ms,3,"0"),Z:E};return D.replace(u,function(K,re){return re||W[K]||E.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(y,S,x){var D;S=c.p(S);var E=o(y);y=6e4*(E.utcOffset()-this.utcOffset());var I=this-E;return E=c.m(this,E),E=(D={},D.year=E/12,D.month=E,D.quarter=E/3,D.week=(I-y)/6048e5,D.day=(I-y)/864e5,D.hour=I/36e5,D.minute=I/6e4,D.second=I/1e3,D)[S]||I,x?E:c.a(E)},_.daysInMonth=function(){return this.endOf("month").$D},_.$locale=function(){return s[this.$L]},_.locale=function(y,S){if(!y)return this.$L;var x=this.clone();return y=g(y,S,!0),y&&(x.$L=y),x},_.clone=function(){return c.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},k}(),h=v.prototype;return o.prototype=h,[["$ms","millisecond"],["$s","second"],["$m","minute"],["$H","hour"],["$W","day"],["$M","month"],["$y","year"],["$D","date"]].forEach(function(k){h[k[1]]=function(_){return this.$g(_,k[0],k[1])}}),o.extend=function(k,_){return k.$i||(k(_,v,o),k.$i=!0),o},o.locale=g,o.isDayjs=l,o.unix=function(k){return o(1e3*k)},o.en=s[r],o.Ls=s,o.p={},o})},function(e,i,d){(function(t){function u(s,l){for(var g=0,o=s.length-1;0<=o;o--){var v=s[o];v==="."?s.splice(o,1):v===".."?(s.splice(o,1),g++):g&&(s.splice(o,1),g--)}if(l)for(;g--;g)s.unshift("..");return s}function a(s,l){if(s.filter)return s.filter(l);for(var g=[],o=0;o<s.length;o++)l(s[o],o,s)&&g.push(s[o]);return g}var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;i.resolve=function(){for(var s="",l=!1,g=arguments.length-1;-1<=g&&!l;g--){var o=0<=g?arguments[g]:t.cwd();if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");o&&(s=o+"/"+s,l=o.charAt(0)==="/")}return s=u(a(s.split("/"),function(v){return!!v}),!l).join("/"),(l?"/":"")+s||"."},i.normalize=function(s){var l=i.isAbsolute(s),g=r(s,-1)==="/";return(s=u(a(s.split("/"),function(o){return!!o}),!l).join("/"))||l||(s="."),s&&g&&(s+="/"),(l?"/":"")+s},i.isAbsolute=function(s){return s.charAt(0)==="/"},i.join=function(){var s=Array.prototype.slice.call(arguments,0);return i.normalize(a(s,function(l,g){if(typeof l!="string")throw new TypeError("Arguments to path.join must be strings");return l}).join("/"))},i.relative=function(s,l){function g(k){for(var _=0;_<k.length&&k[_]==="";_++);for(var y=k.length-1;0<=y&&k[y]==="";y--);return _>y?[]:k.slice(_,y-_+1)}s=i.resolve(s).substr(1),l=i.resolve(l).substr(1),s=g(s.split("/")),l=g(l.split("/"));for(var o=Math.min(s.length,l.length),v=o,h=0;h<o;h++)if(s[h]!==l[h]){v=h;break}for(o=[],h=v;h<s.length;h++)o.push("..");return o=o.concat(l.slice(v)),o.join("/")},i.sep="/",i.delimiter=":",i.dirname=function(s){var l=c.exec(s).slice(1);return s=l[0],l=l[1],!s&&!l?".":(l&&(l=l.substr(0,l.length-1)),s+l)},i.basename=function(s,l){return s=c.exec(s).slice(1)[2],l&&s.substr(-1*l.length)===l&&(s=s.substr(0,s.length-l.length)),s},i.extname=function(s){return c.exec(s).slice(1)[3]};var r="ab".substr(-1)==="b"?function(s,l,g){return s.substr(l,g)}:function(s,l,g){return 0>l&&(l=s.length+l),s.substr(l,g)}}).call(i,d(23))},function(e,i){e.exports=function(d){if(!d.webpackPolyfill){var t=Object.create(d);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,i,d){var t=d(24),u=d(25),a=d(0);i.a=function(c){a.a.info("Starting Chrome stable stack",c);var r=Object(t.a)(c);r.enableSimulcast=function(l){var g=l;if(!c.video||!c.simulcast||(r.simulcast=c.simulcast,l=g.match(/a=ssrc-group:FID ([0-9]*) ([0-9]*)\r?\n/),!l||0>=l.length))return g;var o=c.simulcast.numSpatialLayers||2,v=parseInt(l[1],10),h=parseInt(l[2],10),k=g.match(new RegExp("a=ssrc:"+l[1]+` cname:(.*)\r?
`))[1],_=g.match(new RegExp("a=ssrc:"+l[1]+` msid:(.*)\r?
`))[1],y=g.match(new RegExp("a=ssrc:"+l[1]+` mslabel:(.*)\r?
`))[1],S=g.match(new RegExp("a=ssrc:"+l[1]+` label:(.*)\r?
`))[1];g.match(new RegExp("a=ssrc:"+l[1]+`.*\r?
`,"g")).forEach(function(I){g=g.replace(I,"")}),g.match(new RegExp("a=ssrc:"+l[2]+`.*\r?
`,"g")).forEach(function(I){g=g.replace(I,"")});for(var x=[v],D=[h],E=1;E<o;E+=1)x.push(v+1e3*E),D.push(h+1e3*E);for(o=u.a.addSim(x),E=0;E<x.length;E+=1)v=x[E],h=D[E],o+=u.a.addGroup(v,h);for(E=0;E<x.length;E+=1)v=x[E],h=D[E],o+=u.a.addSpatialLayer(k,_,y,S,v,h);return g.replace(l[0],o+`a=x-google-flag:conference\r
`)};var s=function(l){if(typeof l.getParameters!="function"||typeof l.setParameters!="function")a.a.warning("Cannot set simulcast layers bitrate: getParameters or setParameters is not available");else{var g=l.getParameters();Object.keys(r.simulcast.spatialLayerBitrates).forEach(function(o){g.encodings[o]!==void 0&&(a.a.error("Setting bitrate for layer "+o+", bps: "+r.simulcast.spatialLayerBitrates[o]),g.encodings[o].maxBitrate=r.simulcast.spatialLayerBitrates[o],console.log("setting bitrate for layer "+o+" bitratebps: "+JSON.stringify(r.simulcast.spatialLayerBitrates[o])))}),l.setParameters(g).then(function(o){a.a.info("Success setting simulcast layer bitrates",o)}).catch(function(o){a.a.warning("Error setting simulcast layer bitrates",o)})}};return r.setSimulcastLayersBitrate=function(){r.simulcast&&r.simulcast.spatialLayerBitrates&&r.peerConnection.getSenders().forEach(function(l){l.track.kind==="video"&&s(l)})},r.setStartVideoBW=function(l){r.video&&c.startVideoBW&&(a.a.debug("startVideoBW requested: "+c.startVideoBW),u.a.setParamForCodecs(l,"video","x-google-start-bitrate",c.startVideoBW))},r.setHardMinVideoBW=function(l){r.video&&c.hardMinVideoBW&&(a.a.debug("hardMinVideoBW requested: "+c.hardMinVideoBW),u.a.setParamForCodecs(l,"video","x-google-min-bitrate",c.hardMinVideoBW))},r}},function(e,i,d){var t=d(0),u=d(24);i.a=function(a){t.a.info("Starting Firefox stack");var c=Object(u.a)(a);return c.enableSimulcast=function(r){return!a.video||!a.simulcast||c.peerConnection.getSenders().forEach(function(s){s.track.kind==="video"&&(s.getParameters(),s.setParameters({encodings:[{rid:"spam",active:!0,priority:"high",maxBitrate:4e4,maxHeight:640,maxWidth:480},{rid:"egg",active:!0,priority:"medium",maxBitrate:1e4,maxHeight:320,maxWidth:240}]}))}),r},c}},function(e,i,d){var t=d(0);i.a=function(u){var a={pcConfig:{},peerConnection:{},desc:{},signalCallback:void 0,close:function(){t.a.info("Close FcStack")},createOffer:function(){t.a.debug("FCSTACK: CreateOffer")},addStream:function(c){t.a.debug("FCSTACK: addStream",c)},addTrack:function(c){t.a.debug("FCSTACK: addTrack",stream)},processSignalingMessage:function(c){t.a.debug("FCSTACK: processSignaling",c),a.signalCallback!==void 0&&a.signalCallback(c)},sendSignalingMessage:function(c){t.a.debug("FCSTACK: Sending signaling Message",c),u.callback(c)},setSignalingCallback:function(c){c=c===void 0?function(){}:c,t.a.debug("FCSTACK: Setting signalling callback"),a.signalCallback=c}};return a}},function(e,i,d){d.d(i,"a",function(){return o});var t=d(5),u=d(41),a=d(0),c=d(8),r=d(9),s=d(6),l=d(4),g=function(v,h){return v=Object(l.b)({type:v}),v.args=h.args,v},o=function(v){var h=Object(l.c)(),k=function(){},_=[];H.initSymbol(),h.CONNECTING=Symbol("connecting"),H.initSymbol(),h.CONNECTED=Symbol("connected"),H.initSymbol(),h.RECONNECTING=Symbol("reconnecting"),H.initSymbol(),h.DISCONNECTED=Symbol("disconnected"),h.state=h.DISCONNECTED,h.IO=v===void 0?u.a:v;var y,S=function(D,E){for(var I=[],p=1;p<arguments.length;++p)I[p-1]=arguments[p];h.emit(g(D,{args:I}))},x=function(){a.a.info("execute buffer"),h.state===h.CONNECTED&&_.forEach(function(D){h.sendMessage.apply(h,H.arrayFromIterable(D))})};return h.connect=function(D,E,I){E=E===void 0?k:E,I=I===void 0?k:I;var p={timeout:3e4,reconnection:!1,path:"/v3/socket.io/",secure:D.secure,forceNew:!0,allowEIO4:!0,transports:["websocket"],rejectUnauthorized:!0},B=window.location.protocol=="https:"?"wss://":"ws://",P=D.host;D.gateway==null||D.gateway==null||D.gateway==""?P=D.host:(P=D.gateway,p.query="X-Forwarded-Host="+D.host),a.a.info("Connecting socket with option:- "+JSON.stringify(p)),console.log("Connecting socket with host:- "+P),h.state=h.CONNECTING,y=h.IO.connect(B+P,p);var z=y.io.engine.transport.ws.onclose;y.io.engine.transport.ws.onclose=function(te){a.a.warning("WebSocket closed, code:",te.code),z(te),S(t.a.SocketEvent.error),h.state==h.CONNECTING&&E(s.a.error_1161),h.state=h.DISCONNECTED},y.io.engine.transport.ws.onerror=function(te){},h.socket=y,y.on(t.a.UserEvent.user_awaited,S.bind(h,t.a.UserEvent.user_awaited)),y.on(t.a.UserEvent.user_joined,S.bind(h,t.a.UserEvent.user_joined)),y.on(t.a.RoomEvent.room_connected,S.bind(h,t.a.RoomEvent.room_connected)),y.on(t.a.RoomEvent.room_disconnected,S.bind(h,t.a.RoomEvent.room_disconnected)),y.on(t.a.RoomEvent.new_active_talker,S.bind(h,t.a.RoomEvent.new_active_talker)),y.on(t.a.SocketEvent.onAddStream,S.bind(h,t.a.SocketEvent.onAddStream)),y.on(t.a.SocketEvent.signaling_message_peer,S.bind(h,t.a.SocketEvent.signaling_message_peer)),y.on(t.a.SocketEvent.publish_me,S.bind(h,t.a.SocketEvent.publish_me)),y.on(t.a.SocketEvent.unpublish_me,S.bind(h,t.a.SocketEvent.unpublish_me)),y.on(t.a.SocketEvent.onBandwidthAlert,S.bind(h,t.a.SocketEvent.onBandwidthAlert)),y.on(t.a.SocketEvent.onBandwidthEvents,S.bind(h,t.a.SocketEvent.onBandwidthEvents)),y.on(t.a.SocketEvent.onSelfBandwidthAlert,S.bind(h,t.a.SocketEvent.onSelfBandwidthAlert)),y.on(t.a.SocketEvent.onRemoveTrack,S.bind(h,t.a.SocketEvent.onRemoveTrack)),y.on(t.a.SocketEvent.onDataStream,S.bind(h,t.a.SocketEvent.onDataStream)),y.on(t.a.RoomEvent.room_awaited,S.bind(h,t.a.RoomEvent.room_awaited)),y.on(t.a.RoomEvent.room_record_on,S.bind(h,t.a.RoomEvent.room_record_on)),y.on(t.a.RoomEvent.room_record_off,S.bind(h,t.a.RoomEvent.room_record_off)),y.on(t.a.RoomEvent.hard_mute_audio,S.bind(h,t.a.RoomEvent.hard_mute_audio)),y.on(t.a.RoomEvent.hard_unmute_audio,S.bind(h,t.a.RoomEvent.hard_unmute_audio)),y.on(t.a.RoomEvent.hard_mute_video,S.bind(h,t.a.RoomEvent.hard_mute_video)),y.on(t.a.RoomEvent.hard_unmute_video,S.bind(h,t.a.RoomEvent.hard_unmute_video)),y.on(t.a.RoomEvent.share_started,S.bind(h,t.a.RoomEvent.share_started)),y.on(t.a.RoomEvent.share_stopped,S.bind(h,t.a.RoomEvent.share_stopped)),y.on(t.a.RoomEvent.screen_share_override,S.bind(h,t.a.RoomEvent.screen_share_override)),y.on(t.a.RoomEvent.stop_sharing,S.bind(h,t.a.RoomEvent.stop_sharing)),y.on(t.a.RoomEvent.update_layout,S.bind(h,t.a.RoomEvent.update_layout)),y.on(t.a.RoomEvent.custom_data_saved,S.bind(h,t.a.RoomEvent.custom_data_saved)),y.on(t.a.RoomEvent.custom_data_updated,S.bind(h,t.a.RoomEvent.custom_data_updated)),y.on(t.a.RoomEvent.streaming_uri,S.bind(h,t.a.RoomEvent.streaming_uri)),y.on(t.a.RoomEvent.canvas_started,S.bind(h,t.a.RoomEvent.canvas_started)),y.on(t.a.RoomEvent.canvas_stopped,S.bind(h,t.a.RoomEvent.canvas_stopped)),y.on(t.a.RoomEvent.invite_breakout_room,S.bind(h,t.a.RoomEvent.invite_breakout_room)),y.on(t.a.RoomEvent.user_joined_breakout_room,S.bind(h,t.a.RoomEvent.user_joined_breakout_room)),y.on(t.a.RoomEvent.user_left_breakout_room,S.bind(h,t.a.RoomEvent.user_left_breakout_room)),y.on(t.a.RoomEvent.breakout_room_destroyed,S.bind(h,t.a.RoomEvent.breakout_room_destroyed)),y.on(t.a.RoomEvent.transcription_events,S.bind(h,t.a.RoomEvent.transcription_events)),y.on(t.a.SocketEvent.dial_state_events,S.bind(h,t.a.SocketEvent.dial_state_events)),y.on(t.a.UserEvent.user_audio_muted,S.bind(h,t.a.UserEvent.user_audio_muted)),y.on(t.a.UserEvent.user_audio_unmuted,S.bind(h,t.a.UserEvent.user_audio_unmuted)),y.on(t.a.UserEvent.user_video_muted,S.bind(h,t.a.UserEvent.user_video_muted)),y.on(t.a.UserEvent.user_video_unmuted,S.bind(h,t.a.UserEvent.user_video_unmuted)),y.on(t.a.SocketEvent.media_engine_connecting,S.bind(h,t.a.SocketEvent.media_engine_connecting)),y.on(t.a.SocketEvent.onUpdateAttributeStream,S.bind(h,t.a.SocketEvent.onUpdateAttributeStream)),y.on(t.a.SocketEvent.onRemoveStream,S.bind(h,t.a.SocketEvent.onRemoveStream)),y.on(t.a.SocketEvent.user_connected,S.bind(h,t.a.SocketEvent.user_connected)),y.on(t.a.SocketEvent.user_updated,S.bind(h,t.a.SocketEvent.user_updated)),y.on(t.a.SocketEvent.user_disconnected,S.bind(h,t.a.SocketEvent.user_disconnected)),y.on(t.a.SocketEvent.user_subscribed,S.bind(h,t.a.SocketEvent.user_subscribed)),y.on(t.a.SocketEvent.floor_requested,S.bind(h,t.a.SocketEvent.floor_requested)),y.on(t.a.SocketEvent.floor_granted,S.bind(h,t.a.SocketEvent.floor_granted)),y.on(t.a.SocketEvent.floor_not_granted,S.bind(h,t.a.SocketEvent.floor_not_granted)),y.on(t.a.SocketEvent.floor_released,S.bind(h,t.a.SocketEvent.floor_released)),y.on(t.a.SocketEvent.hard_mute,S.bind(h,t.a.SocketEvent.hard_mute)),y.on(t.a.SocketEvent.hard_mute_room,S.bind(h,t.a.SocketEvent.hard_mute_room)),y.on(t.a.SocketEvent.hard_unmute_room,S.bind(h,t.a.SocketEvent.hard_unmute_room)),y.on(t.a.SocketEvent.switched_room,S.bind(h,t.a.SocketEvent.switched_room)),y.on(t.a.SocketEvent.data_stream_room,S.bind(h,t.a.SocketEvent.data_stream_room)),y.on(t.a.RoomEvent.user_role_changed,S.bind(h,t.a.RoomEvent.user_role_changed)),y.on(t.a.SocketEvent.onStatSubscription,S.bind(h,t.a.SocketEvent.onStatSubscription)),y.on(t.a.SocketEvent.onStreamingNotification,S.bind(h,t.a.SocketEvent.onStreamingNotification)),y.on(t.a.SocketEvent.onHlsStreamingNotification,S.bind(h,t.a.SocketEvent.onHlsStreamingNotification)),y.on(t.a.SocketEvent.onHlsStreamingNotificationToPublisher,S.bind(h,t.a.SocketEvent.onHlsStreamingNotificationToPublisher)),y.on(t.a.SocketEvent.onLiveRecordingNotification,S.bind(h,t.a.SocketEvent.onLiveRecordingNotification)),y.on(t.a.SocketEvent.onRoomLiveRecordingOn,S.bind(h,t.a.SocketEvent.onRoomLiveRecordingOn)),y.on(t.a.SocketEvent.onRoomLiveRecordingOff,S.bind(h,t.a.SocketEvent.onRoomLiveRecordingOff)),y.on(t.a.SocketEvent.onRoomLiveRecordingFailed,S.bind(h,t.a.SocketEvent.onRoomLiveRecordingFailed)),y.on(t.a.RoomEvent.switch_codec,S.bind(h,t.a.RoomEvent.switch_codec)),y.on(t.a.RoomEvent.generic_events,S.bind(h,t.a.RoomEvent.generic_events)),y.on(t.a.SocketEvent.room_management_events,S.bind(h,t.a.SocketEvent.room_management_events)),y.on(t.a.SocketEvent.floor_management_events,S.bind(h,t.a.SocketEvent.floor_management_events)),y.on(t.a.RoomEvent.room_transcription_on,S.bind(h,t.a.RoomEvent.room_transcription_on)),y.on(t.a.RoomEvent.room_transcription_on,S.bind(h,t.a.RoomEvent.room_transcription_on)),y.on(t.a.RoomEvent.room_transcription_off,S.bind(h,t.a.RoomEvent.room_transcription_off)),y.on(t.a.RoomEvent.self_transcription_on,S.bind(h,t.a.RoomEvent.self_transcription_on)),y.on(t.a.RoomEvent.self_transcription_off,S.bind(h,t.a.RoomEvent.self_transcription_off)),y.on(t.a.SocketEvent.disconnect,function(te){a.a.debug(t.a.SocketEvent.disconnect,h.id,te),y.close(),S(t.a.SocketEvent.disconnect,te)}),y.on(t.a.SocketEvent.connect_timeout,function(te){a.a.warning(t.a.SocketEvent.connect_timeout+", id:",h.id,", error:",te.message),y.close(),S(t.a.SocketEvent.disconnect,te.message)}),y.on(t.a.SocketEvent.connection_failed,function(){a.a.error(t.a.SocketEvent.connection_failed+", id:",h.id),S(t.a.SocketEvent.connection_failed,{streamId:h.id})}),y.on(t.a.SocketEvent.connect_error,function(te){a.a.warning(t.a.SocketEvent.connect_error+", id:",h.id,", error:",te.message)}),y.on(t.a.SocketEvent.error,function(te){a.a.warning(t.a.SocketEvent.error+", id:",h.id,", error:",te.message),S(t.a.SocketEvent.error)}),y.on(t.a.SocketEvent.reconnecting,function(te){a.a.debug(t.a.SocketEvent.reconnecting+", id:",h.id,", attempt:",te)}),y.on(t.a.SocketEvent.reconnect,function(te){a.a.debug(t.a.SocketEvent.reconnected+", id:",h.id,", attempt:",te),h.state=h.CONNECTED,y.emit(t.a.SocketEvent.reconnected,h.id),r.a.info("socket-event",c.a.event_reconnect_socket_success,{error:{}}),x()}),y.on(t.a.SocketEvent.reconnect_attempt,function(te){a.a.debug(t.a.SocketEvent.reconnect_attempt+", id:",h.id,", attempt:",te)}),y.on(t.a.SocketEvent.reconnect_failed,function(){a.a.warning(t.a.SocketEvent.reconnect_failed+", id:",h.id),h.state=h.DISCONNECTED,S(t.a.SocketEvent.disconnect,t.a.SocketEvent.reconnect_failed),r.a.error("socket-event",c.a.event_reconnect_socket_failed,{error:{}})}),y.on(t.a.SocketEvent.reconnect_error,function(te){a.a.debug(t.a.SocketEvent.reconnect_error+", id:",h.id,", error:",te.message)}),h.sendMessage("token",D,function(te){h.state=h.CONNECTED,h.id=te.clientId,E(te)},I)},h.disconnect=function(){a.a.debug("socket js disconnect the socket"),h.state=h.DISCONNECTED,y.disconnect()},h.sendMessage=function(D,E,I,p){I=I===void 0?k:I,p=p===void 0?k:p,h.state===h.DISCONNECTED&&D!=="token"?(a.a.error("Trying to send a message over a disconnected Socket"),I(s.a.error_1163)):h.state===h.RECONNECTING?(a.a.debug("sendmessage socket state is reconnecting"),_.push([D,E,I,p]),I(s.a.error_1164)):E?y.emit(D,E,function(B,P){B==="success"?I(P):B==="error"?(r.a.error("socket-event",c.a.event_send_message_failed,{type:D,respType:B,resp:P}),p(P)):P!=null&&P!=null||B==null||B!==!0&&(typeof B!="object"||B.result==null||B.result!=s.a.error_000.result)&&B.status==null?(a.a.debug(" sendMessage() not sucess : respType: "+JSON.stringify(B)+" resp: "+JSON.stringify(P)),I(P??B)):(a.a.debug(" sendMessage() resp undefined but respType has result with sucees: "+JSON.stringify(B)),I(B))}):p(s.a.error_1155)},h.sendSDP=function(D,E,I,p){p=p===void 0?k:p,h.state===h.DISCONNECTED?(a.a.error("Trying to send a message over a disconnected Socket"),r.a.info("socket-event",c.a.event_send_message_failed,{error:"Trying to send a message over a disconnected Socket"})):y.emit(D,E,I,function(B,P){p(B,P)})},h.emitEvent=function(D,E,I){I=I===void 0?k:I,h.state===h.DISCONNECTED?(a.a.error("Trying to send a message over a disconnected Socket"),r.a.info("socket-event",c.a.event_send_message_failed,{error:"Trying to send a message over a disconnected Socket"})):y.emit(D,E,function(p,B){I(p,B)})},h.sendEvent=function(D,E){E=E===void 0?k:E,h.state===h.DISCONNECTED?(a.a.error("Trying to send a message over a disconnected Socket"),r.a.info("socket-event",c.a.event_send_message_failed,{error:"Trying to send a message over a disconnected Socket"})):y.emit(D,function(I){E(I)})},h.sendParamEvent=function(D,E,I){I=I===void 0?k:I,h.state===h.DISCONNECTED?(a.a.error("Trying to send a message over a disconnected Socket"),r.a.info("socket-event",c.a.event_send_message_failed,{error:"Trying to send a message over a disconnected Socket"})):y.emit(D,E,function(p){I(p)})},h}},function(e,i,d){function t(C){C=C.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!C||I))return new XMLHttpRequest}catch{}if(!C)try{return new p[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function u(C,V){for(var G=[],ne=1;ne<arguments.length;++ne)G[ne-1]=arguments[ne];return G.reduce(function(ge,Te){return C.hasOwnProperty(Te)&&(ge[Te]=C[Te]),ge},{})}function a(C,V){V.useNativeTimers?(C.setTimeoutFn=B.bind(p),C.clearTimeoutFn=P.bind(p)):(C.setTimeoutFn=setTimeout.bind(p),C.clearTimeoutFn=clearTimeout.bind(p))}function c(C){if(C){for(var V in c.prototype)C[V]=c.prototype[V];return C}}function r(C){var V="";do V=q[C%64]+V,C=Math.floor(C/64);while(0<C);return V}function s(){var C=r(+new Date);return C!==J?(_e=0,J=C):C+"."+r(_e++)}function l(){}function g(){for(var C in Me.requests)Me.requests.hasOwnProperty(C)&&Me.requests[C].abort()}function o(C){var V;return(V=Y)&&((V=C instanceof ArrayBuffer)||(V=typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(C):C.buffer instanceof ArrayBuffer)),V||Q&&C instanceof Blob||ee&&C instanceof File}function v(C,V){if(!C||typeof C!="object")return!1;if(Array.isArray(C)){for(var G=0,ne=C.length;G<ne;G++)if(v(C[G]))return!0;return!1}if(o(C))return!0;if(C.toJSON&&typeof C.toJSON=="function"&&arguments.length===1)return v(C.toJSON(),!0);for(G in C)if(Object.prototype.hasOwnProperty.call(C,G)&&v(C[G]))return!0;return!1}function h(C,V){if(!C)return C;if(o(C)){var G={_placeholder:!0,num:V.length};return V.push(C),G}if(Array.isArray(C)){G=Array(C.length);for(var ne=0;ne<C.length;ne++)G[ne]=h(C[ne],V);return G}if(typeof C=="object"&&!(C instanceof Date)){G={};for(ne in C)C.hasOwnProperty(ne)&&(G[ne]=h(C[ne],V));return G}return C}function k(C,V){if(!C)return C;if(C&&C._placeholder)return V[C.num];if(Array.isArray(C))for(var G=0;G<C.length;G++)C[G]=k(C[G],V);else if(typeof C=="object")for(G in C)C.hasOwnProperty(G)&&(C[G]=k(C[G],V));return C}function _(C,V,G){return C.on(V,G),function(){C.off(V,G)}}function y(C){C=C||{},this.ms=C.min||100,this.max=C.max||1e4,this.factor=C.factor||2,this.jitter=0<C.jitter&&1>=C.jitter?C.jitter:0,this.attempts=0}function S(C,V){typeof C=="object"&&(V=C,C=void 0);var G=C;C=(V=V||{}).path||"/socket.io",C=C===void 0?"":C;var ne=G,ge=typeof location<"u"&&location;G==null&&(G=ge.protocol+"//"+ge.host),typeof G=="string"&&(G.charAt(0)==="/"&&(G=G.charAt(1)==="/"?ge.protocol+G:ge.host+G),/^(https?|wss?):\/\//.test(G)||(G=ge!==void 0?ge.protocol+"//"+G:"https://"+G),ne=E(G)),ne.port||(/^(http|ws)$/.test(ne.protocol)?ne.port="80":/^(http|ws)s$/.test(ne.protocol)&&(ne.port="443")),ne.path=ne.path||"/",G=ne.host.indexOf(":")!==-1?"["+ne.host+"]":ne.host,C=(ne.id=ne.protocol+"://"+G+":"+ne.port+C,ne.href=ne.protocol+"://"+G+(ge&&ge.port===ne.port?"":":"+ne.port),ne),ge=C.source,ne=C.id,G=C.path,G=Re[ne]&&G in Re[ne].nsps;var Te;return V.forceNew||V["force new connection"]||V.multiplex===!1||G?Te=new be(ge,V):(Re[ne]||(Re[ne]=new be(ge,V)),Te=Re[ne]),C.query&&!V.query&&(V.query=C.queryKey),Te.socket(C.path,V)}d.d(i,"a",function(){return S});var x=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,D="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),E=function(C){var V=C,G=C.indexOf("["),ne=C.indexOf("]");G!=-1&&ne!=-1&&(C=C.substring(0,G)+C.substring(G,ne).replace(/:/g,";")+C.substring(ne,C.length));var ge,Te;C=x.exec(C||"");for(var ke={},Ae=14;Ae--;)ke[D[Ae]]=C[Ae]||"";return G!=-1&&ne!=-1&&(ke.source=V,ke.host=ke.host.substring(1,ke.host.length-1).replace(/;/g,":"),ke.authority=ke.authority.replace("[","").replace("]","").replace(/;/g,":"),ke.ipv6uri=!0),ke.pathNames=function(je,We){return je=We.replace(/\/{2,9}/g,"/").split("/"),We.substr(0,1)!="/"&&We.length!==0||je.splice(0,1),We.substr(We.length-1,1)=="/"&&je.splice(je.length-1,1),je}(0,ke.path),ke.queryKey=(ge=ke.query,Te={},ge.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(je,We,ot){We&&(Te[We]=ot)}),Te),ke};e={};try{e=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{e=!1}var I=e,p=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),B=setTimeout,P=clearTimeout;c.prototype.on=c.prototype.addEventListener=function(C,V){return this._callbacks=this._callbacks||{},(this._callbacks["$"+C]=this._callbacks["$"+C]||[]).push(V),this},c.prototype.once=function(C,V){function G(){this.off(C,G),V.apply(this,arguments)}return G.fn=V,this.on(C,G),this},c.prototype.off=c.prototype.removeListener=c.prototype.removeAllListeners=c.prototype.removeEventListener=function(C,V){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var G,ne=this._callbacks["$"+C];if(!ne)return this;if(arguments.length==1)return delete this._callbacks["$"+C],this;for(var ge=0;ge<ne.length;ge++)if((G=ne[ge])===V||G.fn===V){ne.splice(ge,1);break}return ne.length===0&&delete this._callbacks["$"+C],this},c.prototype.emit=function(C){this._callbacks=this._callbacks||{};for(var V=Array(arguments.length-1),G=this._callbacks["$"+C],ne=1;ne<arguments.length;ne++)V[ne-1]=arguments[ne];if(G){ne=0;for(var ge=(G=G.slice(0)).length;ne<ge;++ne)G[ne].apply(this,V)}return this},c.prototype.emitReserved=c.prototype.emit,c.prototype.listeners=function(C){return this._callbacks=this._callbacks||{},this._callbacks["$"+C]||[]},c.prototype.hasListeners=function(C){return!!this.listeners(C).length};var z=Object.create(null);z.open="0",z.close="1",z.ping="2",z.pong="3",z.message="4",z.upgrade="5",z.noop="6";var te=Object.create(null);Object.keys(z).forEach(function(C){te[z[C]]=C});var W={type:"error",data:"parser error"},K=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",re=typeof ArrayBuffer=="function",f=function(C,V,G){var ne=C.type;return C=C.data,K&&C instanceof Blob?V?G(C):ae(C,G):re&&(C instanceof ArrayBuffer||(ge=C,typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(ge):ge&&ge.buffer instanceof ArrayBuffer))?V?G(C):ae(new Blob([C]),G):G(z[ne]+(C||""));var ge},ae=function(C,V){var G=new FileReader;return G.onload=function(){var ne=G.result.split(",")[1];V("b"+ne)},G.readAsDataURL(C)},ce=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(e=0;64>e;e++)ce["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e)]=e;var he=typeof ArrayBuffer=="function",ye=function(C,V){if(typeof C!="string")return{type:"message",data:R(C,V)};var G=C.charAt(0);if(G==="b"){if(C=C.substring(1),he){var ne=.75*C.length;G=C.length;var ge=0;C[C.length-1]==="="&&(ne--,C[C.length-2]==="="&&ne--);var Te=new ArrayBuffer(ne),ke=new Uint8Array(Te);for(ne=0;ne<G;ne+=4){var Ae=ce[C.charCodeAt(ne)],je=ce[C.charCodeAt(ne+1)],We=ce[C.charCodeAt(ne+2)],ot=ce[C.charCodeAt(ne+3)];ke[ge++]=Ae<<2|je>>4,ke[ge++]=(15&je)<<4|We>>2,ke[ge++]=(3&We)<<6|63&ot}V=R(Te,V)}else V={base64:!0,data:C};V={type:"message",data:V}}else V=te[G]?1<C.length?{type:te[G],data:C.substring(1)}:{type:te[G]}:W;return V},R=function(C,V){return V==="blob"&&C instanceof ArrayBuffer?new Blob([C]):C},O=String.fromCharCode(30),j=function(C){var V=c.call(this)||this;return V.writable=!1,a(V,C),V.opts=C,V.query=C.query,V.readyState="",V.socket=C.socket,V};H.inherits(j,c),j.prototype.onError=function(C,V){return C=Error(C),C.type="TransportError",C.description=V,c.prototype.emit.call(this,"error",C),this},j.prototype.open=function(){return this.readyState!=="closed"&&this.readyState!==""||(this.readyState="opening",this.doOpen()),this},j.prototype.close=function(){return this.readyState!=="opening"&&this.readyState!=="open"||(this.doClose(),this.onClose()),this},j.prototype.send=function(C){this.readyState==="open"&&this.write(C)},j.prototype.onOpen=function(){this.readyState="open",this.writable=!0,c.prototype.emit.call(this,"open")},j.prototype.onData=function(C){C=ye(C,this.socket.binaryType),this.onPacket(C)},j.prototype.onPacket=function(C){c.prototype.emit.call(this,"packet",C)},j.prototype.onClose=function(){this.readyState="closed",c.prototype.emit.call(this,"close")};for(var J,q="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),se={},_e=0,Se=0;64>Se;Se++)se[q[Se]]=Se;s.encode=r,s.decode=function(C){var V=0;for(Se=0;Se<C.length;Se++)V=64*V+se[C.charAt(Se)];return V};var ve={encode:function(C){var V="",G;for(G in C)C.hasOwnProperty(G)&&(V.length&&(V+="&"),V+=encodeURIComponent(G)+"="+encodeURIComponent(C[G]));return V},decode:function(C){var V={};C=C.split("&");for(var G=0,ne=C.length;G<ne;G++){var ge=C[G].split("=");V[decodeURIComponent(ge[0])]=decodeURIComponent(ge[1])}return V}},we=function(){var C=j.apply(this,arguments)||this;return C.polling=!1,C};H.inherits(we,j),we.prototype.doOpen=function(){this.poll()},we.prototype.pause=function(C){var V=this;this.readyState="pausing";var G=function(){V.readyState="paused",C()};if(this.polling||!this.writable){var ne=0;this.polling&&(ne++,this.once("pollComplete",function(){--ne||G()})),this.writable||(ne++,this.once("drain",function(){--ne||G()}))}else G()},we.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},we.prototype.onData=function(C){var V=this;(function(G,ne){G=G.split(O);for(var ge=[],Te=0;Te<G.length;Te++){var ke=ye(G[Te],ne);if(ge.push(ke),ke.type==="error")break}return ge})(C,this.socket.binaryType).forEach(function(G){if(V.readyState==="opening"&&G.type==="open"&&V.onOpen(),G.type==="close")return V.onClose(),!1;V.onPacket(G)}),this.readyState!=="closed"&&(this.polling=!1,this.emit("pollComplete"),this.readyState==="open"&&this.poll())},we.prototype.doClose=function(){var C=this,V=function(){C.write([{type:"close"}])};this.readyState==="open"?V():this.once("open",V)},we.prototype.write=function(C){var V=this;this.writable=!1,function(G,ne){var ge=G.length,Te=Array(ge),ke=0;G.forEach(function(Ae,je){f(Ae,!1,function(We){Te[je]=We,++ke===ge&&ne(Te.join(O))})})}(C,function(G){V.doWrite(G,function(){V.writable=!0,V.emit("drain")})})},we.prototype.uri=function(){var C=this.query||{},V=this.opts.secure?"https":"http",G="";return this.opts.timestampRequests!==!1&&(C[this.opts.timestampParam]=s()),this.supportsBinary||C.sid||(C.b64=1),this.opts.port&&(V==="https"&&Number(this.opts.port)!==443||V==="http"&&Number(this.opts.port)!==80)&&(G=":"+this.opts.port),C=ve.encode(C),V+"://"+(this.opts.hostname.indexOf(":")!==-1?"["+this.opts.hostname+"]":this.opts.hostname)+G+this.opts.path+(C.length?"?"+C:"")},H.global.Object.defineProperties(we.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"polling"}}});var xe=new t({xdomain:!1}).responseType!=null,Me=function(C,V){var G=c.call(this)||this;return a(G,V),G.opts=V,G.method=V.method||"GET",G.uri=C,G.async=V.async!==!1,G.data=V.data!==void 0?V.data:null,G.create(),G};H.inherits(Me,c),Me.prototype.create=function(){var C=this,V=u(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");V.xdomain=!!this.opts.xd,V.xscheme=!!this.opts.xs;var G=this.xhr=new t(V);try{G.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){G.setDisableHeaderCheck&&G.setDisableHeaderCheck(!0);for(var ne in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(ne)&&G.setRequestHeader(ne,this.opts.extraHeaders[ne])}}catch{}if(this.method==="POST")try{G.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{G.setRequestHeader("Accept","*/*")}catch{}"withCredentials"in G&&(G.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(G.timeout=this.opts.requestTimeout),G.onreadystatechange=function(){G.readyState===4&&(G.status===200||G.status===1223?C.onLoad():C.setTimeoutFn(function(){C.onError(typeof G.status=="number"?G.status:0)},0))},G.send(this.data)}catch(ge){return void this.setTimeoutFn(function(){C.onError(ge)},0)}typeof document<"u"&&(this.index=Me.requestsCount++,Me.requests[this.index]=this)},Me.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},Me.prototype.onData=function(C){this.emit("data",C),this.onSuccess()},Me.prototype.onError=function(C){this.emit("error",C),this.cleanup(!0)},Me.prototype.cleanup=function(C){if(this.xhr!==void 0&&this.xhr!==null){if(this.xhr.onreadystatechange=l,C)try{this.xhr.abort()}catch{}typeof document<"u"&&delete Me.requests[this.index],this.xhr=null}},Me.prototype.onLoad=function(){var C=this.xhr.responseText;C!==null&&this.onData(C)},Me.prototype.abort=function(){this.cleanup()},Me.requestsCount=0,Me.requests={},typeof document<"u"&&(typeof attachEvent=="function"?attachEvent("onunload",g):typeof addEventListener=="function"&&addEventListener("onpagehide"in p?"pagehide":"unload",g,!1));var de=typeof Promise=="function"&&typeof Promise.resolve=="function"?function(C){return Promise.resolve().then(C)}:function(C,V){return V(C,0)},X=p.WebSocket||p.MozWebSocket,w=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative",M=function(C){var V=j.call(this,C)||this;return V.supportsBinary=!C.forceBase64,V};H.inherits(M,j),M.prototype.doOpen=function(){if(this.check()){var C=this.uri(),V=this.opts.protocols,G=w?{}:u(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(G.headers=this.opts.extraHeaders);try{this.ws=w?new X(C,V,G):V?new X(C,V):new X(C)}catch(ne){return this.emit("error",ne)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}},M.prototype.addEventListeners=function(){var C=this;this.ws.onopen=function(){C.opts.autoUnref&&C.ws._socket.unref(),C.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(V){return C.onData(V.data)},this.ws.onerror=function(V){return C.onError("websocket error",V)}},M.prototype.write=function(C){var V=this;this.writable=!1;for(var G={},ne=0;ne<C.length;G={$jscomp$loop$prop$n$139$227:G.$jscomp$loop$prop$n$139$227},ne++){var ge=C[ne];G.$jscomp$loop$prop$n$139$227=ne===C.length-1,f(ge,this.supportsBinary,function(Te){return function(ke){try{V.ws.send(ke)}catch{}Te.$jscomp$loop$prop$n$139$227&&de(function(){V.writable=!0,V.emit("drain")},V.setTimeoutFn)}}(G))}},M.prototype.doClose=function(){this.ws!==void 0&&(this.ws.close(),this.ws=null)},M.prototype.uri=function(){var C=this.query||{},V=this.opts.secure?"wss":"ws",G="";return this.opts.port&&(V==="wss"&&Number(this.opts.port)!==443||V==="ws"&&Number(this.opts.port)!==80)&&(G=":"+this.opts.port),this.opts.timestampRequests&&(C[this.opts.timestampParam]=s()),this.supportsBinary||(C.b64=1),C=ve.encode(C),V+"://"+(this.opts.hostname.indexOf(":")!==-1?"["+this.opts.hostname+"]":this.opts.hostname)+G+this.opts.path+(C.length?"?"+C:"")},M.prototype.check=function(){return!(!X||"__initialize"in X&&this.name===M.prototype.name)},H.global.Object.defineProperties(M.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return"websocket"}}}),e=function(C){var V;if(V=we.call(this,C)||this,typeof location<"u"){var G=location.protocol==="https:",ne=location.port;ne||(ne=G?"443":"80"),V.xd=typeof location<"u"&&C.hostname!==location.hostname||ne!==C.port,V.xs=C.secure!==G}return C=C&&C.forceBase64,V.supportsBinary=xe&&!C,V},H.inherits(e,we),e.prototype.request=function(C){return C=C===void 0?{}:C,Object.assign(C,{xd:this.xd,xs:this.xs},this.opts),new Me(this.uri(),C)},e.prototype.doWrite=function(C,V){var G=this;C=this.request({method:"POST",data:C}),C.on("success",V),C.on("error",function(ne){G.onError("xhr post error",ne)})},e.prototype.doPoll=function(){var C=this,V=this.request();V.on("data",this.onData.bind(this)),V.on("error",function(G){C.onError("xhr poll error",G)}),this.pollXhr=V};var N={websocket:M,polling:e},F=function(C,V){V=V===void 0?{}:V;var G=c.call(this)||this;C&&typeof C=="object"&&(V=C,C=null),C?(C=E(C),V.hostname=C.host,V.secure=C.protocol==="https"||C.protocol==="wss",V.port=C.port,C.query&&(V.query=C.query)):V.host&&(V.hostname=E(V.host).host),a(G,V),G.secure=V.secure!=null?V.secure:typeof location<"u"&&location.protocol==="https:",V.hostname&&!V.port&&(V.port=G.secure?"443":"80"),G.hostname=V.hostname||(typeof location<"u"?location.hostname:"localhost"),G.port=V.port||(typeof location<"u"&&location.port?location.port:G.secure?"443":"80"),G.transports=V.transports||["polling","websocket"],G.readyState="",G.writeBuffer=[],G.prevBufferLen=0,G.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},V),G.opts.path=G.opts.path.replace(/\/$/,"")+"/",typeof G.opts.query=="string"&&(G.opts.query=ve.decode(G.opts.query)),G.id=null,G.upgrades=null,G.pingInterval=null,G.pingTimeout=null,G.pingTimeoutTimer=null,typeof addEventListener=="function"&&(G.opts.closeOnBeforeunload&&addEventListener("beforeunload",function(){ne.transport&&(ne.transport.removeAllListeners(),ne.transport.close())},!1),G.hostname!=="localhost"&&(G.offlineEventListener=function(){ne.onClose("transport close")},addEventListener("offline",G.offlineEventListener,!1))),G.open();var ne=G;return G};H.inherits(F,c),F.prototype.createTransport=function(C){var V=this.opts.query,G={},ne;for(ne in V)V.hasOwnProperty(ne)&&(G[ne]=V[ne]);return G.EIO=4,G.transport=C,this.id&&(G.sid=this.id),V=Object.assign({},this.opts.transportOptions[C],this.opts,{query:G,socket:this,hostname:this.hostname,secure:this.secure,port:this.port}),new N[C](V)},F.prototype.open=function(){var C=this;if(this.opts.rememberUpgrade&&F.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)var V="websocket";else{if(this.transports.length===0)return void this.setTimeoutFn(function(){C.emitReserved("error","No transports available")},0);V=this.transports[0]}this.readyState="opening";try{V=this.createTransport(V)}catch{return this.transports.shift(),void this.open()}V.open(),this.setTransport(V)},F.prototype.setTransport=function(C){var V=this;this.transport&&this.transport.removeAllListeners(),this.transport=C,C.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",function(){V.onClose("transport close")})},F.prototype.probe=function(C){function V(){Ae||(Ae=!0,ot(),ke.close(),ke=null)}function G(){We("transport closed")}function ne(){We("socket closed")}function ge(Xe){ke&&Xe.name!==ke.name&&V()}var Te=this,ke=this.createTransport(C),Ae=!1;F.priorWebsocketSuccess=!1;var je=function(){Ae||(ke.send([{type:"ping",data:"probe"}]),ke.once("packet",function(Xe){Ae||(Xe.type==="pong"&&Xe.data==="probe"?(Te.upgrading=!0,Te.emitReserved("upgrading",ke),ke&&(F.priorWebsocketSuccess=ke.name==="websocket",Te.transport.pause(function(){Ae||Te.readyState!=="closed"&&(ot(),Te.setTransport(ke),ke.send([{type:"upgrade"}]),Te.emitReserved("upgrade",ke),ke=null,Te.upgrading=!1,Te.flush())}))):(Xe=Error("probe error"),Xe.transport=ke.name,Te.emitReserved("upgradeError",Xe)))}))},We=function(Xe){Xe=Error("probe error: "+Xe),Xe.transport=ke.name,V(),Te.emitReserved("upgradeError",Xe)},ot=function(){ke.removeListener("open",je),ke.removeListener("error",We),ke.removeListener("close",G),Te.off("close",ne),Te.off("upgrading",ge)};ke.once("open",je),ke.once("error",We),ke.once("close",G),this.once("close",ne),this.once("upgrading",ge),ke.open()},F.prototype.onOpen=function(){if(this.readyState="open",F.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade&&this.transport.pause)for(var C=0,V=this.upgrades.length;C<V;C++)this.probe(this.upgrades[C])},F.prototype.onPacket=function(C){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",C),this.emitReserved("heartbeat"),C.type){case"open":this.onHandshake(JSON.parse(C.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var V=Error("server error");V.code=C.data,this.onError(V);break;case"message":this.emitReserved("data",C.data),this.emitReserved("message",C.data)}},F.prototype.onHandshake=function(C){this.emitReserved("handshake",C),this.id=C.sid,this.transport.query.sid=C.sid,this.upgrades=this.filterUpgrades(C.upgrades),this.pingInterval=C.pingInterval,this.pingTimeout=C.pingTimeout,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()},F.prototype.resetPingTimeout=function(){var C=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(function(){C.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()},F.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()},F.prototype.flush=function(){this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))},F.prototype.write=function(C,V,G){return this.sendPacket("message",C,V,G),this},F.prototype.send=function(C,V,G){return this.sendPacket("message",C,V,G),this},F.prototype.sendPacket=function(C,V,G,ne){typeof V=="function"&&(ne=V,V=void 0),typeof G=="function"&&(ne=G,G=null),this.readyState!=="closing"&&this.readyState!=="closed"&&((G=G||{}).compress=G.compress!==!1,C={type:C,data:V,options:G},this.emitReserved("packetCreate",C),this.writeBuffer.push(C),ne&&this.once("flush",ne),this.flush())},F.prototype.close=function(){var C=this,V=function(){C.onClose("forced close"),C.transport.close()},G=function(){C.off("upgrade",G),C.off("upgradeError",G),V()},ne=function(){C.once("upgrade",G),C.once("upgradeError",G)};return this.readyState!=="opening"&&this.readyState!=="open"||(this.readyState="closing",this.writeBuffer.length?this.once("drain",function(){C.upgrading?ne():V()}):this.upgrading?ne():V()),this},F.prototype.onError=function(C){F.priorWebsocketSuccess=!1,this.emitReserved("error",C),this.onClose("transport error",C)},F.prototype.onClose=function(C,V){this.readyState!=="opening"&&this.readyState!=="open"&&this.readyState!=="closing"||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",C,V),this.writeBuffer=[],this.prevBufferLen=0)},F.prototype.filterUpgrades=function(C){for(var V=[],G=0,ne=C.length;G<ne;G++)~this.transports.indexOf(C[G])&&V.push(C[G]);return V},F.protocol=4,F.protocol;var Y=typeof ArrayBuffer=="function";e=Object.prototype.toString;var Q=typeof Blob=="function"||typeof Blob<"u"&&e.call(Blob)==="[object BlobConstructor]",ee=typeof File=="function"||typeof File<"u"&&e.call(File)==="[object FileConstructor]",Z;(function(C){C[C.CONNECT=0]="CONNECT",C[C.DISCONNECT=1]="DISCONNECT",C[C.EVENT=2]="EVENT",C[C.ACK=3]="ACK",C[C.CONNECT_ERROR=4]="CONNECT_ERROR",C[C.BINARY_EVENT=5]="BINARY_EVENT",C[C.BINARY_ACK=6]="BINARY_ACK"})(Z||(Z={}));var ie=function(){return c.call(this)||this};H.inherits(ie,c),ie.prototype.add=function(C){if(typeof C=="string")C=this.decodeString(C),C.type===Z.BINARY_EVENT||C.type===Z.BINARY_ACK?(this.reconstructor=new oe(C),C.attachments===0&&c.prototype.emitReserved.call(this,"decoded",C)):c.prototype.emitReserved.call(this,"decoded",C);else{if(!o(C)&&!C.base64)throw Error("Unknown type: "+C);if(!this.reconstructor)throw Error("got binary data when not reconstructing a packet");(C=this.reconstructor.takeBinaryData(C))&&(this.reconstructor=null,c.prototype.emitReserved.call(this,"decoded",C))}},ie.prototype.decodeString=function(C){var V=0,G={type:Number(C.charAt(0))};if(Z[G.type]===void 0)throw Error("unknown packet type "+G.type);if(G.type===Z.BINARY_EVENT||G.type===Z.BINARY_ACK){for(var ne=V+1;C.charAt(++V)!=="-"&&V!=C.length;);if(ne=C.substring(ne,V),ne!=Number(ne)||C.charAt(V)!=="-")throw Error("Illegal attachments");G.attachments=Number(ne)}if(C.charAt(V+1)==="/"){for(ne=V+1;++V&&C.charAt(V)!==","&&V!==C.length;);G.nsp=C.substring(ne,V)}else G.nsp="/";if(ne=C.charAt(V+1),ne!==""&&Number(ne)==ne){for(ne=V+1;++V;){var ge=C.charAt(V);if(ge==null||Number(ge)!=ge){--V;break}if(V===C.length)break}G.id=Number(C.substring(ne,V+1))}if(C.charAt(++V)){C=C.substr(V);try{var Te=JSON.parse(C)}catch{Te=!1}if(!ie.isPayloadValid(G.type,Te))throw Error("invalid payload");G.data=Te}return G},ie.isPayloadValid=function(C,V){switch(C){case Z.CONNECT:return typeof V=="object";case Z.DISCONNECT:return V===void 0;case Z.CONNECT_ERROR:return typeof V=="string"||typeof V=="object";case Z.EVENT:case Z.BINARY_EVENT:return Array.isArray(V)&&0<V.length;case Z.ACK:case Z.BINARY_ACK:return Array.isArray(V)}},ie.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()};var oe=function(C){this.packet=C,this.buffers=[],this.reconPack=C};oe.prototype.takeBinaryData=function(C){return this.buffers.push(C),this.buffers.length===this.reconPack.attachments?(C=this.reconPack,C=(C.data=k(C.data,this.buffers),C.attachments=void 0,C),this.finishedReconstruction(),C):null},oe.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]},e=function(){},e.prototype.encode=function(C){return C.type!==Z.EVENT&&C.type!==Z.ACK||!v(C)?[this.encodeAsString(C)]:(C.type=C.type===Z.EVENT?Z.BINARY_EVENT:Z.BINARY_ACK,this.encodeAsBinary(C))},e.prototype.encodeAsString=function(C){var V=""+C.type;return C.type!==Z.BINARY_EVENT&&C.type!==Z.BINARY_ACK||(V+=C.attachments+"-"),C.nsp&&C.nsp!=="/"&&(V+=C.nsp+","),C.id!=null&&(V+=C.id),C.data!=null&&(V+=JSON.stringify(C.data)),V},e.prototype.encodeAsBinary=function(C){var V=[];return V=(C.data=h(C.data,V),C.attachments=V.length,{packet:C,buffers:V}),C=this.encodeAsString(V.packet),V=V.buffers,V.unshift(C),V};var le=Object.freeze({__proto__:null,protocol:5,get PacketType(){return Z},Encoder:e,Decoder:ie}),Ce=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),fe=function(C,V,G){var ne=c.call(this)||this;return ne.connected=!1,ne.disconnected=!0,ne.receiveBuffer=[],ne.sendBuffer=[],ne.ids=0,ne.acks={},ne.flags={},ne.io=C,ne.nsp=V,G&&G.auth&&(ne.auth=G.auth),ne.io._autoConnect&&ne.open(),ne};H.inherits(fe,c),fe.prototype.subEvents=function(){if(!this.subs){var C=this.io;this.subs=[_(C,"open",this.onopen.bind(this)),_(C,"packet",this.onpacket.bind(this)),_(C,"error",this.onerror.bind(this)),_(C,"close",this.onclose.bind(this))]}},fe.prototype.connect=function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen()),this},fe.prototype.open=function(){return this.connect()},fe.prototype.send=function(C){for(var V=[],G=0;G<arguments.length;++G)V[G-0]=arguments[G];return V.unshift("message"),this.emit.apply(this,V),this},fe.prototype.emit=function(C,V){for(var G=[],ne=1;ne<arguments.length;++ne)G[ne-1]=arguments[ne];if(Ce.hasOwnProperty(C))throw Error('"'+C+'" is a reserved event name');if(G.unshift(C),ne={type:Z.EVENT,data:G,options:{}},ne.options.compress=this.flags.compress!==!1,typeof G[G.length-1]=="function"){var ge=this.ids++;G=G.pop(),this._registerAckCallback(ge,G),ne.id=ge}return G=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,this.flags.volatile&&(!G||!this.connected)||(this.connected?this.packet(ne):this.sendBuffer.push(ne)),this.flags={},this},fe.prototype._registerAckCallback=function(C,V){var G=this,ne=this.flags.timeout;if(ne===void 0)return void(this.acks[C]=V);var ge=this.io.setTimeoutFn(function(){delete G.acks[C];for(var Te=0;Te<G.sendBuffer.length;Te++)G.sendBuffer[Te].id===C&&G.sendBuffer.splice(Te,1);V.call(G,Error("operation has timed out"))},ne);this.acks[C]=function(Te){for(var ke=[],Ae=0;Ae<arguments.length;++Ae)ke[Ae-0]=arguments[Ae];G.io.clearTimeoutFn(ge),V.apply(G,[null].concat(H.arrayFromIterable(ke)))}},fe.prototype.packet=function(C){C.nsp=this.nsp,this.io._packet(C)},fe.prototype.onopen=function(){var C=this;typeof this.auth=="function"?this.auth(function(V){C.packet({type:Z.CONNECT,data:V})}):this.packet({type:Z.CONNECT,data:this.auth})},fe.prototype.onerror=function(C){this.connected||this.emitReserved("connect_error",C)},fe.prototype.onclose=function(C){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",C)},fe.prototype.onpacket=function(C){if(C.nsp===this.nsp)switch(C.type){case Z.CONNECT:C.data&&C.data.sid?this.onconnect(C.data.sid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Z.EVENT:case Z.BINARY_EVENT:this.onevent(C);break;case Z.ACK:case Z.BINARY_ACK:this.onack(C);break;case Z.DISCONNECT:this.ondisconnect();break;case Z.CONNECT_ERROR:this.destroy();var V=Error(C.data.message);V.data=C.data.data,this.emitReserved("connect_error",V)}},fe.prototype.onevent=function(C){var V=C.data||[];C.id!=null&&V.push(this.ack(C.id)),this.connected?this.emitEvent(V):this.receiveBuffer.push(Object.freeze(V))},fe.prototype.emitEvent=function(C){if(this._anyListeners&&this._anyListeners.length){var V=this._anyListeners.slice();V=H.makeIterator(V);for(var G=V.next();!G.done;G=V.next())G.value.apply(this,C)}c.prototype.emit.apply(this,C)},fe.prototype.ack=function(C){var V=this,G=!1;return function(ne){for(var ge=[],Te=0;Te<arguments.length;++Te)ge[Te-0]=arguments[Te];G||(G=!0,V.packet({type:Z.ACK,id:C,data:ge}))}},fe.prototype.onack=function(C){var V=this.acks[C.id];typeof V=="function"&&(V.apply(this,C.data),delete this.acks[C.id])},fe.prototype.onconnect=function(C){this.id=C,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")},fe.prototype.emitBuffered=function(){var C=this;this.receiveBuffer.forEach(function(V){return C.emitEvent(V)}),this.receiveBuffer=[],this.sendBuffer.forEach(function(V){return C.packet(V)}),this.sendBuffer=[]},fe.prototype.ondisconnect=function(){this.destroy(),this.onclose("io server disconnect")},fe.prototype.destroy=function(){this.subs&&(this.subs.forEach(function(C){return C()}),this.subs=void 0),this.io._destroy(this)},fe.prototype.disconnect=function(){return this.connected&&this.packet({type:Z.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},fe.prototype.close=function(){return this.disconnect()},fe.prototype.compress=function(C){return this.flags.compress=C,this},fe.prototype.timeout=function(C){return this.flags.timeout=C,this},fe.prototype.onAny=function(C){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(C),this},fe.prototype.prependAny=function(C){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(C),this},fe.prototype.offAny=function(C){if(!this._anyListeners)return this;if(C){for(var V=this._anyListeners,G=0;G<V.length;G++)if(C===V[G])return V.splice(G,1),this}else this._anyListeners=[];return this},fe.prototype.listenersAny=function(){return this._anyListeners||[]},H.global.Object.defineProperties(fe.prototype,{active:{configurable:!0,enumerable:!0,get:function(){return!!this.subs}},volatile:{configurable:!0,enumerable:!0,get:function(){return this.flags.volatile=!0,this}}}),y.prototype.duration=function(){var C=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var V=Math.random(),G=Math.floor(V*this.jitter*C);C=1&Math.floor(10*V)?C+G:C-G}return 0|Math.min(C,this.max)},y.prototype.reset=function(){this.attempts=0},y.prototype.setMin=function(C){this.ms=C},y.prototype.setMax=function(C){this.max=C},y.prototype.setJitter=function(C){this.jitter=C};var be=function(C,V){var G,ne=c.call(this)||this;return ne.nsps={},ne.subs=[],C&&typeof C=="object"&&(V=C,C=void 0),(V=V||{}).path=V.path||"/socket.io",ne.opts=V,a(ne,V),ne.reconnection(V.reconnection!==!1),ne.reconnectionAttempts(V.reconnectionAttempts||1/0),ne.reconnectionDelay(V.reconnectionDelay||1e3),ne.reconnectionDelayMax(V.reconnectionDelayMax||5e3),ne.randomizationFactor((G=V.randomizationFactor)!==null&&G!==void 0?G:.5),ne.backoff=new y({min:ne.reconnectionDelay(),max:ne.reconnectionDelayMax(),jitter:ne.randomizationFactor()}),ne.timeout(V.timeout==null?2e4:V.timeout),ne._readyState="closed",ne.uri=C,C=V.parser||le,ne.encoder=new C.Encoder,ne.decoder=new C.Decoder,ne._autoConnect=V.autoConnect!==!1,ne._autoConnect&&ne.open(),ne};H.inherits(be,c),be.prototype.reconnection=function(C){return arguments.length?(this._reconnection=!!C,this):this._reconnection},be.prototype.reconnectionAttempts=function(C){return C===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=C,this)},be.prototype.reconnectionDelay=function(C){var V;return C===void 0?this._reconnectionDelay:(this._reconnectionDelay=C,(V=this.backoff)===null||V===void 0||V.setMin(C),this)},be.prototype.randomizationFactor=function(C){var V;return C===void 0?this._randomizationFactor:(this._randomizationFactor=C,(V=this.backoff)===null||V===void 0||V.setJitter(C),this)},be.prototype.reconnectionDelayMax=function(C){var V;return C===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=C,(V=this.backoff)===null||V===void 0||V.setMax(C),this)},be.prototype.timeout=function(C){return arguments.length?(this._timeout=C,this):this._timeout},be.prototype.maybeReconnectOnOpen=function(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()},be.prototype.open=function(C){var V=this;if(~this._readyState.indexOf("open"))return this;var G=this.engine=new F(this.uri,this.opts),ne=this;this._readyState="opening",this.skipReconnect=!1;var ge=_(G,"open",function(){ne.onopen(),C&&C()}),Te=_(G,"error",function(je){ne.cleanup(),ne._readyState="closed",V.emitReserved("error",je),C?C(je):ne.maybeReconnectOnOpen()});if(this._timeout!==!1){var ke=this._timeout;ke===0&&ge();var Ae=this.setTimeoutFn(function(){ge(),G.close(),G.emit("error",Error("timeout"))},ke);this.opts.autoUnref&&Ae.unref(),this.subs.push(function(){clearTimeout(Ae)})}return this.subs.push(ge),this.subs.push(Te),this},be.prototype.connect=function(C){return this.open(C)},be.prototype.onopen=function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var C=this.engine;this.subs.push(_(C,"ping",this.onping.bind(this)),_(C,"data",this.ondata.bind(this)),_(C,"error",this.onerror.bind(this)),_(C,"close",this.onclose.bind(this)),_(this.decoder,"decoded",this.ondecoded.bind(this)))},be.prototype.onping=function(){this.emitReserved("ping")},be.prototype.ondata=function(C){this.decoder.add(C)},be.prototype.ondecoded=function(C){this.emitReserved("packet",C)},be.prototype.onerror=function(C){this.emitReserved("error",C)},be.prototype.socket=function(C,V){var G=this.nsps[C];return G||(G=new fe(this,C,V),this.nsps[C]=G),G},be.prototype._destroy=function(C){C=Object.keys(this.nsps),C=H.makeIterator(C);for(var V=C.next();!V.done;V=C.next())if(this.nsps[V.value].active)return;this._close()},be.prototype._packet=function(C){for(var V=this.encoder.encode(C),G=0;G<V.length;G++)this.engine.write(V[G],C.options)},be.prototype.cleanup=function(){this.subs.forEach(function(C){return C()}),this.subs.length=0,this.decoder.destroy()},be.prototype._close=function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()},be.prototype.disconnect=function(){return this._close()},be.prototype.onclose=function(C){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",C),this._reconnection&&!this.skipReconnect&&this.reconnect()},be.prototype.reconnect=function(){var C=this;if(this._reconnecting||this.skipReconnect)return this;var V=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var G=this.backoff.duration();this._reconnecting=!0;var ne=this.setTimeoutFn(function(){V.skipReconnect||(C.emitReserved("reconnect_attempt",V.backoff.attempts),V.skipReconnect||V.open(function(ge){ge?(V._reconnecting=!1,V.reconnect(),C.emitReserved("reconnect_error",ge)):V.onreconnect()}))},G);this.opts.autoUnref&&ne.unref(),this.subs.push(function(){clearTimeout(ne)})}},be.prototype.onreconnect=function(){var C=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",C)};var Re={};Object.assign(S,{Manager:be,Socket:fe,io:S,connect:S})},function(e,i,d){var t=d(2),u=d(43);e=d(1);var a=d.n(e);i.a=function(c){var r=Object(t.a)({});r.id=c.id,r.stream=c.stream.stream,r.elementID=c.elementID;var s=c.stream.getPlayerId(c.vroom?c.vroom:c.stream.room);r.audio=document.createElement("audio"),r.audio.setAttribute("id",""+s.stream),r.audio.setAttribute("class","vcx_stream"),r.audio.setAttribute("style","width: 100%; height: 100%; position: absolute"),r.audio.setAttribute("autoplay","autoplay"),c.stream.local&&(r.audio.volume=0),r.elementID!==void 0?(r.destroy=function(){r.audio.pause(),r.parentNode.removeChild(r.div)},r.div=document.createElement("div"),r.div.setAttribute("id",""+s.player),r.div.setAttribute("class","vcx_player"),r.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),r.container=typeof r.elementID=="object"&&typeof r.elementID.appendChild=="function"?r.elementID:document.getElementById(r.elementID),r.container.appendChild(r.div),r.parentNode=r.div.parentNode,r.div.appendChild(r.audio),c.options.bar!==!1?(r.bar=Object(u.a)({elementID:""+s.player,id:r.id,stream:c.stream,media:r.audio,options:c.options}),r.div.onmouseover=void 0,r.div.onmouseout=void 0):r.media=r.audio):(r.destroy=function(){r.audio.pause(),r.parentNode.removeChild(r.audio)},document.body.appendChild(r.audio),r.parentNode=document.body);var l=void 0,g=c=void 0,o=s=void 0,v=void 0;return a.a.csp_enabled||(l=document.createElement("div"),l.setAttribute("id","stats-container-"+r.id),l.setAttribute("class","stats-container"),l.setAttribute("style","display:none;"),c=document.createElement("div"),c.setAttribute("id","stats-button-"+r.id),c.setAttribute("class","stats-button"),c.setAttribute("title","Click to see stats"),c.innerHTML=window.statsIcon,l.appendChild(c),g=document.createElement("div"),g.setAttribute("class","stats-overlay"),g.setAttribute("id","stats-overlay-"+r.id),g.setAttribute("style","display:none;position: absolute;z-index:3;padding: 5px;top:0;right:0;background: rgba(20, 198, 239, 0.75);"),s=document.createElement("div"),s.setAttribute("class","stats-overlay-inner"),s.setAttribute("id","stats-overlay-inner-"+r.id),o=document.createElement("div"),v=document.createElement("div"),o.setAttribute("class","stats-left-partition"),o.setAttribute("id","stats-left-part-"+r.id),v.setAttribute("class","stats-right-partition"),v.setAttribute("id","stats-right-part-"+r.id),c.addEventListener("click",function(){g.style.display=g.style.display==="none"?"block":"none"}),r.div.parentNode.style.position="relative",r.div.parentNode.appendChild(l),r.div.parentNode.appendChild(g),g.appendChild(s),s.appendChild(o),s.appendChild(v)),r.audio.srcObject=r.stream,r.ShowSessionStats=function(h){h?(l.setAttribute("style","display:block;"),g.setAttribute("style","display:block;position: absolute;z-index:3;padding: 5px;top:0;right:0;background: rgba(20, 198, 239, 0.75);")):(l.setAttribute("style","display:none;"),g.setAttribute("style","display:none;position: absolute;z-index:3;padding: 5px;top:0;right:0;background: rgba(20, 198, 239, 0.75);"))},r}},function(e,i,d){var t=d(15),u=d(2),a=d(3),c=d(44),r=d(45),s=d(46),l=d(47),g=d(48),o=d(49),v=d(50),h=d(10);i.a=function(k){var _=Object(u.a)({}),y=Object(t.a)().toolbar.default,S=!1;if(k.options!==void 0&&k.options.player!==void 0&&(_.playerProperties=k.options.player),k.options.toolbar){var x=k.options.toolbar;a.a.checkParam(x.position)&&(y.position=x.position),a.a.checkParam(x.class)&&(y.class=x.class),a.a.checkParam(x.skin)&&(y.skin=x.skin,S=y.skin==="default"),a.a.checkParam(x.displayMode),y.displayMode=x.displayMode,a.a.checkParam(x.autoDisplayTimeout)&&(y.autoDisplayTimeout=x.autoDisplayTimeout),x.buttons&&(y.buttons=x.buttons)}return _.elementID=k.elementID,_.id=k.id,_.div=S?Object(a.a)({name:"div",id:"bar_"+_.id,class:"vcx_bar",style:h.a.vcx_bar}):Object(a.a)({name:"div",id:"bar_"+_.id,class:"vcx_bar "+y.skin+"_vcx_bar"}),a.a.getById(_.elementID).appendChild(_.div),_.bar=S?Object(a.a)({name:"div",id:"subbar_"+_.id,class:"vcx_subbar "+y.class,style:h.a["vcx_subbar_"+y.position]}):Object(a.a)({name:"div",id:"subbar_"+_.id,class:"vcx_subbar "+y.skin+"_vcx_subbar_"+y.position+" "+y.class}),_.div.appendChild(_.bar),function(D){function E(W){W=W||window.event,z=W.clientX,te=W.clientY,document.onmouseup=p,document.onmousemove=I}function I(W){W=W||window.event,B=z-W.clientX,P=te-W.clientY,z=W.clientX,te=W.clientY,D.style.top=D.offsetTop-P+"px",D.style.left=D.offsetLeft-B+"px"}function p(){document.onmouseup=null,document.onmousemove=null}var B=0,P=0,z=0,te=0;document.getElementById(D.id)?document.getElementById(D.id).onmousedown=E:D.onmousedown=E}(_.bar),y.buttons.play&&(_.playIcon=Object(o.a)({stream:k.stream,skin:y.skin}),_.bar.appendChild(_.playIcon)),y.buttons.zoom&&(_.zoomIcon=Object(r.a)({skin:y.skin,player:_.playerProperties}),_.bar.appendChild(_.zoomIcon)),y.buttons.record&&(_.recIcon=Object(l.a)({skin:y.skin,stream:k.stream}),_.bar.appendChild(_.recIcon)),y.buttons.share&&(_.shareIcon=Object(g.a)({skin:y.skin,stream:k.stream}),_.bar.appendChild(_.shareIcon)),y.buttons.mic&&(_.micIcon=Object(v.a)({skin:y.skin,stream:k.stream}),_.bar.appendChild(_.micIcon)),S={},k.options&&k.options.toolbar&&k.options.toolbar.branding&&(S=k.options.toolbar.branding),S.skin=y.skin,_.brand=Object(s.a)(S),_.bar.appendChild(_.brand),!y.buttons.volume||k.stream.screen||k.options!==void 0&&k.options.speaker!==void 0&&k.options.speaker!==!0||(_.speaker=Object(c.a)({elementID:"subbar_"+_.id,id:_.id,stream:k.stream,media:k.media,position:y.position,skin:y.skin})),y.displayMode?y.displayMode=="auto"?(_.div.onmouseover=function(D){var E=D.currentTarget;setTimeout(function(){a.a.getByClass("vcx_subbar",E).style.display="block"},1e3*parseInt(y.autoDisplayTimeout))},_.div.onmouseout=function(D){var E=D.currentTarget;setTimeout(function(){a.a.getByClass("vcx_subbar",E).style.display="none"},1e3*parseInt(y.autoDisplayTimeout))},a.a.getByClass("vcx_subbar",_.div).style.display="none"):a.a.getByClass("vcx_subbar",_.div).style.display="block":a.a.getByClass("vcx_subbar",_.div).style.display="none",_}},function(e,i,d){var t=d(3),u=d(2),a=d(10);i.a=function(c){var r=Object(u.a)({}),s=50,l=c.skin==="default";if(r.elementID=c.elementID,r.media=c.media,r.id=c.id,r.stream=c.stream,r.div=l?Object(t.a)({name:"i",class:"fa fa-volume-up fa-fw fa-lg",style:Object.assign(a.a.icon,a.a.icon_volume),id:"volume_"+r.id}):Object(t.a)({name:"i",class:"fa fa-volume-up fa-fw fa-lg "+c.skin+"_icon "+c.skin+"_icon_volume",id:"volume_"+r.id}),t.a.setStyle(r.div,c.position,"0"),r.div.onclick=function(){r.media.muted?(r.media.muted=!1,r.div.classList.remove("fa-volume-off"),r.div.classList.add("fa-volume-up"),r.stream.local?r.stream.stream.getAudioTracks()[0].enabled=!0:(r.picker.value=s,r.media.volume=r.picker.value/100)):(r.media.muted=!0,r.div.classList.remove("fa-volume-up"),r.div.classList.add("fa-volume-off"),r.stream.local?r.stream.stream.getAudioTracks()[0].enabled=!1:(s=r.picker.value,r.picker.value=0,r.media.volume=0))},!r.stream.local){r.picker=document.createElement("input"),r.picker.setAttribute("id","picker_"+r.id),r.picker.setAttribute("style","position: absolute;max-width: 50px;margin: 1.1%;top:0;"),r.picker.type="range",r.picker.min=0,r.picker.max=1,r.picker.step=.1,r.picker.value=s,r.picker.setAttribute("orient","vertical"),r.div.appendChild(r.picker),r.media.volume=r.picker.value,r.media.muted=!1,r.picker.onclick=function(){0<r.picker.value?(r.media.muted=!1,r.div.classList.remove("fa-volume-off"),r.div.classList.add("fa-volume-up")):(r.media.muted=!0,r.div.classList.remove("fa-volume-up"),r.div.classList.add("fa-volume-off")),r.media.volume=r.picker.value};var g=function(o){r.picker.setAttribute("style","position: absolute;max-width: 50px;margin: 1.1%;margin-left:32px;top:0;display: "+o)};r.div.onmouseover=function(){g("block")},r.picker.onmouseout=function(){g("none")},g("none")}return document.getElementById(r.elementID).appendChild(r.div),r}},function(e,i,d){var t=d(3);d(2);var u=d(10),a=!1,c=function(r){var s=(a=r.skin==="default")?Object(t.a)({name:"i",title:"zoom",class:"fa fa-expand  fa-lg icon_zoom ",style:Object.assign(u.a.icon,u.a.icon_zoom)}):Object(t.a)({name:"i",title:"zoom",class:"fa fa-expand icon_zoom "+r.skin+"_icon fa-lg "+r.skin+"_icon_zoom"});return s.onclick=function(l){l.stopPropagation(),c.click(l,r)},s};c.click=function(r,s){var l=s.skin;s={height:s.player.height,width:s.player.width,position:"relative"};var g=r.currentTarget.classList;g.contains("fa-expand")?(r.currentTarget.classList.remove("fa-expand"),r.currentTarget.classList.add("fa-arrows-alt"),a?r.currentTarget.parentNode.parentNode.parentNode.parentNode.setAttribute("style",t.a.getStyle(u.a.full_view)):r.currentTarget.parentNode.parentNode.parentNode.classList.add(l+"_theater_view")):g.contains("fa-arrows-alt")?(r.currentTarget.classList.remove("fa-arrows-alt"),r.currentTarget.classList.add("fa-compress"),a?(r.currentTarget.parentNode.parentNode.parentNode.parentNode.removeAttribute("style"),r.currentTarget.parentNode.parentNode.parentNode.parentNode.setAttribute("style",t.a.getStyle(u.a.full_view))):(r.currentTarget.parentNode.parentNode.parentNode.parentNode.classList.remove(l+"_theater_view"),r.currentTarget.parentNode.parentNode.parentNode.parentNode.classList.add(l+"_full_view"))):g.contains("fa-compress")&&(r.currentTarget.classList.remove("fa-compress"),r.currentTarget.classList.add("fa-expand"),a?(r.currentTarget.parentNode.parentNode.parentNode.parentNode.removeAttribute("style"),r.currentTarget.parentNode.parentNode.parentNode.parentNode.setAttribute("style",t.a.getStyle(s))):r.currentTarget.parentNode.parentNode.parentNode.classList.remove(l+"_full_view"))},i.a=c},function(e,i,d){var t=d(15),u=d(3),a=d(2),c=d(10);i.a=function(r){Object(a.a)({});var s=!1,l=Object(t.a)().brand.default;r&&(u.a.checkParam(r.clickthru)&&(l.url=r.clickthru),r.target&&r.target=="current"&&(l.target="_self"),u.a.checkParam(r.logo)&&(l.logo=r.logo),u.a.checkParam(r.title)&&(l.title=r.title),r.display!==void 0&&(l.display=r.display),s=r.skin==="default");var g=Object(u.a)({name:"a",title:l.title,href:l.url,target:l.target});return r=s?Object(u.a)({name:"img",src:l.logo,style:c.a.brand_logo}):Object(u.a)({name:"img",class:r.skin+"_brand_logo",src:l.logo}),g.appendChild(r),u.a.checkParam(l.display)||(g.style.display="none"),g}},function(e,i,d){var t=d(3),u=d(2),a=function(c){Object(u.a)({});var r=Object(t.a)({name:"i",title:"record",class:"fa fa-circle fa-fw fa-lg icon_record "+c.skin+"_icon "+c.skin+"_icon_record"});return r.onclick=function(s){a.click(s,c.stream)},r};a.click=function(c,r){var s=c.currentTarget.classList;s.contains("fa-circle")?(c.currentTarget.classList.remove("fa-circle"),c.currentTarget.classList.add("fa-stop-circle"),r.local||r.room.startRecording(r,function(l){})):s.contains("fa-stop-circle")&&(c.currentTarget.classList.remove("fa-stop-circle"),c.currentTarget.classList.add("fa-circle"),r.recordingId&&r.room.stopRecording(r.recordingId,function(l){l&&(r.recordingId=void 0)}))},i.a=a},function(e,i,d){var t=d(3),u=d(2),a=function(c){Object(u.a)({});var r=c.stream;return c=Object(t.a)({name:"i",title:"share screen",class:"fa fa-share-alt fa-fw fa-lg icon_share "+c.skin+"_icon "+c.skin+"_icon_share"}),c.onclick=function(s){a.click(s,r)},c};a.click=function(c,r){var s=VcxRtc.Stream({screen:!0,data:!0,attributes:{name:"shareStream"}});s.init(),s.addEventListener("media-access-allowed",function(){r.room.publish(s,{maxVideoBW:300},function(l,g){})}),s.addEventListener("media-access-denied",function(l){})},i.a=a},function(e,i,d){var t=d(3),u=d(2);d(11);var a=d(10),c=function(r){return Object(u.a)({}),r=r.skin==="default"?Object(t.a)({name:"i",title:"pause",class:"fa fa-pause fa-lg icon_play",style:Object.assign(a.a.icon,a.a.icon_play)}):Object(t.a)({name:"i",title:"pause",class:"fa fa-pause fa-lg "+r.skin+"_icon icon_play "+r.skin+"_icon_play"}),r.onclick=function(s){c.click(s)},r};c.toggleVideo=function(r){r.srcObject.getTracks().forEach(function(s){return s.enabled=!s.enabled})},c.click=function(r){var s=r.currentTarget.classList;s.contains("fa-pause")?(r.currentTarget.classList.remove("fa-pause"),r.currentTarget.classList.add("fa-play"),s=r.currentTarget.parentNode.parentNode.parentNode,r=t.a.getById("stream"+s.id.split("_")[1]),s=t.a.getById("screen_saver_"+s.id.split("_")[1]),c.toggleVideo(r),s.src!==""?s.style.display="block":r.pause()):s.contains("fa-play")&&(r.currentTarget.classList.remove("fa-play"),r.currentTarget.classList.add("fa-pause"),s=r.currentTarget.parentNode.parentNode.parentNode,r=t.a.getById("stream"+s.id.split("_")[1]),s=t.a.getById("screen_saver_"+s.id.split("_")[1]),c.toggleVideo(r),s.src!==""?s.style.display="none":r.play())},i.a=c},function(e,i,d){var t=d(3),u=d(2),a=d(10),c=function(r){Object(u.a)({});var s=r.skin==="default",l=r.stream;return r=s?Object(t.a)({name:"i",title:"microphone",class:"fa fa-microphone fa-fw fa-lg icon_mic",style:Object.assign(a.a.icon,a.a.icon_mic)}):Object(t.a)({name:"i",title:"microphone",class:"fa fa-microphone fa-fw fa-lg icon_mic "+r.skin+"_icon "+r.skin+"_icon_mic"}),r.onclick=function(g){c.click(g,l)},r};c.click=function(r,s){var l=r.currentTarget.classList;l.contains("fa-microphone")?(s.muteAudio(),r.currentTarget.classList.remove("fa-microphone"),r.currentTarget.classList.add("fa-microphone-slash")):l.contains("fa-microphone-slash")&&(s.unmuteAudio(),r.currentTarget.classList.remove("fa-microphone-slash"),r.currentTarget.classList.add("fa-microphone"))},i.a=c},function(e,i,d){(function(t){t=function(){var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(a){function c(se){return a.locateFile?a.locateFile(se,D):D+se}function r(se,_e){return 0<se%_e&&(se+=_e-se%_e),se}function s(se){re=se,a.HEAP8=new Int8Array(se),a.HEAP16=new Int16Array(se),a.HEAP32=W=new Int32Array(se),a.HEAPU8=te=new Uint8Array(se),a.HEAPU16=new Uint16Array(se),a.HEAPU32=new Uint32Array(se),a.HEAPF32=new Float32Array(se),a.HEAPF64=new Float64Array(se)}function l(se){for(;0<se.length;){var _e=se.shift();if(typeof _e=="function")_e(a);else{var Se=_e.func;typeof Se=="number"?_e.arg===void 0?a.dynCall_v(Se):a.dynCall_vi(Se,_e.arg):Se(_e.arg===void 0?null:_e.arg)}}}function g(se){throw a.onAbort&&a.onAbort(se),se+="",I(se),p(se),z=!0,new WebAssembly.RuntimeError("abort("+se+"). Build with -s ASSERTIONS=1 for more info.")}function o(se,_e){return String.prototype.startsWith?se.startsWith(_e):se.indexOf(_e)===0}function v(){try{if(B)return new Uint8Array(B);if(E)return E(O);throw"both async and sync fetching of the wasm failed"}catch(se){g(se)}}function h(){return B||!S&&!x||typeof fetch!="function"?new Promise(function(se,_e){se(v())}):fetch(O,{credentials:"same-origin"}).then(function(se){if(!se.ok)throw"failed to load wasm binary file at '"+O+"'";return se.arrayBuffer()}).catch(function(){return v()})}function k(se){function _e(){if(!q&&(q=!0,a.calledRun=!0,!z)){if(l(ae),l(ce),_(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)he.unshift(a.postRun.shift());l(he)}}if(!(0<ye)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)f.unshift(a.preRun.shift());l(f),0<ye||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),_e()},1)):_e())}}a=a||{},a=typeof a<"u"?a:{};var _;a.ready=new Promise(function(se,_e){_=se});var y={};for(K in a)a.hasOwnProperty(K)&&(y[K]=a[K]);var S=!1,x=!1;S=typeof window=="object",x=typeof importScripts=="function";var D="",E;(S||x)&&(x?D=self.location.href:document.currentScript&&(D=document.currentScript.src),u&&(D=u),D=D.indexOf("blob:")!==0?D.substr(0,D.lastIndexOf("/")+1):"",x&&(E=function(se){var _e=new XMLHttpRequest;return _e.open("GET",se,!1),_e.responseType="arraybuffer",_e.send(null),new Uint8Array(_e.response)}));var I=a.print||console.log.bind(console),p=a.printErr||console.warn.bind(console);for(K in y)y.hasOwnProperty(K)&&(a[K]=y[K]);y=null;var B;a.wasmBinary&&(B=a.wasmBinary),typeof WebAssembly!="object"&&p("no native wasm support detected");var P;y=new WebAssembly.Table({initial:1,maximum:1,element:"anyfunc"});var z=!1,te,W,K=a.INITIAL_MEMORY||16777216;if(P=a.wasmMemory?a.wasmMemory:new WebAssembly.Memory({initial:K/65536,maximum:32768}))var re=P.buffer;K=re.byteLength,s(re),W[24364]=5340496;var f=[],ae=[],ce=[],he=[],ye=0,R=null;a.preloadedImages={},a.preloadedAudios={};var O="rnnoise.wasm";o(O,"data:application/octet-stream;base64,")||(O=c(O)),ae.push({func:function(){J()}});var j={a:function(se,_e,Se){te.copyWithin(se,_e,_e+Se)},b:function(se){se>>>=0;var _e=te.length;if(2147483648<se)return!1;for(var Se=1;4>=Se;Se*=2){var ve=_e*(1+.2/Se);ve=Math.min(ve,se+100663296),ve=Math.min(2147483648,r(Math.max(16777216,se,ve),65536));e:{try{P.grow(ve-re.byteLength+65535>>>16),s(P.buffer);var we=1;break e}catch{}we=void 0}if(we)return!0}return!1},memory:P,table:y};(function(){function se(we,xe){a.asm=we.exports,ye--,a.monitorRunDependencies&&a.monitorRunDependencies(ye),ye==0&&R&&(we=R,R=null,we())}function _e(we){se(we.instance)}function Se(we){return h().then(function(xe){return WebAssembly.instantiate(xe,ve)}).then(we,function(xe){p("failed to asynchronously prepare wasm: "+xe),g(xe)})}var ve={a:j};if(ye++,a.monitorRunDependencies&&a.monitorRunDependencies(ye),a.instantiateWasm)try{return a.instantiateWasm(ve,se)}catch(we){return p("Module.instantiateWasm callback failed with error: "+we),!1}return function(){if(B||typeof WebAssembly.instantiateStreaming!="function"||o(O,"data:application/octet-stream;base64,")||typeof fetch!="function")return Se(_e);fetch(O,{credentials:"same-origin"}).then(function(we){return WebAssembly.instantiateStreaming(we,ve).then(_e,function(xe){return p("wasm streaming compile failed: "+xe),p("falling back to ArrayBuffer instantiation"),Se(_e)})})}(),{}})();var J=a.___wasm_call_ctors=function(){return(J=a.___wasm_call_ctors=a.asm.c).apply(null,arguments)};a._rnnoise_init=function(){return(a._rnnoise_init=a.asm.d).apply(null,arguments)},a._rnnoise_create=function(){return(a._rnnoise_create=a.asm.e).apply(null,arguments)},a._malloc=function(){return(a._malloc=a.asm.f).apply(null,arguments)},a._rnnoise_destroy=function(){return(a._rnnoise_destroy=a.asm.g).apply(null,arguments)},a._free=function(){return(a._free=a.asm.h).apply(null,arguments)},a._rnnoise_process_frame=function(){return(a._rnnoise_process_frame=a.asm.i).apply(null,arguments)};var q;if(R=function se(){q||k(),q||(R=se)},a.run=k,a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return k(),a.ready}}(),i.a=t}).call(i,d(23))},function(e,i,d){var t=d(0),u=d(7),a=d(11),c=d(19);d(14),e=d(1);var r=d.n(e),s=d(4);d(6),d(5),i.a=function(l,g){var o=Object(s.c)(g);return o.rooms=new Map,o.currentBreakOutRoom=null,o.joinRoom=function(v,h,k,_){_=_===void 0?{allow_reconnect:!0,number_of_attempts:3,timeout_interval:45e3}:_;var y=null,S=null;if(t.a.info("SDK version is: ",r.a.product.version),v!=null){t.a.info("=========== port of hope"),v=JSON.parse(window.atob(v)),v.version=r.a.product.version;var x=Object(a.a)(void 0,void 0,{token:c.a.encodeBase64(JSON.stringify(v)),reconnectInfo:_});v=function(){if(u.a.browserEngineCheck()==="IE"){h.video=!1;var I=document.getElementById("WebrtcEverywherePluginId");I.addEventListener("room-connected",function(p){o.rooms.set(x.roomID,x),S={streams:p.data.streams,room:x,roomData:p.data.room,localStream:E},x.publish(E,function(B){B.result===0?(S.publishId=B.id,k(S,null)):k(null,B)})}),I.addEventListener("room-error",function(p){k(S,p.data)}),I.addEventListener("stream-added",function(p){x.subscribe(p.data.stream)})}else x.addEventListener("room-connected",function(p){for(h.video=!1,t.a.info("-----------BreakoutRoom-Connected--------"),S={streams:p.streams,room:x,roomData:p.room,localStream:E},k(S,null),x.publish(E,function(B){B.result===0?S.publishId=B.id:x.dispatchEvent(Object(s.e)({type:"room-error",message:B}))}),p=0;p<S.streams.length;p++)x.subscribe(S.streams[p],{},function(B){B===!0?t.a.info("breakout room-subscribe callback success"):(t.a.info("breakout room-subscribe callback failed, could not subscribe streams",B),x.dispatchEvent(Object(s.e)({type:"room-error",message:B})))});o.rooms.set(x.roomID,x),p=Object(s.e)({type:"breakout-room-connected",success:S}),o.dispatchEvent(p)}),x.addEventListener("room-error",function(p){k(null,p)}),x.addEventListener("stream-added",function(p){x.subscribe(p.stream)}),x.addEventListener("room-disconnected",o.onBreakOutRoomDisconnect.bind(x));x.reconnectionState===!1&&x.reconnectAttempt==0?(t.a.info("-----------BreakoutRoom-Connecting--------"),x.connect(_)):t.a.debug(" Reconnection case in join room public api")};var D=function(I){y=I,k(S,y)};if(h.audio||h.video)var E=x.initPublishStream(h.div,h,v,D);else t.a.info(" No publish stream. audio and video are disabled.."),v()}return E},o.endBreakOutRoom=function(v){t.a.info("Breakout Room ended, Disconnecting the room"),o.rooms.get(v).disconnect()},o.onBreakOutRoomDisconnect=function(v){var h=Object(s.e)({type:"breakout-room-disconnect",message:{room_id:v.id}});o.rooms.delete(v.roomID),o.dispatchEvent(h)},o.onUserLeft=function(v,h){v=UserEvent({type:"user-disconnected",room_id:v.roomID,name:h.name,clientId:h.clientId,role:h.role,permission:h.permissions}),o.dispatchEvent(v)},o.onUserJoined=function(v,h){v=h.name;var k=h.role,_=h.permissions,y={name:h.name,permissions:h.permissions,role:h.role,user_ref:h.user_ref,videoMuted:h.videoMuted,audioMuted:h.audioMuted};o.userList.set(h.clientId,y),h=UserEvent({type:"user-connected",name:v,clientId:h.clientId,role:k,permission:_,user:y}),o.dispatchEvent(h)},o.disconnectAll=function(){o.rooms.forEach(function(v,h){v&&v.disconnect()})},o}},function(e,i,d){i.a=function(){var t={},u={};return t.add=function(a,c){u[a]=c},t.get=function(a){return u[a]},t.getAll=function(){return u},t.has=function(a){return u[a]!==void 0},t.forEach=function(a){for(var c=Object.keys(u),r=0;r<c.length;r+=1){var s=c[r];a(u[s],s)}},t.keys=function(){return Object.keys(u)},t.remove=function(a){delete u[a]},t.size=function(){var a=0,c;for(c in u)u.hasOwnProperty(c)&&a++;return a},t}},function(e,i){i.read=function(d,t,u,a,c){var r=8*c-a-1,s=(1<<r)-1,l=s>>1,g=-7;c=u?c-1:0;var o=u?-1:1,v=d[t+c];for(c+=o,u=v&(1<<-g)-1,v>>=-g,g+=r;0<g;u=256*u+d[t+c],c+=o,g-=8);for(r=u&(1<<-g)-1,u>>=-g,g+=a;0<g;r=256*r+d[t+c],c+=o,g-=8);if(u===0)u=1-l;else{if(u===s)return r?NaN:1/0*(v?-1:1);r+=Math.pow(2,a),u-=l}return(v?-1:1)*r*Math.pow(2,u-a)},i.write=function(d,t,u,a,c,r){var s,l=8*r-c-1,g=(1<<l)-1,o=g>>1,v=c===23?Math.pow(2,-24)-Math.pow(2,-77):0;r=a?0:r-1;var h=a?1:-1,k=0>t||t===0&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(t=isNaN(t)?1:0,a=g):(a=Math.floor(Math.log(t)/Math.LN2),1>t*(s=Math.pow(2,-a))&&(a--,s*=2),t=1<=a+o?t+v/s:t+v*Math.pow(2,1-o),2<=t*s&&(a++,s/=2),a+o>=g?(t=0,a=g):1<=a+o?(t=(t*s-1)*Math.pow(2,c),a+=o):(t=t*Math.pow(2,o-1)*Math.pow(2,c),a=0));8<=c;d[u+r]=t&255,r+=h,t/=256,c-=8);for(a=a<<c|t,l+=c;0<l;d[u+r]=a&255,r+=h,a/=256,l-=8);d[u+r-h]|=128*k}},function(e,i){var d={}.toString;e.exports=Array.isArray||function(t){return d.call(t)=="[object Array]"}},function(e,i,d){e=d(32);var t=d.n(e),u=d(60),a=d(22),c=d(12);d.n(c);var r=d(16),s=d(0);d=function(){var l=t.a.call(this,"FileSender")||this;return l.keychain=new a.a,l.reset(),l},H.inherits(d,t.a),d.prototype.reset=function(){this.uploadRequest=null,this.msg="importingFile",this.progress=[0,1],this.cancelled=!1},d.prototype.cancel=function(){this.cancelled=!0,this.uploadRequest&&this.uploadRequest.cancel()},d.prototype.upload=function(l,g){var o=this,v,h,k,_,y,S,x,D,E;return H.asyncExecutePromiseGeneratorProgram(function(I){switch(I.nextAddress){case 1:if(o.cancelled)throw Error(0);return o.msg="encryptingFile",o.emit("encrypting"),v=Object(c.encryptedSize)(l.size),I.yield(o.keychain.encryptStream(l.stream),2);case 2:return h=I.yieldResult,I.yield(o.keychain.encryptMetadata(l),3);case 3:return k=I.yieldResult,I.yield(o.keychain.authKeyB64(),4);case 4:if(_=I.yieldResult,y={name:l.name,plainSize:l.size,type:l.type,totalSize:v},o.uploadRequest=Object(r.i)(h,k,_,l.timeLimit,l.dlimit,g,y,function(p){o.progress=[p,v],o.emit("progress")}),o.cancelled)throw Error(0);return o.msg="fileSizeProgress",o.emit("progress"),I.setCatchFinallyBlocks(5),I.yield(o.uploadRequest.result,7);case 7:return S=I.yieldResult,o.msg="notifyUploadEncryptDone",o.uploadRequest=null,o.progress=[1,1],x=Object(c.arrayToB64)(o.keychain.rawSecret),D=new u.a({id:S.id,url:S.url+"#"+x,name:l.name,size:l.size,manifest:l.manifest,time:S.duration,speed:l.size/(S.duration/1e3),createdAt:Date.now(),expiresAt:Date.now()+1e3*l.timeLimit,secretKey:x,nonce:o.keychain.nonce,ownerToken:S.ownerToken,dlimit:l.dlimit,timeLimit:l.timeLimit,mnounce:S.mnounce}),I.return(D);case 5:throw E=I.enterCatchBlock(),s.a.info("upload request failed",E),o.msg="errorPageHeader",o.uploadRequest=null,E}})},H.global.Object.defineProperties(d.prototype,{progressRatio:{configurable:!0,enumerable:!0,get:function(){return this.progress[0]/this.progress[1]}},progressIndefinite:{configurable:!0,enumerable:!0,get:function(){return["fileSizeProgress","notifyUploadEncryptDone"].indexOf(this.msg)===-1}},sizes:{configurable:!0,enumerable:!0,get:function(){return{partialSize:Object(c.bytes)(this.progress[0]),totalSize:Object(c.bytes)(this.progress[1])}}}}),i.a=d},function(e,i,d){e.exports=function(t,u,a){var c=t.length;if(!(u>=c||a===0)){for(a=u+a>c?c-u:a,c-=a;u<c;++u)t[u]=t[u+a];t.length=c}}},function(e,i,d){function t(s){function l(v){var h="end-"+g+"-"+s;r.mark(h),a.push(function(){var k=null;try{r.measure(s+" ["+g+"]",o,h),r.clearMarks(o),r.clearMarks(h)}catch(_){k=_}v&&v(k,s)})}if(c.equal(typeof s,"string","nanotiming: name should be type string"),t.disabled)return u;var g=(1e4*r.now()).toFixed()%Number.MAX_SAFE_INTEGER,o="start-"+g+"-"+s;return r.mark(o),l.uuid=g,l}function u(s){s&&a.push(function(){s(Error("nanotiming: performance API unavailable"))})}var a=d(59)(),c=d(21);t.disabled=!0;try{var r=window.performance;t.disabled=window.localStorage.DISABLE_NANOTIMING==="true"||!r.mark}catch{}e.exports=t},function(e,i,d){function t(c){this.method=(this.hasIdle=(this.hasWindow=c)&&window.requestIdleCallback)?window.requestIdleCallback.bind(window):this.setTimeout,this.scheduled=!1,this.queue=[]}var u=d(21),a=typeof window<"u";t.prototype.push=function(c){u.equal(typeof c,"function","nanoscheduler.push: cb should be type function"),this.queue.push(c),this.schedule()},t.prototype.schedule=function(){if(!this.scheduled){this.scheduled=!0;var c=this;this.method(function(r){for(var s;c.queue.length&&0<r.timeRemaining();)s=c.queue.shift(),s(r);c.scheduled=!1,c.queue.length&&c.schedule()})}},t.prototype.setTimeout=function(c){setTimeout(c,0,{timeRemaining:function(){return 1}})},e.exports=function(){if(a){window._nanoScheduler||(window._nanoScheduler=new t(!0));var c=window._nanoScheduler}else c=new t;return c}},function(e,i,d){var t=d(22),u=d(12);d.n(u);var a=d(16);e=function(c){if(!c.manifest)throw Error("invalid file object");this.id=c.id,this.url=c.url,this.name=c.name,this.size=c.size,this.manifest=c.manifest,this.time=c.time,this.speed=c.speed,this.createdAt=c.createdAt,this.expiresAt=c.expiresAt,this.ownerToken=c.ownerToken,this.dlimit=c.dlimit||1,this.dtotal=c.dtotal||0,this.keychain=new t.a(c.secretKey,c.nonce),this._hasPassword=!!c.hasPassword,this.timeLimit=c.timeLimit,this.mnounce=c.mnounce},e.prototype.setPassword=function(c){var r=this,s,l;return H.asyncExecutePromiseGeneratorProgram(function(g){if(g.nextAddress==1)return g.setCatchFinallyBlocks(2),r.password=c,r._hasPassword=!0,r.keychain.setPassword(c,r.url),g.yield(Object(a.h)(r.id,r.ownerToken,r.keychain),4);if(g.nextAddress!=2)return s=g.yieldResult,g.return(s);throw l=g.enterCatchBlock(),r.password=null,r._hasPassword=!1,l})},e.prototype.del=function(){return Object(a.a)(this.id,this.ownerToken)},e.prototype.changeLimit=function(c,r){return r=r===void 0?{}:r,this.dlimit!==c?(this.dlimit=c,Object(a.g)(this.id,this.ownerToken,r.bearerToken,{dlimit:c})):Promise.resolve(!0)},e.prototype.updateDownloadCount=function(){var c=this,r,s,l,g;return H.asyncExecutePromiseGeneratorProgram(function(o){switch(o.nextAddress){case 1:return r=c.dtotal,s=c.dlimit,o.setCatchFinallyBlocks(2),o.yield(Object(a.c)(c.id,c.ownerToken),4);case 4:l=o.yieldResult,c.dtotal=l.dtotal,c.dlimit=l.dlimit,o.leaveTryBlock(3);break;case 2:g=o.enterCatchBlock(),g.message==="404"&&(c.dtotal=c.dlimit);case 3:return o.return(r!==c.dtotal||s!==c.dlimit)}})},e.prototype.toJSON=function(){return{id:this.id,url:this.url,name:this.name,size:this.size,manifest:this.manifest,time:this.time,speed:this.speed,createdAt:this.createdAt,expiresAt:this.expiresAt,secretKey:Object(u.arrayToB64)(this.keychain.rawSecret),ownerToken:this.ownerToken,dlimit:this.dlimit,dtotal:this.dtotal,hasPassword:this.hasPassword,timeLimit:this.timeLimit,mnounce:this.mnounce}},H.global.Object.defineProperties(e.prototype,{hasPassword:{configurable:!0,enumerable:!0,get:function(){return!!this._hasPassword}},expired:{configurable:!0,enumerable:!0,get:function(){return this.dlimit===this.dtotal||Date.now()>this.expiresAt}}}),i.a=e},function(e,i,d){var t=d(20);e=function(u,a,c){u=u===void 0?[]:u,a=a===void 0?86400:a,c=c===void 0?{}:c,this.files=Array.from(u),this.timeLimit=this.defaultTimeLimit=a,this.dlimit=10,this.password=null,this.roomMeta=c},e.prototype.addFiles=function(u,a,c){var r=this;if(this.files.length+u.length>c)throw Error("tooManyFiles");if(u=u.filter(function(s){var l;if(l=0<s.size){e:{l=H.makeIterator(r.files);for(var g=l.next();!g.done;g=l.next())if(g=g.value,s.name===g.name&&s.size===g.size&&s.lastModified===g.lastModified){s=!0;break e}s=!1}l=!s}return l}),c=u.reduce(function(s,l){return s+l.size},0),this.size+c>a)throw Error("fileTooBig");return this.files=this.files.concat(u),!0},e.prototype.remove=function(u){u=this.files.indexOf(u),-1<u&&this.files.splice(u,1)},e.prototype.clear=function(){this.files=[],this.dlimit=1,this.timeLimit=this.defaultTimeLimit,this.password=null,this.roomMeta={}},H.global.Object.defineProperties(e.prototype,{name:{configurable:!0,enumerable:!0,get:function(){return 1<this.files.length?"Send-Archive.zip":this.files[0].name}},type:{configurable:!0,enumerable:!0,get:function(){return 1<this.files.length?"send-archive":this.files[0].type}},size:{configurable:!0,enumerable:!0,get:function(){return this.files.reduce(function(u,a){return u+a.size},0)}},numFiles:{configurable:!0,enumerable:!0,get:function(){return this.files.length}},manifest:{configurable:!0,enumerable:!0,get:function(){return{files:this.files.map(function(u){return{name:u.name,size:u.size,type:u.type}})}}},stream:{configurable:!0,enumerable:!0,get:function(){return Object(t.b)(this.files.map(function(u){return Object(t.a)(u)}))}}}),i.a=e},function(e,i,d){function t(o,v){return v=v===void 0?!1:v,H.asyncExecutePromiseGeneratorProgram(function(h){return h.return(new Promise(function(k,_){var y={};if(y=new DataView(o.plaintext),y=new Blob([y],{type:o.type}),v===!0)return g.a.info(" download file mobile device",v),y={messageType:"download-success",result:0,description:"download-success",response:{downloadStatus:"success",name:o.name,type:o.type,size:o.size,blob:y}},k(y);if(navigator.msSaveBlob)return console.log("nagivator service worker is present"),navigator.msSaveBlob(y,o.name),k();if(/iPhone|fxios/i.test(navigator.userAgent)){var S=new FileReader;S.addEventListener("loadend",function(){if(S.error)return _(S.error);if(S.result){var D=document.createElement("a");D.href=S.result,D.download=o.name,document.body.appendChild(D),D.click()}k()}),S.readAsDataURL(y)}else{y=URL.createObjectURL(y);var x=document.createElement("a");x.href=y,x.download=o.name,document.body.appendChild(x),x.click(),URL.revokeObjectURL(y),y={messageType:"download-success",result:0,description:"download-success",response:{downloadStatus:"success",name:o.name,type:o.type,size:o.size}},setTimeout(k(y),100)}}))})}e=d(32);var u=d.n(e),a=d(22),c=d(12);d.n(c);var r=d(16),s=d(20),l=d(63),g=d(0);d=function(o){var v=u.a.call(this,"FileReceiver")||this;return v.keychain=new a.a(o.secretKey,o.nonce),o.requiresPassword&&v.keychain.setPassword(o.password,o.url),v.fileInfo=o,v.reset(),v},H.inherits(d,u.a),d.prototype.cancel=function(){this.downloadRequest&&this.downloadRequest.cancel()},d.prototype.reset=function(){this.msg="fileSizeProgress",this.state="initialized",this.progress=[0,1]},d.prototype.getMetadata=function(){var o=this,v;return H.asyncExecutePromiseGeneratorProgram(function(h){if(h.nextAddress==1)return h.yield(Object(r.e)(o.fileInfo.id,o.keychain),2);v=h.yieldResult,o.fileInfo.name=v.name,o.fileInfo.type=v.type,o.fileInfo.iv=v.iv,o.fileInfo.size=+v.size,o.fileInfo.manifest=v.manifest,o.state="ready",h.jumpToEnd()})},d.prototype.sendMessageToSw=function(o){return new Promise(function(v,h){var k=new MessageChannel;k.port1.onmessage=function(_){_.data===void 0?h("bad response from serviceWorker"):_.data.error!==void 0?h(_.data.error):v(_.data)},navigator.serviceWorker.controller.postMessage(o,[k.port2])})},d.prototype.downloadBlob=function(o,v){o=o===void 0?!1:o,v=v===void 0?!1:v;var h=this,k,_,y,S,x,D,E,I;return H.asyncExecutePromiseGeneratorProgram(function(p){switch(p.nextAddress){case 1:return h.state="downloading",k=h,p.yield(Object(r.b)(h.fileInfo.id,h.keychain,function(B){h.progress=[B,h.fileInfo.size],h.emit("progress")}),2);case 2:return k.downloadRequest=p.yieldResult,p.setCatchFinallyBlocks(3),p.yield(h.downloadRequest.result,5);case 5:return _=p.yieldResult,h.downloadRequest=null,h.msg="decryptingFile",h.state="decrypting",h.emit("decrypting"),y=h.fileInfo.size,S=h.keychain.decryptStream(Object(s.a)(_)),h.fileInfo.type==="send-archive"&&(x=new l.a(h.fileInfo.manifest,S),S=x.stream,y=x.size),p.yield(Object(c.streamToArrayBuffer)(S,y),6);case 6:if(D=p.yieldResult,E={},o){p.jumpTo(7);break}return p.yield(t({plaintext:D,name:decodeURIComponent(h.fileInfo.name),type:h.fileInfo.type},v),8);case 8:E=p.yieldResult;case 7:return h.msg="downloadFinish",h.emit("complete"),h.state="complete",p.return(E);case 3:throw I=p.enterCatchBlock(),h.downloadRequest=null,I}})},d.prototype.downloadStream=function(o){o=o===void 0?!1:o;var v=this,h,k,_,y,S,x,D,E,I,p,B,P;return H.asyncExecutePromiseGeneratorProgram(function(z){switch(z.nextAddress){case 1:return h=Date.now(),k=function(te){v.progress=[te,v.fileInfo.size],v.emit("progress")},v.downloadRequest={cancel:function(){v.sendMessageToSw({request:"cancel",id:v.fileInfo.id})}},z.setCatchFinallyBlocks(2),v.state="downloading",_={request:"init",id:v.fileInfo.id,filename:v.fileInfo.name,type:v.fileInfo.type,manifest:v.fileInfo.manifest,key:v.fileInfo.secretKey,requiresPassword:v.fileInfo.requiresPassword,password:v.fileInfo.password,url:v.fileInfo.url,size:v.fileInfo.size,nonce:v.keychain.nonce,noSave:o},z.yield(v.sendMessageToSw(_),4);case 4:if(k(0),!o){y="/api/download/"+v.fileInfo.id,S=Object(r.d)(y),S===y&&(S=location.protocol+"//"+location.host+y),x=document.createElement("a"),x.href=S,document.body.appendChild(x),x.click(),z.jumpTo(5);break}return z.yield(fetch(Object(r.d)("/api/download/"+v.fileInfo.id)),6);case 6:if(D=z.yieldResult,D.status!==200)throw Error(D.status);case 5:I=E=0;case 7:if(!(E<v.fileInfo.size)){v.downloadRequest=null,v.msg="downloadFinish",v.emit("complete"),v.state="complete",z.leaveTryBlock(0);break}return z.yield(v.sendMessageToSw({request:"progress",id:v.fileInfo.id}),9);case 9:if(p=z.yieldResult,p.progress===E?I++:I=0,30<I)throw B=Error("hung download"),B.duration=Date.now()-h,B.size=v.fileInfo.size,B.progress=E,B;return E=p.progress,k(E),z.yield(Object(c.delay)(1e3),7);case 2:throw P=z.enterCatchBlock(),v.downloadRequest=null,P==="cancelled"||P.message==="400"?Error(0):P}})},d.prototype.download=function(o){return o.stream?this.downloadStream(o.noSave):this.downloadBlob(o.noSave,o.isMobile)},H.global.Object.defineProperties(d.prototype,{progressRatio:{configurable:!0,enumerable:!0,get:function(){return this.progress[0]/this.progress[1]}},progressIndefinite:{configurable:!0,enumerable:!0,get:function(){return this.state!=="downloading"}},sizes:{configurable:!0,enumerable:!0,get:function(){return{partialSize:Object(c.bytes)(this.progress[0]),totalSize:Object(c.bytes)(this.progress[1])}}}}),i.a=d},function(e,i,d){function t(s,l,g){var o=new ArrayBuffer(22),v=new DataView(o);return v.setUint32(0,101010256,!0),v.setUint16(4,0,!0),v.setUint16(6,0,!0),v.setUint16(8,s,!0),v.setUint16(10,s,!0),v.setUint32(12,l,!0),v.setUint32(16,g,!0),v.setUint16(20,0,!0),new Uint8Array(o)}var u=d(64),a=new TextEncoder,c=function(s){this.name=a.encode(s.name),this.size=s.size,this.bytesRead=0,this.crc=null,s=void 0,s=s===void 0?new Date:s;var l=s.getFullYear()-1980<<9,g=s.getMonth()+1<<5,o=s.getDate();l=l|g|o,g=s.getHours()<<11,o=s.getMinutes()<<5,s=Math.floor(s.getSeconds()/2),this.dateTime={date:l,time:g|o|s}};c.prototype.directoryRecord=function(s){var l=new ArrayBuffer(46+this.name.byteLength),g=new DataView(l);for(g.setUint32(0,33639248,!0),g.setUint16(4,20,!0),g.setUint16(6,20,!0),g.setUint16(8,8,!0),g.setUint16(10,0,!0),g.setUint16(12,this.dateTime.time,!0),g.setUint16(14,this.dateTime.date,!0),g.setUint32(16,this.crc,!0),g.setUint32(20,this.size,!0),g.setUint32(24,this.size,!0),g.setUint16(28,this.name.byteLength,!0),g.setUint16(30,0,!0),g.setUint16(32,0,!0),g.setUint16(34,0,!0),g.setUint16(36,0,!0),g.setUint32(38,0,!0),g.setUint32(42,s,!0),s=0;s<this.name.byteLength;s++)g.setUint8(46+s,this.name[s]);return new Uint8Array(l)},c.prototype.append=function(s,l){this.bytesRead+=s.byteLength;var g=s.byteLength-Math.max(this.bytesRead-this.size,0),o=s.slice(0,g);if(this.crc=Object(u.a)(o,this.crc),l.enqueue(o),g<s.byteLength)return s.slice(g,s.byteLength)},H.global.Object.defineProperties(c.prototype,{header:{configurable:!0,enumerable:!0,get:function(){var s=new ArrayBuffer(30+this.name.byteLength),l=new DataView(s);l.setUint32(0,67324752,!0),l.setUint16(4,20,!0),l.setUint16(6,8,!0),l.setUint16(8,0,!0),l.setUint16(10,this.dateTime.time,!0),l.setUint16(12,this.dateTime.date,!0),l.setUint32(14,0,!0),l.setUint32(18,0,!0),l.setUint32(22,0,!0),l.setUint16(26,this.name.byteLength,!0),l.setUint16(28,0,!0);for(var g=0;g<this.name.byteLength;g++)l.setUint8(30+g,this.name[g]);return new Uint8Array(s)}},dataDescriptor:{configurable:!0,enumerable:!0,get:function(){var s=new ArrayBuffer(16),l=new DataView(s);return l.setUint32(0,134695760,!0),l.setUint32(4,this.crc,!0),l.setUint32(8,this.size,!0),l.setUint32(12,this.size,!0),new Uint8Array(s)}},byteLength:{configurable:!0,enumerable:!0,get:function(){return this.size+this.name.byteLength+30+16}}});var r=function(s,l){this.files=s,this.fileIndex=0,this.file=null,this.reader=l.getReader(),this.nextFile(),this.extra=null};r.prototype.nextFile=function(){this.file=this.files[this.fileIndex++]},r.prototype.pull=function(s){var l=this,g;return H.asyncExecutePromiseGeneratorProgram(function(o){if(o.nextAddress==1){if(!l.file){for(var v=l.files,h=0,k=0,_=0;_<v.length;_++){var y=v[_],S=y.directoryRecord(h);h+=y.byteLength,s.enqueue(S),k+=S.byteLength}return s.enqueue(t(v.length,k,h)),o.return(s.close())}return l.file.bytesRead===0&&(s.enqueue(l.file.header),l.extra&&(l.extra=l.file.append(l.extra,s))),l.file.bytesRead>=l.file.size?(s.enqueue(l.file.dataDescriptor),l.nextFile(),o.return(l.pull(s))):o.yield(l.reader.read(),2)}if(g=o.yieldResult,g.done)return l.nextFile(),o.return(l.pull(s));l.extra=l.file.append(g.value,s),o.jumpToEnd()})},e=function(s,l){this.files=s.files.map(function(g){return new c(g)}),this.source=l},H.global.Object.defineProperties(e.prototype,{stream:{configurable:!0,enumerable:!0,get:function(){return new ReadableStream(new r(this.files,this.source))}},size:{configurable:!0,enumerable:!0,get:function(){return this.files.reduce(function(s,l){return s+2*l.byteLength-l.size},0)+22}}}),i.a=e},function(e,i,d){var t=d(17);d.n(t);var u=d(65);e=d(66);var a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];typeof Int32Array<"u"&&(a=new Int32Array(a)),e=Object(e.a)("crc-32",function(c,r){t.Buffer.isBuffer(c)||(c=Object(u.a)(c)),r=r===0?0:~~r^-1;for(var s=0;s<c.length;s++)r=a[(r^c[s])&255]^r>>>8;return r^-1}),i.a=e},function(e,i,d){var t=d(17);d.n(t),i.a=t.Buffer.from&&t.Buffer.alloc&&t.Buffer.allocUnsafe&&t.Buffer.allocUnsafeSlow?t.Buffer.from:function(u){return new t.Buffer(u)}},function(e,i,d){i.a=function(t,u){var a=function(c,r){return u(c,r)>>>0};return a.signed=u,a.unsigned=a,a.model=t,a}},function(e,i,d){i.a={isAnnotationStarted:!1,canvasOptions:{width:0,height:0},frameStyle:"display:block; user-select: none;z-index:0; position:absolute;top:0%",annotateStyle:"display:block; user-select: none;z-index:2; position:absolute;top:0%",annotationConfig:{toolType:"draw",isErase:!1,drawMethod:"pencil",strokeColor:"#ff0000",lineWidth:3,hasInput:!1,lastMouseX:0,lastMouseY:0,canvasX:0,canvasY:0,mouseX:0,mouseY:0,mouseDown:!1,drawElement:null,drawCtx:null,canvasDomID:null,canvasVideoPlayerID:null,customCanvasID:"draw_veneer2",customframeID:"draw_frame",pausePlayTime:0,videoPlaying:!1,streamid:0,setTimeLoop:.3},setupAnnotationToolbar:function(){var t=document.createElement("div");t.setAttribute("id","annotationToolbarContainer"),t.style="position: absolute;bottom: 0; z-index: 98;";var u=document.createElement("div");return u.setAttribute("id","toolbar"),u.innerHTML=`<div class="atn-btns">
      <button id="annotate-draw">Draw</button>
      <select id="selDrawMethod">
        <option value="pencil" selected="selected">Pencil</option>
        <option value="text">Text</option>
      </select>
      <input
      type="color"
      id="favcolor"
      name="favcolor"
      value="#ff0000"
      
    />
    <select id="selWidth" >
      <option value="1">1</option>
      <option value="3" selected="selected">3</option>
      <option value="5">5</option>
      <option value="7">7</option>
      <option value="9">9</option>
      <option value="11">11</option>
    </select>
    <input type="button" id="eraseBtn" value="Erase" />
    <input type="button" id="clearBtn" value="Clear" />
    <input type="button" id="play" value="Play-Pause" />
    
      </div>`,t.append(u),{toolbarCont:t,toolbar:u}},_QS:function(t,u){return u!==void 0&&u?document.querySelectorAll(""+t)?document.querySelectorAll(""+t):!1:document.querySelector(""+t)?document.querySelector(""+t):!1},bindEventListernersForTools:function(){var t=this;t._QS("#annotate-draw")&&t._QS("#annotate-draw").addEventListener("click",function(u){t.annotateToolAction("tool","draw")}),t._QS("#selDrawMethod")&&t._QS("#selDrawMethod").addEventListener("change",function(u){t.annotateToolAction("drawMethod",u.target.value)}),t._QS("#selWidth")&&t._QS("#selWidth").addEventListener("change",function(u){t.annotateToolAction("lineWidth",u.target.value)}),t._QS("#favcolor")&&t._QS("#favcolor").addEventListener("change",function(u){t.annotateToolAction("strokeColor",u.target.value)}),t._QS("#eraseBtn")&&t._QS("#eraseBtn").addEventListener("click",function(u){t.annotateToolAction("erase")}),t._QS("#clearBtn")&&t._QS("#clearBtn").addEventListener("click",function(u){t.annotateToolAction("clear")}),t._QS("#play")&&t._QS("#play").addEventListener("click",function(u){t.pause_play()})},annotateAddInput:function(t,u){var a=this,c=document.createElement("input");c.className="annotate-text",c.type="text",c.style.position="fixed",c.style.zIndex=50,c.style.left=t-4+"px",c.style.top=u-4+"px",c.onkeydown=function(r){var s=r.keyCode;s===13?(a.annotateDrawText(r.target.value),document.body.removeChild(r.target),a.annotationConfig.hasInput=!1):s===27&&(document.body.removeChild(r.target),a.annotationConfig.hasInput=!1)},document.body.appendChild(c),c.focus(),this.annotationConfig.hasInput=!0},pause_play:function(){var t=this;if(t.annotationConfig.videoPlaying)clearInterval(t.annotationConfig.pausePlayTime),t.annotationConfig.videoPlaying=!1;else{var u=document.getElementById("stream"+t.annotationConfig.streamid);if(u){var a=document.getElementById(t.annotationConfig.customframeID);if(a){var c=a.getContext("2d");t.annotationConfig.pausePlayTime=setInterval(function(){0<t.canvasOptions.width&&0<t.canvasOptions.height&&c.drawImage(u,0,0,t.canvasOptions.width,t.canvasOptions.height)},t.annotationConfig.setTimeLoop),t.annotationConfig.videoPlaying=!0}}}},handleEnter:function(t){var u=t.keyCode;u===13?(this.annotateDrawText(t.target.value),document.body.removeChild(t.target),this.annotationConfig.hasInput=!1):u===27&&(document.body.removeChild(t.target),this.annotationConfig.hasInput=!1)},annotateDrawText:function(t){this.annotationConfig.drawCtx.textBaseline="top",this.annotationConfig.drawCtx.textAlign="left",this.annotationConfig.drawCtx.fillStyle=this.annotationConfig.strokeColor,this.annotationConfig.drawCtx.font="14px sans-serif",this.annotationConfig.drawCtx.fillText(t,this.annotationConfig.lastMouseX-4,this.annotationConfig.lastMouseY-4)},reOffset:function(t){t=t.getBoundingClientRect(),this.annotationConfig.canvasX=t.left,this.annotationConfig.canvasY=t.top},startFrame:function(){this.annotationConfig.videoPlaying=!1},getCanvasId:function(){return this.annotationConfig.customCanvasID},getVideoFrameId:function(){return this.annotationConfig.customframeID},getCanvasWidth:function(){return this.canvasOptions.width},getCanvasHeight:function(){return this.canvasOptions.height},toolBarAction:function(t,u){if(t==="tool")this.annotationConfig.toolType=u,this.annotationConfig.isErase=!1;else if(t==="erase")this.annotationConfig.toolType=t,this.annotationConfig.isErase=!0;else if(t==="strokeColor")this.annotationConfig.strokeColor=u;else if(t==="lineWidth")this.annotationConfig.lineWidth=u;else if(t==="drawMethod")this.annotationConfig.drawMethod=u;else if(t==="clear"){for(t=document.getElementsByClassName("annotate-text");0<t.length;)t[0].remove();this.annotationConfig.drawCtx.clearRect(0,0,this.canvasOptions.width,this.canvasOptions.height)}},appendCustomCanvas:function(t,u,a,c){this.canvasOptions.width=a,this.canvasOptions.height=c;var r=document.createElement("canvas");r.id=this.annotationConfig.customCanvasID,r.width=a,r.height=c,r.className=u,r.setAttribute("style",this.annotateStyle),t&&(t.append(r),u=this.setupAnnotationToolbar(),t.append(u.toolbarCont))},appendCanvasFrame:function(t,u,a,c,r){this.canvasOptions.width=a,this.canvasOptions.height=c;var s=document.createElement("canvas");s.getContext("2d"),s.id=this.annotationConfig.customframeID,s.width=a,s.height=c,r&&(a=r.getID(),this.annotationConfig.streamid=a,document.getElementById("stream"+a)&&(s.className=u,s.setAttribute("style",this.frameStyle),t&&t.append(s)))},onDown:function(t,u){if(t.preventDefault(),t.type=="touchstart"||t.type=="touchmove"||t.type=="touchend"||t.type=="touchcancel"){t=typeof t.originalEvent>"u"?t:t.originalEvent,u=t.touches[0]||t.changedTouches[0];var a=u.pageX,c=u.pageY}else(t.type=="mousedown"||t.type=="mouseup"||t.type=="mousemove"||t.type=="mouseover"||t.type=="mouseout"||t.type=="mouseenter"||t.type=="mouseleave")&&(a=t.clientX,c=t.clientY);this.reOffset(this.annotationConfig.drawElement),this.annotationConfig.lastMouseX=this.annotationConfig.mouseX=parseInt(a-this.annotationConfig.canvasX),this.annotationConfig.lastMouseY=this.annotationConfig.mouseY=parseInt(c-this.annotationConfig.canvasY),this.annotationConfig.mouseDown=!0,this.annotationConfig.drawMethod==="text"&&this.annotationConfig.toolType==="draw"&&this.annotateAddInput(a,c)},onMove:function(t,u,a){if(t.preventDefault(),t.type=="touchstart"||t.type=="touchmove"||t.type=="touchend"||t.type=="touchcancel"){t=typeof t.originalEvent>"u"?t:t.originalEvent,a=t.touches[0]||t.changedTouches[0];var c=a.pageX,r=a.pageY}else(t.type=="mousedown"||t.type=="mouseup"||t.type=="mousemove"||t.type=="mouseover"||t.type=="mouseout"||t.type=="mouseenter"||t.type=="mouseleave")&&(c=t.clientX,r=t.clientY);this.annotationConfig.mouseX=parseInt(c-this.annotationConfig.canvasX),this.annotationConfig.mouseY=parseInt(r-this.annotationConfig.canvasY),this.annotationConfig.mouseDown&&this.annotationConfig.drawMethod==="pencil"&&(this.annotationConfig.drawCtx.beginPath(),this.annotationConfig.toolType==="draw"?(this.annotationConfig.drawCtx.globalCompositeOperation="source-over",this.annotationConfig.drawCtx.strokeStyle=this.annotationConfig.strokeColor,this.annotationConfig.drawCtx.lineWidth=this.annotationConfig.lineWidth):(this.annotationConfig.drawCtx.globalCompositeOperation="destination-out",this.annotationConfig.drawCtx.lineWidth=10),this.annotationConfig.drawCtx.moveTo(this.annotationConfig.lastMouseX,this.annotationConfig.lastMouseY),this.annotationConfig.drawCtx.lineTo(this.annotationConfig.mouseX,this.annotationConfig.mouseY),this.annotationConfig.drawCtx.lineJoin=u.lineCap="round",this.annotationConfig.drawCtx.stroke()),this.annotationConfig.lastMouseX=this.annotationConfig.mouseX,this.annotationConfig.lastMouseY=this.annotationConfig.mouseY},onUp:function(t){t.preventDefault(),this.annotationConfig.mouseDown=!1},annotateToolAction:function(t,u){this.toolBarAction(t,u)},mouseAnnotate:function(t,u,a,c){c=c===void 0?null:c;var r=this;return c&&(r.stream=c),r.isAnnotationStarted=!0,r.annotationConfig.drawElement=document.getElementById(r.annotationConfig.customCanvasID),r.annotationConfig.drawCtx=r.annotationConfig.drawElement.getContext("2d"),r.annotationConfig.canvasDomID=t,r.annotationConfig.canvasVideoPlayerID=a,r.annotationConfig.drawElement.addEventListener("mousedown",function(s){r.onDown(s,!1)}),r.annotationConfig.drawElement.addEventListener("touchstart",function(s){r.onDown(s,!0)}),r.annotationConfig.drawElement.addEventListener("mousemove",function(s){r.onMove(s,u,!1)}),r.annotationConfig.drawElement.addEventListener("touchmove",function(s){r.onMove(s,u,!0)}),r.annotationConfig.drawElement.addEventListener("mouseup",function(s){r.onUp(s)}),r.annotationConfig.drawElement.addEventListener("touchcancel",function(s){r.onUp(s)}),r.annotationConfig.drawElement},stopAnnotation:function(){this.isAnnotationStarted=!1;var t=document.getElementById("canvas-wrapper");for(t&&t.remove(),t=document.getElementsByClassName("annotate-text");0<t.length;)t[0].remove();t=document.querySelector(".annotate-div");var u=t.parentElement;u.prepend(t.firstElementChild),u.firstChild.style.height="100%",u.firstChild.style.width="100%",t.remove(),this.annotationConfig.toolType="draw",this.annotationConfig.isErase=!1,this.annotationConfig.drawMethod="pencil",this.annotationConfig.strokeColor="#ff0000",this.annotationConfig.lineWidth=3},resize:function(){var t=this;t.isAnnotationStarted&&setTimeout(function(){var u=t.stream;if(u){var a=u.getID(),c=document.getElementById("stream"+a+"_veneer"),r=document.getElementById("draw_veneer2"),s=document.getElementById("draw_frame"),l=document.getElementById("canvas-wrapper");if(r&&s&&l){var g=r.getContext("2d"),o=g.getImageData(0,0,r.width,r.height);u=u.stream.getVideoTracks()[0],u=u.getSettings()?u.getSettings():u.getConstraints();var v=u.height,h=u.width,k=document.querySelector(".annotate-div");if(a=document.querySelector("#player_"+a),u=k.clientHeight,k=k.clientWidth,u<k){var _=u/v,y=v*_;_*=h,_>k?(_=k/h,v*=_,h*=_):(v=y,h=_)}else _=k/h,y=v*_,_*=h,y>u?(_=u/v,v*=_,h*=_):(v=y,h=_);a.style.height=v+"px",a.style.width=h+"px",c.width=h,c.height=v,r.width=h,r.height=v,s.width=h,s.height=v,l.style.width=h+"px",l.style.height=v+"px",createImageBitmap(o).then(function(S){g.drawImage(S,0,0,h,v)}),t.canvasOptions.width=h,t.canvasOptions.height=v,t.reOffset(t.annotationConfig.drawElement)}}},100)}}},function(e,i,d){var t=d(0),u=d(7),a=d(11),c=d(19);d(14),e=d(1);var r=d.n(e),s=d(4),l=d(6);e=d(5);var g=d(9),o=d(8),v=e.a.constant,h=void 0,k={default:{minVideoBW:80,maxVideoBW:1500,scheme:"notify-break-recover"},disconnectRoom:function(_){h=void 0,_&&_.disconnect()},getDevice:function(_,y){if(_!=null&&_!=null)if(typeof _=="function")var S=_,x={mic:!0,cam:!0,speaker:!1};else typeof _=="object"&&(_.mic!=null&&typeof _.mic!="boolean"||_.cam!=null&&typeof _.cam!="boolean"||_.speaker!=null&&typeof _.speaker!="boolean"||(x=_));else x={mic:!0,cam:!0,speaker:!1};S||y==null||y==null||typeof y!="function"||(S=y),r.a.is_supported()&&x&&S?u.a.getDeviceList(x,S):r.a.is_supported()?(t.a.error("Failed invalid param - callback or options"),S&&S(l.a.error_1155)):(t.a.error("Failed Webrtc support is missing "),S&&S(l.a.error_1000))},notifyDeviceUpdate:function(_){r.a.is_supported()?_.notifyDeviceUpdate():t.a.info("Failed Webrtc support is missing ")},switchMediaDevice:function(_,y,S,x){x=x===void 0?function(){}:x,typeof x=="function"?r.a.is_supported()?y&&typeof y=="string"&&S&&typeof S=="string"?_.switchMediaDevices(_,y,S,x):(t.a.info("Invalid Device Id"),x(!1)):(t.a.info("Failed Webrtc support is missing "),x(l.a.error_1000)):t.a.error("switchMediaDevice() invalid param - callback")},joinRoom:function(_,y,S,x){var D=function(){},E={},I={allow_reconnect:!0,number_of_attempts:3,timeout_interval:45e3};if(S==null&&x==null)t.a.error("joinRoom() failed, callback is missing. invalid parameters");else{if(S!=null&&typeof S=="function")D=S,x!=null&&(I=x);else if(x!=null&&typeof x=="function")if(D=x,S!=null)E=S;else{t.a.error("joinRoom() failed, callback is missing. invalid parameters");return}if(r.a.is_supported())if(_==null||y==null)t.a.error("joinRoom() failed, token/streamInfo is missing. invalid parameters"),D(null,l.a.error_1155);else{var p=null,B=null;if(t.a.info("SDK version: "+r.a.product.version+" browser name: "+r.a.browser_type+" browser version: "+r.a.browser_info.version+" device type: "+r.a.browser_info.device_type),_!=null){_=JSON.parse(c.a.decodeBase64(_)),g.a.init(_),_.version=r.a.product.version,E.reconnectInfo=I,E.token=c.a.encodeBase64(JSON.stringify(_));var P=Object(a.a)(void 0,void 0,E);if(E=function(){u.a.browserEngineCheck()!=="IE"&&(P.addEventListener("room-connected",function(te){if(B={streams:te.streams,room:P,roomData:te.room,localStream:z},h=P,te.me!==void 0&&te.me!==null&&(P.mode!=="lecture"||te.me.role!=="participant"||P.floorGranted)&&(y.audio||y.video)){var W={scheme:y.scheme?y.scheme:k.default.scheme,maxVideoLayers:P.maxVideoLayers,forceTurn:y.forceTurn};y.maxVideoBW&&(W.maxVideoBW=y.maxVideoBW),y.minVideoBW&&(W.minVideoBW=y.minVideoBW),y.maxVideoFps&&(W.maxVideoFps=y.maxVideoFps),y.maxVideoFps&&(W.maxVideoFps=y.maxVideoFps),y.audioMuted&&(W.audioMuted=y.audioMuted),y.videoMuted&&(W.videoMuted=y.videoMuted)}if(P.me.role==="audience"&&P.subscription&&!P.subscription.hls)t.a.error("Licence error :  HLS not supported !!");else if(P.reconnectionState===!1){y.video&&P.subscription&&!P.subscription.audio_video&&(t.a.error("Licence error : video not supported, ignoring video option"),y.video=!1),y.audio&&P.subscription&&!P.subscription.audio_only&&!P.subscription.audio_video&&(t.a.error("Licence error : audio not supported, ignoring audio option"),y.audio=!1);var K=function(ae,ce){P.publish(z,ae,function(he){he.result===0?(B.publishId=he.id,P.mediaConfiguration!==v.H264_CODEC&&r.a.browser_info.name==="safari"&&r.a.browser_info.version<=v.SAFARI_VERSION_NOT_SUPPORTING_VP8?ce(B,l.a.error_1152):ce(B,null),te.mediaRecord&&P.dispatchEvent(Object(s.e)({type:"room-record-on",message:{}})),P.muteInfo.room.audio&&P.dispatchEvent(Object(s.e)({type:"room-muted",message:{}}))):he.result===l.a.error_1130.result?ce(B,he):ce(null,he)})};W!=null&&P.waitRoom===!1&&P.me.role!="viewer"&&P.me.role!="audience"?K(W,D):P.me.role!="viewer"&&P.me.role!="audience"&&P.waitRoom?(D(B,null),P.addEventListener("wait-room-disabled",function(ae){P.dispatchEvent(Object(s.e)({type:"room-allowed",message:ae.message})),P.mode!=="lecture"&&K(W,D)})):(t.a.info("no audio&video"),z&&(y.audioMuted&&z.muteAudio(function(ae){ae.result==l.a.error_000.result&&P.dispatchEvent(Object(s.g)({type:"user-audio-muted",clientId:P.clientId})),t.a.info("audioSelfMuteCallback: "+JSON.stringify(ae))},!1,0,!0),y.videoMuted&&z.muteVideo(function(ae){ae.result!==l.a.error_000.result&&P.dispatchEvent(Object(s.g)({type:"user-video-muted",clientId:P.clientId})),t.a.info("videoSelfMuteCallback: "+JSON.stringify(ae))},!1,0,!0)),D(B,null))}else{t.a.info("handle reconnection: for room-connected "),B={streams:te.streams,room:P,roomData:te.room,localStream:z};for(var re=0;re<B.streams.length;re++)P.subscribe(B.streams[re],{},function(ae){ae===!0||typeof ae=="object"&&ae.result==0?t.a.info("reconnect subscriber callback success"):(t.a.info("reconnect subscriber callback failed, could not reconnect",ae),P.reconPubSubFailed(ae),P.dispatchEvent(Object(s.e)({type:"room-error",message:ae})),g.a.error("api-event",o.a.event_reconnect_subscribe_failed,{error:"reconnect subscriber callback failed, couldnt reconnect",message:ae}))});t.a.info("MANAGE LIVE TRANSCRIPTION-> RECONNECTING"),P.manageLiveTranscription();var f=function(ae){P.localStreamsBeforeReconnect.forEach(function(ce,he){ce.canvas===void 0&&ce.screen===void 0&&(t.a.info(" reconnect publish, audio video data stream"),P.localStreamsBeforeReconnect.remove(he),P.publish(ce,W,function(ye){ye.result===0?(B.publishId=ye.id,t.a.info("reconnected and stream published successfully"),P.manageStatsSubscription(ce),P.manageRecordingStatus(),te.mediaRecord&&P.dispatchEvent(Object(s.e)({type:"room-record-on",message:{}})),P.muteInfo.room.audio&&P.dispatchEvent({type:"room-muted",message:{}}),ce.selfMuteAudio===!0&&ce.sendEvent("user-audio-muted"),ce.selfMuteVideo==1&&ce.sendEvent("user-video-muted"),P.localStreamsBeforeReconnect.forEach(function(R,O){R.canvas===!0?(t.a.info(" reconnect publish, canvas stream"),P.localStreamsBeforeReconnect.remove(O),P.publish(R,{maxVideoBW:4096,minVideoBW:1024},function(j){j.result===0?B.publishId=j.id:(t.a.info(" reconnect publish failed forcanvas stream failed",j),P.reconPubSubFailed(j),P.dispatchEvent(Object(s.e)({type:"room-error",message:j})),g.a.error("api-event",o.a.event_reconnect_publish_failed,{error:"reconnect publish for canvas stream failed",message:j}))})):R.screen===!0?(t.a.info(" reconnect publish, share stream"),P.localStreamsBeforeReconnect.remove(O),P.publish(R,{share:!0},function(j){t.a.info(" reconnect publish response for share stream",j),j.result===0?(t.a.info(" reconnect publish share successful",j),P.localStreams.forEach(function(J,q){J&&J.ifVideo()&&J.setQualityLayers(2)})):(t.a.info(" reconnect publish share failed with reason",j),P.reconPubSubFailed(j),P.dispatchEvent(Object(s.e)({type:"room-error",message:j})),g.a.error("api-event",o.a.event_reconnect_publish_failed,{error:"reconnect publish share failed with reason",message:j}))})):t.a.info(" unknown stream type ????????????")})):(t.a.info(" reconnect publishing failed, response for publish",ye),P.reconPubSubFailed(ye),P.dispatchEvent(Object(s.e)({type:"room-error",message:ye})),g.a.error("api-event",o.a.event_reconnect_publish_failed,{error:"reconnect publishing failed, response for publish",message:ye}))}))})};W==null||P.waitRoom!==!1||P.me.role=="viewer"||P.me.role=="audience"||P.mode==="lecture"&&P.me.role!=="moderator"?P.me.role!="viewer"&&P.me.role!="audience"&&P.waitRoom?(t.a.info("Reconnect WaitRoom on no publish"),P.addEventListener("wait-room-disabled",function(ae){P.mode!=="lecture"&&f(W)})):P.me.role!="viewer"&&P.me.role!="audience"||P.mode==="lecture"&&P.me.role!=="moderator"?(P.me.role!="viewer"&&P.me.role!="audience"?t.a.info(" No publish - participant is viewer/audience"):t.a.info(" reconnection:: No publish - participant in lecture mode"),P.floorGranted&&(P.floorGranted=!1,P.dispatchEvent(Object(s.e)({type:"release-floor",users:{clientId:P.clientId}})))):t.a.info("no audio&video"):f(W),t.a.debug(" setting reconnection state as false "),P.reconnectionState=!1,P.manageNumTalker(),t.a.info("send network reconnected event"),re=Object(s.e)({type:"network-reconnected",error:l.a.error_1164.result,message:l.a.error_1164.error}),P.dispatchEvent(re)}}),P.addEventListener("room-error",function(te){B==null&&D(B,te)}),P.addEventListener("stream-added",function(te){P.subscribe(te.stream)}),P.addEventListener("active-talkers-updated",function(te){te=te.message.activeList;var W=te.length;if(0<W){for(var K=0;K<W;K++)if(te[K].mediatype==="audio"&&te[K].muteDueToBw===!0){P.remoteStreams.getAll()[te[K].streamId].audioOnly=!0;var re=Object(s.e)({type:"user-muted-due-to-bw-crunch",message:{streamId:te[K].streamId,clientId:te[K].clientId,name:te[K].name}});P.dispatchEvent(re)}}})),P.reconnectionState===!1&&P.reconnectAttempt==0?P.connect(I,function(te){t.a.debug("room.connect callback resp: "+JSON.stringify(te)),te.result!=l.a.error_000.result&&D(null,te)}):t.a.debug(" Reconnection case in join room public api")},_=function(te){p=te,D(B,p)},y.stream!=null||y.audio||y.video)var z=P.initPublishStream(y.div,y,E,_);else t.a.info(" No publish stream. audio and video are disabled.."),E()}return z}else t.a.info("Failed Webrtc support is missing "),D(null,l.a.error_1000)}},listParticipants:function(_){if(r.a.is_supported()){var y=[];return _&&(y=_.userList),y}console.log("Failed Webrtc support is missing ")},ReceiveMessage:function(_,y){_&&_.addEventListener("stream-data",function(S){})},sendMessage:function(_,y){_&&_.sendData(y)},getRoom:function(){return h}};i.a=k},function(e,i,d){function t(){P=0,z.splice(0,z.length),te={},W={},K={},re={},f={},ae={},ce={},he=ye="",R=I.a.default_region,q=I.a.proxy_api_url,se=I.a.proxy_api_port,j=_e=!1,Se=I.a.data_throughput_duration,ve=I.a.video_bandwidth_duration,we=I.a.audio_bandwidth_duration}function u(){if(O===!1)v();else if(P<z.length){var de=z[P];p.setActiveTest(de);var X={test_group:de.test_group,test_case:de.test_title,status:"started"};switch((de.test_group==="network"||de.test_group==="connectivity"||de.test_group==="throughput"||de.test_group==="bandwidth"||de.test_group==="signalling")&&(X.test_region=de.region,X.test_server=de.server),de.start_time=new Date,X=Object(E.a)({type:"client-diagnosis-status",message:X}),xe===!0?window.webkit.messageHandlers.callbackHandler.postMessage(X):J.dispatchEvent(X),de.test_title){case"audio_capture":Object(h.a)(de,he);break;case"check_resolution_240":case"check_resolution_480":case"check_resolution_720":case"check_supported_resolutions":Object(k.a)(de,ye);break;case"udp_enabled":case"tcp_enabled":case"ipv6_enabled":Object(_.a)(de);break;case"relay_connectivity":case"reflexive_connectivity":case"host_connectivity":Object(y.a)(de);break;case"data_throughput":Object(S.a)(de,null,Se);break;case"audio_bandwidth":Object(S.a)(de,he,we);break;case"video_bandwidth":Object(S.a)(de,ye,ve);break;case"signalling_connectivity":Object(x.a)(de,q,se)}P+=1}else de={},Object.keys(te).length&&(de.microphone=te),Object.keys(W).length&&(de.camera=W),Object.keys(K).length&&(de.network=K),Object.keys(re).length&&(de.connectivity=re),Object.keys(f).length&&(de.throughput=f),Object.keys(ae).length&&(de.bandwidth=ae),Object.keys(ce).length&&(de.signalling=ce),O=!1,D.a.info("All test case executed"),de=Object(E.a)({type:"client-diagnosis-finished",message:de}),xe===!0?window.webkit.messageHandlers.callbackHandler.postMessage(de):J.dispatchEvent(de),t()}function a(de,X,w,M,N){w=w===void 0?null:w,M=M===void 0?null:M,N=N===void 0?!1:N,de=new Me(de,X,u),de.region=w,de.server=M,de.bitrate_only=N,z.push(de)}function c(){for(var de in R)B.includes(R[de])&&(a("udp_enabled","network",R[de],"TURN"),a("tcp_enabled","network",R[de],"TURN"),a("ipv6_enabled","network",R[de],"TURN"))}function r(){for(var de in R)B.includes(R[de])&&(a("relay_connectivity","connectivity",R[de],"TURN"),a("reflexive_connectivity","connectivity",R[de],"TURN"),a("host_connectivity","connectivity",R[de],"TURN"))}function s(){for(var de in R)B.includes(R[de])&&a("data_throughput","throughput",R[de],"TURN")}function l(){for(var de in R)B.includes(R[de])&&(a("video_bandwidth","bandwidth",R[de],"TURN",j),a("audio_bandwidth","bandwidth",R[de],"TURN",j))}function g(){for(var de in R)B.includes(R[de])&&a("signalling_connectivity","signalling",R[de],"TURN")}function o(){var de=Object(E.a)({type:"client-diagnosis-failed",message:{msg:"Invalid arguments"}});xe===!0?window.webkit.messageHandlers.callbackHandler.postMessage(de):J.dispatchEvent(de),t(),D.a.error("Invalid argument")}function v(){var de=Object(E.a)({type:"client-diagnosis-stopped",message:{msg:"Diagnosis stopped."}});xe===!0?window.webkit.messageHandlers.callbackHandler.postMessage(de):J.dispatchEvent(de),t(),D.a.error("diagnosis stopped")}var h=d(70),k=d(71),_=d(73),y=d(74),S=d(75),x=d(76),D=d(0),E=d(4);e=d(1);var I=d.n(e),p=d(13),B=["IN","US","SG","DE"];d={};var P=0,z=[],te={},W={},K={},re={},f={},ae={},ce={},he="",ye="",R=[],O=!1,j=!1,J=null,q="",se="",_e=!1,Se=0,ve=0,we=0,xe=!1,Me=function(de,X,w){this.test_title=de,this.test_group=X,this.started=!1,this.success_count=this.warning_count=this.error_count=0,this.finished_cb=w,this.region="IN",this.server="TURN",this.uri="",this.progress_value=0,this.state="not_tested",this.start_time=0,this.bitrate_only=!1,this.json_response={result:this.state,execution_time:"not_set",success:[],error:[],warning:[],info:[]},this.done=function(){this.state=this.error_count+this.warning_count===0&&0<this.success_count?"success":0<this.warning_count&&this.error_count===0?"warning":this.isDisabled?"disabled":"failure",this.json_response.result=this.state,this.json_response.execution_time=new Date-this.start_time+" ms";var M={};switch(this.test_group){case"microphone":te[this.test_title]=this.json_response,M[this.test_title]=te[this.test_title];break;case"camera":W[this.test_title]=this.json_response,M[this.test_title]=W[this.test_title];break;case"network":this.setServer(),M=this.fillResponse(K);break;case"connectivity":this.setServer(),M=this.fillResponse(re);break;case"throughput":this.setServer(),M=this.fillResponse(f);break;case"bandwidth":this.setServer(),M=this.fillResponse(ae);break;case"signalling":this.setServer(),M=this.fillResponse(ce)}M={test_group:this.test_group,test_case:this.test_title,status:"finished",output:M},(this.test_group==="network"||this.test_group==="connectivity"||this.test_group==="throughput"||this.test_group==="bandwidth"||this.test_group==="signalling")&&(M.test_region=this.region,M.test_server=this.server),M=Object(E.a)({type:"client-diagnosis-status",message:M}),xe===!0?window.webkit.messageHandlers.callbackHandler.postMessage(M):J.dispatchEvent(M),this.finished_cb()},this.fillResponse=function(M){var N={};return M.hasOwnProperty(this.test_title)||(M[this.test_title]={}),M[this.test_title].hasOwnProperty(this.region)||(M[this.test_title][this.region]={}),M[this.test_title][this.region].hasOwnProperty(this.server)||(M[this.test_title][this.region][this.server]={}),M[this.test_title][this.region][this.server]=this.json_response,N[this.test_title]=this.json_response,N},this.reportFatal=function(M){this.reportError(M),this.done()},this.reportSuccess=function(M){this.success_count+=1,D.a.info("[ OK ]"+M),this.json_response.success.push({message:M})},this.setServer=function(){this.json_response.server={},this.json_response.server.region=this.region,this.json_response.server.url=this.server==="TURN"?I.a.ice_servers[this.region].turnURI:I.a.ice_servers[this.region].stunURI},this.reportError=function(M){this.error_count+=1,D.a.error("[ FAILED ]"+M),this.json_response.error.push({message:M})},this.reportWarning=function(M){this.warning_count+=1,D.a.warning("[ WARN ]"+M),this.json_response.warning.push({message:M})},this.reportInfo=function(M){D.a.info("[ INFO ]"+M),this.json_response.info.push({message:M})},this.fillBandwidth=function(M){this.json_response.bandwidth_bps=M},this.fillPacketsLost=function(M){this.json_response.packets_lost_percentage=M},this.setProgress=function(M){this.progress_value=M},this.fillData=function(M,N){},this.reportByState=function(M,N){switch(N){case"poor":this.error_count+=1,D.a.error("[ POOR ]"+M),this.json_response.error.push({message:M+" [BAD]"});break;case"moderate":this.warning_count+=1,D.a.warning("[ MODERATE ]"+M),this.json_response.warning.push({message:M+" [ACCEPTABLE]"});break;case"good":this.success_count+=1,D.a.info("[ GOOD ]"+M),this.json_response.success.push({message:M+" [GOOD]"})}}};d.clientDiagnostics=function(de){if(xe=!1,de.hasOwnProperty("forIosVersion13")&&de.forIosVersion13===!0&&(xe=!0),de.hasOwnProperty("stop")&&de.stop===!0&&J!==null)return O===!1&&z.length===0&&v(),O=!1,J;if(O||z.length)return D.a.error("Diagnosis is already in progress. Few resources are in use and may not be accessible."),J;if(J=Object(E.c)(),!de.hasOwnProperty("testNames")||!Array.isArray(de.testNames))return setTimeout(o,1),J;if(O=!0,t(),de.hasOwnProperty("audioDeviceId")&&(he=de.audioDeviceId),de.hasOwnProperty("videoDeviceId")&&(ye=de.videoDeviceId),de.hasOwnProperty("testServerApiHost")&&(q=de.testServerApiHost),de.hasOwnProperty("testServerApiPort")&&(se=de.testServerApiPort),de.hasOwnProperty("regionId"))if(Array.isArray(de.regionId))R=de.regionId||I.a.default_region;else return O=!1,setTimeout(o,1),J;de.hasOwnProperty("forMobile")&&de.forMobile===!0&&(_e=!0),de.hasOwnProperty("bitrateOnly")&&de.bitrateOnly===!0&&(j=!0),de.hasOwnProperty("testDurationDataThroughput")&&0<de.testDurationDataThroughput&&(Se=de.testDurationDataThroughput),60<Se&&(Se=60),de.hasOwnProperty("testDurationVideoBandwidth")&&0<de.testDurationVideoBandwidth&&(ve=de.testDurationVideoBandwidth),60<ve&&(ve=60),de.hasOwnProperty("testDurationAudioBandwidth")&&0<de.testDurationAudioBandwidth&&(we=de.testDurationAudioBandwidth),60<we&&(we=60);var X=de.testNames.map(function(N){return N=N.toString(),N.toLowerCase()}),w=new Set;if(X.includes("all"))w.add("microphone"),w.add("camera"),w.add("network"),w.add("connectivity"),w.add("throughput"),w.add("bandwidth"),w.add("signalling");else for(var M in de.testNames)w.add(X[M]);for(de=H.makeIterator(w),X=de.next();!X.done;X=de.next())switch(X.value){case"microphone":a("audio_capture","microphone");break;case"camera":_e!==!0&&(a("check_resolution_240","camera"),a("check_resolution_480","camera"),a("check_resolution_720","camera")),a("check_supported_resolutions","camera");break;case"network":c();break;case"connectivity":r();break;case"throughput":s();break;case"bandwidth":l();break;case"signalling":g()}return 0<z.length?setTimeout(u,1):(O=!1,setTimeout(o,1)),J},d.clientBitrate=function(de){var X=Object(E.c)(),w="DE";de!==void 0&&de.hasOwnProperty("region")&&(de=de.region,B.includes(de)&&(w=de)),w=xt.clientDiagnostics({testNames:["bandwidth"],regionId:[w],testDurationVideoBandwidth:40,testDurationAudioBandwidth:20,bitrateOnly:!0,stop:!1});var M={video:{bitrate_bps:"NA",connection:"NA"},audio:{bitrate_bps:"NA",connection:"NA"}};return w.addEventListener("client-diagnosis-status",function(N){var F=Object(E.a)({type:"client-bitrate-status",message:N.message});N.message.hasOwnProperty("output")&&(N.message.output.hasOwnProperty("video_bandwidth")&&(N.message.output.video_bandwidth.hasOwnProperty("bandwidth_bps")&&(M.video.bitrate_bps=N.message.output.video_bandwidth.bandwidth_bps),N.message.output.video_bandwidth.hasOwnProperty("packets_lost_percentage")&&(M.video.connection=5<N.message.output.video_bandwidth.packets_lost_percentage?"unstable":"stable")),N.message.output.hasOwnProperty("audio_bandwidth")&&(N.message.output.audio_bandwidth.hasOwnProperty("bandwidth_bps")&&(M.audio.bitrate_bps=N.message.output.audio_bandwidth.bandwidth_bps),N.message.output.audio_bandwidth.hasOwnProperty("packets_lost_percentage")&&(M.audio.connection=5<N.message.output.audio_bandwidth.packets_lost_percentage?"unstable":"stable"))),xe===!0?window.webkit.messageHandlers.callbackHandler.postMessage(F):X.dispatchEvent(F)}),w.addEventListener("client-diagnosis-finished",function(N){N=Object(E.a)({type:"client-bitrate-finished",message:M}),xe===!0?window.webkit.messageHandlers.callbackHandler.postMessage(N):X.dispatchEvent(N)}),X},i.a=d},function(e,i,d){function t(a,c){for(this.test=a,this.inputChannelCount=6,this.outputChannelCount=2,this.bufferSize=0,this.deviceId=c,this.constraints={audio:{optional:[{echoCancellation:!1}]}},this.collectSeconds=2,this.silentThreshold=1/32767,this.lowVolumeThreshold=-60,this.monoDetectThreshold=1/65536,this.clipCountThreshold=6,this.clipThreshold=1,this.collectedAudio=[],a=this.collectedSampleCount=0;a<this.inputChannelCount;++a)this.collectedAudio[a]=[];this.audioContext=new(window.AudioContext||window.webkitAudioContext)}i.a=function(a,c){new t(a,c).run()};var u=d(13);t.prototype={run:function(){var a=this;this.audioContext.resume().then(function(){u.appendSourceId(a.deviceId,"audio",a.constraints),u.doGetUserMedia(a.constraints,a.gotStream.bind(a),a.onFail.bind(a))}).catch(function(c){a.test.reportError("WebAudio run failure: "+c),a.test.done()})},onFail:function(a){this.test.reportError("getUserMedia failed with error: "+a),this.test.done()},gotStream:function(a){this.checkAudioTracks(a)?this.createAudioBuffer(a):this.test.done()},checkAudioTracks:function(a){return this.stream=a,a=a.getAudioTracks(),1>a.length?(this.test.reportError("No audio track in returned stream."),!1):(this.test.reportSuccess("Audio track created using device="+a[0].label),!0)},createAudioBuffer:function(){this.audioSource=this.audioContext.createMediaStreamSource(this.stream),this.scriptNode=this.audioContext.createScriptProcessor(this.bufferSize,this.inputChannelCount,this.outputChannelCount),this.audioSource.connect(this.scriptNode),this.scriptNode.connect(this.audioContext.destination),this.scriptNode.onaudioprocess=this.collectAudio.bind(this),this.stopCollectingAudio=u.setTimeoutWithProgressBar(this.onStopCollectingAudio.bind(this),5e3)},collectAudio:function(a){for(var c=a.inputBuffer.length,r=!0,s=0;s<a.inputBuffer.numberOfChannels;s++){var l=a.inputBuffer.getChannelData(s),g=Math.abs(l[c-1]);Math.abs(l[0])>this.silentThreshold||g>this.silentThreshold?(g=new Float32Array(c),g.set(l),r=!1):g=new Float32Array,this.collectedAudio[s].push(g)}r||(this.collectedSampleCount+=c,this.collectedSampleCount/a.inputBuffer.sampleRate>=this.collectSeconds&&this.stopCollectingAudio())},onStopCollectingAudio:function(){this.stream.getAudioTracks()[0].stop(),this.audioSource.disconnect(this.scriptNode),this.scriptNode.disconnect(this.audioContext.destination),this.analyzeAudio(this.collectedAudio),this.test.done()},analyzeAudio:function(a){for(var c=[],r=0;r<a.length;r++)this.channelStats(r,a[r])&&c.push(r);c.length===0?this.test.reportError("No active input channels detected. Microphone is most likely muted or broken, please check if muted in the sound settings or physically on the device. Then rerun the test."):this.test.reportSuccess("Active audio input channels: "+c.length),c.length===2&&this.detectMono(a[c[0]],a[c[1]])},channelStats:function(a,c){for(var r=0,s=0,l=0,g=0,o=0;o<c.length;o++){var v=c[o];if(0<v.length){for(var h,k=0,_=0;_<v.length;_++)h=Math.abs(v[_]),r=Math.max(r,h),k+=h*h,r>=this.clipThreshold?(l+=1,g=Math.max(g,l)):l=0;k=Math.sqrt(k/v.length),s=Math.max(s,k)}}return r>this.silentThreshold?(c=this.dBFS(r),s=this.dBFS(s),this.test.reportInfo("Channel "+a+" levels: "+c.toFixed(1)+" dB (peak), "+s.toFixed(1)+" dB (RMS)"),s<this.lowVolumeThreshold&&this.test.reportError("Microphone input level is low, increase input volume or move closer to the microphone."),g>this.clipCountThreshold&&this.test.reportWarning("Clipping detected! Microphone input level is high. Decrease input volume or move away from the microphone."),!0):!1},detectMono:function(a,c){for(var r=0,s=0;s<a.length;s++){var l=a[s],g=c[s];if(l.length===g.length)for(var o,v=0;v<l.length;v++)o=Math.abs(l[v]-g[v]),o>this.monoDetectThreshold&&(r+=1);else r+=1}0<r?this.test.reportInfo("Stereo microphone detected."):this.test.reportInfo("Mono microphone detected.")},dBFS:function(a){return Math.round(Math.log(a)/Math.log(10)*200)/10}}},function(e,i,d){function t(r,s,l){this.test=r,this.resolutions=s,this.currentResolution=0,this.isShuttingDown=this.isMuted=!1,this.deviceId=l}i.a=function(r,s){switch(r.test_title){case"check_resolution_240":new t(r,[[320,240]],s).run();break;case"check_resolution_480":new t(r,[[640,480]],s).run();break;case"check_resolution_720":new t(r,[[1280,720]],s).run();break;case"check_supported_resolutions":new t(r,[[160,120],[320,180],[320,240],[640,360],[640,480],[768,576],[1024,576],[1280,720],[1280,768],[1280,800],[1920,1080],[1920,1200],[3840,2160],[4096,2160]],s).run()}},e=d(72);var u=d.n(e);e=d(18);var a=d.n(e),c=d(13);t.prototype={run:function(){this.startGetUserMedia(this.resolutions[this.currentResolution],this.deviceId),this.currentResolution+=1},startGetUserMedia:function(r,s){var l=this;navigator.mediaDevices.getUserMedia({audio:!1,video:{width:{exact:r[0]},height:{exact:r[1]},deviceId:s}}).then(function(g){1<l.resolutions.length?(l.test.reportSuccess("Supported resolution: "+r[0]+"x"+r[1]),g.getTracks().forEach(function(o){o.stop()}),l.maybeContinueGetUserMedia()):l.collectAndAnalyzeStats(g,r)}).catch(function(g){1<l.resolutions.length?l.test.reportInfo(r[0]+"x"+r[1]+" not supported"):l.test.reportError("getUserMedia failed with error: "+g.name),l.maybeContinueGetUserMedia()})},maybeContinueGetUserMedia:function(){this.currentResolution===this.resolutions.length?this.test.done():(this.startGetUserMedia(this.resolutions[this.currentResolution]),this.currentResolution+=1)},collectAndAnalyzeStats:function(r,s){var l=this,g=r.getVideoTracks();if(1>g.length)this.test.reportError("No video track in returned stream."),this.maybeContinueGetUserMedia();else{g=g[0],typeof g.addEventListener=="function"&&(g.addEventListener("ended",function(){l.isShuttingDown||l.test.reportError("Video track ended, camera stopped working")}),g.addEventListener("mute",function(){l.isShuttingDown||(l.test.reportWarning("Your camera reported itself as muted."),l.isMuted=!0)}),g.addEventListener("unmute",function(){l.isShuttingDown||(l.test.reportInfo("Your camera reported itself as unmuted."),l.isMuted=!1)})),g=document.createElement("video"),g.setAttribute("autoplay",""),g.setAttribute("muted",""),g.width=s[0],g.height=s[1],g.srcObject=r;var o=new u.a(g),v=new a.a(null,this.test);v.pc1.addStream(r),v.establishConnection(),v.gatherStats(v.pc1,null,r,this.onCallEnded.bind(this,s,g,r,o),100),c.setTimeoutWithProgressBar(this.endCall.bind(this,v,r),8e3)}},onCallEnded:function(r,s,l,g,o,v){this.analyzeStats(r,s,l,g,o,v),g.stop(),this.test.done()},analyzeStats:function(r,s,l,g,o,v){var h=[],k=[],_=[],y={};g=g.frameStats;for(var S in o)o[S].type==="ssrc"&&0<parseInt(o[S].googFrameRateInput)&&(h.push(parseInt(o[S].googAvgEncodeMs)),k.push(parseInt(o[S].googFrameRateInput)),_.push(parseInt(o[S].googFrameRateSent)));y.cameraName=l.getVideoTracks()[0].label||NaN,y.actualVideoWidth=s.videoWidth,y.actualVideoHeight=s.videoHeight,y.mandatoryWidth=r[0],y.mandatoryHeight=r[1],y.encodeSetupTimeMs=this.extractEncoderSetupTime(o,v),y.avgEncodeTimeMs=c.arrayAverage(h),y.minEncodeTimeMs=c.arrayMin(h),y.maxEncodeTimeMs=c.arrayMax(h),y.avgInputFps=c.arrayAverage(k),y.minInputFps=c.arrayMin(k),y.maxInputFps=c.arrayMax(k),y.avgSentFps=c.arrayAverage(_),y.minSentFps=c.arrayMin(_),y.maxSentFps=c.arrayMax(_),y.isMuted=this.isMuted,y.testedFrames=g.numFrames,y.blackFrames=g.numBlackFrames,y.frozenFrames=g.numFrozenFrames,this.testExpectations(y)},endCall:function(r,s){this.isShuttingDown=!0,s.getTracks().forEach(function(l){l.stop()}),r.close()},extractEncoderSetupTime:function(r,s){for(var l=0;l!==r.length;l++)if(r[l].type==="ssrc"&&0<parseInt(r[l].googFrameRateInput))return JSON.stringify(s[l]-s[0]);return NaN},resolutionMatchesIndependentOfRotationOrCrop:function(r,s,l,g){var o=Math.min(l,g);return r===l&&s===g||r===g&&s===l||r===o&&g===o},testExpectations:function(r){var s=[],l;for(l in r)r.hasOwnProperty(l)&&(typeof r[l]=="number"&&isNaN(r[l])?s.push(l):this.test.reportInfo(l+": "+r[l]));s.length!==0&&this.test.reportInfo("Not available: "+s.join(", ")),isNaN(r.avgSentFps)?this.test.reportInfo("Cannot verify sent FPS."):5>r.avgSentFps?this.test.reportError("Low average sent FPS: "+r.avgSentFps):this.test.reportSuccess("Average FPS above threshold"),this.resolutionMatchesIndependentOfRotationOrCrop(r.actualVideoWidth,r.actualVideoHeight,r.mandatoryWidth,r.mandatoryHeight)?this.test.reportSuccess("Captured video using expected resolution."):this.test.reportError("Incorrect captured resolution."),r.testedFrames===0?this.test.reportError("Could not analyze any video frame."):(r.blackFrames>r.testedFrames/3&&this.test.reportError("Camera delivering lots of black frames."),r.frozenFrames>r.testedFrames/3&&this.test.reportError("Camera delivering lots of frozen frames."))}}},function(e,i,d){function t(a){this.frameStats={numFrozenFrames:0,numBlackFrames:0,numFrames:0},this.running_=!0,this.nonBlackPixelLumaThreshold=20,this.previousFrame_=[],this.identicalFrameSsimThreshold=.985,this.frameComparator=new u,this.canvas_=document.createElement("canvas"),this.videoElement_=a,this.listener_=this.checkVideoFrame_.bind(this),this.videoElement_.addEventListener("play",this.listener_,!1)}function u(){}t.prototype={stop:function(){this.videoElement_.removeEventListener("play",this.listener_),this.running_=!1},getCurrentImageData_:function(){this.canvas_.width=this.videoElement_.width,this.canvas_.height=this.videoElement_.height;var a=this.canvas_.getContext("2d");return a.drawImage(this.videoElement_,0,0,this.canvas_.width,this.canvas_.height),a.getImageData(0,0,this.canvas_.width,this.canvas_.height)},checkVideoFrame_:function(){if(this.running_&&!this.videoElement_.ended){var a=this.getCurrentImageData_();this.isBlackFrame_(a.data,a.data.length)&&(this.frameStats.numBlackFrames+=1),this.frameComparator.calculate(this.previousFrame_,a.data)>this.identicalFrameSsimThreshold&&(this.frameStats.numFrozenFrames+=1),this.previousFrame_=a.data,this.frameStats.numFrames+=1,setTimeout(this.checkVideoFrame_.bind(this),20)}},isBlackFrame_:function(a,c){for(var r=this.nonBlackPixelLumaThreshold,s=0,l=4;l<c;l+=4)if(s+=.21*a[l]+.72*a[l+1]+.07*a[l+2],s>r*l/4)return!1;return!0}},u.prototype={statistics:function(a){var c=0,r;for(r=0;r<a.length;++r)c+=a[r];var s=c/(a.length-1);for(r=1;r<a.length;++r){var l=a[r-1]-s;c+=a[r]+l*l}return{mean:s,variance:c/a.length}},covariance:function(a,c,r,s){for(var l=0,g=0;g<a.length;g+=1)l+=(a[g]-r)*(c[g]-s);return l/a.length},calculate:function(a,c){if(a.length!==c.length)return 0;var r=6.5025,s=58.5225,l=s/2,g=this.statistics(a),o=g.mean;g=g.variance;var v=Math.sqrt(g),h=this.statistics(c),k=h.mean;h=h.variance;var _=Math.sqrt(h);return a=this.covariance(a,c,o,k),(2*o*k+r)/(o*o+k*k+r)*((2*v*_+s)/(g+h+s))*((a+l)/(v*_+l))}},e.exports=t},function(e,i,d){function t(a,c,r,s){this.test=a,this.protocol=c,this.params=r,this.iceCandidateFilter=s}i.a=function(a){switch(a.test_title){case"udp_enabled":new t(a,"udp",null,u.a.isRelay).run();break;case"tcp_enabled":new t(a,"tcp",null,u.a.isRelay).run();break;case"ipv6_enabled":new t(a,null,{optional:[{googIPv6:!0}]},u.a.isIpv6).run()}},e=d(18);var u=d.n(e);t.prototype={run:function(){this.iceCandidateFilter.toString()===u.a.isIpv6.toString()?this.gatherCandidates(null,this.params,this.iceCandidateFilter):this.test.server==="TURN"?u.a.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region):u.a.asyncCreateStunConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region)},start:function(a){this.filterConfig(a,this.protocol),this.gatherCandidates(a,this.params,this.iceCandidateFilter)},filterConfig:function(a,c){var r=[],s=a.iceServers[0],l=[];c="transport="+c,c=s.urls.startsWith("turns")?s.urls+"?"+c:s.urls,l.push(c),s.urls=l,r.push(s),a.iceServers=r},gatherCandidates:function(a,c,r){var s=this;try{var l=new RTCPeerConnection(a,c)}catch(g){c!==null&&c.optional[0].googIPv6?this.test.reportError("Failed to create peer connection, IPv6 might not be setup/supported on the network."):this.test.reportError("Failed to create peer connection: "+g),this.test.done();return}l.addEventListener("icecandidate",function(g){g.currentTarget.signalingState!=="closed"&&(g.candidate?(g=u.a.parseCandidate(g.candidate.candidate),r(g)&&(s.test.reportSuccess("Gathered candidate of Type: "+g.type+" Protocol: "+g.protocol+" Address: "+g.address),l.close(),l=null,s.test.done())):(l.close(),l=null,c!==null&&c.optional[0].googIPv6?s.test.reportError("Failed to gather IPv6 candidates, it might not be setup/supported on the network."):s.test.reportError("Failed to gather specified candidates"),s.test.done()))}),this.createAudioOnlyReceiveOffer(l)},createAudioOnlyReceiveOffer:function(a){function c(){}a.createOffer({offerToReceiveAudio:1}).then(function(r){a.setLocalDescription(r).then(c,c)},c)}}},function(e,i,d){function t(a,c){this.test=a,this.iceCandidateFilter=c,this.timeout=null,this.parsedCandidates=[],this.call=null}i.a=function(a){switch(a.test_title){case"relay_connectivity":new t(a,u.a.isRelay).run();break;case"reflexive_connectivity":new t(a,u.a.isReflexive).run();break;case"host_connectivity":new t(a,u.a.isHost).start()}},e=d(18);var u=d.n(e);t.prototype={run:function(){this.test.server==="TURN"?u.a.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region):u.a.asyncCreateStunConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region)},start:function(a){var c=this;this.call=new u.a(a,this.test),this.call.setIceCandidateFilter(this.iceCandidateFilter),this.call.pc1.addEventListener("icecandidate",function(s){s.candidate&&(s=u.a.parseCandidate(s.candidate.candidate),c.parsedCandidates.push(s),c.iceCandidateFilter(s)&&c.test.reportInfo("Gathered candidate of Type: "+s.type+" Protocol: "+s.protocol+" Address: "+s.address))});var r=this.call.pc1.createDataChannel(null);r.addEventListener("open",function(){r.send("hello")}),r.addEventListener("message",function(s){s.data!=="world"?c.test.reportError("Invalid data transmitted."):c.test.reportSuccess("Data successfully transmitted between peers."),c.hangup()}),this.call.pc2.addEventListener("datachannel",function(s){var l=s.channel;l.addEventListener("message",function(g){g.data!=="hello"?c.hangup("Invalid data transmitted."):l.send("world")})}),this.call.establishConnection(),this.timeout=setTimeout(this.hangup.bind(this,"Timed out"),5e3)},filterConfig:function(a){var c=[],r=a.iceServers[0],s=[],l=r.urls.startsWith("turns")?r.urls+"?transport=tcp":r.urls;s.push(l),r.urls=s,c.push(r),a.iceServers=c},findParsedCandidateOfSpecifiedType:function(a){for(var c in this.parsedCandidates)if(a(this.parsedCandidates[c]))return a(this.parsedCandidates[c])},hangup:function(a){a&&(a==="Timed out"&&this.iceCandidateFilter.toString()===u.a.isReflexive.toString()&&this.findParsedCandidateOfSpecifiedType(u.a.isReflexive)?this.test.reportWarning("Could not connect using reflexive candidates, likely due to the network environment/configuration."):this.test.reportError(a)),clearTimeout(this.timeout),this.call.close(),this.test.done()}}},function(e,i,d){function t(_,y){for(this.test=_,this.testDurationSeconds=1*y,this.startTime=null,this.receivedPayloadBytes=this.sentPayloadBytes=0,this.stopSending=!1,this.samplePacket="",_=0;_!==1024;++_)this.samplePacket+="h";this.maxNumberOfPacketsToSend=1,this.bytesToKeepBuffered=1024*this.maxNumberOfPacketsToSend,this.lastBitrateMeasureTime=null,this.lastReceivedPayloadBytes=0,this.receiveChannel=this.senderChannel=this.call=null}function u(_,y,S){this.test=_,this.maxVideoBitrateKbps=2e3,this.durationMs=1e3*S,this.statStepMs=100,this.bweStats=new s.StatisticsAggregate(750*this.maxVideoBitrateKbps),this.rttStats=new s.StatisticsAggregate,this.qpSum=this.pliCount=this.nackCount=this.packetsLost=-1,this.packetsReceived=this.packetsSent=0,this.bitrateMean=this.framesSent=this.videoBytesRecieved=this.videoBytesSent=this.framesDecoded=this.framesEncoded=-1,this.videoStats=[],this.call=this.startTime=null,this.deviceId=y,this.bytesSent=0,this.constraints={audio:!1,video:{optional:[{minWidth:320},{minHeight:240}]}}}function a(_,y){this.test=_,this.candidateFilter=y,this.testDurationMs=3e5,this.sendIntervalMs=100,this.delays=[],this.recvTimeStamps=[],this.running=!1,this.receiveChannel=this.senderChannel=this.call=null}function c(_,y,S){this.test=_,this.maxAudioBitrateKbps=2e3,this.durationMs=1e3*S,this.statStepMs=100,this.bweStats=new s.StatisticsAggregate(750*this.maxAudioBitrateKbps),this.rttStats=new s.StatisticsAggregate,this.audioBytesRecieved=this.audioBytesSent=this.packetsReceived=this.packetsSent=this.packetsLost=-1,this.startTime=null,this.jitter=0,this.call=null,this.bytesSent=0,this.deviceId=y,this.constraints={audio:!0}}i.a=function(_,y,S){switch(_.test_title){case"data_throughput":new t(_,S).run();break;case"video_bandwidth":new u(_,y,S).run();break;case"audio_bandwidth":new c(_,y,S).run();break;case"network_latency":new a(_,r.a.isNotHostCandidate).run()}},e=d(18);var r=d.n(e),s=d(13),l=[2,6],g=[200,500],o=[200,500],v=[10,30],h=[250,500,800],k=[0,30];t.prototype={run:function(){this.test.server==="TURN"?r.a.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region):r.a.asyncCreateStunConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region)},start:function(_){this.call=new r.a(_,this.test),this.call.setIceCandidateFilter(r.a.isRelay),this.senderChannel=this.call.pc1.createDataChannel(null),this.senderChannel.addEventListener("open",this.sendingStep.bind(this)),this.call.pc2.addEventListener("datachannel",this.onReceiverChannel.bind(this)),this.call.establishConnection(),this.timeout=setTimeout(this.hangup.bind(this,"Timed out"),3e4)},hangup:function(_){_&&(_==="Timed out"?this.test.reportError("maximum timeout"):this.test.reportError(_)),clearTimeout(this.timeout),this.call.close(),this.test.done()},onReceiverChannel:function(_){this.receiveChannel=_.channel,this.receiveChannel.addEventListener("message",this.onMessageReceived.bind(this))},sendingStep:function(){clearTimeout(this.timeout);var _=new Date;this.startTime||(this.lastBitrateMeasureTime=this.startTime=_);for(var y=0;y!==this.maxNumberOfPacketsToSend&&!(this.senderChannel.bufferedAmount>=this.bytesToKeepBuffered);++y)this.sentPayloadBytes+=this.samplePacket.length,this.senderChannel.send(this.samplePacket);_-this.startTime>=1e3*this.testDurationSeconds?(this.test.setProgress(100),this.stopSending=!0):(this.test.setProgress((_-this.startTime)/(10*this.testDurationSeconds)),setTimeout(this.sendingStep.bind(this),1))},onMessageReceived:function(_){if(this.receivedPayloadBytes+=_.data.length,_=new Date,1e3<=_-this.lastBitrateMeasureTime){var y=(this.receivedPayloadBytes-this.lastReceivedPayloadBytes)/(_-this.lastBitrateMeasureTime);y=Math.round(8e3*y)/1e3,this.test.reportSuccess("Transmitting at "+y+" kbps."),this.lastReceivedPayloadBytes=this.receivedPayloadBytes,this.lastBitrateMeasureTime=_}this.stopSending&&this.sentPayloadBytes===this.receivedPayloadBytes&&(this.call.close(),this.call=null,this.test.reportSuccess("Total transmitted: "+8*this.receivedPayloadBytes/1e3+" kilo-bits in "+Math.round(10*(_-this.startTime))/1e4+" seconds."),this.test.done())}},u.prototype={run:function(){this.test.server==="TURN"?r.a.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region):r.a.asyncCreateStunConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region)},start:function(_){this.call=new r.a(_,this.test),this.call.setIceCandidateFilter(r.a.isRelay),this.call.disableVideoFec(),this.call.constrainVideoBitrate(this.maxVideoBitrateKbps),s.appendSourceId(this.deviceId,"video",this.constraints),s.doGetUserMedia(this.constraints,this.gotStream.bind(this),this.onFail.bind(this))},onFail:function(_){this.test.reportError("getUserMedia failed with error: "+_),this.test.done()},gotStream:function(_){this.call.pc1.addStream(_),this.call.establishConnection(),this.startTime=new Date,this.localStream=_.getVideoTracks()[0],setTimeout(this.gatherStats.bind(this),this.statStepMs)},gatherStats:function(){var _=new Date;_-this.startTime>this.durationMs?(this.test.setProgress(100),this.hangup()):(this.call.statsGatheringRunning||this.call.gatherStats(this.call.pc1,this.call.pc2,this.localStream,this.gotStats.bind(this)),this.test.setProgress(100*(_-this.startTime)/this.durationMs),setTimeout(this.gatherStats.bind(this),this.statStepMs))},gotStats:function(_,y,S,x){if(adapter.browserDetails.browser==="chrome")for(var D in _)typeof _[D].connection<"u"&&(this.bweStats.add(_[D].connection.timestamp,parseInt(_[D].connection.availableOutgoingBitrate)),this.rttStats.add(_[D].connection.timestamp,parseInt(1e3*_[D].connection.currentRoundTripTime)),this.videoStats[0]=_[D].video.local.frameWidth,this.videoStats[1]=_[D].video.local.frameHeight,this.nackCount=_[D].video.local.nackCount,this.packetsLost=S[D].video.remote.packetsLost,this.qpSum=S[D].video.remote.qpSum,this.pliCount=_[D].video.local.pliCount,this.packetsSent=_[D].video.local.packetsSent,this.packetsReceived=S[D].video.remote.packetsReceived,this.framesEncoded=_[D].video.local.framesEncoded,this.videoBytesSent=_[D].video.local.bytesSent,this.videoBytesRecieved=S[D].video.remote.bytesReceived,this.framesDecoded=S[D].video.remote.framesDecoded);else if(adapter.browserDetails.browser==="firefox")for(var E in _)(y=1e3*_[E].video.remote.roundTripTime)&&this.rttStats.add(_[E].video.remote.timestamp,parseInt(y)),this.bytesSent+=_[E].connection.bytesSent,this.packetsSent=_[E].video.local.packetsSent,this.packetsLost=S[E].video.remote.packetsLost,this.packetsReceived=S[E].video.remote.packetsReceived,this.qpSum=S[E].video.remote.qpSum,this.bitrateMean=_[E].video.local.bitrateMean,this.videoBytesSent=_[E].video.local.bytesSent,this.videoBytesRecieved=S[E].video.remote.bytesReceived;else this.test.reportError("Only Firefox and Chrome getStats implementations are supported.");this.completed()},hangup:function(){this.call.pc1.getLocalStreams()[0].getTracks().forEach(function(_){_.stop()}),this.call.close(),this.call=null},completed:function(){if(adapter.browserDetails.browser==="chrome"){var _=(new Date-this.startTime)/1e3;if(2>this.videoStats[0]&&2>this.videoStats[1])this.test.reportError("Camera failure: "+this.videoStats[0]+"x"+this.videoStats[1]+". Cannot test bandwidth without a working  camera.");else{this.test.reportSuccess("Video resolution: "+this.videoStats[0]+"x"+this.videoStats[1]);var y=Math.round(this.bweStats.getAverage()/1e3),S=y<o[0]?"poor":y<o[1]?"moderate":"good",x=y<h[0]?1:y<h[1]?2:y<h[2]?4:5;this.test.reportByState("Average Video bandwidth (Send): "+y+" kbps",S),this.test.bitrate_only===!0&&this.test.fillBandwidth(this.bweStats.getAverage()),this.test.bitrate_only===!1&&(this.test.reportInfo("Recommended no. of incoming videos :"+x),this.test.reportInfo("Send bandwidth estimate max: "+this.bweStats.getMax()/1e3+" kbps"),this.test.reportInfo("Send bandwidth ramp-up time: "+this.bweStats.getRampUpTime()+" ms"),this.test.reportInfo("Packets sent: "+this.packetsSent),this.test.reportInfo("Packets received: "+this.packetsReceived),this.test.reportInfo("NACK count: "+this.nackCount),this.test.reportInfo("Picture loss indications: "+this.pliCount),this.test.reportInfo("Quality predictor sum: "+this.qpSum),this.test.reportInfo("Frames encoded: "+this.framesEncoded),this.test.reportInfo("Frames decoded: "+this.framesDecoded)),0<this.packetsSent&&(S=(this.packetsSent-this.packetsReceived)/this.packetsSent*100,y=S<l[0]?"good":S<l[1]?"moderate":"poor",this.test.reportByState("Packets lost: "+S.toFixed(2)+"%",y),this.test.bitrate_only===!0&&this.test.fillPacketsLost(S.toFixed(2))),y=(8*this.videoBytesSent/(1e3*_)).toFixed(2),_=(8*this.videoBytesRecieved/(1e3*_)).toFixed(2),this.test.reportInfo("Video Bitrate (Send) :"+y+" kbps"),this.test.reportInfo("Video Bitrate (Receive) :"+_+" kbps")}}else adapter.browserDetails.browser==="firefox"&&(this.test.reportInfo("Bitrate Mean (Send): "+parseInt(this.bitrateMean)/1e3+" kbps"),_=(new Date-this.startTime)/1e3,y=(8*this.bytesSent/(1e3*_)).toFixed(2),this.test.reportByState("Average Video bandwidth (Send): "+y+" kbps",y<o[0]?"poor":y<o[1]?"moderate":"good"),this.test.bitrate_only===!0&&this.test.fillBandwidth(1e3*y),this.test.bitrate_only===!1&&(this.test.reportInfo("Packets sent: "+this.packetsSent),this.test.reportInfo("Packets received: "+this.packetsReceived)),0<this.packetsSent&&(S=(this.packetsSent-this.packetsReceived)/this.packetsSent*100,y=S<l[0]?"good":S<l[1]?"moderate":"poor",this.test.reportByState("Packets lost: "+S.toFixed(2)+"%",y),this.test.bitrate_only===!0&&this.test.fillPacketsLost(S.toFixed(2))),y=(8*this.videoBytesSent/(1e3*_)).toFixed(2),_=(8*this.videoBytesRecieved/(1e3*_)).toFixed(2),this.test.reportInfo("Video Bitrate (Send) :"+y+" kbps"),this.test.reportInfo("Video Bitrate (Receive) :"+_+" kbps"));_=this.rttStats.getAverage(),this.test.reportByState("RTT average: "+_+" ms",_<g[0]?"good":_<g[1]?"moderate":"poor"),this.test.bitrate_only===!1&&this.test.reportInfo("RTT max: "+this.rttStats.getMax()+" ms"),this.test.done()}},a.prototype={run:function(){this.test.server==="TURN"?r.a.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region):r.a.asyncCreateStunConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region)},start:function(_){this.filterConfig(_),this.running=!0,this.call=new r.a(_,this.test),this.call.setIceCandidateFilter(this.candidateFilter),this.senderChannel=this.call.pc1.createDataChannel({ordered:!1,maxRetransmits:0}),this.senderChannel.addEventListener("open",this.send.bind(this)),this.call.pc2.addEventListener("datachannel",this.onReceiverChannel.bind(this)),this.call.establishConnection(),s.setTimeoutWithProgressBar(this.finishTest.bind(this),this.testDurationMs)},filterConfig:function(_){var y=[],S=_.iceServers[0],x=[],D=S.urls.startsWith("turns")?S.urls+"?transport=tcp":S.urls;x.push(D),S.urls=x,y.push(S),_.iceServers=y},onReceiverChannel:function(_){this.receiveChannel=_.channel,this.receiveChannel.addEventListener("message",this.receive.bind(this))},send:function(){this.running&&(this.senderChannel.send(""+Date.now()),setTimeout(this.send.bind(this),this.sendIntervalMs))},receive:function(_){if(this.running){_=parseInt(_.data);var y=Date.now()-_;this.recvTimeStamps.push(_),this.delays.push(y),this.test.fillData(_+y,y)}},finishTest:function(){this.running=!1,this.call.close(),this.call=null;var _=s.arrayMax(this.delays),y=s.arrayMin(this.delays);this.delays.length<.8*this.testDurationMs/this.sendIntervalMs?this.test.reportError("Not enough samples gathered. Keep the page on  the foreground while the test is running."):this.test.reportSuccess("Collected "+this.delays.length+" delay samples."),_>2*(y+100)&&this.test.reportError("There is a big difference between the min and max delay of packets. Your network appears unstable.min="+y+"max="+_),this.test.done()}},c.prototype={run:function(){this.test.server==="TURN"?r.a.asyncCreateTurnConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region):r.a.asyncCreateStunConfig(this.start.bind(this),this.test.reportFatal.bind(this.test),this.test.region)},start:function(_){this.call=new r.a(_,this.test),this.call.setIceCandidateFilter(r.a.isRelay),s.appendSourceId(this.deviceId,"audio",this.constraints),s.doGetUserMedia(this.constraints,this.gotStream.bind(this),this.onFail.bind(this))},onFail:function(_){this.test.reportError("getUserMedia failed with error: "+_),this.test.done()},gotStream:function(_){this.call.pc1.addStream(_),this.call.establishConnection(),this.startTime=new Date,this.localStream=_.getAudioTracks()[0],setTimeout(this.gatherStats.bind(this),this.statStepMs)},gatherStats:function(){var _=new Date;_-this.startTime>this.durationMs?(this.test.setProgress(100),this.hangup()):(this.call.statsGatheringRunning||this.call.gatherStats(this.call.pc1,this.call.pc2,this.localStream,this.gotStats.bind(this)),this.test.setProgress(100*(_-this.startTime)/this.durationMs),setTimeout(this.gatherStats.bind(this),this.statStepMs))},gotStats:function(_,y,S,x){if(adapter.browserDetails.browser==="chrome")for(var D in _)typeof _[D].connection<"u"&&(this.bweStats.add(_[D].connection.timestamp,parseInt(_[D].connection.availableOutgoingBitrate)),this.rttStats.add(_[D].connection.timestamp,parseInt(1e3*_[D].connection.currentRoundTripTime)),this.packetsLost=S[D].audio.remote.packetsLost,this.packetsSent=_[D].audio.local.packetsSent,this.packetsReceived=S[D].audio.remote.packetsReceived,this.audioBytesSent=_[D].audio.local.bytesSent,this.audioBytesRecieved=S[D].audio.remote.bytesReceived,this.jitter=S[D].audio.remote.jitter);else if(adapter.browserDetails.browser==="firefox")for(var E in _)(y=1e3*_[E].audio.remote.roundTripTime)&&this.rttStats.add(_[E].audio.remote.timestamp,parseInt(y)),this.bytesSent+=_[E].connection.bytesSent,this.packetsSent=_[E].audio.local.packetsSent,this.packetsLost=S[E].audio.remote.packetsLost,this.packetsReceived=S[E].audio.remote.packetsReceived,this.jitter=S[E].audio.remote.jitter,this.audioBytesSent=_[E].audio.local.bytesSent,this.audioBytesRecieved=S[E].audio.remote.bytesReceived;else this.test.reportError("Only Firefox and Chrome getStats implementations are supported.");this.completed()},hangup:function(){this.call.pc1.getLocalStreams()[0].getTracks().forEach(function(_){_.stop()}),this.call.close(),this.call=null},completed:function(){if(adapter.browserDetails.browser==="chrome"){var _=(new Date-this.startTime)/1e3,y=Math.round(this.bweStats.getAverage()/1e3);if(this.test.reportByState("Average Audio bandwidth (Send): "+y+" kbps",y<v[0]?"poor":y<v[1]?"moderate":"good"),this.test.bitrate_only===!0&&this.test.fillBandwidth(this.bweStats.getAverage()),this.test.bitrate_only==0&&(this.test.reportInfo("Send bandwidth estimate max: "+this.bweStats.getMax()/1e3+" kbps"),this.test.reportInfo("Send bandwidth ramp-up time: "+this.bweStats.getRampUpTime()+" ms"),this.test.reportInfo("Packets sent: "+this.packetsSent),this.test.reportInfo("Packets received: "+this.packetsReceived)),0<this.packetsSent){var S=(this.packetsSent-this.packetsReceived)/this.packetsSent*100;y=S<l[0]?"good":S<l[1]?"moderate":"poor",this.test.reportByState("Packets lost: "+S.toFixed(2)+"%",y),this.test.bitrate_only===!0&&this.test.fillPacketsLost(S.toFixed(2))}y=(8*this.audioBytesSent/(1e3*_)).toFixed(2),_=(8*this.audioBytesRecieved/(1e3*_)).toFixed(2),this.test.reportInfo("Audio Bitrate (Send) :"+y+" kbps"),this.test.reportInfo("Audio Bitrate (Receive) :'"+_+" 'kbps"),_=1e3*this.jitter,_>k[1]||_<=k[0]||this.test.reportByState("Jitter: "+_,"good")}else adapter.browserDetails.browser==="firefox"&&(_=(new Date-this.startTime)/1e3,this.test.bitrate_only===!1&&(this.test.reportInfo("Packets sent: "+this.packetsSent),this.test.reportInfo("Packets received: "+this.packetsReceived)),0<this.packetsSent&&(S=(this.packetsSent-this.packetsReceived)/this.packetsSent*100,y=S<l[0]?"good":S<l[1]?"moderate":"poor",this.test.reportByState("Packets lost: "+S.toFixed(2)+"%",y),this.test.bitrate_only===!0&&this.test.fillPacketsLost(S.toFixed(2))),y=1e3*this.jitter,y>k[1]||y<=k[0]||this.test.reportByState("Jitter: "+y,"good"),y=(8*this.audioBytesSent/(1e3*_)).toFixed(2),_=(8*this.audioBytesRecieved/(1e3*_)).toFixed(2),this.test.reportInfo("Audio Bitrate (Send) :"+y+" kbps"),this.test.reportInfo("Audio Bitrate (Receive) :'"+_+" 'kbps"));_=this.rttStats.getAverage(),this.test.reportByState("RTT average: "+_+" ms",_<g[0]?"good":_<g[1]?"moderate":"poor"),this.test.bitrate_only===!1&&this.test.reportInfo("RTT max: "+this.rttStats.getMax()+" ms"),this.test.done()}}},function(e,i,d){function t(a,c,r){this.test=a,this.host=c,this.port=r}i.a=function(a,c,r){new t(a,c,r).run()};var u=d(77);t.prototype={run:function(){var a=this;u("https://"+this.host+":"+this.port+"/proxy-token",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"No"}}).then(function(c){return c.json()}).then(function(c){if(a.test.reportSuccess("Token created successfully."),Object.prototype.hasOwnProperty.call(c,"token")===!1)a.test.reportError("Token creation failed due to error: "+c.error),a.test.done();else{var r={video:!0,audio:!0,data:!0,videoSize:{LD:[80,45,640,360]}.SD,attributes:{name:"Test connectivity"}},s=xt.Logger.getLogLevel();xt.Logger.setLogLevel(xt.Logger.NONE),xt.joinRoom(c.token,r,function(l,g){xt.Logger.setLogLevel(s),g&&g!=null?(a.test.reportError("Room not joined due to error: "+g.type),a.test.done()):l&&l!=null&&(l.room.disconnect(),a.test.reportSuccess("Room joined successfully."),a.test.done())})}}).catch(function(c){a.test.reportError("Token creation failed due to error: "+c),a.test.done()})}}},function(e,i,d){var t=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof t<"u")return t;throw Error("unable to locate global object")}();(e.exports=i=t.fetch)&&(i.default=t.fetch.bind(t)),i.Headers=t.Headers,i.Request=t.Request,i.Response=t.Response},function(e,i,d){function t(u){return!(u==null||u=="app")}d(11),i.a={setCustomData:function(u,a,c){console.log("setCustomData")},getCustomData:function(u,a){console.log("getCustomData");var c={result:0};t(u.scope)==0&&(c.result=1,c.error="Invalid scope parameter "+u.scope,a(c))},saveCustomData:function(u,a,c){console.log("saveCustomData");var r={result:0};t(u)==0?(r.result=1,r.error="Invalid scope parameter: "+u):(a==null||typeof a!="object")&&(r.result=1,r.error="Invalid  data"),c(r)}}},function(e,i){},function(e,i,d){i=d(31),e.exports=i.adapter=d(81)},function(e,i,d){e.exports=function(){return function(){function t(u,a,c){function r(g,o){if(!a[g]){if(!u[g]){if(s)return s(g,!0);throw o=Error("Cannot find module '"+g+"'"),o.code="MODULE_NOT_FOUND",o}o=a[g]={exports:{}},u[g][0].call(o.exports,function(v){return r(u[g][1][v]||v)},o,o.exports,t,u,a,c)}return a[g].exports}for(var s=!1,l=0;l<c.length;l++)r(c[l]);return r}return t}()({1:[function(t,u,a){t=t("./adapter_factory.js"),t=(0,t.adapterFactory)({window}),u.exports=t},{"./adapter_factory.js":2}],2:[function(t,u,a){function c(h){if(h&&h.__esModule)return h;var k={};if(h!=null)for(var _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(k[_]=h[_]);return k.default=h,k}Object.defineProperty(a,"__esModule",{value:!0}),a.adapterFactory=function(){var h=(0<arguments.length&&arguments[0]!==void 0?arguments[0]:{}).window,k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0},_=r.log,y=r.detectBrowser(h),S={browserDetails:y,commonShim:v,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings};switch(y.browser){case"chrome":if(!s||!s.shimPeerConnection||!k.shimChrome){_("Chrome shim is not included in this adapter release.");break}_("adapter.js shimming chrome."),S.browserShim=s,s.shimGetUserMedia(h),s.shimMediaStream(h),s.shimPeerConnection(h),s.shimOnTrack(h),s.shimAddTrackRemoveTrack(h),s.shimGetSendersWithDtmf(h),s.shimGetStats(h),s.shimSenderReceiverGetStats(h),s.fixNegotiationNeeded(h),v.shimRTCIceCandidate(h),v.shimConnectionState(h),v.shimMaxMessageSize(h),v.shimSendThrowTypeError(h),v.removeAllowExtmapMixed(h);break;case"firefox":if(!g||!g.shimPeerConnection||!k.shimFirefox){_("Firefox shim is not included in this adapter release.");break}_("adapter.js shimming firefox."),S.browserShim=g,g.shimGetUserMedia(h),g.shimPeerConnection(h),g.shimOnTrack(h),g.shimRemoveStream(h),g.shimSenderGetStats(h),g.shimReceiverGetStats(h),g.shimRTCDataChannel(h),v.shimRTCIceCandidate(h),v.shimConnectionState(h),v.shimMaxMessageSize(h),v.shimSendThrowTypeError(h);break;case"edge":if(!l||!l.shimPeerConnection||!k.shimEdge){_("MS edge shim is not included in this adapter release.");break}_("adapter.js shimming edge."),S.browserShim=l,l.shimGetUserMedia(h),l.shimGetDisplayMedia(h),l.shimPeerConnection(h),l.shimReplaceTrack(h),v.shimMaxMessageSize(h),v.shimSendThrowTypeError(h);break;case"safari":if(!o||!k.shimSafari){_("Safari shim is not included in this adapter release.");break}_("adapter.js shimming safari."),S.browserShim=o,o.shimRTCIceServerUrls(h),o.shimCreateOfferLegacy(h),o.shimCallbacksAPI(h),o.shimLocalStreamsAPI(h),o.shimRemoteStreamsAPI(h),o.shimTrackEventTransceiver(h),o.shimGetUserMedia(h),v.shimRTCIceCandidate(h),v.shimMaxMessageSize(h),v.shimSendThrowTypeError(h),v.removeAllowExtmapMixed(h);break;default:_("Unsupported browser!")}return S},u=t("./utils");var r=c(u);u=t("./chrome/chrome_shim");var s=c(u);u=t("./edge/edge_shim");var l=c(u);u=t("./firefox/firefox_shim");var g=c(u);u=t("./safari/safari_shim");var o=c(u);t=t("./common_shim");var v=c(t)},{"./chrome/chrome_shim":3,"./common_shim":6,"./edge/edge_shim":7,"./firefox/firefox_shim":11,"./safari/safari_shim":14,"./utils":15}],3:[function(t,u,a){function c(v,h,k){return h in v?Object.defineProperty(v,h,{value:k,enumerable:!0,configurable:!0,writable:!0}):v[h]=k,v}function r(v){v.RTCPeerConnection.prototype.getLocalStreams=function(){var S=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(function(x){return S._shimmedLocalStreams[x][0]})};var h=v.RTCPeerConnection.prototype.addTrack;v.RTCPeerConnection.prototype.addTrack=function(S,x){if(!x)return h.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var D=h.apply(this,arguments);return this._shimmedLocalStreams[x.id]?this._shimmedLocalStreams[x.id].indexOf(D)===-1&&this._shimmedLocalStreams[x.id].push(D):this._shimmedLocalStreams[x.id]=[x,D],D};var k=v.RTCPeerConnection.prototype.addStream;v.RTCPeerConnection.prototype.addStream=function(S){var x=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},S.getTracks().forEach(function(I){if(x.getSenders().find(function(p){return p.track===I}))throw new DOMException("Track already exists.","InvalidAccessError")});var D=this.getSenders();k.apply(this,arguments);var E=this.getSenders().filter(function(I){return D.indexOf(I)===-1});this._shimmedLocalStreams[S.id]=[S].concat(E)};var _=v.RTCPeerConnection.prototype.removeStream;v.RTCPeerConnection.prototype.removeStream=function(S){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[S.id],_.apply(this,arguments)};var y=v.RTCPeerConnection.prototype.removeTrack;v.RTCPeerConnection.prototype.removeTrack=function(S){var x=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},S&&Object.keys(this._shimmedLocalStreams).forEach(function(D){var E=x._shimmedLocalStreams[D].indexOf(S);E!==-1&&x._shimmedLocalStreams[D].splice(E,1),x._shimmedLocalStreams[D].length===1&&delete x._shimmedLocalStreams[D]}),y.apply(this,arguments)}}Object.defineProperty(a,"__esModule",{value:!0}),a.shimGetDisplayMedia=a.shimGetUserMedia=void 0,H.initSymbol(),H.initSymbol(),H.initSymbolIterator();var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return H.initSymbol(),H.initSymbol(),H.initSymbol(),v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},l=t("./getusermedia");Object.defineProperty(a,"shimGetUserMedia",{enumerable:!0,get:function(){return l.shimGetUserMedia}});var g=t("./getdisplaymedia");Object.defineProperty(a,"shimGetDisplayMedia",{enumerable:!0,get:function(){return g.shimGetDisplayMedia}}),a.shimMediaStream=function(v){v.MediaStream=v.MediaStream||v.webkitMediaStream},a.shimOnTrack=function(v){if((typeof v>"u"?"undefined":s(v))!=="object"||!v.RTCPeerConnection||"ontrack"in v.RTCPeerConnection.prototype)o.wrapPeerConnectionEvent(v,"track",function(k){return k.transceiver||Object.defineProperty(k,"transceiver",{value:{receiver:k.receiver}}),k});else{Object.defineProperty(v.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(k){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=k)},enumerable:!0,configurable:!0});var h=v.RTCPeerConnection.prototype.setRemoteDescription;v.RTCPeerConnection.prototype.setRemoteDescription=function(){var k=this;return this._ontrackpoly||(this._ontrackpoly=function(_){_.stream.addEventListener("addtrack",function(y){var S=void 0;S=v.RTCPeerConnection.prototype.getReceivers?k.getReceivers().find(function(D){return D.track&&D.track.id===y.track.id}):{track:y.track};var x=new Event("track");x.track=y.track,x.receiver=S,x.transceiver={receiver:S},x.streams=[_.stream],k.dispatchEvent(x)}),_.stream.getTracks().forEach(function(y){var S=void 0;S=v.RTCPeerConnection.prototype.getReceivers?k.getReceivers().find(function(D){return D.track&&D.track.id===y.id}):{track:y};var x=new Event("track");x.track=y,x.receiver=S,x.transceiver={receiver:S},x.streams=[_.stream],k.dispatchEvent(x)})},this.addEventListener("addstream",this._ontrackpoly)),h.apply(this,arguments)}}},a.shimGetSendersWithDtmf=function(v){if((typeof v>"u"?"undefined":s(v))==="object"&&v.RTCPeerConnection&&!("getSenders"in v.RTCPeerConnection.prototype)&&"createDTMFSender"in v.RTCPeerConnection.prototype){var h=function(D,E){return{track:E,get dtmf(){return this._dtmf===void 0&&(this._dtmf=E.kind==="audio"?D.createDTMFSender(E):null),this._dtmf},_pc:D}};if(!v.RTCPeerConnection.prototype.getSenders){v.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var k=v.RTCPeerConnection.prototype.addTrack;v.RTCPeerConnection.prototype.addTrack=function(D,E){var I=k.apply(this,arguments);return I||(I=h(this,D),this._senders.push(I)),I};var _=v.RTCPeerConnection.prototype.removeTrack;v.RTCPeerConnection.prototype.removeTrack=function(D){_.apply(this,arguments);var E=this._senders.indexOf(D);E!==-1&&this._senders.splice(E,1)}}var y=v.RTCPeerConnection.prototype.addStream;v.RTCPeerConnection.prototype.addStream=function(D){var E=this;this._senders=this._senders||[],y.apply(this,[D]),D.getTracks().forEach(function(I){E._senders.push(h(E,I))})};var S=v.RTCPeerConnection.prototype.removeStream;v.RTCPeerConnection.prototype.removeStream=function(D){var E=this;this._senders=this._senders||[],S.apply(this,[D]),D.getTracks().forEach(function(I){var p=E._senders.find(function(B){return B.track===I});p&&E._senders.splice(E._senders.indexOf(p),1)})}}else if((typeof v>"u"?"undefined":s(v))==="object"&&v.RTCPeerConnection&&"getSenders"in v.RTCPeerConnection.prototype&&"createDTMFSender"in v.RTCPeerConnection.prototype&&v.RTCRtpSender&&!("dtmf"in v.RTCRtpSender.prototype)){var x=v.RTCPeerConnection.prototype.getSenders;v.RTCPeerConnection.prototype.getSenders=function(){var D=this,E=x.apply(this,[]);return E.forEach(function(I){return I._pc=D}),E},Object.defineProperty(v.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this._dtmf=this.track.kind==="audio"?this._pc.createDTMFSender(this.track):null),this._dtmf}})}},a.shimGetStats=function(v){if(v.RTCPeerConnection){var h=v.RTCPeerConnection.prototype.getStats;v.RTCPeerConnection.prototype.getStats=function(){var k=this,_=Array.prototype.slice.call(arguments),y=_[0],S=_[1];if(_=_[2],0<arguments.length&&typeof y=="function")return h.apply(this,arguments);if(h.length===0&&(arguments.length===0||typeof y!="function"))return h.apply(this,[]);var x=function(E){var I={};return E.result().forEach(function(p){var B={id:p.id,timestamp:p.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[p.type]||p.type};p.names().forEach(function(P){B[P]=p.stat(P)}),I[B.id]=B}),I},D=function(E){return new Map(Object.keys(E).map(function(I){return[I,E[I]]}))};return 2<=arguments.length?h.apply(this,[function(E){S(D(x(E)))},y]):new Promise(function(E,I){h.apply(k,[function(p){E(D(x(p)))},I])}).then(S,_)}}},a.shimSenderReceiverGetStats=function(v){if((typeof v>"u"?"undefined":s(v))==="object"&&v.RTCPeerConnection&&v.RTCRtpSender&&v.RTCRtpReceiver){if(!("getStats"in v.RTCRtpSender.prototype)){var h=v.RTCPeerConnection.prototype.getSenders;h&&(v.RTCPeerConnection.prototype.getSenders=function(){var S=this,x=h.apply(this,[]);return x.forEach(function(D){return D._pc=S}),x});var k=v.RTCPeerConnection.prototype.addTrack;k&&(v.RTCPeerConnection.prototype.addTrack=function(){var S=k.apply(this,arguments);return S._pc=this,S}),v.RTCRtpSender.prototype.getStats=function(){var S=this;return this._pc.getStats().then(function(x){return o.filterStats(x,S.track,!0)})}}if(!("getStats"in v.RTCRtpReceiver.prototype)){var _=v.RTCPeerConnection.prototype.getReceivers;_&&(v.RTCPeerConnection.prototype.getReceivers=function(){var S=this,x=_.apply(this,[]);return x.forEach(function(D){return D._pc=S}),x}),o.wrapPeerConnectionEvent(v,"track",function(S){return S.receiver._pc=S.srcElement,S}),v.RTCRtpReceiver.prototype.getStats=function(){var S=this;return this._pc.getStats().then(function(x){return o.filterStats(x,S.track,!1)})}}if("getStats"in v.RTCRtpSender.prototype&&"getStats"in v.RTCRtpReceiver.prototype){var y=v.RTCPeerConnection.prototype.getStats;v.RTCPeerConnection.prototype.getStats=function(){if(0<arguments.length&&arguments[0]instanceof v.MediaStreamTrack){var S=arguments[0],x=void 0,D=void 0,E=void 0;return this.getSenders().forEach(function(I){I.track===S&&(x?E=!0:x=I)}),this.getReceivers().forEach(function(I){return I.track===S&&(D?E=!0:D=I),I.track===S}),E||x&&D?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):x?x.getStats():D?D.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return y.apply(this,arguments)}}}},a.shimAddTrackRemoveTrackWithNative=r,a.shimAddTrackRemoveTrack=function(v){function h(I,p){var B=p.sdp;return Object.keys(I._reverseStreams||[]).forEach(function(P){P=I._reverseStreams[P],B=B.replace(new RegExp(I._streams[P.id].id,"g"),P.id)}),new RTCSessionDescription({type:p.type,sdp:B})}function k(I,p){var B=p.sdp;return Object.keys(I._reverseStreams||[]).forEach(function(P){P=I._reverseStreams[P],B=B.replace(new RegExp(P.id,"g"),I._streams[P.id].id)}),new RTCSessionDescription({type:p.type,sdp:B})}if(v.RTCPeerConnection){var _=o.detectBrowser(v);if(v.RTCPeerConnection.prototype.addTrack&&65<=_.version)return r(v);var y=v.RTCPeerConnection.prototype.getLocalStreams;v.RTCPeerConnection.prototype.getLocalStreams=function(){var I=this,p=y.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(function(B){return I._reverseStreams[B.id]})};var S=v.RTCPeerConnection.prototype.addStream;v.RTCPeerConnection.prototype.addStream=function(I){var p=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},I.getTracks().forEach(function(P){if(p.getSenders().find(function(z){return z.track===P}))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[I.id]){var B=new v.MediaStream(I.getTracks());this._streams[I.id]=B,this._reverseStreams[B.id]=I,I=B}S.apply(this,[I])};var x=v.RTCPeerConnection.prototype.removeStream;v.RTCPeerConnection.prototype.removeStream=function(I){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},x.apply(this,[this._streams[I.id]||I]),delete this._reverseStreams[this._streams[I.id]?this._streams[I.id].id:I.id],delete this._streams[I.id]},v.RTCPeerConnection.prototype.addTrack=function(I,p){var B=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var P=[].slice.call(arguments,1);if(P.length!==1||!P[0].getTracks().find(function(z){return z===I}))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(function(z){return z.track===I}))throw new DOMException("Track already exists.","InvalidAccessError");return this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},(P=this._streams[p.id])?(P.addTrack(I),Promise.resolve().then(function(){B.dispatchEvent(new Event("negotiationneeded"))})):(P=new v.MediaStream([I]),this._streams[p.id]=P,this._reverseStreams[P.id]=p,this.addStream(P)),this.getSenders().find(function(z){return z.track===I})},["createOffer","createAnswer"].forEach(function(I){var p=v.RTCPeerConnection.prototype[I],B=c({},I,function(){var P=this,z=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[function(te){te=h(P,te),z[0].apply(null,[te])},function(te){z[1]&&z[1].apply(null,te)},arguments[2]]):p.apply(this,arguments).then(function(te){return h(P,te)})});v.RTCPeerConnection.prototype[I]=B[I]});var D=v.RTCPeerConnection.prototype.setLocalDescription;v.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?D.apply(this,arguments):(arguments[0]=k(this,arguments[0]),D.apply(this,arguments))};var E=Object.getOwnPropertyDescriptor(v.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(v.RTCPeerConnection.prototype,"localDescription",{get:function(){var I=E.get.apply(this);return I.type===""?I:h(this,I)}}),v.RTCPeerConnection.prototype.removeTrack=function(I){var p=this;if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!I._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(I._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var B=void 0;Object.keys(this._streams).forEach(function(P){p._streams[P].getTracks().find(function(z){return I.track===z})&&(B=p._streams[P])}),B&&(B.getTracks().length===1?this.removeStream(this._reverseStreams[B.id]):B.removeTrack(I.track),this.dispatchEvent(new Event("negotiationneeded")))}}},a.shimPeerConnection=function(v){var h=o.detectBrowser(v);if(!v.RTCPeerConnection&&v.webkitRTCPeerConnection&&(v.RTCPeerConnection=v.webkitRTCPeerConnection),v.RTCPeerConnection){53>h.version&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(_){var y=v.RTCPeerConnection.prototype[_],S=c({},_,function(){return arguments[0]=new(_==="addIceCandidate"?v.RTCIceCandidate:v.RTCSessionDescription)(arguments[0]),y.apply(this,arguments)});v.RTCPeerConnection.prototype[_]=S[_]});var k=v.RTCPeerConnection.prototype.addIceCandidate;v.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?78>h.version&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():k.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}},a.fixNegotiationNeeded=function(v){o.wrapPeerConnectionEvent(v,"negotiationneeded",function(h){if(h.target.signalingState==="stable")return h})};var o=function(v){if(v&&v.__esModule)return v;var h={};if(v!=null)for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(h[k]=v[k]);return h.default=v,h}(t("../utils.js"))},{"../utils.js":15,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),a.shimGetDisplayMedia=function(c,r){c.navigator.mediaDevices&&"getDisplayMedia"in c.navigator.mediaDevices||!c.navigator.mediaDevices||(typeof r!="function"?console.error("shimGetDisplayMedia: getSourceId argument is not a function"):c.navigator.mediaDevices.getDisplayMedia=function(s){return r(s).then(function(l){var g=s.video&&s.video.width,o=s.video&&s.video.height;return s.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:l,maxFrameRate:s.video&&s.video.frameRate||3}},g&&(s.video.mandatory.maxWidth=g),o&&(s.video.mandatory.maxHeight=o),c.navigator.mediaDevices.getUserMedia(s)})})}},{}],5:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),H.initSymbol(),H.initSymbol(),H.initSymbolIterator();var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return H.initSymbol(),H.initSymbol(),H.initSymbol(),l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};a.shimGetUserMedia=function(l){var g=l&&l.navigator;if(g.mediaDevices){var o=r.detectBrowser(l),v=function(y){if((typeof y>"u"?"undefined":c(y))!=="object"||y.mandatory||y.optional)return y;var S={};return Object.keys(y).forEach(function(x){if(x!=="require"&&x!=="advanced"&&x!=="mediaSource"){var D=c(y[x])==="object"?y[x]:{ideal:y[x]};D.exact!==void 0&&typeof D.exact=="number"&&(D.min=D.max=D.exact);var E=function(p,B){return p?p+B.charAt(0).toUpperCase()+B.slice(1):B==="deviceId"?"sourceId":B};if(D.ideal!==void 0){S.optional=S.optional||[];var I={};typeof D.ideal=="number"?(I[E("min",x)]=D.ideal,S.optional.push(I),I={},I[E("max",x)]=D.ideal):I[E("",x)]=D.ideal,S.optional.push(I)}D.exact!==void 0&&typeof D.exact!="number"?(S.mandatory=S.mandatory||{},S.mandatory[E("",x)]=D.exact):["min","max"].forEach(function(p){D[p]!==void 0&&(S.mandatory=S.mandatory||{},S.mandatory[E(p,x)]=D[p])})}}),y.advanced&&(S.optional=(S.optional||[]).concat(y.advanced)),S},h=function(y,S){if(61<=o.version)return S(y);if((y=JSON.parse(JSON.stringify(y)))&&c(y.audio)==="object"){var x=function(I,p,B){p in I&&!(B in I)&&(I[B]=I[p],delete I[p])};y=JSON.parse(JSON.stringify(y)),x(y.audio,"autoGainControl","googAutoGainControl"),x(y.audio,"noiseSuppression","googNoiseSuppression"),y.audio=v(y.audio)}if(y&&c(y.video)==="object"){var D=y.video.facingMode;if(D=D&&((typeof D>"u"?"undefined":c(D))==="object"?D:{ideal:D}),x=66>o.version,!(!D||D.exact!=="user"&&D.exact!=="environment"&&D.ideal!=="user"&&D.ideal!=="environment"||g.mediaDevices.getSupportedConstraints&&g.mediaDevices.getSupportedConstraints().facingMode&&!x)){delete y.video.facingMode;var E=void 0;if(D.exact==="environment"||D.ideal==="environment"?E=["back","rear"]:(D.exact==="user"||D.ideal==="user")&&(E=["front"]),E)return g.mediaDevices.enumerateDevices().then(function(I){I=I.filter(function(B){return B.kind==="videoinput"});var p=I.find(function(B){return E.some(function(P){return B.label.toLowerCase().includes(P)})});return!p&&I.length&&E.includes("back")&&(p=I[I.length-1]),p&&(y.video.deviceId=D.exact?{exact:p.deviceId}:{ideal:p.deviceId}),y.video=v(y.video),s("chrome: "+JSON.stringify(y)),S(y)})}y.video=v(y.video)}return s("chrome: "+JSON.stringify(y)),S(y)},k=function(y){return 64<=o.version?y:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[y.name]||y.name,message:y.message,constraint:y.constraint||y.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(g.getUserMedia=(function(y,S,x){h(y,function(D){g.webkitGetUserMedia(D,S,function(E){x&&x(k(E))})})}).bind(g),g.mediaDevices.getUserMedia){var _=g.mediaDevices.getUserMedia.bind(g.mediaDevices);g.mediaDevices.getUserMedia=function(y){return h(y,function(S){return _(S).then(function(x){if(S.audio&&!x.getAudioTracks().length||S.video&&!x.getVideoTracks().length)throw x.getTracks().forEach(function(D){D.stop()}),new DOMException("","NotFoundError");return x},function(x){return Promise.reject(k(x))})})}}}};var r=function(l){if(l&&l.__esModule)return l;var g={};if(l!=null)for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(g[o]=l[o]);return g.default=l,g}(t("../utils.js")),s=r.log},{"../utils.js":15}],6:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),H.initSymbol(),H.initSymbol(),H.initSymbolIterator();var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return H.initSymbol(),H.initSymbol(),H.initSymbol(),l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};a.shimRTCIceCandidate=function(l){if(l.RTCIceCandidate&&!(l.RTCIceCandidate&&"foundation"in l.RTCIceCandidate.prototype)){var g=l.RTCIceCandidate;l.RTCIceCandidate=function(o){if((typeof o>"u"?"undefined":c(o))==="object"&&o.candidate&&o.candidate.indexOf("a=")===0&&(o=JSON.parse(JSON.stringify(o)),o.candidate=o.candidate.substr(2)),o.candidate&&o.candidate.length){var v=new g(o);o=r.default.parseCandidate(o.candidate);var h=Object.assign(v,o);return h.toJSON=function(){return{candidate:h.candidate,sdpMid:h.sdpMid,sdpMLineIndex:h.sdpMLineIndex,usernameFragment:h.usernameFragment}},h}return new g(o)},l.RTCIceCandidate.prototype=g.prototype,s.wrapPeerConnectionEvent(l,"icecandidate",function(o){return o.candidate&&Object.defineProperty(o,"candidate",{value:new l.RTCIceCandidate(o.candidate),writable:"false"}),o})}},a.shimMaxMessageSize=function(l){if(l.RTCPeerConnection){var g=s.detectBrowser(l);"sctp"in l.RTCPeerConnection.prototype||Object.defineProperty(l.RTCPeerConnection.prototype,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp}});var o=function(y){return!y||!y.sdp?!1:(y=r.default.splitSections(y.sdp),y.shift(),y.some(function(S){return(S=r.default.parseMLine(S))&&S.kind==="application"&&S.protocol.indexOf("SCTP")!==-1}))},v=function(y){return y=y.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/),y===null||2>y.length?-1:(y=parseInt(y[1],10),y!==y?-1:y)},h=function(y){var S=65536;return g.browser==="firefox"&&(S=57>g.version?y===-1?16384:2147483637:60>g.version?g.version===57?65535:65536:2147483637),S},k=function(y,S){var x=65536;return g.browser==="firefox"&&g.version===57&&(x=65535),y=r.default.matchPrefix(y.sdp,"a=max-message-size:"),0<y.length?x=parseInt(y[0].substr(19),10):g.browser==="firefox"&&S!==-1&&(x=2147483637),x},_=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,g.browser==="chrome"&&76<=g.version&&this.getConfiguration().sdpSemantics==="plan-b"&&Object.defineProperty(this,"sctp",{get:function(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0}),o(arguments[0])){var y=v(arguments[0]),S=h(y);y=k(arguments[0],y);var x=void 0;x=S===0&&y===0?Number.POSITIVE_INFINITY:S===0||y===0?Math.max(S,y):Math.min(S,y),S={},Object.defineProperty(S,"maxMessageSize",{get:function(){return x}}),this._sctp=S}return _.apply(this,arguments)}}},a.shimSendThrowTypeError=function(l){function g(v,h){var k=v.send;v.send=function(){var _=arguments[0];if(_=_.length||_.size||_.byteLength,v.readyState==="open"&&h.sctp&&_>h.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+h.sctp.maxMessageSize+" bytes)");return k.apply(v,arguments)}}if(l.RTCPeerConnection&&"createDataChannel"in l.RTCPeerConnection.prototype){var o=l.RTCPeerConnection.prototype.createDataChannel;l.RTCPeerConnection.prototype.createDataChannel=function(){var v=o.apply(this,arguments);return g(v,this),v},s.wrapPeerConnectionEvent(l,"datachannel",function(v){return g(v.channel,v.target),v})}},a.shimConnectionState=function(l){if(l.RTCPeerConnection&&!("connectionState"in l.RTCPeerConnection.prototype)){var g=l.RTCPeerConnection.prototype;Object.defineProperty(g,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(g,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(o){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),o&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=o)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(function(o){var v=g[o];g[o]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(h){var k=h.target;if(k._lastConnectionState!==k.connectionState){k._lastConnectionState=k.connectionState;var _=new Event("connectionstatechange",h);k.dispatchEvent(_)}return h},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),v.apply(this,arguments)}})}},a.removeAllowExtmapMixed=function(l){if(l.RTCPeerConnection){var g=s.detectBrowser(l);if(!(g.browser==="chrome"&&71<=g.version)){var o=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(v){return v&&v.sdp&&v.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1&&(v.sdp=v.sdp.split(`
`).filter(function(h){return h.trim()!=="a=extmap-allow-mixed"}).join(`
`)),o.apply(this,arguments)}}}};var r=(u=t("sdp"))&&u.__esModule?u:{default:u},s=function(l){if(l&&l.__esModule)return l;var g={};if(l!=null)for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(g[o]=l[o]);return g.default=l,g}(t("./utils"))},{"./utils":15,sdp:17}],7:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),a.shimGetDisplayMedia=a.shimGetUserMedia=void 0;var c=t("./getusermedia");Object.defineProperty(a,"shimGetUserMedia",{enumerable:!0,get:function(){return c.shimGetUserMedia}});var r=t("./getdisplaymedia");Object.defineProperty(a,"shimGetDisplayMedia",{enumerable:!0,get:function(){return r.shimGetDisplayMedia}}),a.shimPeerConnection=function(o){var v=s.detectBrowser(o);if(o.RTCIceGatherer&&(o.RTCIceCandidate||(o.RTCIceCandidate=function(_){return _}),o.RTCSessionDescription||(o.RTCSessionDescription=function(_){return _}),15025>v.version)){var h=Object.getOwnPropertyDescriptor(o.MediaStreamTrack.prototype,"enabled");Object.defineProperty(o.MediaStreamTrack.prototype,"enabled",{set:function(_){h.set.call(this,_);var y=new Event("enabled");y.enabled=_,this.dispatchEvent(y)}})}!o.RTCRtpSender||"dtmf"in o.RTCRtpSender.prototype||Object.defineProperty(o.RTCRtpSender.prototype,"dtmf",{get:function(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new o.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),o.RTCDtmfSender&&!o.RTCDTMFSender&&(o.RTCDTMFSender=o.RTCDtmfSender);var k=(0,g.default)(o,v.version);o.RTCPeerConnection=function(_){return _&&_.iceServers&&(_.iceServers=(0,l.filterIceServers)(_.iceServers,v.version),s.log("ICE servers after filtering:",_.iceServers)),new k(_)},o.RTCPeerConnection.prototype=k.prototype},a.shimReplaceTrack=function(o){!o.RTCRtpSender||"replaceTrack"in o.RTCRtpSender.prototype||(o.RTCRtpSender.prototype.replaceTrack=o.RTCRtpSender.prototype.setTrack)};var s=function(o){if(o&&o.__esModule)return o;var v={};if(o!=null)for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(v[h]=o[h]);return v.default=o,v}(t("../utils")),l=t("./filtericeservers"),g=(t=t("rtcpeerconnection-shim"))&&t.__esModule?t:{default:t}},{"../utils":15,"./filtericeservers":8,"./getdisplaymedia":9,"./getusermedia":10,"rtcpeerconnection-shim":16}],8:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),a.filterIceServers=function(r,s){var l=!1;return r=JSON.parse(JSON.stringify(r)),r.filter(function(g){if(g&&(g.urls||g.url)){var o=g.urls||g.url;g.url&&!g.urls&&c.deprecated("RTCIceServer.url","RTCIceServer.urls");var v=typeof o=="string";return v&&(o=[o]),o=o.filter(function(h){return h.indexOf("stun:")===0?!1:(h=h.startsWith("turn")&&!h.startsWith("turn:[")&&h.includes("transport=udp"))&&!l?l=!0:h&&!l}),delete g.url,g.urls=v?o[0]:o,!!o.length}})};var c=function(r){if(r&&r.__esModule)return r;var s={};if(r!=null)for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l]);return s.default=r,s}(t("../utils"))},{"../utils":15}],9:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),a.shimGetDisplayMedia=function(c){"getDisplayMedia"in c.navigator&&c.navigator.mediaDevices&&!(c.navigator.mediaDevices&&"getDisplayMedia"in c.navigator.mediaDevices)&&(c.navigator.mediaDevices.getDisplayMedia=c.navigator.getDisplayMedia.bind(c.navigator))}},{}],10:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),a.shimGetUserMedia=function(c){c=c&&c.navigator;var r=function(l){return{name:{PermissionDeniedError:"NotAllowedError"}[l.name]||l.name,message:l.message,constraint:l.constraint,toString:function(){return this.name}}},s=c.mediaDevices.getUserMedia.bind(c.mediaDevices);c.mediaDevices.getUserMedia=function(l){return s(l).catch(function(g){return Promise.reject(r(g))})}}},{}],11:[function(t,u,a){function c(o,v,h){return v in o?Object.defineProperty(o,v,{value:h,enumerable:!0,configurable:!0,writable:!0}):o[v]=h,o}Object.defineProperty(a,"__esModule",{value:!0}),a.shimGetDisplayMedia=a.shimGetUserMedia=void 0,H.initSymbol(),H.initSymbol(),H.initSymbolIterator();var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return H.initSymbol(),H.initSymbol(),H.initSymbol(),o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},s=t("./getusermedia");Object.defineProperty(a,"shimGetUserMedia",{enumerable:!0,get:function(){return s.shimGetUserMedia}});var l=t("./getdisplaymedia");Object.defineProperty(a,"shimGetDisplayMedia",{enumerable:!0,get:function(){return l.shimGetDisplayMedia}}),a.shimOnTrack=function(o){(typeof o>"u"?"undefined":r(o))==="object"&&o.RTCTrackEvent&&"receiver"in o.RTCTrackEvent.prototype&&!("transceiver"in o.RTCTrackEvent.prototype)&&Object.defineProperty(o.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},a.shimPeerConnection=function(o){var v=g.detectBrowser(o);if((typeof o>"u"?"undefined":r(o))==="object"&&(o.RTCPeerConnection||o.mozRTCPeerConnection)){if(!o.RTCPeerConnection&&o.mozRTCPeerConnection&&(o.RTCPeerConnection=o.mozRTCPeerConnection),53>v.version&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(y){var S=o.RTCPeerConnection.prototype[y],x=c({},y,function(){return arguments[0]=new(y==="addIceCandidate"?o.RTCIceCandidate:o.RTCSessionDescription)(arguments[0]),S.apply(this,arguments)});o.RTCPeerConnection.prototype[y]=x[y]}),68>v.version){var h=o.RTCPeerConnection.prototype.addIceCandidate;o.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?arguments[0]&&arguments[0].candidate===""?Promise.resolve():h.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())}}var k={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},_=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(){var y=Array.prototype.slice.call(arguments),S=y[1],x=y[2];return _.apply(this,[y[0]||null]).then(function(D){if(53>v.version&&!S)try{D.forEach(function(E){E.type=k[E.type]||E.type})}catch(E){if(E.name!=="TypeError")throw E;D.forEach(function(I,p){D.set(p,Object.assign({},I,{type:k[I.type]||I.type}))})}return D}).then(S,x)}}},a.shimSenderGetStats=function(o){if((typeof o>"u"?"undefined":r(o))==="object"&&o.RTCPeerConnection&&o.RTCRtpSender&&!(o.RTCRtpSender&&"getStats"in o.RTCRtpSender.prototype)){var v=o.RTCPeerConnection.prototype.getSenders;v&&(o.RTCPeerConnection.prototype.getSenders=function(){var k=this,_=v.apply(this,[]);return _.forEach(function(y){return y._pc=k}),_});var h=o.RTCPeerConnection.prototype.addTrack;h&&(o.RTCPeerConnection.prototype.addTrack=function(){var k=h.apply(this,arguments);return k._pc=this,k}),o.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},a.shimReceiverGetStats=function(o){if((typeof o>"u"?"undefined":r(o))==="object"&&o.RTCPeerConnection&&o.RTCRtpSender&&!(o.RTCRtpSender&&"getStats"in o.RTCRtpReceiver.prototype)){var v=o.RTCPeerConnection.prototype.getReceivers;v&&(o.RTCPeerConnection.prototype.getReceivers=function(){var h=this,k=v.apply(this,[]);return k.forEach(function(_){return _._pc=h}),k}),g.wrapPeerConnectionEvent(o,"track",function(h){return h.receiver._pc=h.srcElement,h}),o.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},a.shimRemoveStream=function(o){!o.RTCPeerConnection||"removeStream"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.removeStream=function(v){var h=this;g.deprecated("removeStream","removeTrack"),this.getSenders().forEach(function(k){k.track&&v.getTracks().includes(k.track)&&h.removeTrack(k)})})},a.shimRTCDataChannel=function(o){o.DataChannel&&!o.RTCDataChannel&&(o.RTCDataChannel=o.DataChannel)};var g=function(o){if(o&&o.__esModule)return o;var v={};if(o!=null)for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(v[h]=o[h]);return v.default=o,v}(t("../utils"))},{"../utils":15,"./getdisplaymedia":12,"./getusermedia":13}],12:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),a.shimGetDisplayMedia=function(c,r){c.navigator.mediaDevices&&"getDisplayMedia"in c.navigator.mediaDevices||!c.navigator.mediaDevices||(c.navigator.mediaDevices.getDisplayMedia=function(s){return!s||!s.video?(s=new DOMException("getDisplayMedia without video constraints is undefined"),s.name="NotFoundError",s.code=8,Promise.reject(s)):(s.video===!0?s.video={mediaSource:r}:s.video.mediaSource=r,c.navigator.mediaDevices.getUserMedia(s))})}},{}],13:[function(t,u,a){Object.defineProperty(a,"__esModule",{value:!0}),H.initSymbol(),H.initSymbol(),H.initSymbolIterator();var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return H.initSymbol(),H.initSymbol(),H.initSymbol(),s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s};a.shimGetUserMedia=function(s){var l=r.detectBrowser(s),g=s&&s.navigator;if(s=s&&s.MediaStreamTrack,g.getUserMedia=function(_,y,S){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),g.mediaDevices.getUserMedia(_).then(y,S)},!(55<l.version&&"autoGainControl"in g.mediaDevices.getSupportedConstraints())){var o=function(_,y,S){y in _&&!(S in _)&&(_[S]=_[y],delete _[y])},v=g.mediaDevices.getUserMedia.bind(g.mediaDevices);if(g.mediaDevices.getUserMedia=function(_){return(typeof _>"u"?"undefined":c(_))==="object"&&c(_.audio)==="object"&&(_=JSON.parse(JSON.stringify(_)),o(_.audio,"autoGainControl","mozAutoGainControl"),o(_.audio,"noiseSuppression","mozNoiseSuppression")),v(_)},s&&s.prototype.getSettings){var h=s.prototype.getSettings;s.prototype.getSettings=function(){var _=h.apply(this,arguments);return o(_,"mozAutoGainControl","autoGainControl"),o(_,"mozNoiseSuppression","noiseSuppression"),_}}if(s&&s.prototype.applyConstraints){var k=s.prototype.applyConstraints;s.prototype.applyConstraints=function(_){return this.kind==="audio"&&(typeof _>"u"?"undefined":c(_))==="object"&&(_=JSON.parse(JSON.stringify(_)),o(_,"autoGainControl","mozAutoGainControl"),o(_,"noiseSuppression","mozNoiseSuppression")),k.apply(this,[_])}}}};var r=function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var g in s)Object.prototype.hasOwnProperty.call(s,g)&&(l[g]=s[g]);return l.default=s,l}(t("../utils"))},{"../utils":15}],14:[function(t,u,a){function c(l){return l&&l.video!==void 0?Object.assign({},l,{video:s.compactObject(l.video)}):l}Object.defineProperty(a,"__esModule",{value:!0}),H.initSymbol(),H.initSymbol(),H.initSymbolIterator();var r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return H.initSymbol(),H.initSymbol(),H.initSymbol(),l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l};a.shimLocalStreamsAPI=function(l){if((typeof l>"u"?"undefined":r(l))==="object"&&l.RTCPeerConnection){if("getLocalStreams"in l.RTCPeerConnection.prototype||(l.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in l.RTCPeerConnection.prototype)){var g=l.RTCPeerConnection.prototype.addTrack;l.RTCPeerConnection.prototype.addStream=function(o){var v=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(o)||this._localStreams.push(o),o.getAudioTracks().forEach(function(h){return g.call(v,h,o)}),o.getVideoTracks().forEach(function(h){return g.call(v,h,o)})},l.RTCPeerConnection.prototype.addTrack=function(o){var v=arguments[1];return v&&(this._localStreams?this._localStreams.includes(v)||this._localStreams.push(v):this._localStreams=[v]),g.apply(this,arguments)}}"removeStream"in l.RTCPeerConnection.prototype||(l.RTCPeerConnection.prototype.removeStream=function(o){var v=this;this._localStreams||(this._localStreams=[]);var h=this._localStreams.indexOf(o);if(h!==-1){this._localStreams.splice(h,1);var k=o.getTracks();this.getSenders().forEach(function(_){k.includes(_.track)&&v.removeTrack(_)})}})}},a.shimRemoteStreamsAPI=function(l){if((typeof l>"u"?"undefined":r(l))==="object"&&l.RTCPeerConnection&&("getRemoteStreams"in l.RTCPeerConnection.prototype||(l.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in l.RTCPeerConnection.prototype))){Object.defineProperty(l.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(o){var v=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=o),this.addEventListener("track",this._onaddstreampoly=function(h){h.streams.forEach(function(k){if(v._remoteStreams||(v._remoteStreams=[]),!v._remoteStreams.includes(k)){v._remoteStreams.push(k);var _=new Event("addstream");_.stream=k,v.dispatchEvent(_)}})})}});var g=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(){var o=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(v){v.streams.forEach(function(h){if(o._remoteStreams||(o._remoteStreams=[]),!(0<=o._remoteStreams.indexOf(h))){o._remoteStreams.push(h);var k=new Event("addstream");k.stream=h,o.dispatchEvent(k)}})}),g.apply(o,arguments)}}},a.shimCallbacksAPI=function(l){if((typeof l>"u"?"undefined":r(l))==="object"&&l.RTCPeerConnection){l=l.RTCPeerConnection.prototype;var g=l.createOffer,o=l.createAnswer,v=l.setLocalDescription,h=l.setRemoteDescription,k=l.addIceCandidate;l.createOffer=function(y,S){var x=g.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return S?(x.then(y,S),Promise.resolve()):x},l.createAnswer=function(y,S){var x=o.apply(this,[2<=arguments.length?arguments[2]:arguments[0]]);return S?(x.then(y,S),Promise.resolve()):x};var _=function(y,S,x){return y=v.apply(this,[y]),x?(y.then(S,x),Promise.resolve()):y};l.setLocalDescription=_,_=function(y,S,x){return y=h.apply(this,[y]),x?(y.then(S,x),Promise.resolve()):y},l.setRemoteDescription=_,_=function(y,S,x){return y=k.apply(this,[y]),x?(y.then(S,x),Promise.resolve()):y},l.addIceCandidate=_}},a.shimGetUserMedia=function(l){var g=l&&l.navigator;if(g.mediaDevices&&g.mediaDevices.getUserMedia){l=g.mediaDevices;var o=l.getUserMedia.bind(l);g.mediaDevices.getUserMedia=function(v){return o(c(v))}}!g.getUserMedia&&g.mediaDevices&&g.mediaDevices.getUserMedia&&(g.getUserMedia=function(v,h,k){g.mediaDevices.getUserMedia(v).then(h,k)})},a.shimConstraints=c,a.shimRTCIceServerUrls=function(l){var g=l.RTCPeerConnection;l.RTCPeerConnection=function(o,v){if(o&&o.iceServers){for(var h=[],k=0;k<o.iceServers.length;k++){var _=o.iceServers[k];!_.hasOwnProperty("urls")&&_.hasOwnProperty("url")?(s.deprecated("RTCIceServer.url","RTCIceServer.urls"),_=JSON.parse(JSON.stringify(_)),_.urls=_.url,delete _.url,h.push(_)):h.push(o.iceServers[k])}o.iceServers=h}return new g(o,v)},l.RTCPeerConnection.prototype=g.prototype,"generateCertificate"in l.RTCPeerConnection&&Object.defineProperty(l.RTCPeerConnection,"generateCertificate",{get:function(){return g.generateCertificate}})},a.shimTrackEventTransceiver=function(l){(typeof l>"u"?"undefined":r(l))==="object"&&l.RTCTrackEvent&&"receiver"in l.RTCTrackEvent.prototype&&!("transceiver"in l.RTCTrackEvent.prototype)&&Object.defineProperty(l.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},a.shimCreateOfferLegacy=function(l){var g=l.RTCPeerConnection.prototype.createOffer;l.RTCPeerConnection.prototype.createOffer=function(o){if(o){typeof o.offerToReceiveAudio<"u"&&(o.offerToReceiveAudio=!!o.offerToReceiveAudio);var v=this.getTransceivers().find(function(h){return h.receiver.track.kind==="audio"});o.offerToReceiveAudio===!1&&v?v.direction==="sendrecv"?v.setDirection?v.setDirection("sendonly"):v.direction="sendonly":v.direction==="recvonly"&&(v.setDirection?v.setDirection("inactive"):v.direction="inactive"):o.offerToReceiveAudio!==!0||v||this.addTransceiver("audio"),typeof o.offerToReceiveVideo<"u"&&(o.offerToReceiveVideo=!!o.offerToReceiveVideo),v=this.getTransceivers().find(function(h){return h.receiver.track.kind==="video"}),o.offerToReceiveVideo===!1&&v?v.direction==="sendrecv"?v.setDirection?v.setDirection("sendonly"):v.direction="sendonly":v.direction==="recvonly"&&(v.setDirection?v.setDirection("inactive"):v.direction="inactive"):o.offerToReceiveVideo!==!0||v||this.addTransceiver("video")}return g.apply(this,arguments)}};var s=function(l){if(l&&l.__esModule)return l;var g={};if(l!=null)for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(g[o]=l[o]);return g.default=l,g}(t("../utils"))},{"../utils":15}],15:[function(t,u,a){function c(h,k,_){return k in h?Object.defineProperty(h,k,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[k]=_,h}function r(h,k,_){return(h=h.match(k))&&h.length>=_&&parseInt(h[_],10)}function s(h){return Object.prototype.toString.call(h)!=="[object Object]"?h:Object.keys(h).reduce(function(k,_){var y=Object.prototype.toString.call(h[_])==="[object Object]",S=y?s(h[_]):h[_];return y=y&&!Object.keys(S).length,S===void 0||y?k:Object.assign(k,c({},_,S))},{})}function l(h,k,_){k&&!_.has(k.id)&&(_.set(k.id,k),Object.keys(k).forEach(function(y){y.endsWith("Id")?l(h,h.get(k[y]),_):y.endsWith("Ids")&&k[y].forEach(function(S){l(h,h.get(S),_)})}))}Object.defineProperty(a,"__esModule",{value:!0}),H.initSymbol(),H.initSymbol(),H.initSymbolIterator();var g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return H.initSymbol(),H.initSymbol(),H.initSymbol(),h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h};a.extractVersion=r,a.wrapPeerConnectionEvent=function(h,k,_){if(h.RTCPeerConnection){h=h.RTCPeerConnection.prototype;var y=h.addEventListener;h.addEventListener=function(x,D){if(x!==k)return y.apply(this,arguments);var E=function(I){(I=_(I))&&D(I)};return this._eventMap=this._eventMap||{},this._eventMap[D]=E,y.apply(this,[x,E])};var S=h.removeEventListener;h.removeEventListener=function(x,D){if(x!==k||!this._eventMap||!this._eventMap[D])return S.apply(this,arguments);var E=this._eventMap[D];return delete this._eventMap[D],S.apply(this,[x,E])},Object.defineProperty(h,"on"+k,{get:function(){return this["_on"+k]},set:function(x){this["_on"+k]&&(this.removeEventListener(k,this["_on"+k]),delete this["_on"+k]),x&&this.addEventListener(k,this["_on"+k]=x)},enumerable:!0,configurable:!0})}},a.disableLog=function(h){return typeof h!="boolean"?Error("Argument type: "+(typeof h>"u"?"undefined":g(h))+". Please use a boolean."):(o=h)?"adapter.js logging disabled":"adapter.js logging enabled"},a.disableWarnings=function(h){return typeof h!="boolean"?Error("Argument type: "+(typeof h>"u"?"undefined":g(h))+". Please use a boolean."):(v=!h,"adapter.js deprecation warnings "+(h?"disabled":"enabled"))},a.log=function(){(typeof window>"u"?"undefined":g(window))!=="object"||o||typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)},a.deprecated=function(h,k){v&&console.warn(h+" is deprecated, please use "+k+" instead.")},a.detectBrowser=function(h){var k=h.navigator,_={browser:null,version:null};return typeof h>"u"||!h.navigator?(_.browser="Not a browser.",_):(k.mozGetUserMedia?(_.browser="firefox",_.version=r(k.userAgent,/Firefox\/(\d+)\./,1)):k.webkitGetUserMedia||h.isSecureContext===!1&&h.webkitRTCPeerConnection&&!h.RTCIceGatherer?(_.browser="chrome",_.version=r(k.userAgent,/Chrom(e|ium)\/(\d+)\./,2)):k.mediaDevices&&k.userAgent.match(/Edge\/(\d+).(\d+)$/)?(_.browser="edge",_.version=r(k.userAgent,/Edge\/(\d+).(\d+)$/,2)):h.RTCPeerConnection&&k.userAgent.match(/AppleWebKit\/(\d+)\./)?(_.browser="safari",_.version=r(k.userAgent,/AppleWebKit\/(\d+)\./,1),_.supportsUnifiedPlan=h.RTCRtpTransceiver&&"currentDirection"in h.RTCRtpTransceiver.prototype):_.browser="Not a supported browser.",_)},a.compactObject=s,a.walkStats=l,a.filterStats=function(h,k,_){var y=_?"outbound-rtp":"inbound-rtp",S=new Map;if(k===null)return S;var x=[];return h.forEach(function(D){D.type==="track"&&D.trackIdentifier===k.id&&x.push(D)}),x.forEach(function(D){h.forEach(function(E){E.type===y&&E.trackId===D.id&&l(h,E,S)})}),S};var o=!0,v=!0},{}],16:[function(t,u,a){function c(h,k,_,y,S){return k=v.writeRtpDescription(h.kind,k),k+=v.writeIceParameters(h.iceGatherer.getLocalParameters()),k+=v.writeDtlsParameters(h.dtlsTransport.getLocalParameters(),_==="offer"?"actpass":S||"active"),k+="a=mid:"+h.mid+`\r
`,k=h.rtpSender&&h.rtpReceiver?k+`a=sendrecv\r
`:h.rtpSender?k+`a=sendonly\r
`:h.rtpReceiver?k+`a=recvonly\r
`:k+`a=inactive\r
`,h.rtpSender&&(_=h.rtpSender._initialTrackId||h.rtpSender.track.id,h.rtpSender._initialTrackId=_,y="msid:"+(y?y.id:"-")+" "+_+`\r
`,k=k+("a="+y)+("a=ssrc:"+h.sendEncodingParameters[0].ssrc+" "+y),h.sendEncodingParameters[0].rtx&&(k+="a=ssrc:"+h.sendEncodingParameters[0].rtx.ssrc+" "+y,k+="a=ssrc-group:FID "+h.sendEncodingParameters[0].ssrc+" "+h.sendEncodingParameters[0].rtx.ssrc+`\r
`)),k+="a=ssrc:"+h.sendEncodingParameters[0].ssrc+" cname:"+v.localCName+`\r
`,h.rtpSender&&h.sendEncodingParameters[0].rtx&&(k+="a=ssrc:"+h.sendEncodingParameters[0].rtx.ssrc+" cname:"+v.localCName+`\r
`),k}function r(h,k){var _=!1;return h=JSON.parse(JSON.stringify(h)),h.filter(function(y){if(y&&(y.urls||y.url)){var S=y.urls||y.url;y.url&&!y.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var x=typeof S=="string";return x&&(S=[S]),S=S.filter(function(D){return D.indexOf("turn:")!==0||D.indexOf("transport=udp")===-1||D.indexOf("turn:[")!==-1||_?D.indexOf("stun:")===0&&14393<=k&&D.indexOf("?transport=udp")===-1:_=!0}),delete y.url,y.urls=x?S[0]:S,!!S.length}})}function s(h,k){var _={codecs:[],headerExtensions:[],fecMechanisms:[]},y=function(x,D){x=parseInt(x,10);for(var E=0;E<D.length;E++)if(D[E].payloadType===x||D[E].preferredPayloadType===x)return D[E]},S=function(x,D,E,I){return x=y(x.parameters.apt,E),D=y(D.parameters.apt,I),x&&D&&x.name.toLowerCase()===D.name.toLowerCase()};return h.codecs.forEach(function(x){for(var D=0;D<k.codecs.length;D++){var E=k.codecs[D];if(x.name.toLowerCase()===E.name.toLowerCase()&&x.clockRate===E.clockRate&&(x.name.toLowerCase()!=="rtx"||!x.parameters||!E.parameters.apt||S(x,E,h.codecs,k.codecs))){E=JSON.parse(JSON.stringify(E)),E.numChannels=Math.min(x.numChannels,E.numChannels),_.codecs.push(E),E.rtcpFeedback=E.rtcpFeedback.filter(function(I){for(var p=0;p<x.rtcpFeedback.length;p++)if(x.rtcpFeedback[p].type===I.type&&x.rtcpFeedback[p].parameter===I.parameter)return!0;return!1});break}}}),h.headerExtensions.forEach(function(x){for(var D=0;D<k.headerExtensions.length;D++){var E=k.headerExtensions[D];if(x.uri===E.uri){_.headerExtensions.push(E);break}}}),_}function l(h,k,_){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[k][h].indexOf(_)!==-1}function g(h,k){var _=h.getRemoteCandidates().find(function(y){return k.foundation===y.foundation&&k.ip===y.ip&&k.port===y.port&&k.priority===y.priority&&k.protocol===y.protocol&&k.type===y.type});return _||h.addRemoteCandidate(k),!_}function o(h,k){return k=Error(k),k.name=h,k.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[h],k}var v=t("sdp");u.exports=function(h,k){function _(E,I){I.addTrack(E),I.dispatchEvent(new h.MediaStreamTrackEvent("addtrack",{track:E}))}function y(E,I){I.removeTrack(E),I.dispatchEvent(new h.MediaStreamTrackEvent("removetrack",{track:E}))}function S(E,I,p,B){var P=new Event("track");P.track=I,P.receiver=p,P.transceiver={receiver:p},P.streams=B,h.setTimeout(function(){E._dispatchEvent("track",P)})}var x=function(E){var I=this,p=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(P){I[P]=p[P].bind(p)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._remoteDescription=this._localDescription=null,this.signalingState="stable",this.iceGatheringState=this.connectionState=this.iceConnectionState="new",E=JSON.parse(JSON.stringify(E||{})),this.usingBundle=E.bundlePolicy==="max-bundle",E.rtcpMuxPolicy==="negotiate")throw o("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(E.rtcpMuxPolicy||(E.rtcpMuxPolicy="require"),E.iceTransportPolicy){case"all":case"relay":break;default:E.iceTransportPolicy="all"}switch(E.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:E.bundlePolicy="balanced"}if(E.iceServers=r(E.iceServers||[],k),this._iceGatherers=[],E.iceCandidatePoolSize)for(var B=E.iceCandidatePoolSize;0<B;B--)this._iceGatherers.push(new h.RTCIceGatherer({iceServers:E.iceServers,gatherPolicy:E.iceTransportPolicy}));else E.iceCandidatePoolSize=0;this._config=E,this.transceivers=[],this._sdpSessionId=v.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(x.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(x.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),x.prototype.onicecandidate=null,x.prototype.onaddstream=null,x.prototype.ontrack=null,x.prototype.onremovestream=null,x.prototype.onsignalingstatechange=null,x.prototype.oniceconnectionstatechange=null,x.prototype.onconnectionstatechange=null,x.prototype.onicegatheringstatechange=null,x.prototype.onnegotiationneeded=null,x.prototype.ondatachannel=null,x.prototype._dispatchEvent=function(E,I){!this._isClosed&&(this.dispatchEvent(I),typeof this["on"+E]=="function")&&this["on"+E](I)},x.prototype._emitGatheringStateChange=function(){var E=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",E)},x.prototype.getConfiguration=function(){return this._config},x.prototype.getLocalStreams=function(){return this.localStreams},x.prototype.getRemoteStreams=function(){return this.remoteStreams},x.prototype._createTransceiver=function(E,I){var p=0<this.transceivers.length;return E={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:E,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0},this.usingBundle&&p?(E.iceTransport=this.transceivers[0].iceTransport,E.dtlsTransport=this.transceivers[0].dtlsTransport):(p=this._createIceAndDtlsTransports(),E.iceTransport=p.iceTransport,E.dtlsTransport=p.dtlsTransport),I||this.transceivers.push(E),E},x.prototype.addTrack=function(E,I){if(this._isClosed)throw o("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");if(this.transceivers.find(function(P){return P.track===E}))throw o("InvalidAccessError","Track already exists.");for(var p,B=0;B<this.transceivers.length;B++)this.transceivers[B].track||this.transceivers[B].kind!==E.kind||(p=this.transceivers[B]);return p||(p=this._createTransceiver(E.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(I)===-1&&this.localStreams.push(I),p.track=E,p.stream=I,p.rtpSender=new h.RTCRtpSender(E,p.dtlsTransport),p.rtpSender},x.prototype.addStream=function(E){var I=this;if(15025<=k)E.getTracks().forEach(function(B){I.addTrack(B,E)});else{var p=E.clone();E.getTracks().forEach(function(B,P){var z=p.getTracks()[P];B.addEventListener("enabled",function(te){z.enabled=te.enabled})}),p.getTracks().forEach(function(B){I.addTrack(B,p)})}},x.prototype.removeTrack=function(E){if(this._isClosed)throw o("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(E instanceof h.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var I=this.transceivers.find(function(B){return B.rtpSender===E});if(!I)throw o("InvalidAccessError","Sender was not created by this connection.");var p=I.stream;I.rtpSender.stop(),I.rtpSender=null,I.track=null,I.stream=null,this.transceivers.map(function(B){return B.stream}).indexOf(p)===-1&&-1<this.localStreams.indexOf(p)&&this.localStreams.splice(this.localStreams.indexOf(p),1),this._maybeFireNegotiationNeeded()},x.prototype.removeStream=function(E){var I=this;E.getTracks().forEach(function(p){var B=I.getSenders().find(function(P){return P.track===p});B&&I.removeTrack(B)})},x.prototype.getSenders=function(){return this.transceivers.filter(function(E){return!!E.rtpSender}).map(function(E){return E.rtpSender})},x.prototype.getReceivers=function(){return this.transceivers.filter(function(E){return!!E.rtpReceiver}).map(function(E){return E.rtpReceiver})},x.prototype._createIceGatherer=function(E,I){var p=this;if(I&&0<E)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var B=new h.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(B,"state",{value:"new",writable:!0}),this.transceivers[E].bufferedCandidateEvents=[],this.transceivers[E].bufferCandidates=function(P){var z=!P.candidate||Object.keys(P.candidate).length===0;B.state=z?"completed":"gathering",p.transceivers[E].bufferedCandidateEvents!==null&&p.transceivers[E].bufferedCandidateEvents.push(P)},B.addEventListener("localcandidate",this.transceivers[E].bufferCandidates),B},x.prototype._gather=function(E,I){var p=this,B=this.transceivers[I].iceGatherer;if(!B.onlocalcandidate){var P=this.transceivers[I].bufferedCandidateEvents;this.transceivers[I].bufferedCandidateEvents=null,B.removeEventListener("localcandidate",this.transceivers[I].bufferCandidates),B.onlocalcandidate=function(z){if(!(p.usingBundle&&0<I)){var te=new Event("icecandidate");te.candidate={sdpMid:E,sdpMLineIndex:I};var W=z.candidate;(z=!W||Object.keys(W).length===0)?(B.state==="new"||B.state==="gathering")&&(B.state="completed"):(B.state==="new"&&(B.state="gathering"),W.component=1,W.ufrag=B.getLocalParameters().usernameFragment,W=v.writeCandidate(W),te.candidate=Object.assign(te.candidate,v.parseCandidate(W)),te.candidate.candidate=W,te.candidate.toJSON=function(){return{candidate:te.candidate.candidate,sdpMid:te.candidate.sdpMid,sdpMLineIndex:te.candidate.sdpMLineIndex,usernameFragment:te.candidate.usernameFragment}}),W=v.getMediaSections(p._localDescription.sdp),W[te.candidate.sdpMLineIndex]=z?W[te.candidate.sdpMLineIndex]+`a=end-of-candidates\r
`:W[te.candidate.sdpMLineIndex]+("a="+te.candidate.candidate+`\r
`),p._localDescription.sdp=v.getDescription(p._localDescription.sdp)+W.join(""),W=p.transceivers.every(function(K){return K.iceGatherer&&K.iceGatherer.state==="completed"}),p.iceGatheringState!=="gathering"&&(p.iceGatheringState="gathering",p._emitGatheringStateChange()),z||p._dispatchEvent("icecandidate",te),W&&(p._dispatchEvent("icecandidate",new Event("icecandidate")),p.iceGatheringState="complete",p._emitGatheringStateChange())}},h.setTimeout(function(){P.forEach(function(z){B.onlocalcandidate(z)})},0)}},x.prototype._createIceAndDtlsTransports=function(){var E=this,I=new h.RTCIceTransport(null);I.onicestatechange=function(){E._updateIceConnectionState(),E._updateConnectionState()};var p=new h.RTCDtlsTransport(I);return p.ondtlsstatechange=function(){E._updateConnectionState()},p.onerror=function(){Object.defineProperty(p,"state",{value:"failed",writable:!0}),E._updateConnectionState()},{iceTransport:I,dtlsTransport:p}},x.prototype._disposeIceAndDtlsTransports=function(E){var I=this.transceivers[E].iceGatherer;I&&(delete I.onlocalcandidate,delete this.transceivers[E].iceGatherer),(I=this.transceivers[E].iceTransport)&&(delete I.onicestatechange,delete this.transceivers[E].iceTransport),(I=this.transceivers[E].dtlsTransport)&&(delete I.ondtlsstatechange,delete I.onerror,delete this.transceivers[E].dtlsTransport)},x.prototype._transceive=function(E,I,p){var B=s(E.localCapabilities,E.remoteCapabilities);I&&E.rtpSender&&(B.encodings=E.sendEncodingParameters,B.rtcp={cname:v.localCName,compound:E.rtcpParameters.compound},E.recvEncodingParameters.length&&(B.rtcp.ssrc=E.recvEncodingParameters[0].ssrc),E.rtpSender.send(B)),p&&E.rtpReceiver&&0<B.codecs.length&&(E.kind==="video"&&E.recvEncodingParameters&&15019>k&&E.recvEncodingParameters.forEach(function(P){delete P.rtx}),B.encodings=E.recvEncodingParameters.length?E.recvEncodingParameters:[{}],B.rtcp={compound:E.rtcpParameters.compound},E.rtcpParameters.cname&&(B.rtcp.cname=E.rtcpParameters.cname),E.sendEncodingParameters.length&&(B.rtcp.ssrc=E.sendEncodingParameters[0].ssrc),E.rtpReceiver.receive(B))},x.prototype.setLocalDescription=function(E){var I=this;if(["offer","answer"].indexOf(E.type)===-1)return Promise.reject(o("TypeError",'Unsupported type "'+E.type+'"'));if(!l("setLocalDescription",E.type,I.signalingState)||I._isClosed)return Promise.reject(o("InvalidStateError","Can not set local "+E.type+" in state "+I.signalingState));if(E.type==="offer"){var p=v.splitSections(E.sdp),B=p.shift();p.forEach(function(z,te){z=v.parseRtpParameters(z),I.transceivers[te].localCapabilities=z}),I.transceivers.forEach(function(z,te){I._gather(z.mid,te)})}else if(E.type==="answer"){p=v.splitSections(I._remoteDescription.sdp),B=p.shift();var P=0<v.matchPrefix(B,"a=ice-lite").length;p.forEach(function(z,te){var W=I.transceivers[te],K=W.iceGatherer,re=W.iceTransport,f=W.dtlsTransport,ae=W.localCapabilities,ce=W.remoteCapabilities;if(!(v.isRejected(z)&&v.matchPrefix(z,"a=bundle-only").length===0||W.rejected)){var he=v.getIceParameters(z,B);z=v.getDtlsParameters(z,B),P&&(z.role="server"),I.usingBundle&&te!==0||(I._gather(W.mid,te),re.state==="new"&&re.start(K,he,P?"controlling":"controlled"),f.state==="new"&&f.start(z)),te=s(ae,ce),I._transceive(W,0<te.codecs.length,!1)}})}return I._localDescription={type:E.type,sdp:E.sdp},E.type==="offer"?I._updateSignalingState("have-local-offer"):I._updateSignalingState("stable"),Promise.resolve()},x.prototype.setRemoteDescription=function(E){var I=this;if(["offer","answer"].indexOf(E.type)===-1)return Promise.reject(o("TypeError",'Unsupported type "'+E.type+'"'));if(!l("setRemoteDescription",E.type,I.signalingState)||I._isClosed)return Promise.reject(o("InvalidStateError","Can not set remote "+E.type+" in state "+I.signalingState));var p={};I.remoteStreams.forEach(function(re){p[re.id]=re});var B=[],P=v.splitSections(E.sdp),z=P.shift(),te=0<v.matchPrefix(z,"a=ice-lite").length,W=0<v.matchPrefix(z,"a=group:BUNDLE ").length;I.usingBundle=W;var K=v.matchPrefix(z,"a=ice-options:")[0];return I.canTrickleIceCandidates=K?0<=K.substr(14).split(" ").indexOf("trickle"):!1,P.forEach(function(re,f){var ae=v.splitLines(re),ce=v.getKind(re),he=v.isRejected(re)&&v.matchPrefix(re,"a=bundle-only").length===0,ye=ae[0].substr(2).split(" ")[2];ae=v.getDirection(re,z);var R=v.parseMsid(re),O=v.getMid(re)||v.generateIdentifier();if(he||ce==="application"&&(ye==="DTLS/SCTP"||ye==="UDP/DTLS/SCTP"))I.transceivers[f]={mid:O,kind:ce,protocol:ye,rejected:!0};else{!he&&I.transceivers[f]&&I.transceivers[f].rejected&&(I.transceivers[f]=I._createTransceiver(ce,!0));var j=v.parseRtpParameters(re);if(!he){var J=v.getIceParameters(re,z),q=v.getDtlsParameters(re,z);q.role="client"}ye=v.parseRtpEncodingParameters(re);var se=v.parseRtcpParameters(re),_e=0<v.matchPrefix(re,"a=end-of-candidates",z).length,Se=v.matchPrefix(re,"a=candidate:").map(function(Me){return v.parseCandidate(Me)}).filter(function(Me){return Me.component===1});if((E.type==="offer"||E.type==="answer")&&!he&&W&&0<f&&I.transceivers[f]&&(I._disposeIceAndDtlsTransports(f),I.transceivers[f].iceGatherer=I.transceivers[0].iceGatherer,I.transceivers[f].iceTransport=I.transceivers[0].iceTransport,I.transceivers[f].dtlsTransport=I.transceivers[0].dtlsTransport,I.transceivers[f].rtpSender&&I.transceivers[f].rtpSender.setTransport(I.transceivers[0].dtlsTransport),I.transceivers[f].rtpReceiver&&I.transceivers[f].rtpReceiver.setTransport(I.transceivers[0].dtlsTransport)),E.type!=="offer"||he)E.type!=="answer"||he||(ve=I.transceivers[f],xe=ve.iceGatherer,ce=ve.iceTransport,O=ve.dtlsTransport,we=ve.rtpReceiver,he=ve.sendEncodingParameters,re=ve.localCapabilities,I.transceivers[f].recvEncodingParameters=ye,I.transceivers[f].remoteCapabilities=j,I.transceivers[f].rtcpParameters=se,Se.length&&ce.state==="new"&&(!te&&!_e||W&&f!==0?Se.forEach(function(Me){g(ve.iceTransport,Me)}):ce.setRemoteCandidates(Se)),W&&f!==0||(ce.state==="new"&&ce.start(xe,J,"controlling"),O.state==="new"&&O.start(q)),!s(ve.localCapabilities,ve.remoteCapabilities).codecs.filter(function(Me){return Me.name.toLowerCase()==="rtx"}).length&&ve.sendEncodingParameters[0].rtx&&delete ve.sendEncodingParameters[0].rtx,I._transceive(ve,ae==="sendrecv"||ae==="recvonly",ae==="sendrecv"||ae==="sendonly"),!we||ae!=="sendrecv"&&ae!=="sendonly"?delete ve.rtpReceiver:(ae=we.track,R?(p[R.stream]||(p[R.stream]=new h.MediaStream),_(ae,p[R.stream]),B.push([ae,we,p[R.stream]])):(p.default||(p.default=new h.MediaStream),_(ae,p.default),B.push([ae,we,p.default]))));else{var ve=I.transceivers[f]||I._createTransceiver(ce);if(ve.mid=O,ve.iceGatherer||(ve.iceGatherer=I._createIceGatherer(f,W)),Se.length&&ve.iceTransport.state==="new"&&(!_e||W&&f!==0?Se.forEach(function(Me){g(ve.iceTransport,Me)}):ve.iceTransport.setRemoteCandidates(Se)),re=h.RTCRtpReceiver.getCapabilities(ce),15019>k&&(re.codecs=re.codecs.filter(function(Me){return Me.name!=="rtx"})),he=ve.sendEncodingParameters||[{ssrc:1001*(2*f+2)}],J=!1,ae==="sendrecv"||ae==="sendonly"){J=!ve.rtpReceiver;var we=ve.rtpReceiver||new h.RTCRtpReceiver(ve.dtlsTransport,ce);if(J){if(ae=we.track,!R||R.stream!=="-")if(R){p[R.stream]||(p[R.stream]=new h.MediaStream,Object.defineProperty(p[R.stream],"id",{get:function(){return R.stream}})),Object.defineProperty(ae,"id",{get:function(){return R.track}});var xe=p[R.stream]}else p.default||(p.default=new h.MediaStream),xe=p.default;xe&&(_(ae,xe),ve.associatedRemoteMediaStreams.push(xe)),B.push([ae,we,xe])}}else ve.rtpReceiver&&ve.rtpReceiver.track&&(ve.associatedRemoteMediaStreams.forEach(function(Me){var de=Me.getTracks().find(function(X){return X.id===ve.rtpReceiver.track.id});de&&y(de,Me)}),ve.associatedRemoteMediaStreams=[]);ve.localCapabilities=re,ve.remoteCapabilities=j,ve.rtpReceiver=we,ve.rtcpParameters=se,ve.sendEncodingParameters=he,ve.recvEncodingParameters=ye,I._transceive(I.transceivers[f],!1,J)}}}),I._dtlsRole===void 0&&(I._dtlsRole=E.type==="offer"?"active":"passive"),I._remoteDescription={type:E.type,sdp:E.sdp},E.type==="offer"?I._updateSignalingState("have-remote-offer"):I._updateSignalingState("stable"),Object.keys(p).forEach(function(re){var f=p[re];if(f.getTracks().length){if(I.remoteStreams.indexOf(f)===-1){I.remoteStreams.push(f);var ae=new Event("addstream");ae.stream=f,h.setTimeout(function(){I._dispatchEvent("addstream",ae)})}B.forEach(function(ce){f.id===ce[2].id&&S(I,ce[0],ce[1],[f])})}}),B.forEach(function(re){re[2]||S(I,re[0],re[1],[])}),h.setTimeout(function(){I&&I.transceivers&&I.transceivers.forEach(function(re){re.iceTransport&&re.iceTransport.state==="new"&&0<re.iceTransport.getRemoteCandidates().length&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),re.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},x.prototype.close=function(){this.transceivers.forEach(function(E){E.iceTransport&&E.iceTransport.stop(),E.dtlsTransport&&E.dtlsTransport.stop(),E.rtpSender&&E.rtpSender.stop(),E.rtpReceiver&&E.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},x.prototype._updateSignalingState=function(E){this.signalingState=E,E=new Event("signalingstatechange"),this._dispatchEvent("signalingstatechange",E)},x.prototype._maybeFireNegotiationNeeded=function(){var E=this;this.signalingState==="stable"&&this.needNegotiation!==!0&&(this.needNegotiation=!0,h.setTimeout(function(){if(E.needNegotiation){E.needNegotiation=!1;var I=new Event("negotiationneeded");E._dispatchEvent("negotiationneeded",I)}},0))},x.prototype._updateIceConnectionState=function(){var E={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(p){p.iceTransport&&!p.rejected&&E[p.iceTransport.state]++});var I="new";0<E.failed?I="failed":0<E.checking?I="checking":0<E.disconnected?I="disconnected":0<E.new?I="new":0<E.connected?I="connected":0<E.completed&&(I="completed"),I!==this.iceConnectionState&&(this.iceConnectionState=I,I=new Event("iceconnectionstatechange"),this._dispatchEvent("iceconnectionstatechange",I))},x.prototype._updateConnectionState=function(){var E={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};this.transceivers.forEach(function(p){p.iceTransport&&p.dtlsTransport&&!p.rejected&&(E[p.iceTransport.state]++,E[p.dtlsTransport.state]++)}),E.connected+=E.completed;var I="new";0<E.failed?I="failed":0<E.connecting?I="connecting":0<E.disconnected?I="disconnected":0<E.new?I="new":0<E.connected&&(I="connected"),I!==this.connectionState&&(this.connectionState=I,I=new Event("connectionstatechange"),this._dispatchEvent("connectionstatechange",I))},x.prototype.createOffer=function(E){var I=this;if(I._isClosed)return Promise.reject(o("InvalidStateError","Can not call createOffer after close"));var p=I.transceivers.filter(function(z){return z.kind==="audio"}).length,B=I.transceivers.filter(function(z){return z.kind==="video"}).length;if(E){if(E.mandatory||E.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");E.offerToReceiveAudio!==void 0&&(p=E.offerToReceiveAudio===!0?1:E.offerToReceiveAudio===!1?0:E.offerToReceiveAudio),E.offerToReceiveVideo!==void 0&&(B=E.offerToReceiveVideo===!0?1:E.offerToReceiveVideo===!1?0:E.offerToReceiveVideo)}for(I.transceivers.forEach(function(z){z.kind==="audio"?(p--,0>p&&(z.wantReceive=!1)):z.kind==="video"&&(B--,0>B&&(z.wantReceive=!1))});0<p||0<B;)0<p&&(I._createTransceiver("audio"),p--),0<B&&(I._createTransceiver("video"),B--);var P=v.writeSessionBoilerplate(I._sdpSessionId,I._sdpSessionVersion++);return I.transceivers.forEach(function(z,te){var W=z.track,K=z.kind,re=z.mid||v.generateIdentifier();z.mid=re,z.iceGatherer||(z.iceGatherer=I._createIceGatherer(te,I.usingBundle)),re=h.RTCRtpSender.getCapabilities(K),15019>k&&(re.codecs=re.codecs.filter(function(f){return f.name!=="rtx"})),re.codecs.forEach(function(f){f.name==="H264"&&f.parameters["level-asymmetry-allowed"]===void 0&&(f.parameters["level-asymmetry-allowed"]="1"),z.remoteCapabilities&&z.remoteCapabilities.codecs&&z.remoteCapabilities.codecs.forEach(function(ae){f.name.toLowerCase()===ae.name.toLowerCase()&&f.clockRate===ae.clockRate&&(f.preferredPayloadType=ae.payloadType)})}),re.headerExtensions.forEach(function(f){(z.remoteCapabilities&&z.remoteCapabilities.headerExtensions||[]).forEach(function(ae){f.uri===ae.uri&&(f.id=ae.id)})}),te=z.sendEncodingParameters||[{ssrc:1001*(2*te+1)}],W&&15019<=k&&K==="video"&&!te[0].rtx&&(te[0].rtx={ssrc:te[0].ssrc+1}),z.wantReceive&&(z.rtpReceiver=new h.RTCRtpReceiver(z.dtlsTransport,K)),z.localCapabilities=re,z.sendEncodingParameters=te}),I._config.bundlePolicy!=="max-compat"&&(P+="a=group:BUNDLE "+I.transceivers.map(function(z){return z.mid}).join(" ")+`\r
`),P+=`a=ice-options:trickle\r
`,I.transceivers.forEach(function(z,te){P+=c(z,z.localCapabilities,"offer",z.stream,I._dtlsRole),P+=`a=rtcp-rsize\r
`,!z.iceGatherer||I.iceGatheringState==="new"||te!==0&&I.usingBundle||(z.iceGatherer.getLocalCandidates().forEach(function(W){W.component=1,P+="a="+v.writeCandidate(W)+`\r
`}),z.iceGatherer.state==="completed"&&(P+=`a=end-of-candidates\r
`))}),E=new h.RTCSessionDescription({type:"offer",sdp:P}),Promise.resolve(E)},x.prototype.createAnswer=function(){var E=this;if(E._isClosed)return Promise.reject(o("InvalidStateError","Can not call createAnswer after close"));if(E.signalingState!=="have-remote-offer"&&E.signalingState!=="have-local-pranswer")return Promise.reject(o("InvalidStateError","Can not call createAnswer in signalingState "+E.signalingState));var I=v.writeSessionBoilerplate(E._sdpSessionId,E._sdpSessionVersion++);E.usingBundle&&(I+="a=group:BUNDLE "+E.transceivers.map(function(P){return P.mid}).join(" ")+`\r
`),I+=`a=ice-options:trickle\r
`;var p=v.getMediaSections(E._remoteDescription.sdp).length;E.transceivers.forEach(function(P,z){if(!(z+1>p))if(P.rejected)P.kind==="application"?I=P.protocol==="DTLS/SCTP"?I+`m=application 0 DTLS/SCTP 5000\r
`:I+("m=application 0 "+P.protocol+` webrtc-datachannel\r
`):P.kind==="audio"?I+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:P.kind==="video"&&(I+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),I+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+P.mid+`\r
`;else{if(P.stream){var te;P.kind==="audio"?te=P.stream.getAudioTracks()[0]:P.kind==="video"&&(te=P.stream.getVideoTracks()[0]),te&&15019<=k&&P.kind==="video"&&!P.sendEncodingParameters[0].rtx&&(P.sendEncodingParameters[0].rtx={ssrc:P.sendEncodingParameters[0].ssrc+1})}z=s(P.localCapabilities,P.remoteCapabilities),!z.codecs.filter(function(W){return W.name.toLowerCase()==="rtx"}).length&&P.sendEncodingParameters[0].rtx&&delete P.sendEncodingParameters[0].rtx,I+=c(P,z,"answer",P.stream,E._dtlsRole),P.rtcpParameters&&P.rtcpParameters.reducedSize&&(I+=`a=rtcp-rsize\r
`)}});var B=new h.RTCSessionDescription({type:"answer",sdp:I});return Promise.resolve(B)},x.prototype.addIceCandidate=function(E){var I=this,p;return E&&E.sdpMLineIndex===void 0&&!E.sdpMid?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(B,P){if(I._remoteDescription)if(E&&E.candidate!==""){var z=E.sdpMLineIndex;if(E.sdpMid){for(var te=0;te<I.transceivers.length;te++)if(I.transceivers[te].mid===E.sdpMid){z=te;break}}var W=I.transceivers[z];if(W){if(W.rejected||(te=0<Object.keys(E.candidate).length?v.parseCandidate(E.candidate):{},te.protocol==="tcp"&&(te.port===0||te.port===9)||te.component&&te.component!==1))return B();if((z===0||0<z&&W.iceTransport!==I.transceivers[0].iceTransport)&&!g(W.iceTransport,te))return P(o("OperationError","Can not add ICE candidate"));P=E.candidate.trim(),P.indexOf("a=")===0&&(P=P.substr(2)),p=v.getMediaSections(I._remoteDescription.sdp),p[z]+="a="+(te.type?P:"end-of-candidates")+`\r
`,I._remoteDescription.sdp=v.getDescription(I._remoteDescription.sdp)+p.join("")}else return P(o("OperationError","Can not add ICE candidate"))}else for(z=0;z<I.transceivers.length&&(I.transceivers[z].rejected||(I.transceivers[z].iceTransport.addRemoteCandidate({}),p=v.getMediaSections(I._remoteDescription.sdp),p[z]+=`a=end-of-candidates\r
`,I._remoteDescription.sdp=v.getDescription(I._remoteDescription.sdp)+p.join(""),!I.usingBundle));z++);else return P(o("InvalidStateError","Can not add ICE candidate without a remote description"));B()})},x.prototype.getStats=function(E){if(E&&E instanceof h.MediaStreamTrack){var I=null;if(this.transceivers.forEach(function(B){B.rtpSender&&B.rtpSender.track===E?I=B.rtpSender:B.rtpReceiver&&B.rtpReceiver.track===E&&(I=B.rtpReceiver)}),!I)throw o("InvalidAccessError","Invalid selector.");return I.getStats()}var p=[];return this.transceivers.forEach(function(B){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(P){B[P]&&p.push(B[P].getStats())})}),Promise.all(p).then(function(B){var P=new Map;return B.forEach(function(z){z.forEach(function(te){P.set(te.id,te)})}),P})},["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"].forEach(function(E){if((E=h[E])&&E.prototype&&E.prototype.getStats){var I=E.prototype.getStats;E.prototype.getStats=function(){return I.apply(this).then(function(p){var B=new Map;return Object.keys(p).forEach(function(P){var z=p[P];p[P].type={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[z.type]||z.type,B.set(P,p[P])}),B})}}});var D=["createOffer","createAnswer"];return D.forEach(function(E){var I=x.prototype[E];x.prototype[E]=function(){var p=arguments;return typeof p[0]=="function"||typeof p[1]=="function"?I.apply(this,[arguments[2]]).then(function(B){typeof p[0]=="function"&&p[0].apply(null,[B])},function(B){typeof p[1]=="function"&&p[1].apply(null,[B])}):I.apply(this,arguments)}}),D=["setLocalDescription","setRemoteDescription","addIceCandidate"],D.forEach(function(E){var I=x.prototype[E];x.prototype[E]=function(){var p=arguments;return typeof p[1]=="function"||typeof p[2]=="function"?I.apply(this,arguments).then(function(){typeof p[1]=="function"&&p[1].apply(null)},function(B){typeof p[2]=="function"&&p[2].apply(null,[B])}):I.apply(this,arguments)}}),["getStats"].forEach(function(E){var I=x.prototype[E];x.prototype[E]=function(){var p=arguments;return typeof p[1]=="function"?I.apply(this,arguments).then(function(){typeof p[1]=="function"&&p[1].apply(null)}):I.apply(this,arguments)}}),x}},{sdp:17}],17:[function(t,u,a){var c={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};c.localCName=c.generateIdentifier(),c.splitLines=function(r){return r.trim().split(`
`).map(function(s){return s.trim()})},c.splitSections=function(r){return r.split(`
m=`).map(function(s,l){return(0<l?"m="+s:s).trim()+`\r
`})},c.getDescription=function(r){return(r=c.splitSections(r))&&r[0]},c.getMediaSections=function(r){return r=c.splitSections(r),r.shift(),r},c.matchPrefix=function(r,s){return c.splitLines(r).filter(function(l){return l.indexOf(s)===0})},c.parseCandidate=function(r){r=r.indexOf("a=candidate:")===0?r.substring(12).split(" "):r.substring(10).split(" ");for(var s={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},l=8;l<r.length;l+=2)switch(r[l]){case"raddr":s.relatedAddress=r[l+1];break;case"rport":s.relatedPort=parseInt(r[l+1],10);break;case"tcptype":s.tcpType=r[l+1];break;case"ufrag":s.ufrag=r[l+1],s.usernameFragment=r[l+1];break;default:s[r[l]]=r[l+1]}return s},c.writeCandidate=function(r){var s=[];s.push(r.foundation),s.push(r.component),s.push(r.protocol.toUpperCase()),s.push(r.priority),s.push(r.address||r.ip),s.push(r.port);var l=r.type;return s.push("typ"),s.push(l),l!=="host"&&r.relatedAddress&&r.relatedPort&&(s.push("raddr"),s.push(r.relatedAddress),s.push("rport"),s.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(s.push("tcptype"),s.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(s.push("ufrag"),s.push(r.usernameFragment||r.ufrag)),"candidate:"+s.join(" ")},c.parseIceOptions=function(r){return r.substr(14).split(" ")},c.parseRtpMap=function(r){r=r.substr(9).split(" ");var s={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),s.name=r[0],s.clockRate=parseInt(r[1],10),s.channels=r.length===3?parseInt(r[2],10):1,s.numChannels=s.channels,s},c.writeRtpMap=function(r){var s=r.payloadType;r.preferredPayloadType!==void 0&&(s=r.preferredPayloadType);var l=r.channels||r.numChannels||1;return"a=rtpmap:"+s+" "+r.name+"/"+r.clockRate+(l!==1?"/"+l:"")+`\r
`},c.parseExtmap=function(r){return r=r.substr(9).split(" "),{id:parseInt(r[0],10),direction:0<r[0].indexOf("/")?r[0].split("/")[1]:"sendrecv",uri:r[1]}},c.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+`\r
`},c.parseFmtp=function(r){for(var s={},l=r.substr(r.indexOf(" ")+1).split(";"),g=0;g<l.length;g++)r=l[g].trim().split("="),s[r[0].trim()]=r[1];return s},c.writeFmtp=function(r){var s="",l=r.payloadType;if(r.preferredPayloadType!==void 0&&(l=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){var g=[];Object.keys(r.parameters).forEach(function(o){r.parameters[o]?g.push(o+"="+r.parameters[o]):g.push(o)}),s+="a=fmtp:"+l+" "+g.join(";")+`\r
`}return s},c.parseRtcpFb=function(r){return r=r.substr(r.indexOf(" ")+1).split(" "),{type:r.shift(),parameter:r.join(" ")}},c.writeRtcpFb=function(r){var s="",l=r.payloadType;return r.preferredPayloadType!==void 0&&(l=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(function(g){s+="a=rtcp-fb:"+l+" "+g.type+(g.parameter&&g.parameter.length?" "+g.parameter:"")+`\r
`}),s},c.parseSsrcMedia=function(r){var s=r.indexOf(" "),l={ssrc:parseInt(r.substr(7,s-7),10)},g=r.indexOf(":",s);return-1<g?(l.attribute=r.substr(s+1,g-s-1),l.value=r.substr(g+1)):l.attribute=r.substr(s+1),l},c.parseSsrcGroup=function(r){return r=r.substr(13).split(" "),{semantics:r.shift(),ssrcs:r.map(function(s){return parseInt(s,10)})}},c.getMid=function(r){if(r=c.matchPrefix(r,"a=mid:")[0])return r.substr(6)},c.parseFingerprint=function(r){return r=r.substr(14).split(" "),{algorithm:r[0].toLowerCase(),value:r[1]}},c.getDtlsParameters=function(r,s){return{role:"auto",fingerprints:c.matchPrefix(r+s,"a=fingerprint:").map(c.parseFingerprint)}},c.writeDtlsParameters=function(r,s){var l="a=setup:"+s+`\r
`;return r.fingerprints.forEach(function(g){l+="a=fingerprint:"+g.algorithm+" "+g.value+`\r
`}),l},c.getIceParameters=function(r,s){return r=c.splitLines(r),r=r.concat(c.splitLines(s)),{usernameFragment:r.filter(function(l){return l.indexOf("a=ice-ufrag:")===0})[0].substr(12),password:r.filter(function(l){return l.indexOf("a=ice-pwd:")===0})[0].substr(10)}},c.writeIceParameters=function(r){return"a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+(r.password+`\r
`)},c.parseRtpParameters=function(r){for(var s={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},l=c.splitLines(r)[0].split(" "),g=3;g<l.length;g++){var o=l[g],v=c.matchPrefix(r,"a=rtpmap:"+o+" ")[0];if(v){v=c.parseRtpMap(v);var h=c.matchPrefix(r,"a=fmtp:"+o+" ");switch(v.parameters=h.length?c.parseFmtp(h[0]):{},v.rtcpFeedback=c.matchPrefix(r,"a=rtcp-fb:"+o+" ").map(c.parseRtcpFb),s.codecs.push(v),v.name.toUpperCase()){case"RED":case"ULPFEC":s.fecMechanisms.push(v.name.toUpperCase())}}}return c.matchPrefix(r,"a=extmap:").forEach(function(k){s.headerExtensions.push(c.parseExtmap(k))}),s},c.writeRtpDescription=function(r,s){var l="";l+="m="+r+" ",l+=0<s.codecs.length?"9":"0",l+=" UDP/TLS/RTP/SAVPF ",l+=s.codecs.map(function(o){return o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType}).join(" ")+`\r
`,l+=`c=IN IP4 0.0.0.0\r
`,l+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,s.codecs.forEach(function(o){l+=c.writeRtpMap(o),l+=c.writeFmtp(o),l+=c.writeRtcpFb(o)});var g=0;return s.codecs.forEach(function(o){o.maxptime>g&&(g=o.maxptime)}),0<g&&(l+="a=maxptime:"+g+`\r
`),l+=`a=rtcp-mux\r
`,s.headerExtensions&&s.headerExtensions.forEach(function(o){l+=c.writeExtmap(o)}),l},c.parseRtpEncodingParameters=function(r){var s=[],l=c.parseRtpParameters(r),g=l.fecMechanisms.indexOf("RED")!==-1,o=l.fecMechanisms.indexOf("ULPFEC")!==-1,v=c.matchPrefix(r,"a=ssrc:").map(function(y){return c.parseSsrcMedia(y)}).filter(function(y){return y.attribute==="cname"}),h=0<v.length&&v[0].ssrc,k;v=c.matchPrefix(r,"a=ssrc-group:FID").map(function(y){return y.substr(17).split(" ").map(function(S){return parseInt(S,10)})}),0<v.length&&1<v[0].length&&v[0][0]===h&&(k=v[0][1]),l.codecs.forEach(function(y){y.name.toUpperCase()==="RTX"&&y.parameters.apt&&(y={ssrc:h,codecPayloadType:parseInt(y.parameters.apt,10)},h&&k&&(y.rtx={ssrc:k}),s.push(y),g&&(y=JSON.parse(JSON.stringify(y)),y.fec={ssrc:h,mechanism:o?"red+ulpfec":"red"},s.push(y)))}),s.length===0&&h&&s.push({ssrc:h});var _=c.matchPrefix(r,"b=");return _.length&&(_=_[0].indexOf("b=TIAS:")===0?parseInt(_[0].substr(7),10):_[0].indexOf("b=AS:")===0?950*parseInt(_[0].substr(5),10)-16e3:void 0,s.forEach(function(y){y.maxBitrate=_})),s},c.parseRtcpParameters=function(r){var s={},l=c.matchPrefix(r,"a=ssrc:").map(function(g){return c.parseSsrcMedia(g)}).filter(function(g){return g.attribute==="cname"})[0];return l&&(s.cname=l.value,s.ssrc=l.ssrc),l=c.matchPrefix(r,"a=rtcp-rsize"),s.reducedSize=0<l.length,s.compound=l.length===0,r=c.matchPrefix(r,"a=rtcp-mux"),s.mux=0<r.length,s},c.parseMsid=function(r){var s=c.matchPrefix(r,"a=msid:");if(s.length===1)return r=s[0].substr(7).split(" "),{stream:r[0],track:r[1]};if(r=c.matchPrefix(r,"a=ssrc:").map(function(l){return c.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="msid"}),0<r.length)return r=r[0].value.split(" "),{stream:r[0],track:r[1]}},c.generateSessionId=function(){return Math.random().toString().substr(2,21)},c.writeSessionBoilerplate=function(r,s,l){return s=s!==void 0?s:2,r=r||c.generateSessionId(),`v=0\r
o=`+(l||"thisisadapterortc")+" "+r+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},c.writeMediaSection=function(r,s,l,g){return s=c.writeRtpDescription(r.kind,s),s+=c.writeIceParameters(r.iceGatherer.getLocalParameters()),s+=c.writeDtlsParameters(r.dtlsTransport.getLocalParameters(),l==="offer"?"actpass":"active"),s+="a=mid:"+r.mid+`\r
`,s=r.direction?s+("a="+r.direction+`\r
`):r.rtpSender&&r.rtpReceiver?s+`a=sendrecv\r
`:r.rtpSender?s+`a=sendonly\r
`:r.rtpReceiver?s+`a=recvonly\r
`:s+`a=inactive\r
`,r.rtpSender&&(l="msid:"+g.id+" "+r.rtpSender.track.id+`\r
`,s=s+("a="+l)+("a=ssrc:"+r.sendEncodingParameters[0].ssrc+" "+l),r.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+r.sendEncodingParameters[0].ssrc+" "+r.sendEncodingParameters[0].rtx.ssrc+`\r
`)),s+="a=ssrc:"+r.sendEncodingParameters[0].ssrc+" cname:"+c.localCName+`\r
`,r.rtpSender&&r.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+r.sendEncodingParameters[0].rtx.ssrc+" cname:"+c.localCName+`\r
`),s},c.getDirection=function(r,s){r=c.splitLines(r);for(var l=0;l<r.length;l++)switch(r[l]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[l].substr(2)}return s?c.getDirection(s):"sendrecv"},c.getKind=function(r){return c.splitLines(r)[0].split(" ")[0].substr(2)},c.isRejected=function(r){return r.split(" ",2)[1]==="0"},c.parseMLine=function(r){return r=c.splitLines(r)[0].substr(2).split(" "),{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},c.parseOLine=function(r){return r=c.matchPrefix(r,"o=")[0].substr(2).split(" "),{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},c.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;r=c.splitLines(r);for(var s=0;s<r.length;s++)if(2>r[s].length||r[s].charAt(1)!=="=")return!1;return!0},typeof u=="object"&&(u.exports=c)},{}]},{},[1])(1)}()},function(e,i,d){d(83)(d(84))},function(e,i){e.exports=function(d){function t(u){typeof console<"u"&&(console.error||console.log)("[Script Loader]",u)}try{typeof execScript<"u"&&typeof attachEvent<"u"&&typeof addEventListener>"u"?execScript(d):typeof eval<"u"?eval.call(null,d):t("EvalError: No eval function available")}catch(u){t(u)}}},function(e,i){e.exports=`/* globals $$, jQuery, Elements, document, window, L */

/**
* Copyright 2013 Marc J. Schmidt. See the LICENSE file at the top-level
* directory of this distribution and at
* https://github.com/marcj/css-element-queries/blob/master/LICENSE.
*/
this.L = this.L || {};

/**
 * @param {HTMLElement} element
 * @param {String}      prop
 * @returns {String|Number}
 */
L.GetComputedStyle = (computedElement, prop) => {
  if (computedElement.currentStyle) {
    return computedElement.currentStyle[prop];
  } else if (window.getComputedStyle) {
    return window.getComputedStyle(computedElement, null).getPropertyValue(prop);
  }
  return computedElement.style[prop];
};

/**
 *
 * @type {Function}
 * @constructor
 */
L.ElementQueries = function ElementQueries() {
  /**
   *
   * @param element
   * @returns {Number}
   */
  function getEmSize(element = document.documentElement) {
    const fontSize = L.GetComputedStyle(element, 'fontSize');
    return parseFloat(fontSize) || 16;
  }

  /**
   *
   * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE
   *
   * @param element
   * @param value
   * @param units
   * @returns {*}
   */
  function convertToPx(element, originalValue) {
    let vh;
    let vw;
    let chooser;
    const units = originalValue.replace(/[0-9]*/, '');
    const value = parseFloat(originalValue);
    switch (units) {
      case 'px':
        return value;
      case 'em':
        return value * getEmSize(element);
      case 'rem':
        return value * getEmSize();
      // Viewport units!
      // According to http://quirksmode.org/mobile/tableViewport.html
      // documentElement.clientWidth/Height gets us the most reliable info
      case 'vw':
        return (value * document.documentElement.clientWidth) / 100;
      case 'vh':
        return (value * document.documentElement.clientHeight) / 100;
      case 'vmin':
      case 'vmax':
        vw = document.documentElement.clientWidth / 100;
        vh = document.documentElement.clientHeight / 100;
        chooser = Math[units === 'vmin' ? 'min' : 'max'];
        return value * chooser(vw, vh);
      default:
        return value;
      // for now, not supporting physical units (since they are just a set number of px)
      // or ex/ch (getting accurate measurements is hard)
    }
  }

  /**
   *
   * @param {HTMLElement} element
   * @constructor
   */
  function SetupInformation(element) {
    this.element = element;
    this.options = [];
    let i;
    let j;
    let option;
    let width = 0;
    let height = 0;
    let value;
    let actualValue;
    let attrValues;
    let attrValue;
    let attrName;

    /**
     * @param option {mode: 'min|max', property: 'width|height', value: '123px'}
     */
    this.addOption = (newOption) => {
      this.options.push(newOption);
    };

    const attributes = ['min-width', 'min-height', 'max-width', 'max-height'];

    /**
     * Extracts the computed width/height and sets to min/max- attribute.
     */
    this.call = () => {
      // extract current dimensions
      width = this.element.offsetWidth;
      height = this.element.offsetHeight;

      attrValues = {};

      for (i = 0, j = this.options.length; i < j; i += 1) {
        option = this.options[i];
        value = convertToPx(this.element, option.value);

        actualValue = option.property === 'width' ? width : height;
        attrName = \`\${option.mode}-\${option.property}\`;
        attrValue = '';

        if (option.mode === 'min' && actualValue >= value) {
          attrValue += option.value;
        }

        if (option.mode === 'max' && actualValue <= value) {
          attrValue += option.value;
        }

        if (!attrValues[attrName]) attrValues[attrName] = '';
        if (attrValue && (\` \${attrValues[attrName]} \`)
          .indexOf(\` \${attrValue} \`) === -1) {
          attrValues[attrName] += \` \${attrValue}\`;
        }
      }

      for (let k = 0; k < attributes.length; k += 1) {
        if (attrValues[attributes[k]]) {
          this.element.setAttribute(
            attributes[k],
            attrValues[attributes[k]].substr(1),
          );
        } else {
          this.element.removeAttribute(attributes[k]);
        }
      }
    };
  }

  /**
   * @param {HTMLElement} element
   * @param {Object}      options
   */
  function setupElement(originalElement, options) {
    const element = originalElement;
    if (element.elementQueriesSetupInformation) {
      element.elementQueriesSetupInformation.addOption(options);
    } else {
      element.elementQueriesSetupInformation = new SetupInformation(element);
      element.elementQueriesSetupInformation.addOption(options);
      element.sensor = new L.ResizeSensor(element, () => {
        element.elementQueriesSetupInformation.call();
      });
    }
    element.elementQueriesSetupInformation.call();
    return element;
  }

  /**
   * @param {String} selector
   * @param {String} mode min|max
   * @param {String} property width|height
   * @param {String} value
   */
  function queueQuery(selector, mode, property, value) {
    let query;
    if (document.querySelectorAll) query = document.querySelectorAll.bind(document);
    if (!query && typeof $$ !== 'undefined') query = $$;
    if (!query && typeof jQuery !== 'undefined') query = jQuery;

    if (!query) {
      throw new Error('No document.querySelectorAll, jQuery or Mootools\\'s $$ found.');
    }

    const elements = query(selector) || [];
    for (let i = 0, j = elements.length; i < j; i += 1) {
      elements[i] = setupElement(elements[i], {
        mode,
        property,
        value,
      });
    }
  }

  const regex = /,?([^,\\n]*)\\[[\\s\\t]*(min|max)-(width|height)[\\s\\t]*[~$^]?=[\\s\\t]*"([^"]*)"[\\s\\t]*]([^\\n\\s{]*)/mgi; // jshint ignore:line

  /**
   * @param {String} css
   */
  function extractQuery(originalCss) {
    let match;
    const css = originalCss.replace(/'/g, '"');
    while ((match = regex.exec(css)) !== null) {
      if (match.length > 5) {
        queueQuery(match[1] || match[5], match[2], match[3], match[4]);
      }
    }
  }

  /**
   * @param {CssRule[]|String} rules
   */
  function readRules(originalRules) {
    if (!originalRules) {
      return;
    }
    let selector = '';
    let rules = originalRules;
    if (typeof originalRules === 'string') {
      rules = originalRules.toLowerCase();
      if (rules.indexOf('min-width') !== -1 || rules.indexOf('max-width') !== -1) {
        extractQuery(rules);
      }
    } else {
      for (let i = 0, j = rules.length; i < j; i += 1) {
        if (rules[i].type === 1) {
          selector = rules[i].selectorText || rules[i].cssText;
          if (selector.indexOf('min-height') !== -1 ||
            selector.indexOf('max-height') !== -1) {
            extractQuery(selector);
          } else if (selector.indexOf('min-width') !== -1 ||
            selector.indexOf('max-width') !== -1) {
            extractQuery(selector);
          }
        } else if (rules[i].type === 4) {
          readRules(rules[i].cssRules || rules[i].rules);
        }
      }
    }
  }

  /**
   * Searches all css rules and setups the event listener
   * to all elements with element query rules..
   */
  this.init = () => {
    const styleSheets = document.styleSheets || [];
    for (let i = 0, j = styleSheets.length; i < j; i += 1) {
      readRules(styleSheets[i].cssText ||
        styleSheets[i].cssRules ||
        styleSheets[i].rules);
    }
  };
};

function init() {
  (new L.ElementQueries()).init();
}

if (window.addEventListener) {
  window.addEventListener('load', init, false);
} else {
  window.attachEvent('onload', init);
}

/**
 * Iterate over each of the provided element(s).
 *
 * @param {HTMLElement|HTMLElement[]} elements
 * @param {Function}                  callback
 */
function forEachElement(elements, callback = () => { }) {
  const elementsType = Object.prototype.toString.call(elements);
  const isCollectionTyped = (elementsType === '[object Array]' ||
    (elementsType === '[object NodeList]') ||
    (elementsType === '[object HTMLCollection]') ||
    (typeof jQuery !== 'undefined' && elements instanceof jQuery) || // jquery
    (typeof Elements !== 'undefined' && elements instanceof Elements) // mootools
  );
  let i = 0;
  const j = elements.length;
  if (isCollectionTyped) {
    for (; i < j; i += 1) {
      callback(elements[i]);
    }
  } else {
    callback(elements);
  }
}
/**
 * Class for dimension change detection.
 *
 * @param {Element|Element[]|Elements|jQuery} element
 * @param {Function} callback
 *
 * @constructor
 */
L.ResizeSensor = function ResizeSensor(element, callback = () => { }) {
  /**
   *
   * @constructor
   */
  function EventQueue() {
    let q = [];
    this.add = (ev) => {
      q.push(ev);
    };

    let i;
    let j;
    this.call = () => {
      for (i = 0, j = q.length; i < j; i += 1) {
        q[i].call();
      }
    };

    this.remove = (ev) => {
      const newQueue = [];
      for (i = 0, j = q.length; i < j; i += 1) {
        if (q[i] !== ev) newQueue.push(q[i]);
      }
      q = newQueue;
    };

    this.length = () => q.length;
  }

  /**
   *
   * @param {HTMLElement} element
   * @param {Function}    resized
   */
  function attachResizeEvent(htmlElement, resized) {
    // Only used for the dirty checking, so the event callback count is limted
    //  to max 1 call per fps per sensor.
    // In combination with the event based resize sensor this saves cpu time,
    // because the sensor is too fast and
    // would generate too many unnecessary events.
    const customRequestAnimationFrame = window.requestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      function delay(fn) {
        return window.setTimeout(fn, 20);
      };

    const newElement = htmlElement;
    if (!newElement.resizedAttached) {
      newElement.resizedAttached = new EventQueue();
      newElement.resizedAttached.add(resized);
    } else if (newElement.resizedAttached) {
      newElement.resizedAttached.add(resized);
      return;
    }

    newElement.resizeSensor = document.createElement('div');
    newElement.resizeSensor.className = 'resize-sensor';
    const style = 'position: absolute; left: 0; top: 0; right: 0; bottom: 0; ' +
      'overflow: hidden; z-index: -1; visibility: hidden;';
    const styleChild = 'position: absolute; left: 0; top: 0; transition: 0s;';

    newElement.resizeSensor.style.cssText = style;
    newElement.resizeSensor.innerHTML =
      \`<div class="resize-sensor-expand" style="\${style}">\` +
      \`<div style="\${styleChild}"></div>\` +
      '</div>' +
      \`<div class="resize-sensor-shrink" style="\${style}">\` +
      \`<div style="\${styleChild} width: 200%; height: 200%"></div>\` +
      '</div>';
    newElement.appendChild(newElement.resizeSensor);

    if (L.GetComputedStyle(newElement, 'position') === 'static') {
      newElement.style.position = 'relative';
    }

    const expand = newElement.resizeSensor.childNodes[0];
    const expandChild = expand.childNodes[0];
    const shrink = newElement.resizeSensor.childNodes[1];

    const reset = () => {
      expandChild.style.width = \`\${100000}px\`;
      expandChild.style.height = \`\${100000}px\`;

      expand.scrollLeft = 100000;
      expand.scrollTop = 100000;

      shrink.scrollLeft = 100000;
      shrink.scrollTop = 100000;
    };

    reset();
    let dirty = false;

    const dirtyChecking = () => {
      if (!newElement.resizedAttached) return;

      if (dirty) {
        newElement.resizedAttached.call();
        dirty = false;
      }

      customRequestAnimationFrame(dirtyChecking);
    };

    customRequestAnimationFrame(dirtyChecking);
    let lastWidth;
    let lastHeight;
    let cachedWidth;
    let cachedHeight; // useful to not query offsetWidth twice

    const onScroll = () => {
      if ((cachedWidth = newElement.offsetWidth) !== lastWidth ||
        (cachedHeight = newElement.offsetHeight) !== lastHeight) {
        dirty = true;

        lastWidth = cachedWidth;
        lastHeight = cachedHeight;
      }
      reset();
    };

    const addEvent = (el, name, cb) => {
      if (el.attachEvent) {
        el.attachEvent(\`on\${name}\`, cb);
      } else {
        el.addEventListener(name, cb);
      }
    };

    addEvent(expand, 'scroll', onScroll);
    addEvent(shrink, 'scroll', onScroll);
  }

  forEachElement(element, (elem) => {
    attachResizeEvent(elem, callback);
  });

  this.detach = (ev) => {
    L.ResizeSensor.detach(element, ev);
  };
};

L.ResizeSensor.detach = (element, ev) => {
  forEachElement(element, (elem) => {
    const elementItem = elem;
    if (elementItem.resizedAttached && typeof ev === 'function') {
      elementItem.resizedAttached.remove(ev);
      if (elementItem.resizedAttached.length()) return;
    }
    if (elementItem.resizeSensor) {
      if (elementItem.contains(elementItem.resizeSensor)) {
        elementItem.removeChild(elementItem.resizeSensor);
      }
      delete elementItem.resizeSensor;
      delete elementItem.resizedAttached;
    }
  });
};
`}]).default;function qr(e,i){const d=Object.create(null),t=e.split(",");for(let u=0;u<t.length;u++)d[t[u]]=!0;return i?u=>!!d[u.toLowerCase()]:u=>!!d[u]}const Ue={},en=[],ft=()=>{},md=()=>!1,hd=/^on[^a-z]/,Zn=e=>hd.test(e),Jr=e=>e.startsWith("onUpdate:"),Ke=Object.assign,$r=(e,i)=>{const d=e.indexOf(i);d>-1&&e.splice(d,1)},vd=Object.prototype.hasOwnProperty,Be=(e,i)=>vd.call(e,i),Oe=Array.isArray,tn=e=>er(e)==="[object Map]",Lo=e=>er(e)==="[object Set]",Pe=e=>typeof e=="function",Ge=e=>typeof e=="string",Yr=e=>typeof e=="symbol",ze=e=>e!==null&&typeof e=="object",No=e=>ze(e)&&Pe(e.then)&&Pe(e.catch),jo=Object.prototype.toString,er=e=>jo.call(e),gd=e=>er(e).slice(8,-1),Bo=e=>er(e)==="[object Object]",Kr=e=>Ge(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Fn=qr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),tr=e=>{const i=Object.create(null);return d=>i[d]||(i[d]=e(d))},yd=/-(\w)/g,_t=tr(e=>e.replace(yd,(i,d)=>d?d.toUpperCase():"")),_d=/\B([A-Z])/g,ln=tr(e=>e.replace(_d,"-$1").toLowerCase()),nr=tr(e=>e.charAt(0).toUpperCase()+e.slice(1)),hr=tr(e=>e?`on${nr(e)}`:""),_n=(e,i)=>!Object.is(e,i),vr=(e,i)=>{for(let d=0;d<e.length;d++)e[d](i)},Gn=(e,i,d)=>{Object.defineProperty(e,i,{configurable:!0,enumerable:!1,value:d})},Sd=e=>{const i=parseFloat(e);return isNaN(i)?e:i},bd=e=>{const i=Ge(e)?Number(e):NaN;return isNaN(i)?e:i};let Ki;const Mr=()=>Ki||(Ki=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Xr(e){if(Oe(e)){const i={};for(let d=0;d<e.length;d++){const t=e[d],u=Ge(t)?Td(t):Xr(t);if(u)for(const a in u)i[a]=u[a]}return i}else{if(Ge(e))return e;if(ze(e))return e}}const wd=/;(?![^(]*\))/g,Ed=/:([^]+)/,Cd=/\/\*[^]*?\*\//g;function Td(e){const i={};return e.replace(Cd,"").split(wd).forEach(d=>{if(d){const t=d.split(Ed);t.length>1&&(i[t[0].trim()]=t[1].trim())}}),i}function Qr(e){let i="";if(Ge(e))i=e;else if(Oe(e))for(let d=0;d<e.length;d++){const t=Qr(e[d]);t&&(i+=t+" ")}else if(ze(e))for(const d in e)e[d]&&(i+=d+" ");return i.trim()}const kd="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Id=qr(kd);function Fo(e){return!!e||e===""}const Rd=e=>Ge(e)?e:e==null?"":Oe(e)||ze(e)&&(e.toString===jo||!Pe(e.toString))?JSON.stringify(e,Vo,2):String(e),Vo=(e,i)=>i&&i.__v_isRef?Vo(e,i.value):tn(i)?{[`Map(${i.size})`]:[...i.entries()].reduce((d,[t,u])=>(d[`${t} =>`]=u,d),{})}:Lo(i)?{[`Set(${i.size})`]:[...i.values()]}:ze(i)&&!Oe(i)&&!Bo(i)?String(i):i;let at;class xd{constructor(i=!1){this.detached=i,this._active=!0,this.effects=[],this.cleanups=[],this.parent=at,!i&&at&&(this.index=(at.scopes||(at.scopes=[])).push(this)-1)}get active(){return this._active}run(i){if(this._active){const d=at;try{return at=this,i()}finally{at=d}}}on(){at=this}off(){at=this.parent}stop(i){if(this._active){let d,t;for(d=0,t=this.effects.length;d<t;d++)this.effects[d].stop();for(d=0,t=this.cleanups.length;d<t;d++)this.cleanups[d]();if(this.scopes)for(d=0,t=this.scopes.length;d<t;d++)this.scopes[d].stop(!0);if(!this.detached&&this.parent&&!i){const u=this.parent.scopes.pop();u&&u!==this&&(this.parent.scopes[this.index]=u,u.index=this.index)}this.parent=void 0,this._active=!1}}}function Od(e,i=at){i&&i.active&&i.effects.push(e)}function Md(){return at}const Zr=e=>{const i=new Set(e);return i.w=0,i.n=0,i},Uo=e=>(e.w&jt)>0,zo=e=>(e.n&jt)>0,Ad=({deps:e})=>{if(e.length)for(let i=0;i<e.length;i++)e[i].w|=jt},Pd=e=>{const{deps:i}=e;if(i.length){let d=0;for(let t=0;t<i.length;t++){const u=i[t];Uo(u)&&!zo(u)?u.delete(e):i[d++]=u,u.w&=~jt,u.n&=~jt}i.length=d}},qn=new WeakMap;let hn=0,jt=1;const Ar=30;let lt;const Wt=Symbol(""),Pr=Symbol("");class ei{constructor(i,d=null,t){this.fn=i,this.scheduler=d,this.active=!0,this.deps=[],this.parent=void 0,Od(this,t)}run(){if(!this.active)return this.fn();let i=lt,d=Lt;for(;i;){if(i===this)return;i=i.parent}try{return this.parent=lt,lt=this,Lt=!0,jt=1<<++hn,hn<=Ar?Ad(this):Xi(this),this.fn()}finally{hn<=Ar&&Pd(this),jt=1<<--hn,lt=this.parent,Lt=d,this.parent=void 0,this.deferStop&&this.stop()}}stop(){lt===this?this.deferStop=!0:this.active&&(Xi(this),this.onStop&&this.onStop(),this.active=!1)}}function Xi(e){const{deps:i}=e;if(i.length){for(let d=0;d<i.length;d++)i[d].delete(e);i.length=0}}let Lt=!0;const Wo=[];function un(){Wo.push(Lt),Lt=!1}function fn(){const e=Wo.pop();Lt=e===void 0?!0:e}function tt(e,i,d){if(Lt&&lt){let t=qn.get(e);t||qn.set(e,t=new Map);let u=t.get(d);u||t.set(d,u=Zr()),Ho(u)}}function Ho(e,i){let d=!1;hn<=Ar?zo(e)||(e.n|=jt,d=!Uo(e)):d=!e.has(lt),d&&(e.add(lt),lt.deps.push(e))}function Tt(e,i,d,t,u,a){const c=qn.get(e);if(!c)return;let r=[];if(i==="clear")r=[...c.values()];else if(d==="length"&&Oe(e)){const s=Number(t);c.forEach((l,g)=>{(g==="length"||g>=s)&&r.push(l)})}else switch(d!==void 0&&r.push(c.get(d)),i){case"add":Oe(e)?Kr(d)&&r.push(c.get("length")):(r.push(c.get(Wt)),tn(e)&&r.push(c.get(Pr)));break;case"delete":Oe(e)||(r.push(c.get(Wt)),tn(e)&&r.push(c.get(Pr)));break;case"set":tn(e)&&r.push(c.get(Wt));break}if(r.length===1)r[0]&&Dr(r[0]);else{const s=[];for(const l of r)l&&s.push(...l);Dr(Zr(s))}}function Dr(e,i){const d=Oe(e)?e:[...e];for(const t of d)t.computed&&Qi(t);for(const t of d)t.computed||Qi(t)}function Qi(e,i){(e!==lt||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function Dd(e,i){var d;return(d=qn.get(e))==null?void 0:d.get(i)}const Ld=qr("__proto__,__v_isRef,__isVue"),Go=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Yr)),Nd=ti(),jd=ti(!1,!0),Bd=ti(!0),Zi=Fd();function Fd(){const e={};return["includes","indexOf","lastIndexOf"].forEach(i=>{e[i]=function(...d){const t=Fe(this);for(let a=0,c=this.length;a<c;a++)tt(t,"get",a+"");const u=t[i](...d);return u===-1||u===!1?t[i](...d.map(Fe)):u}}),["push","pop","shift","unshift","splice"].forEach(i=>{e[i]=function(...d){un();const t=Fe(this)[i].apply(this,d);return fn(),t}}),e}function Vd(e){const i=Fe(this);return tt(i,"has",e),i.hasOwnProperty(e)}function ti(e=!1,i=!1){return function(t,u,a){if(u==="__v_isReactive")return!e;if(u==="__v_isReadonly")return e;if(u==="__v_isShallow")return i;if(u==="__v_raw"&&a===(e?i?nc:Ko:i?Yo:$o).get(t))return t;const c=Oe(t);if(!e){if(c&&Be(Zi,u))return Reflect.get(Zi,u,a);if(u==="hasOwnProperty")return Vd}const r=Reflect.get(t,u,a);return(Yr(u)?Go.has(u):Ld(u))||(e||tt(t,"get",u),i)?r:Ye(r)?c&&Kr(u)?r:r.value:ze(r)?e?Xo(r):ii(r):r}}const Ud=qo(),zd=qo(!0);function qo(e=!1){return function(d,t,u,a){let c=d[t];if(sn(c)&&Ye(c)&&!Ye(u))return!1;if(!e&&(!Jn(u)&&!sn(u)&&(c=Fe(c),u=Fe(u)),!Oe(d)&&Ye(c)&&!Ye(u)))return c.value=u,!0;const r=Oe(d)&&Kr(t)?Number(t)<d.length:Be(d,t),s=Reflect.set(d,t,u,a);return d===Fe(a)&&(r?_n(u,c)&&Tt(d,"set",t,u):Tt(d,"add",t,u)),s}}function Wd(e,i){const d=Be(e,i);e[i];const t=Reflect.deleteProperty(e,i);return t&&d&&Tt(e,"delete",i,void 0),t}function Hd(e,i){const d=Reflect.has(e,i);return(!Yr(i)||!Go.has(i))&&tt(e,"has",i),d}function Gd(e){return tt(e,"iterate",Oe(e)?"length":Wt),Reflect.ownKeys(e)}const Jo={get:Nd,set:Ud,deleteProperty:Wd,has:Hd,ownKeys:Gd},qd={get:Bd,set(e,i){return!0},deleteProperty(e,i){return!0}},Jd=Ke({},Jo,{get:jd,set:zd}),ni=e=>e,rr=e=>Reflect.getPrototypeOf(e);function On(e,i,d=!1,t=!1){e=e.__v_raw;const u=Fe(e),a=Fe(i);d||(i!==a&&tt(u,"get",i),tt(u,"get",a));const{has:c}=rr(u),r=t?ni:d?si:Sn;if(c.call(u,i))return r(e.get(i));if(c.call(u,a))return r(e.get(a));e!==u&&e.get(i)}function Mn(e,i=!1){const d=this.__v_raw,t=Fe(d),u=Fe(e);return i||(e!==u&&tt(t,"has",e),tt(t,"has",u)),e===u?d.has(e):d.has(e)||d.has(u)}function An(e,i=!1){return e=e.__v_raw,!i&&tt(Fe(e),"iterate",Wt),Reflect.get(e,"size",e)}function eo(e){e=Fe(e);const i=Fe(this);return rr(i).has.call(i,e)||(i.add(e),Tt(i,"add",e,e)),this}function to(e,i){i=Fe(i);const d=Fe(this),{has:t,get:u}=rr(d);let a=t.call(d,e);a||(e=Fe(e),a=t.call(d,e));const c=u.call(d,e);return d.set(e,i),a?_n(i,c)&&Tt(d,"set",e,i):Tt(d,"add",e,i),this}function no(e){const i=Fe(this),{has:d,get:t}=rr(i);let u=d.call(i,e);u||(e=Fe(e),u=d.call(i,e)),t&&t.call(i,e);const a=i.delete(e);return u&&Tt(i,"delete",e,void 0),a}function ro(){const e=Fe(this),i=e.size!==0,d=e.clear();return i&&Tt(e,"clear",void 0,void 0),d}function Pn(e,i){return function(t,u){const a=this,c=a.__v_raw,r=Fe(c),s=i?ni:e?si:Sn;return!e&&tt(r,"iterate",Wt),c.forEach((l,g)=>t.call(u,s(l),s(g),a))}}function Dn(e,i,d){return function(...t){const u=this.__v_raw,a=Fe(u),c=tn(a),r=e==="entries"||e===Symbol.iterator&&c,s=e==="keys"&&c,l=u[e](...t),g=d?ni:i?si:Sn;return!i&&tt(a,"iterate",s?Pr:Wt),{next(){const{value:o,done:v}=l.next();return v?{value:o,done:v}:{value:r?[g(o[0]),g(o[1])]:g(o),done:v}},[Symbol.iterator](){return this}}}}function Ot(e){return function(...i){return e==="delete"?!1:this}}function $d(){const e={get(a){return On(this,a)},get size(){return An(this)},has:Mn,add:eo,set:to,delete:no,clear:ro,forEach:Pn(!1,!1)},i={get(a){return On(this,a,!1,!0)},get size(){return An(this)},has:Mn,add:eo,set:to,delete:no,clear:ro,forEach:Pn(!1,!0)},d={get(a){return On(this,a,!0)},get size(){return An(this,!0)},has(a){return Mn.call(this,a,!0)},add:Ot("add"),set:Ot("set"),delete:Ot("delete"),clear:Ot("clear"),forEach:Pn(!0,!1)},t={get(a){return On(this,a,!0,!0)},get size(){return An(this,!0)},has(a){return Mn.call(this,a,!0)},add:Ot("add"),set:Ot("set"),delete:Ot("delete"),clear:Ot("clear"),forEach:Pn(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Dn(a,!1,!1),d[a]=Dn(a,!0,!1),i[a]=Dn(a,!1,!0),t[a]=Dn(a,!0,!0)}),[e,d,i,t]}const[Yd,Kd,Xd,Qd]=$d();function ri(e,i){const d=i?e?Qd:Xd:e?Kd:Yd;return(t,u,a)=>u==="__v_isReactive"?!e:u==="__v_isReadonly"?e:u==="__v_raw"?t:Reflect.get(Be(d,u)&&u in t?d:t,u,a)}const Zd={get:ri(!1,!1)},ec={get:ri(!1,!0)},tc={get:ri(!0,!1)},$o=new WeakMap,Yo=new WeakMap,Ko=new WeakMap,nc=new WeakMap;function rc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ic(e){return e.__v_skip||!Object.isExtensible(e)?0:rc(gd(e))}function ii(e){return sn(e)?e:oi(e,!1,Jo,Zd,$o)}function oc(e){return oi(e,!1,Jd,ec,Yo)}function Xo(e){return oi(e,!0,qd,tc,Ko)}function oi(e,i,d,t,u){if(!ze(e)||e.__v_raw&&!(i&&e.__v_isReactive))return e;const a=u.get(e);if(a)return a;const c=ic(e);if(c===0)return e;const r=new Proxy(e,c===2?t:d);return u.set(e,r),r}function nn(e){return sn(e)?nn(e.__v_raw):!!(e&&e.__v_isReactive)}function sn(e){return!!(e&&e.__v_isReadonly)}function Jn(e){return!!(e&&e.__v_isShallow)}function Qo(e){return nn(e)||sn(e)}function Fe(e){const i=e&&e.__v_raw;return i?Fe(i):e}function Zo(e){return Gn(e,"__v_skip",!0),e}const Sn=e=>ze(e)?ii(e):e,si=e=>ze(e)?Xo(e):e;function es(e){Lt&&lt&&(e=Fe(e),Ho(e.dep||(e.dep=Zr())))}function ts(e,i){e=Fe(e);const d=e.dep;d&&Dr(d)}function Ye(e){return!!(e&&e.__v_isRef===!0)}function qe(e){return sc(e,!1)}function sc(e,i){return Ye(e)?e:new ac(e,i)}class ac{constructor(i,d){this.__v_isShallow=d,this.dep=void 0,this.__v_isRef=!0,this._rawValue=d?i:Fe(i),this._value=d?i:Sn(i)}get value(){return es(this),this._value}set value(i){const d=this.__v_isShallow||Jn(i)||sn(i);i=d?i:Fe(i),_n(i,this._rawValue)&&(this._rawValue=i,this._value=d?i:Sn(i),ts(this))}}function ns(e){return Ye(e)?e.value:e}const dc={get:(e,i,d)=>ns(Reflect.get(e,i,d)),set:(e,i,d,t)=>{const u=e[i];return Ye(u)&&!Ye(d)?(u.value=d,!0):Reflect.set(e,i,d,t)}};function rs(e){return nn(e)?e:new Proxy(e,dc)}function is(e){const i=Oe(e)?new Array(e.length):{};for(const d in e)i[d]=lc(e,d);return i}class cc{constructor(i,d,t){this._object=i,this._key=d,this._defaultValue=t,this.__v_isRef=!0}get value(){const i=this._object[this._key];return i===void 0?this._defaultValue:i}set value(i){this._object[this._key]=i}get dep(){return Dd(Fe(this._object),this._key)}}function lc(e,i,d){const t=e[i];return Ye(t)?t:new cc(e,i,d)}class uc{constructor(i,d,t,u){this._setter=d,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ei(i,()=>{this._dirty||(this._dirty=!0,ts(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!u,this.__v_isReadonly=t}get value(){const i=Fe(this);return es(i),(i._dirty||!i._cacheable)&&(i._dirty=!1,i._value=i.effect.run()),i._value}set value(i){this._setter(i)}}function fc(e,i,d=!1){let t,u;const a=Pe(e);return a?(t=e,u=ft):(t=e.get,u=e.set),new uc(t,u,a||!u,d)}function Nt(e,i,d,t){let u;try{u=t?e(...t):e()}catch(a){kn(a,i,d)}return u}function pt(e,i,d,t){if(Pe(e)){const a=Nt(e,i,d,t);return a&&No(a)&&a.catch(c=>{kn(c,i,d)}),a}const u=[];for(let a=0;a<e.length;a++)u.push(pt(e[a],i,d,t));return u}function kn(e,i,d,t=!0){const u=i?i.vnode:null;if(i){let a=i.parent;const c=i.proxy,r=d;for(;a;){const l=a.ec;if(l){for(let g=0;g<l.length;g++)if(l[g](e,c,r)===!1)return}a=a.parent}const s=i.appContext.config.errorHandler;if(s){Nt(s,null,10,[e,c,r]);return}}pc(e,d,u,t)}function pc(e,i,d,t=!0){console.error(e)}let bn=!1,Lr=!1;const Qe=[];let yt=0;const rn=[];let Et=null,Vt=0;const os=Promise.resolve();let ai=null;function ss(e){const i=ai||os;return e?i.then(this?e.bind(this):e):i}function mc(e){let i=yt+1,d=Qe.length;for(;i<d;){const t=i+d>>>1;wn(Qe[t])<e?i=t+1:d=t}return i}function di(e){(!Qe.length||!Qe.includes(e,bn&&e.allowRecurse?yt+1:yt))&&(e.id==null?Qe.push(e):Qe.splice(mc(e.id),0,e),as())}function as(){!bn&&!Lr&&(Lr=!0,ai=os.then(ls))}function hc(e){const i=Qe.indexOf(e);i>yt&&Qe.splice(i,1)}function ds(e){Oe(e)?rn.push(...e):(!Et||!Et.includes(e,e.allowRecurse?Vt+1:Vt))&&rn.push(e),as()}function io(e,i=bn?yt+1:0){for(;i<Qe.length;i++){const d=Qe[i];d&&d.pre&&(Qe.splice(i,1),i--,d())}}function cs(e){if(rn.length){const i=[...new Set(rn)];if(rn.length=0,Et){Et.push(...i);return}for(Et=i,Et.sort((d,t)=>wn(d)-wn(t)),Vt=0;Vt<Et.length;Vt++)Et[Vt]();Et=null,Vt=0}}const wn=e=>e.id==null?1/0:e.id,vc=(e,i)=>{const d=wn(e)-wn(i);if(d===0){if(e.pre&&!i.pre)return-1;if(i.pre&&!e.pre)return 1}return d};function ls(e){Lr=!1,bn=!0,Qe.sort(vc);const i=ft;try{for(yt=0;yt<Qe.length;yt++){const d=Qe[yt];d&&d.active!==!1&&Nt(d,null,14)}}finally{yt=0,Qe.length=0,cs(),bn=!1,ai=null,(Qe.length||rn.length)&&ls()}}function gc(e,i,...d){if(e.isUnmounted)return;const t=e.vnode.props||Ue;let u=d;const a=i.startsWith("update:"),c=a&&i.slice(7);if(c&&c in t){const g=`${c==="modelValue"?"model":c}Modifiers`,{number:o,trim:v}=t[g]||Ue;v&&(u=d.map(h=>Ge(h)?h.trim():h)),o&&(u=d.map(Sd))}let r,s=t[r=hr(i)]||t[r=hr(_t(i))];!s&&a&&(s=t[r=hr(ln(i))]),s&&pt(s,e,6,u);const l=t[r+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,pt(l,e,6,u)}}function us(e,i,d=!1){const t=i.emitsCache,u=t.get(e);if(u!==void 0)return u;const a=e.emits;let c={},r=!1;if(!Pe(e)){const s=l=>{const g=us(l,i,!0);g&&(r=!0,Ke(c,g))};!d&&i.mixins.length&&i.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!a&&!r?(ze(e)&&t.set(e,null),null):(Oe(a)?a.forEach(s=>c[s]=null):Ke(c,a),ze(e)&&t.set(e,c),c)}function ir(e,i){return!e||!Zn(i)?!1:(i=i.slice(2).replace(/Once$/,""),Be(e,i[0].toLowerCase()+i.slice(1))||Be(e,ln(i))||Be(e,i))}let ut=null,fs=null;function $n(e){const i=ut;return ut=e,fs=e&&e.type.__scopeId||null,i}function Ut(e,i=ut,d){if(!i||e._n)return e;const t=(...u)=>{t._d&&go(-1);const a=$n(i);let c;try{c=e(...u)}finally{$n(a),t._d&&go(1)}return c};return t._n=!0,t._c=!0,t._d=!0,t}function gr(e){const{type:i,vnode:d,proxy:t,withProxy:u,props:a,propsOptions:[c],slots:r,attrs:s,emit:l,render:g,renderCache:o,data:v,setupState:h,ctx:k,inheritAttrs:_}=e;let y,S;const x=$n(e);try{if(d.shapeFlag&4){const E=u||t;y=dt(g.call(E,E,o,a,h,v,k)),S=s}else{const E=i;y=dt(E.length>1?E(a,{attrs:s,slots:r,emit:l}):E(a,null)),S=i.props?s:_c(s)}}catch(E){yn.length=0,kn(E,e,1),y=Je(Jt)}let D=y;if(S&&_!==!1){const E=Object.keys(S),{shapeFlag:I}=D;E.length&&I&7&&(c&&E.some(Jr)&&(S=Sc(S,c)),D=dn(D,S))}return d.dirs&&(D=dn(D),D.dirs=D.dirs?D.dirs.concat(d.dirs):d.dirs),d.transition&&(D.transition=d.transition),y=D,$n(x),y}function yc(e){let i;for(let d=0;d<e.length;d++){const t=e[d];if(Xn(t)){if(t.type!==Jt||t.children==="v-if"){if(i)return;i=t}}else return}return i}const _c=e=>{let i;for(const d in e)(d==="class"||d==="style"||Zn(d))&&((i||(i={}))[d]=e[d]);return i},Sc=(e,i)=>{const d={};for(const t in e)(!Jr(t)||!(t.slice(9)in i))&&(d[t]=e[t]);return d};function bc(e,i,d){const{props:t,children:u,component:a}=e,{props:c,children:r,patchFlag:s}=i,l=a.emitsOptions;if(i.dirs||i.transition)return!0;if(d&&s>=0){if(s&1024)return!0;if(s&16)return t?oo(t,c,l):!!c;if(s&8){const g=i.dynamicProps;for(let o=0;o<g.length;o++){const v=g[o];if(c[v]!==t[v]&&!ir(l,v))return!0}}}else return(u||r)&&(!r||!r.$stable)?!0:t===c?!1:t?c?oo(t,c,l):!0:!!c;return!1}function oo(e,i,d){const t=Object.keys(i);if(t.length!==Object.keys(e).length)return!0;for(let u=0;u<t.length;u++){const a=t[u];if(i[a]!==e[a]&&!ir(d,a))return!0}return!1}function ci({vnode:e,parent:i},d){for(;i&&i.subTree===e;)(e=i.vnode).el=d,i=i.parent}const wc=e=>e.__isSuspense,Ec={name:"Suspense",__isSuspense:!0,process(e,i,d,t,u,a,c,r,s,l){e==null?Tc(i,d,t,u,a,c,r,s,l):kc(e,i,d,t,u,c,r,s,l)},hydrate:Ic,create:li,normalize:Rc},Cc=Ec;function En(e,i){const d=e.props&&e.props[i];Pe(d)&&d()}function Tc(e,i,d,t,u,a,c,r,s){const{p:l,o:{createElement:g}}=s,o=g("div"),v=e.suspense=li(e,u,t,i,o,d,a,c,r,s);l(null,v.pendingBranch=e.ssContent,o,null,t,v,a,c),v.deps>0?(En(e,"onPending"),En(e,"onFallback"),l(null,e.ssFallback,i,d,t,null,a,c),on(v,e.ssFallback)):v.resolve(!1,!0)}function kc(e,i,d,t,u,a,c,r,{p:s,um:l,o:{createElement:g}}){const o=i.suspense=e.suspense;o.vnode=i,i.el=e.el;const v=i.ssContent,h=i.ssFallback,{activeBranch:k,pendingBranch:_,isInFallback:y,isHydrating:S}=o;if(_)o.pendingBranch=v,At(v,_)?(s(_,v,o.hiddenContainer,null,u,o,a,c,r),o.deps<=0?o.resolve():y&&(s(k,h,d,t,u,null,a,c,r),on(o,h))):(o.pendingId++,S?(o.isHydrating=!1,o.activeBranch=_):l(_,u,o),o.deps=0,o.effects.length=0,o.hiddenContainer=g("div"),y?(s(null,v,o.hiddenContainer,null,u,o,a,c,r),o.deps<=0?o.resolve():(s(k,h,d,t,u,null,a,c,r),on(o,h))):k&&At(v,k)?(s(k,v,d,t,u,o,a,c,r),o.resolve(!0)):(s(null,v,o.hiddenContainer,null,u,o,a,c,r),o.deps<=0&&o.resolve()));else if(k&&At(v,k))s(k,v,d,t,u,o,a,c,r),on(o,v);else if(En(i,"onPending"),o.pendingBranch=v,o.pendingId++,s(null,v,o.hiddenContainer,null,u,o,a,c,r),o.deps<=0)o.resolve();else{const{timeout:x,pendingId:D}=o;x>0?setTimeout(()=>{o.pendingId===D&&o.fallback(h)},x):x===0&&o.fallback(h)}}function li(e,i,d,t,u,a,c,r,s,l,g=!1){const{p:o,m:v,um:h,n:k,o:{parentNode:_,remove:y}}=l;let S;const x=Oc(e);x&&i!=null&&i.pendingBranch&&(S=i.pendingId,i.deps++);const D=e.props?bd(e.props.timeout):void 0,E={vnode:e,parent:i,parentComponent:d,isSVG:c,container:t,hiddenContainer:u,anchor:a,deps:0,pendingId:0,timeout:typeof D=="number"?D:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:g,isUnmounted:!1,effects:[],resolve(I=!1,p=!1){const{vnode:B,activeBranch:P,pendingBranch:z,pendingId:te,effects:W,parentComponent:K,container:re}=E;if(E.isHydrating)E.isHydrating=!1;else if(!I){const ce=P&&z.transition&&z.transition.mode==="out-in";ce&&(P.transition.afterLeave=()=>{te===E.pendingId&&v(z,re,he,0)});let{anchor:he}=E;P&&(he=k(P),h(P,K,E,!0)),ce||v(z,re,he,0)}on(E,z),E.pendingBranch=null,E.isInFallback=!1;let f=E.parent,ae=!1;for(;f;){if(f.pendingBranch){f.effects.push(...W),ae=!0;break}f=f.parent}ae||ds(W),E.effects=[],x&&i&&i.pendingBranch&&S===i.pendingId&&(i.deps--,i.deps===0&&!p&&i.resolve()),En(B,"onResolve")},fallback(I){if(!E.pendingBranch)return;const{vnode:p,activeBranch:B,parentComponent:P,container:z,isSVG:te}=E;En(p,"onFallback");const W=k(B),K=()=>{E.isInFallback&&(o(null,I,z,W,P,null,te,r,s),on(E,I))},re=I.transition&&I.transition.mode==="out-in";re&&(B.transition.afterLeave=K),E.isInFallback=!0,h(B,P,null,!0),re||K()},move(I,p,B){E.activeBranch&&v(E.activeBranch,I,p,B),E.container=I},next(){return E.activeBranch&&k(E.activeBranch)},registerDep(I,p){const B=!!E.pendingBranch;B&&E.deps++;const P=I.vnode.el;I.asyncDep.catch(z=>{kn(z,I,0)}).then(z=>{if(I.isUnmounted||E.isUnmounted||E.pendingId!==I.suspenseId)return;I.asyncResolved=!0;const{vnode:te}=I;zr(I,z,!1),P&&(te.el=P);const W=!P&&I.subTree.el;p(I,te,_(P||I.subTree.el),P?null:k(I.subTree),E,c,s),W&&y(W),ci(I,te.el),B&&--E.deps===0&&E.resolve()})},unmount(I,p){E.isUnmounted=!0,E.activeBranch&&h(E.activeBranch,d,I,p),E.pendingBranch&&h(E.pendingBranch,d,I,p)}};return E}function Ic(e,i,d,t,u,a,c,r,s){const l=i.suspense=li(i,t,d,e.parentNode,document.createElement("div"),null,u,a,c,r,!0),g=s(e,l.pendingBranch=i.ssContent,d,l,a,c);return l.deps===0&&l.resolve(!1,!0),g}function Rc(e){const{shapeFlag:i,children:d}=e,t=i&32;e.ssContent=so(t?d.default:d),e.ssFallback=t?so(d.fallback):Je(Jt)}function so(e){let i;if(Pe(e)){const d=an&&e._c;d&&(e._d=!1,Ht()),e=e(),d&&(e._d=!0,i=st,Rs())}return Oe(e)&&(e=yc(e)),e=dt(e),i&&!e.dynamicChildren&&(e.dynamicChildren=i.filter(d=>d!==e)),e}function xc(e,i){i&&i.pendingBranch?Oe(e)?i.effects.push(...e):i.effects.push(e):ds(e)}function on(e,i){e.activeBranch=i;const{vnode:d,parentComponent:t}=e,u=d.el=i.el;t&&t.subTree===d&&(t.vnode.el=u,ci(t,u))}function Oc(e){var i;return((i=e.props)==null?void 0:i.suspensible)!=null&&e.props.suspensible!==!1}function ps(e,i){return ui(e,null,i)}const Ln={};function Vn(e,i,d){return ui(e,i,d)}function ui(e,i,{immediate:d,deep:t,flush:u,onTrack:a,onTrigger:c}=Ue){var r;const s=Md()===((r=$e)==null?void 0:r.scope)?$e:null;let l,g=!1,o=!1;if(Ye(e)?(l=()=>e.value,g=Jn(e)):nn(e)?(l=()=>e,t=!0):Oe(e)?(o=!0,g=e.some(E=>nn(E)||Jn(E)),l=()=>e.map(E=>{if(Ye(E))return E.value;if(nn(E))return Zt(E);if(Pe(E))return Nt(E,s,2)})):Pe(e)?i?l=()=>Nt(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return v&&v(),pt(e,s,3,[h])}:l=ft,i&&t){const E=l;l=()=>Zt(E())}let v,h=E=>{v=x.onStop=()=>{Nt(E,s,4)}},k;if(Cn)if(h=ft,i?d&&pt(i,s,3,[l(),o?[]:void 0,h]):l(),u==="sync"){const E=_l();k=E.__watcherHandles||(E.__watcherHandles=[])}else return ft;let _=o?new Array(e.length).fill(Ln):Ln;const y=()=>{if(x.active)if(i){const E=x.run();(t||g||(o?E.some((I,p)=>_n(I,_[p])):_n(E,_)))&&(v&&v(),pt(i,s,3,[E,_===Ln?void 0:o&&_[0]===Ln?[]:_,h]),_=E)}else x.run()};y.allowRecurse=!!i;let S;u==="sync"?S=y:u==="post"?S=()=>et(y,s&&s.suspense):(y.pre=!0,s&&(y.id=s.uid),S=()=>di(y));const x=new ei(l,S);i?d?y():_=x.run():u==="post"?et(x.run.bind(x),s&&s.suspense):x.run();const D=()=>{x.stop(),s&&s.scope&&$r(s.scope.effects,x)};return k&&k.push(D),D}function Mc(e,i,d){const t=this.proxy,u=Ge(e)?e.includes(".")?ms(t,e):()=>t[e]:e.bind(t,t);let a;Pe(i)?a=i:(a=i.handler,d=i);const c=$e;cn(this);const r=ui(u,a.bind(t),d);return c?cn(c):qt(),r}function ms(e,i){const d=i.split(".");return()=>{let t=e;for(let u=0;u<d.length&&t;u++)t=t[d[u]];return t}}function Zt(e,i){if(!ze(e)||e.__v_skip||(i=i||new Set,i.has(e)))return e;if(i.add(e),Ye(e))Zt(e.value,i);else if(Oe(e))for(let d=0;d<e.length;d++)Zt(e[d],i);else if(Lo(e)||tn(e))e.forEach(d=>{Zt(d,i)});else if(Bo(e))for(const d in e)Zt(e[d],i);return e}function Bt(e,i,d,t){const u=e.dirs,a=i&&i.dirs;for(let c=0;c<u.length;c++){const r=u[c];a&&(r.oldValue=a[c].value);let s=r.dir[t];s&&(un(),pt(s,d,8,[e.el,r,e,i]),fn())}}const Un=e=>!!e.type.__asyncLoader,hs=e=>e.type.__isKeepAlive;function Ac(e,i){vs(e,"a",i)}function Pc(e,i){vs(e,"da",i)}function vs(e,i,d=$e){const t=e.__wdc||(e.__wdc=()=>{let u=d;for(;u;){if(u.isDeactivated)return;u=u.parent}return e()});if(or(i,t,d),d){let u=d.parent;for(;u&&u.parent;)hs(u.parent.vnode)&&Dc(t,i,d,u),u=u.parent}}function Dc(e,i,d,t){const u=or(i,e,t,!0);ys(()=>{$r(t[i],u)},d)}function or(e,i,d=$e,t=!1){if(d){const u=d[e]||(d[e]=[]),a=i.__weh||(i.__weh=(...c)=>{if(d.isUnmounted)return;un(),cn(d);const r=pt(i,d,e,c);return qt(),fn(),r});return t?u.unshift(a):u.push(a),a}}const kt=e=>(i,d=$e)=>(!Cn||e==="sp")&&or(e,(...t)=>i(...t),d),Lc=kt("bm"),fi=kt("m"),gs=kt("bu"),pi=kt("u"),mi=kt("bum"),ys=kt("um"),Nc=kt("sp"),jc=kt("rtg"),Bc=kt("rtc");function Fc(e,i=$e){or("ec",e,i)}const _s="components";function Nn(e,i){return Uc(_s,e,!0,i)||e}const Vc=Symbol.for("v-ndc");function Uc(e,i,d=!0,t=!1){const u=ut||$e;if(u){const a=u.type;if(e===_s){const r=vl(a,!1);if(r&&(r===i||r===_t(i)||r===nr(_t(i))))return a}const c=ao(u[e]||a[e],i)||ao(u.appContext[e],i);return!c&&t?a:c}}function ao(e,i){return e&&(e[i]||e[_t(i)]||e[nr(_t(i))])}function zc(e,i,d,t){let u;const a=d&&d[t];if(Oe(e)||Ge(e)){u=new Array(e.length);for(let c=0,r=e.length;c<r;c++)u[c]=i(e[c],c,void 0,a&&a[c])}else if(typeof e=="number"){u=new Array(e);for(let c=0;c<e;c++)u[c]=i(c+1,c,void 0,a&&a[c])}else if(ze(e))if(e[Symbol.iterator])u=Array.from(e,(c,r)=>i(c,r,void 0,a&&a[r]));else{const c=Object.keys(e);u=new Array(c.length);for(let r=0,s=c.length;r<s;r++){const l=c[r];u[r]=i(e[l],l,r,a&&a[r])}}else u=[];return d&&(d[t]=u),u}const Nr=e=>e?Ms(e)?bi(e)||e.proxy:Nr(e.parent):null,gn=Ke(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Nr(e.parent),$root:e=>Nr(e.root),$emit:e=>e.emit,$options:e=>hi(e),$forceUpdate:e=>e.f||(e.f=()=>di(e.update)),$nextTick:e=>e.n||(e.n=ss.bind(e.proxy)),$watch:e=>Mc.bind(e)}),yr=(e,i)=>e!==Ue&&!e.__isScriptSetup&&Be(e,i),Wc={get({_:e},i){const{ctx:d,setupState:t,data:u,props:a,accessCache:c,type:r,appContext:s}=e;let l;if(i[0]!=="$"){const h=c[i];if(h!==void 0)switch(h){case 1:return t[i];case 2:return u[i];case 4:return d[i];case 3:return a[i]}else{if(yr(t,i))return c[i]=1,t[i];if(u!==Ue&&Be(u,i))return c[i]=2,u[i];if((l=e.propsOptions[0])&&Be(l,i))return c[i]=3,a[i];if(d!==Ue&&Be(d,i))return c[i]=4,d[i];jr&&(c[i]=0)}}const g=gn[i];let o,v;if(g)return i==="$attrs"&&tt(e,"get",i),g(e);if((o=r.__cssModules)&&(o=o[i]))return o;if(d!==Ue&&Be(d,i))return c[i]=4,d[i];if(v=s.config.globalProperties,Be(v,i))return v[i]},set({_:e},i,d){const{data:t,setupState:u,ctx:a}=e;return yr(u,i)?(u[i]=d,!0):t!==Ue&&Be(t,i)?(t[i]=d,!0):Be(e.props,i)||i[0]==="$"&&i.slice(1)in e?!1:(a[i]=d,!0)},has({_:{data:e,setupState:i,accessCache:d,ctx:t,appContext:u,propsOptions:a}},c){let r;return!!d[c]||e!==Ue&&Be(e,c)||yr(i,c)||(r=a[0])&&Be(r,c)||Be(t,c)||Be(gn,c)||Be(u.config.globalProperties,c)},defineProperty(e,i,d){return d.get!=null?e._.accessCache[i]=0:Be(d,"value")&&this.set(e,i,d.value,null),Reflect.defineProperty(e,i,d)}};function co(e){return Oe(e)?e.reduce((i,d)=>(i[d]=null,i),{}):e}let jr=!0;function Hc(e){const i=hi(e),d=e.proxy,t=e.ctx;jr=!1,i.beforeCreate&&lo(i.beforeCreate,e,"bc");const{data:u,computed:a,methods:c,watch:r,provide:s,inject:l,created:g,beforeMount:o,mounted:v,beforeUpdate:h,updated:k,activated:_,deactivated:y,beforeDestroy:S,beforeUnmount:x,destroyed:D,unmounted:E,render:I,renderTracked:p,renderTriggered:B,errorCaptured:P,serverPrefetch:z,expose:te,inheritAttrs:W,components:K,directives:re,filters:f}=i;if(l&&Gc(l,t,null),c)for(const he in c){const ye=c[he];Pe(ye)&&(t[he]=ye.bind(d))}if(u){const he=u.call(d,d);ze(he)&&(e.data=ii(he))}if(jr=!0,a)for(const he in a){const ye=a[he],R=Pe(ye)?ye.bind(d,d):Pe(ye.get)?ye.get.bind(d,d):ft,O=!Pe(ye)&&Pe(ye.set)?ye.set.bind(d):ft,j=Ps({get:R,set:O});Object.defineProperty(t,he,{enumerable:!0,configurable:!0,get:()=>j.value,set:J=>j.value=J})}if(r)for(const he in r)Ss(r[he],t,d,he);if(s){const he=Pe(s)?s.call(d):s;Reflect.ownKeys(he).forEach(ye=>{vi(ye,he[ye])})}g&&lo(g,e,"c");function ce(he,ye){Oe(ye)?ye.forEach(R=>he(R.bind(d))):ye&&he(ye.bind(d))}if(ce(Lc,o),ce(fi,v),ce(gs,h),ce(pi,k),ce(Ac,_),ce(Pc,y),ce(Fc,P),ce(Bc,p),ce(jc,B),ce(mi,x),ce(ys,E),ce(Nc,z),Oe(te))if(te.length){const he=e.exposed||(e.exposed={});te.forEach(ye=>{Object.defineProperty(he,ye,{get:()=>d[ye],set:R=>d[ye]=R})})}else e.exposed||(e.exposed={});I&&e.render===ft&&(e.render=I),W!=null&&(e.inheritAttrs=W),K&&(e.components=K),re&&(e.directives=re)}function Gc(e,i,d=ft){Oe(e)&&(e=Br(e));for(const t in e){const u=e[t];let a;ze(u)?"default"in u?a=zn(u.from||t,u.default,!0):a=zn(u.from||t):a=zn(u),Ye(a)?Object.defineProperty(i,t,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):i[t]=a}}function lo(e,i,d){pt(Oe(e)?e.map(t=>t.bind(i.proxy)):e.bind(i.proxy),i,d)}function Ss(e,i,d,t){const u=t.includes(".")?ms(d,t):()=>d[t];if(Ge(e)){const a=i[e];Pe(a)&&Vn(u,a)}else if(Pe(e))Vn(u,e.bind(d));else if(ze(e))if(Oe(e))e.forEach(a=>Ss(a,i,d,t));else{const a=Pe(e.handler)?e.handler.bind(d):i[e.handler];Pe(a)&&Vn(u,a,e)}}function hi(e){const i=e.type,{mixins:d,extends:t}=i,{mixins:u,optionsCache:a,config:{optionMergeStrategies:c}}=e.appContext,r=a.get(i);let s;return r?s=r:!u.length&&!d&&!t?s=i:(s={},u.length&&u.forEach(l=>Yn(s,l,c,!0)),Yn(s,i,c)),ze(i)&&a.set(i,s),s}function Yn(e,i,d,t=!1){const{mixins:u,extends:a}=i;a&&Yn(e,a,d,!0),u&&u.forEach(c=>Yn(e,c,d,!0));for(const c in i)if(!(t&&c==="expose")){const r=qc[c]||d&&d[c];e[c]=r?r(e[c],i[c]):i[c]}return e}const qc={data:uo,props:fo,emits:fo,methods:vn,computed:vn,beforeCreate:Ze,created:Ze,beforeMount:Ze,mounted:Ze,beforeUpdate:Ze,updated:Ze,beforeDestroy:Ze,beforeUnmount:Ze,destroyed:Ze,unmounted:Ze,activated:Ze,deactivated:Ze,errorCaptured:Ze,serverPrefetch:Ze,components:vn,directives:vn,watch:$c,provide:uo,inject:Jc};function uo(e,i){return i?e?function(){return Ke(Pe(e)?e.call(this,this):e,Pe(i)?i.call(this,this):i)}:i:e}function Jc(e,i){return vn(Br(e),Br(i))}function Br(e){if(Oe(e)){const i={};for(let d=0;d<e.length;d++)i[e[d]]=e[d];return i}return e}function Ze(e,i){return e?[...new Set([].concat(e,i))]:i}function vn(e,i){return e?Ke(Object.create(null),e,i):i}function fo(e,i){return e?Oe(e)&&Oe(i)?[...new Set([...e,...i])]:Ke(Object.create(null),co(e),co(i??{})):i}function $c(e,i){if(!e)return i;if(!i)return e;const d=Ke(Object.create(null),e);for(const t in i)d[t]=Ze(e[t],i[t]);return d}function bs(){return{app:null,config:{isNativeTag:md,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Yc=0;function Kc(e,i){return function(t,u=null){Pe(t)||(t=Ke({},t)),u!=null&&!ze(u)&&(u=null);const a=bs(),c=new Set;let r=!1;const s=a.app={_uid:Yc++,_component:t,_props:u,_container:null,_context:a,_instance:null,version:Sl,get config(){return a.config},set config(l){},use(l,...g){return c.has(l)||(l&&Pe(l.install)?(c.add(l),l.install(s,...g)):Pe(l)&&(c.add(l),l(s,...g))),s},mixin(l){return a.mixins.includes(l)||a.mixins.push(l),s},component(l,g){return g?(a.components[l]=g,s):a.components[l]},directive(l,g){return g?(a.directives[l]=g,s):a.directives[l]},mount(l,g,o){if(!r){const v=Je(t,u);return v.appContext=a,g&&i?i(v,l):e(v,l,o),r=!0,s._container=l,l.__vue_app__=s,bi(v.component)||v.component.proxy}},unmount(){r&&(e(null,s._container),delete s._container.__vue_app__)},provide(l,g){return a.provides[l]=g,s},runWithContext(l){Kn=s;try{return l()}finally{Kn=null}}};return s}}let Kn=null;function vi(e,i){if($e){let d=$e.provides;const t=$e.parent&&$e.parent.provides;t===d&&(d=$e.provides=Object.create(t)),d[e]=i}}function zn(e,i,d=!1){const t=$e||ut;if(t||Kn){const u=t?t.parent==null?t.vnode.appContext&&t.vnode.appContext.provides:t.parent.provides:Kn._context.provides;if(u&&e in u)return u[e];if(arguments.length>1)return d&&Pe(i)?i.call(t&&t.proxy):i}}function Xc(e,i,d,t=!1){const u={},a={};Gn(a,ar,1),e.propsDefaults=Object.create(null),ws(e,i,u,a);for(const c in e.propsOptions[0])c in u||(u[c]=void 0);d?e.props=t?u:oc(u):e.type.props?e.props=u:e.props=a,e.attrs=a}function Qc(e,i,d,t){const{props:u,attrs:a,vnode:{patchFlag:c}}=e,r=Fe(u),[s]=e.propsOptions;let l=!1;if((t||c>0)&&!(c&16)){if(c&8){const g=e.vnode.dynamicProps;for(let o=0;o<g.length;o++){let v=g[o];if(ir(e.emitsOptions,v))continue;const h=i[v];if(s)if(Be(a,v))h!==a[v]&&(a[v]=h,l=!0);else{const k=_t(v);u[k]=Fr(s,r,k,h,e,!1)}else h!==a[v]&&(a[v]=h,l=!0)}}}else{ws(e,i,u,a)&&(l=!0);let g;for(const o in r)(!i||!Be(i,o)&&((g=ln(o))===o||!Be(i,g)))&&(s?d&&(d[o]!==void 0||d[g]!==void 0)&&(u[o]=Fr(s,r,o,void 0,e,!0)):delete u[o]);if(a!==r)for(const o in a)(!i||!Be(i,o))&&(delete a[o],l=!0)}l&&Tt(e,"set","$attrs")}function ws(e,i,d,t){const[u,a]=e.propsOptions;let c=!1,r;if(i)for(let s in i){if(Fn(s))continue;const l=i[s];let g;u&&Be(u,g=_t(s))?!a||!a.includes(g)?d[g]=l:(r||(r={}))[g]=l:ir(e.emitsOptions,s)||(!(s in t)||l!==t[s])&&(t[s]=l,c=!0)}if(a){const s=Fe(d),l=r||Ue;for(let g=0;g<a.length;g++){const o=a[g];d[o]=Fr(u,s,o,l[o],e,!Be(l,o))}}return c}function Fr(e,i,d,t,u,a){const c=e[d];if(c!=null){const r=Be(c,"default");if(r&&t===void 0){const s=c.default;if(c.type!==Function&&!c.skipFactory&&Pe(s)){const{propsDefaults:l}=u;d in l?t=l[d]:(cn(u),t=l[d]=s.call(null,i),qt())}else t=s}c[0]&&(a&&!r?t=!1:c[1]&&(t===""||t===ln(d))&&(t=!0))}return t}function Es(e,i,d=!1){const t=i.propsCache,u=t.get(e);if(u)return u;const a=e.props,c={},r=[];let s=!1;if(!Pe(e)){const g=o=>{s=!0;const[v,h]=Es(o,i,!0);Ke(c,v),h&&r.push(...h)};!d&&i.mixins.length&&i.mixins.forEach(g),e.extends&&g(e.extends),e.mixins&&e.mixins.forEach(g)}if(!a&&!s)return ze(e)&&t.set(e,en),en;if(Oe(a))for(let g=0;g<a.length;g++){const o=_t(a[g]);po(o)&&(c[o]=Ue)}else if(a)for(const g in a){const o=_t(g);if(po(o)){const v=a[g],h=c[o]=Oe(v)||Pe(v)?{type:v}:Ke({},v);if(h){const k=vo(Boolean,h.type),_=vo(String,h.type);h[0]=k>-1,h[1]=_<0||k<_,(k>-1||Be(h,"default"))&&r.push(o)}}}const l=[c,r];return ze(e)&&t.set(e,l),l}function po(e){return e[0]!=="$"}function mo(e){const i=e&&e.toString().match(/^\s*(function|class) (\w+)/);return i?i[2]:e===null?"null":""}function ho(e,i){return mo(e)===mo(i)}function vo(e,i){return Oe(i)?i.findIndex(d=>ho(d,e)):Pe(i)&&ho(i,e)?0:-1}const Cs=e=>e[0]==="_"||e==="$stable",gi=e=>Oe(e)?e.map(dt):[dt(e)],Zc=(e,i,d)=>{if(i._n)return i;const t=Ut((...u)=>gi(i(...u)),d);return t._c=!1,t},Ts=(e,i,d)=>{const t=e._ctx;for(const u in e){if(Cs(u))continue;const a=e[u];if(Pe(a))i[u]=Zc(u,a,t);else if(a!=null){const c=gi(a);i[u]=()=>c}}},ks=(e,i)=>{const d=gi(i);e.slots.default=()=>d},el=(e,i)=>{if(e.vnode.shapeFlag&32){const d=i._;d?(e.slots=Fe(i),Gn(i,"_",d)):Ts(i,e.slots={})}else e.slots={},i&&ks(e,i);Gn(e.slots,ar,1)},tl=(e,i,d)=>{const{vnode:t,slots:u}=e;let a=!0,c=Ue;if(t.shapeFlag&32){const r=i._;r?d&&r===1?a=!1:(Ke(u,i),!d&&r===1&&delete u._):(a=!i.$stable,Ts(i,u)),c=i}else i&&(ks(e,i),c={default:1});if(a)for(const r in u)!Cs(r)&&!(r in c)&&delete u[r]};function Vr(e,i,d,t,u=!1){if(Oe(e)){e.forEach((v,h)=>Vr(v,i&&(Oe(i)?i[h]:i),d,t,u));return}if(Un(t)&&!u)return;const a=t.shapeFlag&4?bi(t.component)||t.component.proxy:t.el,c=u?null:a,{i:r,r:s}=e,l=i&&i.r,g=r.refs===Ue?r.refs={}:r.refs,o=r.setupState;if(l!=null&&l!==s&&(Ge(l)?(g[l]=null,Be(o,l)&&(o[l]=null)):Ye(l)&&(l.value=null)),Pe(s))Nt(s,r,12,[c,g]);else{const v=Ge(s),h=Ye(s);if(v||h){const k=()=>{if(e.f){const _=v?Be(o,s)?o[s]:g[s]:s.value;u?Oe(_)&&$r(_,a):Oe(_)?_.includes(a)||_.push(a):v?(g[s]=[a],Be(o,s)&&(o[s]=g[s])):(s.value=[a],e.k&&(g[e.k]=s.value))}else v?(g[s]=c,Be(o,s)&&(o[s]=c)):h&&(s.value=c,e.k&&(g[e.k]=c))};c?(k.id=-1,et(k,d)):k()}}}const et=xc;function nl(e){return rl(e)}function rl(e,i){const d=Mr();d.__VUE__=!0;const{insert:t,remove:u,patchProp:a,createElement:c,createText:r,createComment:s,setText:l,setElementText:g,parentNode:o,nextSibling:v,setScopeId:h=ft,insertStaticContent:k}=e,_=(X,w,M,N=null,F=null,Y=null,Q=!1,ee=null,Z=!!w.dynamicChildren)=>{if(X===w)return;X&&!At(X,w)&&(N=ve(X),J(X,F,Y,!0),X=null),w.patchFlag===-2&&(Z=!1,w.dynamicChildren=null);const{type:ie,ref:oe,shapeFlag:le}=w;switch(ie){case sr:y(X,w,M,N);break;case Jt:S(X,w,M,N);break;case _r:X==null&&x(w,M,N,Q);break;case gt:K(X,w,M,N,F,Y,Q,ee,Z);break;default:le&1?I(X,w,M,N,F,Y,Q,ee,Z):le&6?re(X,w,M,N,F,Y,Q,ee,Z):(le&64||le&128)&&ie.process(X,w,M,N,F,Y,Q,ee,Z,xe)}oe!=null&&F&&Vr(oe,X&&X.ref,Y,w||X,!w)},y=(X,w,M,N)=>{if(X==null)t(w.el=r(w.children),M,N);else{const F=w.el=X.el;w.children!==X.children&&l(F,w.children)}},S=(X,w,M,N)=>{X==null?t(w.el=s(w.children||""),M,N):w.el=X.el},x=(X,w,M,N)=>{[X.el,X.anchor]=k(X.children,w,M,N,X.el,X.anchor)},D=({el:X,anchor:w},M,N)=>{let F;for(;X&&X!==w;)F=v(X),t(X,M,N),X=F;t(w,M,N)},E=({el:X,anchor:w})=>{let M;for(;X&&X!==w;)M=v(X),u(X),X=M;u(w)},I=(X,w,M,N,F,Y,Q,ee,Z)=>{Q=Q||w.type==="svg",X==null?p(w,M,N,F,Y,Q,ee,Z):z(X,w,F,Y,Q,ee,Z)},p=(X,w,M,N,F,Y,Q,ee)=>{let Z,ie;const{type:oe,props:le,shapeFlag:Ce,transition:fe,dirs:be}=X;if(Z=X.el=c(X.type,Y,le&&le.is,le),Ce&8?g(Z,X.children):Ce&16&&P(X.children,Z,null,N,F,Y&&oe!=="foreignObject",Q,ee),be&&Bt(X,null,N,"created"),B(Z,X,X.scopeId,Q,N),le){for(const C in le)C!=="value"&&!Fn(C)&&a(Z,C,null,le[C],Y,X.children,N,F,Se);"value"in le&&a(Z,"value",null,le.value),(ie=le.onVnodeBeforeMount)&&vt(ie,N,X)}be&&Bt(X,null,N,"beforeMount");const Re=(!F||F&&!F.pendingBranch)&&fe&&!fe.persisted;Re&&fe.beforeEnter(Z),t(Z,w,M),((ie=le&&le.onVnodeMounted)||Re||be)&&et(()=>{ie&&vt(ie,N,X),Re&&fe.enter(Z),be&&Bt(X,null,N,"mounted")},F)},B=(X,w,M,N,F)=>{if(M&&h(X,M),N)for(let Y=0;Y<N.length;Y++)h(X,N[Y]);if(F){let Y=F.subTree;if(w===Y){const Q=F.vnode;B(X,Q,Q.scopeId,Q.slotScopeIds,F.parent)}}},P=(X,w,M,N,F,Y,Q,ee,Z=0)=>{for(let ie=Z;ie<X.length;ie++){const oe=X[ie]=ee?Mt(X[ie]):dt(X[ie]);_(null,oe,w,M,N,F,Y,Q,ee)}},z=(X,w,M,N,F,Y,Q)=>{const ee=w.el=X.el;let{patchFlag:Z,dynamicChildren:ie,dirs:oe}=w;Z|=X.patchFlag&16;const le=X.props||Ue,Ce=w.props||Ue;let fe;M&&Ft(M,!1),(fe=Ce.onVnodeBeforeUpdate)&&vt(fe,M,w,X),oe&&Bt(w,X,M,"beforeUpdate"),M&&Ft(M,!0);const be=F&&w.type!=="foreignObject";if(ie?te(X.dynamicChildren,ie,ee,M,N,be,Y):Q||ye(X,w,ee,null,M,N,be,Y,!1),Z>0){if(Z&16)W(ee,w,le,Ce,M,N,F);else if(Z&2&&le.class!==Ce.class&&a(ee,"class",null,Ce.class,F),Z&4&&a(ee,"style",le.style,Ce.style,F),Z&8){const Re=w.dynamicProps;for(let C=0;C<Re.length;C++){const V=Re[C],G=le[V],ne=Ce[V];(ne!==G||V==="value")&&a(ee,V,G,ne,F,X.children,M,N,Se)}}Z&1&&X.children!==w.children&&g(ee,w.children)}else!Q&&ie==null&&W(ee,w,le,Ce,M,N,F);((fe=Ce.onVnodeUpdated)||oe)&&et(()=>{fe&&vt(fe,M,w,X),oe&&Bt(w,X,M,"updated")},N)},te=(X,w,M,N,F,Y,Q)=>{for(let ee=0;ee<w.length;ee++){const Z=X[ee],ie=w[ee],oe=Z.el&&(Z.type===gt||!At(Z,ie)||Z.shapeFlag&70)?o(Z.el):M;_(Z,ie,oe,null,N,F,Y,Q,!0)}},W=(X,w,M,N,F,Y,Q)=>{if(M!==N){if(M!==Ue)for(const ee in M)!Fn(ee)&&!(ee in N)&&a(X,ee,M[ee],null,Q,w.children,F,Y,Se);for(const ee in N){if(Fn(ee))continue;const Z=N[ee],ie=M[ee];Z!==ie&&ee!=="value"&&a(X,ee,ie,Z,Q,w.children,F,Y,Se)}"value"in N&&a(X,"value",M.value,N.value)}},K=(X,w,M,N,F,Y,Q,ee,Z)=>{const ie=w.el=X?X.el:r(""),oe=w.anchor=X?X.anchor:r("");let{patchFlag:le,dynamicChildren:Ce,slotScopeIds:fe}=w;fe&&(ee=ee?ee.concat(fe):fe),X==null?(t(ie,M,N),t(oe,M,N),P(w.children,M,oe,F,Y,Q,ee,Z)):le>0&&le&64&&Ce&&X.dynamicChildren?(te(X.dynamicChildren,Ce,M,F,Y,Q,ee),(w.key!=null||F&&w===F.subTree)&&Is(X,w,!0)):ye(X,w,M,oe,F,Y,Q,ee,Z)},re=(X,w,M,N,F,Y,Q,ee,Z)=>{w.slotScopeIds=ee,X==null?w.shapeFlag&512?F.ctx.activate(w,M,N,Q,Z):f(w,M,N,F,Y,Q,Z):ae(X,w,Z)},f=(X,w,M,N,F,Y,Q)=>{const ee=X.component=ul(X,N,F);if(hs(X)&&(ee.ctx.renderer=xe),fl(ee),ee.asyncDep){if(F&&F.registerDep(ee,ce),!X.el){const Z=ee.subTree=Je(Jt);S(null,Z,w,M)}return}ce(ee,X,w,M,F,Y,Q)},ae=(X,w,M)=>{const N=w.component=X.component;if(bc(X,w,M))if(N.asyncDep&&!N.asyncResolved){he(N,w,M);return}else N.next=w,hc(N.update),N.update();else w.el=X.el,N.vnode=w},ce=(X,w,M,N,F,Y,Q)=>{const ee=()=>{if(X.isMounted){let{next:oe,bu:le,u:Ce,parent:fe,vnode:be}=X,Re=oe,C;Ft(X,!1),oe?(oe.el=be.el,he(X,oe,Q)):oe=be,le&&vr(le),(C=oe.props&&oe.props.onVnodeBeforeUpdate)&&vt(C,fe,oe,be),Ft(X,!0);const V=gr(X),G=X.subTree;X.subTree=V,_(G,V,o(G.el),ve(G),X,F,Y),oe.el=V.el,Re===null&&ci(X,V.el),Ce&&et(Ce,F),(C=oe.props&&oe.props.onVnodeUpdated)&&et(()=>vt(C,fe,oe,be),F)}else{let oe;const{el:le,props:Ce}=w,{bm:fe,m:be,parent:Re}=X,C=Un(w);if(Ft(X,!1),fe&&vr(fe),!C&&(oe=Ce&&Ce.onVnodeBeforeMount)&&vt(oe,Re,w),Ft(X,!0),le&&de){const V=()=>{X.subTree=gr(X),de(le,X.subTree,X,F,null)};C?w.type.__asyncLoader().then(()=>!X.isUnmounted&&V()):V()}else{const V=X.subTree=gr(X);_(null,V,M,N,X,F,Y),w.el=V.el}if(be&&et(be,F),!C&&(oe=Ce&&Ce.onVnodeMounted)){const V=w;et(()=>vt(oe,Re,V),F)}(w.shapeFlag&256||Re&&Un(Re.vnode)&&Re.vnode.shapeFlag&256)&&X.a&&et(X.a,F),X.isMounted=!0,w=M=N=null}},Z=X.effect=new ei(ee,()=>di(ie),X.scope),ie=X.update=()=>Z.run();ie.id=X.uid,Ft(X,!0),ie()},he=(X,w,M)=>{w.component=X;const N=X.vnode.props;X.vnode=w,X.next=null,Qc(X,w.props,N,M),tl(X,w.children,M),un(),io(),fn()},ye=(X,w,M,N,F,Y,Q,ee,Z=!1)=>{const ie=X&&X.children,oe=X?X.shapeFlag:0,le=w.children,{patchFlag:Ce,shapeFlag:fe}=w;if(Ce>0){if(Ce&128){O(ie,le,M,N,F,Y,Q,ee,Z);return}else if(Ce&256){R(ie,le,M,N,F,Y,Q,ee,Z);return}}fe&8?(oe&16&&Se(ie,F,Y),le!==ie&&g(M,le)):oe&16?fe&16?O(ie,le,M,N,F,Y,Q,ee,Z):Se(ie,F,Y,!0):(oe&8&&g(M,""),fe&16&&P(le,M,N,F,Y,Q,ee,Z))},R=(X,w,M,N,F,Y,Q,ee,Z)=>{X=X||en,w=w||en;const ie=X.length,oe=w.length,le=Math.min(ie,oe);let Ce;for(Ce=0;Ce<le;Ce++){const fe=w[Ce]=Z?Mt(w[Ce]):dt(w[Ce]);_(X[Ce],fe,M,null,F,Y,Q,ee,Z)}ie>oe?Se(X,F,Y,!0,!1,le):P(w,M,N,F,Y,Q,ee,Z,le)},O=(X,w,M,N,F,Y,Q,ee,Z)=>{let ie=0;const oe=w.length;let le=X.length-1,Ce=oe-1;for(;ie<=le&&ie<=Ce;){const fe=X[ie],be=w[ie]=Z?Mt(w[ie]):dt(w[ie]);if(At(fe,be))_(fe,be,M,null,F,Y,Q,ee,Z);else break;ie++}for(;ie<=le&&ie<=Ce;){const fe=X[le],be=w[Ce]=Z?Mt(w[Ce]):dt(w[Ce]);if(At(fe,be))_(fe,be,M,null,F,Y,Q,ee,Z);else break;le--,Ce--}if(ie>le){if(ie<=Ce){const fe=Ce+1,be=fe<oe?w[fe].el:N;for(;ie<=Ce;)_(null,w[ie]=Z?Mt(w[ie]):dt(w[ie]),M,be,F,Y,Q,ee,Z),ie++}}else if(ie>Ce)for(;ie<=le;)J(X[ie],F,Y,!0),ie++;else{const fe=ie,be=ie,Re=new Map;for(ie=be;ie<=Ce;ie++){const Ae=w[ie]=Z?Mt(w[ie]):dt(w[ie]);Ae.key!=null&&Re.set(Ae.key,ie)}let C,V=0;const G=Ce-be+1;let ne=!1,ge=0;const Te=new Array(G);for(ie=0;ie<G;ie++)Te[ie]=0;for(ie=fe;ie<=le;ie++){const Ae=X[ie];if(V>=G){J(Ae,F,Y,!0);continue}let je;if(Ae.key!=null)je=Re.get(Ae.key);else for(C=be;C<=Ce;C++)if(Te[C-be]===0&&At(Ae,w[C])){je=C;break}je===void 0?J(Ae,F,Y,!0):(Te[je-be]=ie+1,je>=ge?ge=je:ne=!0,_(Ae,w[je],M,null,F,Y,Q,ee,Z),V++)}const ke=ne?il(Te):en;for(C=ke.length-1,ie=G-1;ie>=0;ie--){const Ae=be+ie,je=w[Ae],We=Ae+1<oe?w[Ae+1].el:N;Te[ie]===0?_(null,je,M,We,F,Y,Q,ee,Z):ne&&(C<0||ie!==ke[C]?j(je,M,We,2):C--)}}},j=(X,w,M,N,F=null)=>{const{el:Y,type:Q,transition:ee,children:Z,shapeFlag:ie}=X;if(ie&6){j(X.component.subTree,w,M,N);return}if(ie&128){X.suspense.move(w,M,N);return}if(ie&64){Q.move(X,w,M,xe);return}if(Q===gt){t(Y,w,M);for(let le=0;le<Z.length;le++)j(Z[le],w,M,N);t(X.anchor,w,M);return}if(Q===_r){D(X,w,M);return}if(N!==2&&ie&1&&ee)if(N===0)ee.beforeEnter(Y),t(Y,w,M),et(()=>ee.enter(Y),F);else{const{leave:le,delayLeave:Ce,afterLeave:fe}=ee,be=()=>t(Y,w,M),Re=()=>{le(Y,()=>{be(),fe&&fe()})};Ce?Ce(Y,be,Re):Re()}else t(Y,w,M)},J=(X,w,M,N=!1,F=!1)=>{const{type:Y,props:Q,ref:ee,children:Z,dynamicChildren:ie,shapeFlag:oe,patchFlag:le,dirs:Ce}=X;if(ee!=null&&Vr(ee,null,M,X,!0),oe&256){w.ctx.deactivate(X);return}const fe=oe&1&&Ce,be=!Un(X);let Re;if(be&&(Re=Q&&Q.onVnodeBeforeUnmount)&&vt(Re,w,X),oe&6)_e(X.component,M,N);else{if(oe&128){X.suspense.unmount(M,N);return}fe&&Bt(X,null,w,"beforeUnmount"),oe&64?X.type.remove(X,w,M,F,xe,N):ie&&(Y!==gt||le>0&&le&64)?Se(ie,w,M,!1,!0):(Y===gt&&le&384||!F&&oe&16)&&Se(Z,w,M),N&&q(X)}(be&&(Re=Q&&Q.onVnodeUnmounted)||fe)&&et(()=>{Re&&vt(Re,w,X),fe&&Bt(X,null,w,"unmounted")},M)},q=X=>{const{type:w,el:M,anchor:N,transition:F}=X;if(w===gt){se(M,N);return}if(w===_r){E(X);return}const Y=()=>{u(M),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(X.shapeFlag&1&&F&&!F.persisted){const{leave:Q,delayLeave:ee}=F,Z=()=>Q(M,Y);ee?ee(X.el,Y,Z):Z()}else Y()},se=(X,w)=>{let M;for(;X!==w;)M=v(X),u(X),X=M;u(w)},_e=(X,w,M)=>{const{bum:N,scope:F,update:Y,subTree:Q,um:ee}=X;N&&vr(N),F.stop(),Y&&(Y.active=!1,J(Q,X,w,M)),ee&&et(ee,w),et(()=>{X.isUnmounted=!0},w),w&&w.pendingBranch&&!w.isUnmounted&&X.asyncDep&&!X.asyncResolved&&X.suspenseId===w.pendingId&&(w.deps--,w.deps===0&&w.resolve())},Se=(X,w,M,N=!1,F=!1,Y=0)=>{for(let Q=Y;Q<X.length;Q++)J(X[Q],w,M,N,F)},ve=X=>X.shapeFlag&6?ve(X.component.subTree):X.shapeFlag&128?X.suspense.next():v(X.anchor||X.el),we=(X,w,M)=>{X==null?w._vnode&&J(w._vnode,null,null,!0):_(w._vnode||null,X,w,null,null,null,M),io(),cs(),w._vnode=X},xe={p:_,um:J,m:j,r:q,mt:f,mc:P,pc:ye,pbc:te,n:ve,o:e};let Me,de;return i&&([Me,de]=i(xe)),{render:we,hydrate:Me,createApp:Kc(we,Me)}}function Ft({effect:e,update:i},d){e.allowRecurse=i.allowRecurse=d}function Is(e,i,d=!1){const t=e.children,u=i.children;if(Oe(t)&&Oe(u))for(let a=0;a<t.length;a++){const c=t[a];let r=u[a];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=u[a]=Mt(u[a]),r.el=c.el),d||Is(c,r)),r.type===sr&&(r.el=c.el)}}function il(e){const i=e.slice(),d=[0];let t,u,a,c,r;const s=e.length;for(t=0;t<s;t++){const l=e[t];if(l!==0){if(u=d[d.length-1],e[u]<l){i[t]=u,d.push(t);continue}for(a=0,c=d.length-1;a<c;)r=a+c>>1,e[d[r]]<l?a=r+1:c=r;l<e[d[a]]&&(a>0&&(i[t]=d[a-1]),d[a]=t)}}for(a=d.length,c=d[a-1];a-- >0;)d[a]=c,c=i[c];return d}const ol=e=>e.__isTeleport,gt=Symbol.for("v-fgt"),sr=Symbol.for("v-txt"),Jt=Symbol.for("v-cmt"),_r=Symbol.for("v-stc"),yn=[];let st=null;function Ht(e=!1){yn.push(st=e?null:[])}function Rs(){yn.pop(),st=yn[yn.length-1]||null}let an=1;function go(e){an+=e}function xs(e){return e.dynamicChildren=an>0?st||en:null,Rs(),an>0&&st&&st.push(e),e}function yi(e,i,d,t,u,a){return xs(mt(e,i,d,t,u,a,!0))}function Ur(e,i,d,t,u){return xs(Je(e,i,d,t,u,!0))}function Xn(e){return e?e.__v_isVNode===!0:!1}function At(e,i){return e.type===i.type&&e.key===i.key}const ar="__vInternal",Os=({key:e})=>e??null,Wn=({ref:e,ref_key:i,ref_for:d})=>(typeof e=="number"&&(e=""+e),e!=null?Ge(e)||Ye(e)||Pe(e)?{i:ut,r:e,k:i,f:!!d}:e:null);function mt(e,i=null,d=null,t=0,u=null,a=e===gt?0:1,c=!1,r=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:i,key:i&&Os(i),ref:i&&Wn(i),scopeId:fs,slotScopeIds:null,children:d,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:t,dynamicProps:u,dynamicChildren:null,appContext:null,ctx:ut};return r?(_i(s,d),a&128&&e.normalize(s)):d&&(s.shapeFlag|=Ge(d)?8:16),an>0&&!c&&st&&(s.patchFlag>0||a&6)&&s.patchFlag!==32&&st.push(s),s}const Je=sl;function sl(e,i=null,d=null,t=0,u=null,a=!1){if((!e||e===Vc)&&(e=Jt),Xn(e)){const r=dn(e,i,!0);return d&&_i(r,d),an>0&&!a&&st&&(r.shapeFlag&6?st[st.indexOf(e)]=r:st.push(r)),r.patchFlag|=-2,r}if(gl(e)&&(e=e.__vccOpts),i){i=al(i);let{class:r,style:s}=i;r&&!Ge(r)&&(i.class=Qr(r)),ze(s)&&(Qo(s)&&!Oe(s)&&(s=Ke({},s)),i.style=Xr(s))}const c=Ge(e)?1:wc(e)?128:ol(e)?64:ze(e)?4:Pe(e)?2:0;return mt(e,i,d,t,u,c,a,!0)}function al(e){return e?Qo(e)||ar in e?Ke({},e):e:null}function dn(e,i,d=!1){const{props:t,ref:u,patchFlag:a,children:c}=e,r=i?dl(t||{},i):t;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:r,key:r&&Os(r),ref:i&&i.ref?d&&u?Oe(u)?u.concat(Wn(i)):[u,Wn(i)]:Wn(i):u,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:i&&e.type!==gt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&dn(e.ssContent),ssFallback:e.ssFallback&&dn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function Gt(e=" ",i=0){return Je(sr,null,e,i)}function dt(e){return e==null||typeof e=="boolean"?Je(Jt):Oe(e)?Je(gt,null,e.slice()):typeof e=="object"?Mt(e):Je(sr,null,String(e))}function Mt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:dn(e)}function _i(e,i){let d=0;const{shapeFlag:t}=e;if(i==null)i=null;else if(Oe(i))d=16;else if(typeof i=="object")if(t&65){const u=i.default;u&&(u._c&&(u._d=!1),_i(e,u()),u._c&&(u._d=!0));return}else{d=32;const u=i._;!u&&!(ar in i)?i._ctx=ut:u===3&&ut&&(ut.slots._===1?i._=1:(i._=2,e.patchFlag|=1024))}else Pe(i)?(i={default:i,_ctx:ut},d=32):(i=String(i),t&64?(d=16,i=[Gt(i)]):d=8);e.children=i,e.shapeFlag|=d}function dl(...e){const i={};for(let d=0;d<e.length;d++){const t=e[d];for(const u in t)if(u==="class")i.class!==t.class&&(i.class=Qr([i.class,t.class]));else if(u==="style")i.style=Xr([i.style,t.style]);else if(Zn(u)){const a=i[u],c=t[u];c&&a!==c&&!(Oe(a)&&a.includes(c))&&(i[u]=a?[].concat(a,c):c)}else u!==""&&(i[u]=t[u])}return i}function vt(e,i,d,t=null){pt(e,i,7,[d,t])}const cl=bs();let ll=0;function ul(e,i,d){const t=e.type,u=(i?i.appContext:e.appContext)||cl,a={uid:ll++,vnode:e,type:t,parent:i,appContext:u,root:null,next:null,subTree:null,effect:null,update:null,scope:new xd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:i?i.provides:Object.create(u.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Es(t,u),emitsOptions:us(t,u),emit:null,emitted:null,propsDefaults:Ue,inheritAttrs:t.inheritAttrs,ctx:Ue,data:Ue,props:Ue,attrs:Ue,slots:Ue,refs:Ue,setupState:Ue,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:d,suspenseId:d?d.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=i?i.root:a,a.emit=gc.bind(null,a),e.ce&&e.ce(a),a}let $e=null,Si,Qt,yo="__VUE_INSTANCE_SETTERS__";(Qt=Mr()[yo])||(Qt=Mr()[yo]=[]),Qt.push(e=>$e=e),Si=e=>{Qt.length>1?Qt.forEach(i=>i(e)):Qt[0](e)};const cn=e=>{Si(e),e.scope.on()},qt=()=>{$e&&$e.scope.off(),Si(null)};function Ms(e){return e.vnode.shapeFlag&4}let Cn=!1;function fl(e,i=!1){Cn=i;const{props:d,children:t}=e.vnode,u=Ms(e);Xc(e,d,u,i),el(e,t);const a=u?pl(e,i):void 0;return Cn=!1,a}function pl(e,i){const d=e.type;e.accessCache=Object.create(null),e.proxy=Zo(new Proxy(e.ctx,Wc));const{setup:t}=d;if(t){const u=e.setupContext=t.length>1?hl(e):null;cn(e),un();const a=Nt(t,e,0,[e.props,u]);if(fn(),qt(),No(a)){if(a.then(qt,qt),i)return a.then(c=>{zr(e,c,i)}).catch(c=>{kn(c,e,0)});e.asyncDep=a}else zr(e,a,i)}else As(e,i)}function zr(e,i,d){Pe(i)?e.type.__ssrInlineRender?e.ssrRender=i:e.render=i:ze(i)&&(e.setupState=rs(i)),As(e,d)}let _o;function As(e,i,d){const t=e.type;if(!e.render){if(!i&&_o&&!t.render){const u=t.template||hi(e).template;if(u){const{isCustomElement:a,compilerOptions:c}=e.appContext.config,{delimiters:r,compilerOptions:s}=t,l=Ke(Ke({isCustomElement:a,delimiters:r},c),s);t.render=_o(u,l)}}e.render=t.render||ft}cn(e),un(),Hc(e),fn(),qt()}function ml(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(i,d){return tt(e,"get","$attrs"),i[d]}}))}function hl(e){const i=d=>{e.exposed=d||{}};return{get attrs(){return ml(e)},slots:e.slots,emit:e.emit,expose:i}}function bi(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(rs(Zo(e.exposed)),{get(i,d){if(d in i)return i[d];if(d in gn)return gn[d](e)},has(i,d){return d in i||d in gn}}))}function vl(e,i=!0){return Pe(e)?e.displayName||e.name:e.name||i&&e.__name}function gl(e){return Pe(e)&&"__vccOpts"in e}const Ps=(e,i)=>fc(e,i,Cn);function ct(e,i,d){const t=arguments.length;return t===2?ze(i)&&!Oe(i)?Xn(i)?Je(e,null,[i]):Je(e,i):Je(e,null,i):(t>3?d=Array.prototype.slice.call(arguments,2):t===3&&Xn(d)&&(d=[d]),Je(e,i,d))}const yl=Symbol.for("v-scx"),_l=()=>zn(yl),Sl="3.3.4",bl="http://www.w3.org/2000/svg",zt=typeof document<"u"?document:null,So=zt&&zt.createElement("template"),wl={insert:(e,i,d)=>{i.insertBefore(e,d||null)},remove:e=>{const i=e.parentNode;i&&i.removeChild(e)},createElement:(e,i,d,t)=>{const u=i?zt.createElementNS(bl,e):zt.createElement(e,d?{is:d}:void 0);return e==="select"&&t&&t.multiple!=null&&u.setAttribute("multiple",t.multiple),u},createText:e=>zt.createTextNode(e),createComment:e=>zt.createComment(e),setText:(e,i)=>{e.nodeValue=i},setElementText:(e,i)=>{e.textContent=i},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>zt.querySelector(e),setScopeId(e,i){e.setAttribute(i,"")},insertStaticContent(e,i,d,t,u,a){const c=d?d.previousSibling:i.lastChild;if(u&&(u===a||u.nextSibling))for(;i.insertBefore(u.cloneNode(!0),d),!(u===a||!(u=u.nextSibling)););else{So.innerHTML=t?`<svg>${e}</svg>`:e;const r=So.content;if(t){const s=r.firstChild;for(;s.firstChild;)r.appendChild(s.firstChild);r.removeChild(s)}i.insertBefore(r,d)}return[c?c.nextSibling:i.firstChild,d?d.previousSibling:i.lastChild]}};function El(e,i,d){const t=e._vtc;t&&(i=(i?[i,...t]:[...t]).join(" ")),i==null?e.removeAttribute("class"):d?e.setAttribute("class",i):e.className=i}function Cl(e,i,d){const t=e.style,u=Ge(d);if(d&&!u){if(i&&!Ge(i))for(const a in i)d[a]==null&&Wr(t,a,"");for(const a in d)Wr(t,a,d[a])}else{const a=t.display;u?i!==d&&(t.cssText=d):i&&e.removeAttribute("style"),"_vod"in e&&(t.display=a)}}const bo=/\s*!important$/;function Wr(e,i,d){if(Oe(d))d.forEach(t=>Wr(e,i,t));else if(d==null&&(d=""),i.startsWith("--"))e.setProperty(i,d);else{const t=Tl(e,i);bo.test(d)?e.setProperty(ln(t),d.replace(bo,""),"important"):e[t]=d}}const wo=["Webkit","Moz","ms"],Sr={};function Tl(e,i){const d=Sr[i];if(d)return d;let t=_t(i);if(t!=="filter"&&t in e)return Sr[i]=t;t=nr(t);for(let u=0;u<wo.length;u++){const a=wo[u]+t;if(a in e)return Sr[i]=a}return i}const Eo="http://www.w3.org/1999/xlink";function kl(e,i,d,t,u){if(t&&i.startsWith("xlink:"))d==null?e.removeAttributeNS(Eo,i.slice(6,i.length)):e.setAttributeNS(Eo,i,d);else{const a=Id(i);d==null||a&&!Fo(d)?e.removeAttribute(i):e.setAttribute(i,a?"":d)}}function Il(e,i,d,t,u,a,c){if(i==="innerHTML"||i==="textContent"){t&&c(t,u,a),e[i]=d??"";return}const r=e.tagName;if(i==="value"&&r!=="PROGRESS"&&!r.includes("-")){e._value=d;const l=r==="OPTION"?e.getAttribute("value"):e.value,g=d??"";l!==g&&(e.value=g),d==null&&e.removeAttribute(i);return}let s=!1;if(d===""||d==null){const l=typeof e[i];l==="boolean"?d=Fo(d):d==null&&l==="string"?(d="",s=!0):l==="number"&&(d=0,s=!0)}try{e[i]=d}catch{}s&&e.removeAttribute(i)}function Rl(e,i,d,t){e.addEventListener(i,d,t)}function xl(e,i,d,t){e.removeEventListener(i,d,t)}function Ol(e,i,d,t,u=null){const a=e._vei||(e._vei={}),c=a[i];if(t&&c)c.value=t;else{const[r,s]=Ml(i);if(t){const l=a[i]=Dl(t,u);Rl(e,r,l,s)}else c&&(xl(e,r,c,s),a[i]=void 0)}}const Co=/(?:Once|Passive|Capture)$/;function Ml(e){let i;if(Co.test(e)){i={};let t;for(;t=e.match(Co);)e=e.slice(0,e.length-t[0].length),i[t[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):ln(e.slice(2)),i]}let br=0;const Al=Promise.resolve(),Pl=()=>br||(Al.then(()=>br=0),br=Date.now());function Dl(e,i){const d=t=>{if(!t._vts)t._vts=Date.now();else if(t._vts<=d.attached)return;pt(Ll(t,d.value),i,5,[t])};return d.value=e,d.attached=Pl(),d}function Ll(e,i){if(Oe(i)){const d=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{d.call(e),e._stopped=!0},i.map(t=>u=>!u._stopped&&t&&t(u))}else return i}const To=/^on[a-z]/,Nl=(e,i,d,t,u=!1,a,c,r,s)=>{i==="class"?El(e,t,u):i==="style"?Cl(e,d,t):Zn(i)?Jr(i)||Ol(e,i,d,t,c):(i[0]==="."?(i=i.slice(1),!0):i[0]==="^"?(i=i.slice(1),!1):jl(e,i,t,u))?Il(e,i,t,a,c,r,s):(i==="true-value"?e._trueValue=t:i==="false-value"&&(e._falseValue=t),kl(e,i,t,u))};function jl(e,i,d,t){return t?!!(i==="innerHTML"||i==="textContent"||i in e&&To.test(i)&&Pe(d)):i==="spellcheck"||i==="draggable"||i==="translate"||i==="form"||i==="list"&&e.tagName==="INPUT"||i==="type"&&e.tagName==="TEXTAREA"||To.test(i)&&Ge(d)?!1:i in e}const Bl=Ke({patchProp:Nl},wl);let ko;function Fl(){return ko||(ko=nl(Bl))}const Vl=(...e)=>{const i=Fl().createApp(...e),{mount:d}=i;return i.mount=t=>{const u=Ul(t);if(!u)return;const a=i._component;!Pe(a)&&!a.render&&!a.template&&(a.template=u.innerHTML),u.innerHTML="";const c=d(u,!1,u instanceof SVGElement);return u instanceof Element&&(u.removeAttribute("v-cloak"),u.setAttribute("data-v-app","")),c},i};function Ul(e){return Ge(e)?document.querySelector(e):e}function Io(e){return e!==null&&typeof e=="object"&&"constructor"in e&&e.constructor===Object}function wi(e={},i={}){Object.keys(i).forEach(d=>{typeof e[d]>"u"?e[d]=i[d]:Io(i[d])&&Io(e[d])&&Object.keys(i[d]).length>0&&wi(e[d],i[d])})}const Ds={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function Yt(){const e=typeof document<"u"?document:{};return wi(e,Ds),e}const zl={document:Ds,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(e){return typeof setTimeout>"u"?(e(),null):setTimeout(e,0)},cancelAnimationFrame(e){typeof setTimeout>"u"||clearTimeout(e)}};function it(){const e=typeof window<"u"?window:{};return wi(e,zl),e}function Wl(e){const i=e;Object.keys(i).forEach(d=>{try{i[d]=null}catch{}try{delete i[d]}catch{}})}function Hr(e,i=0){return setTimeout(e,i)}function Qn(){return Date.now()}function Hl(e){const i=it();let d;return i.getComputedStyle&&(d=i.getComputedStyle(e,null)),!d&&e.currentStyle&&(d=e.currentStyle),d||(d=e.style),d}function Gl(e,i="x"){const d=it();let t,u,a;const c=Hl(e);return d.WebKitCSSMatrix?(u=c.transform||c.webkitTransform,u.split(",").length>6&&(u=u.split(", ").map(r=>r.replace(",",".")).join(", ")),a=new d.WebKitCSSMatrix(u==="none"?"":u)):(a=c.MozTransform||c.OTransform||c.MsTransform||c.msTransform||c.transform||c.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),t=a.toString().split(",")),i==="x"&&(d.WebKitCSSMatrix?u=a.m41:t.length===16?u=parseFloat(t[12]):u=parseFloat(t[4])),i==="y"&&(d.WebKitCSSMatrix?u=a.m42:t.length===16?u=parseFloat(t[13]):u=parseFloat(t[5])),u||0}function jn(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function ql(e){return typeof window<"u"&&typeof window.HTMLElement<"u"?e instanceof HTMLElement:e&&(e.nodeType===1||e.nodeType===11)}function rt(...e){const i=Object(e[0]),d=["__proto__","constructor","prototype"];for(let t=1;t<e.length;t+=1){const u=e[t];if(u!=null&&!ql(u)){const a=Object.keys(Object(u)).filter(c=>d.indexOf(c)<0);for(let c=0,r=a.length;c<r;c+=1){const s=a[c],l=Object.getOwnPropertyDescriptor(u,s);l!==void 0&&l.enumerable&&(jn(i[s])&&jn(u[s])?u[s].__swiper__?i[s]=u[s]:rt(i[s],u[s]):!jn(i[s])&&jn(u[s])?(i[s]={},u[s].__swiper__?i[s]=u[s]:rt(i[s],u[s])):i[s]=u[s])}}}return i}function Bn(e,i,d){e.style.setProperty(i,d)}function Ls({swiper:e,targetPosition:i,side:d}){const t=it(),u=-e.translate;let a=null,c;const r=e.params.speed;e.wrapperEl.style.scrollSnapType="none",t.cancelAnimationFrame(e.cssModeFrameID);const s=i>u?"next":"prev",l=(o,v)=>s==="next"&&o>=v||s==="prev"&&o<=v,g=()=>{c=new Date().getTime(),a===null&&(a=c);const o=Math.max(Math.min((c-a)/r,1),0),v=.5-Math.cos(o*Math.PI)/2;let h=u+v*(i-u);if(l(h,i)&&(h=i),e.wrapperEl.scrollTo({[d]:h}),l(h,i)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[d]:h})}),t.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=t.requestAnimationFrame(g)};g()}function Ct(e,i=""){return[...e.children].filter(d=>d.matches(i))}function Jl(e,i=[]){const d=document.createElement(e);return d.classList.add(...Array.isArray(i)?i:[i]),d}function $l(e,i){const d=[];for(;e.previousElementSibling;){const t=e.previousElementSibling;i?t.matches(i)&&d.push(t):d.push(t),e=t}return d}function Yl(e,i){const d=[];for(;e.nextElementSibling;){const t=e.nextElementSibling;i?t.matches(i)&&d.push(t):d.push(t),e=t}return d}function Pt(e,i){return it().getComputedStyle(e,null).getPropertyValue(i)}function Ro(e){let i=e,d;if(i){for(d=0;(i=i.previousSibling)!==null;)i.nodeType===1&&(d+=1);return d}}function Kl(e,i){const d=[];let t=e.parentElement;for(;t;)i?t.matches(i)&&d.push(t):d.push(t),t=t.parentElement;return d}function xo(e,i,d){const t=it();return d?e[i==="width"?"offsetWidth":"offsetHeight"]+parseFloat(t.getComputedStyle(e,null).getPropertyValue(i==="width"?"margin-right":"margin-top"))+parseFloat(t.getComputedStyle(e,null).getPropertyValue(i==="width"?"margin-left":"margin-bottom")):e.offsetWidth}let wr;function Xl(){const e=it(),i=Yt();return{smoothScroll:i.documentElement&&i.documentElement.style&&"scrollBehavior"in i.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&i instanceof e.DocumentTouch)}}function Ns(){return wr||(wr=Xl()),wr}let Er;function Ql({userAgent:e}={}){const i=Ns(),d=it(),t=d.navigator.platform,u=e||d.navigator.userAgent,a={ios:!1,android:!1},c=d.screen.width,r=d.screen.height,s=u.match(/(Android);?[\s\/]+([\d.]+)?/);let l=u.match(/(iPad).*OS\s([\d_]+)/);const g=u.match(/(iPod)(.*OS\s([\d_]+))?/),o=!l&&u.match(/(iPhone\sOS|iOS)\s([\d_]+)/),v=t==="Win32";let h=t==="MacIntel";const k=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!l&&h&&i.touch&&k.indexOf(`${c}x${r}`)>=0&&(l=u.match(/(Version)\/([\d.]+)/),l||(l=[0,1,"13_0_0"]),h=!1),s&&!v&&(a.os="android",a.android=!0),(l||o||g)&&(a.os="ios",a.ios=!0),a}function Zl(e={}){return Er||(Er=Ql(e)),Er}let Cr;function eu(){const e=it();let i=!1;function d(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(d()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[u,a]=t.split("Version/")[1].split(" ")[0].split(".").map(c=>Number(c));i=u<16||u===16&&a<2}}return{isSafari:i||d(),needPerspectiveFix:i,isWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent)}}function tu(){return Cr||(Cr=eu()),Cr}function nu({swiper:e,on:i,emit:d}){const t=it();let u=null,a=null;const c=()=>{!e||e.destroyed||!e.initialized||(d("beforeResize"),d("resize"))},r=()=>{!e||e.destroyed||!e.initialized||(u=new ResizeObserver(g=>{a=t.requestAnimationFrame(()=>{const{width:o,height:v}=e;let h=o,k=v;g.forEach(({contentBoxSize:_,contentRect:y,target:S})=>{S&&S!==e.el||(h=y?y.width:(_[0]||_).inlineSize,k=y?y.height:(_[0]||_).blockSize)}),(h!==o||k!==v)&&c()})}),u.observe(e.el))},s=()=>{a&&t.cancelAnimationFrame(a),u&&u.unobserve&&e.el&&(u.unobserve(e.el),u=null)},l=()=>{!e||e.destroyed||!e.initialized||d("orientationchange")};i("init",()=>{if(e.params.resizeObserver&&typeof t.ResizeObserver<"u"){r();return}t.addEventListener("resize",c),t.addEventListener("orientationchange",l)}),i("destroy",()=>{s(),t.removeEventListener("resize",c),t.removeEventListener("orientationchange",l)})}function ru({swiper:e,extendParams:i,on:d,emit:t}){const u=[],a=it(),c=(l,g={})=>{const o=a.MutationObserver||a.WebkitMutationObserver,v=new o(h=>{if(e.__preventObserver__)return;if(h.length===1){t("observerUpdate",h[0]);return}const k=function(){t("observerUpdate",h[0])};a.requestAnimationFrame?a.requestAnimationFrame(k):a.setTimeout(k,0)});v.observe(l,{attributes:typeof g.attributes>"u"?!0:g.attributes,childList:typeof g.childList>"u"?!0:g.childList,characterData:typeof g.characterData>"u"?!0:g.characterData}),u.push(v)},r=()=>{if(e.params.observer){if(e.params.observeParents){const l=Kl(e.el);for(let g=0;g<l.length;g+=1)c(l[g])}c(e.el,{childList:e.params.observeSlideChildren}),c(e.wrapperEl,{attributes:!1})}},s=()=>{u.forEach(l=>{l.disconnect()}),u.splice(0,u.length)};i({observer:!1,observeParents:!1,observeSlideChildren:!1}),d("init",r),d("destroy",s)}const iu={on(e,i,d){const t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;const u=d?"unshift":"push";return e.split(" ").forEach(a=>{t.eventsListeners[a]||(t.eventsListeners[a]=[]),t.eventsListeners[a][u](i)}),t},once(e,i,d){const t=this;if(!t.eventsListeners||t.destroyed||typeof i!="function")return t;function u(...a){t.off(e,u),u.__emitterProxy&&delete u.__emitterProxy,i.apply(t,a)}return u.__emitterProxy=i,t.on(e,u,d)},onAny(e,i){const d=this;if(!d.eventsListeners||d.destroyed||typeof e!="function")return d;const t=i?"unshift":"push";return d.eventsAnyListeners.indexOf(e)<0&&d.eventsAnyListeners[t](e),d},offAny(e){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsAnyListeners)return i;const d=i.eventsAnyListeners.indexOf(e);return d>=0&&i.eventsAnyListeners.splice(d,1),i},off(e,i){const d=this;return!d.eventsListeners||d.destroyed||!d.eventsListeners||e.split(" ").forEach(t=>{typeof i>"u"?d.eventsListeners[t]=[]:d.eventsListeners[t]&&d.eventsListeners[t].forEach((u,a)=>{(u===i||u.__emitterProxy&&u.__emitterProxy===i)&&d.eventsListeners[t].splice(a,1)})}),d},emit(...e){const i=this;if(!i.eventsListeners||i.destroyed||!i.eventsListeners)return i;let d,t,u;return typeof e[0]=="string"||Array.isArray(e[0])?(d=e[0],t=e.slice(1,e.length),u=i):(d=e[0].events,t=e[0].data,u=e[0].context||i),t.unshift(u),(Array.isArray(d)?d:d.split(" ")).forEach(c=>{i.eventsAnyListeners&&i.eventsAnyListeners.length&&i.eventsAnyListeners.forEach(r=>{r.apply(u,[c,...t])}),i.eventsListeners&&i.eventsListeners[c]&&i.eventsListeners[c].forEach(r=>{r.apply(u,t)})}),i}};function ou(){const e=this;let i,d;const t=e.el;typeof e.params.width<"u"&&e.params.width!==null?i=e.params.width:i=t.clientWidth,typeof e.params.height<"u"&&e.params.height!==null?d=e.params.height:d=t.clientHeight,!(i===0&&e.isHorizontal()||d===0&&e.isVertical())&&(i=i-parseInt(Pt(t,"padding-left")||0,10)-parseInt(Pt(t,"padding-right")||0,10),d=d-parseInt(Pt(t,"padding-top")||0,10)-parseInt(Pt(t,"padding-bottom")||0,10),Number.isNaN(i)&&(i=0),Number.isNaN(d)&&(d=0),Object.assign(e,{width:i,height:d,size:e.isHorizontal()?i:d}))}function su(){const e=this;function i(W){return e.isHorizontal()?W:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[W]}function d(W,K){return parseFloat(W.getPropertyValue(i(K))||0)}const t=e.params,{wrapperEl:u,slidesEl:a,size:c,rtlTranslate:r,wrongRTL:s}=e,l=e.virtual&&t.virtual.enabled,g=l?e.virtual.slides.length:e.slides.length,o=Ct(a,`.${e.params.slideClass}, swiper-slide`),v=l?e.virtual.slides.length:o.length;let h=[];const k=[],_=[];let y=t.slidesOffsetBefore;typeof y=="function"&&(y=t.slidesOffsetBefore.call(e));let S=t.slidesOffsetAfter;typeof S=="function"&&(S=t.slidesOffsetAfter.call(e));const x=e.snapGrid.length,D=e.slidesGrid.length;let E=t.spaceBetween,I=-y,p=0,B=0;if(typeof c>"u")return;typeof E=="string"&&E.indexOf("%")>=0?E=parseFloat(E.replace("%",""))/100*c:typeof E=="string"&&(E=parseFloat(E)),e.virtualSize=-E,o.forEach(W=>{r?W.style.marginLeft="":W.style.marginRight="",W.style.marginBottom="",W.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(Bn(u,"--swiper-centered-offset-before",""),Bn(u,"--swiper-centered-offset-after",""));const P=t.grid&&t.grid.rows>1&&e.grid;P&&e.grid.initSlides(v);let z;const te=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(W=>typeof t.breakpoints[W].slidesPerView<"u").length>0;for(let W=0;W<v;W+=1){z=0;let K;if(o[W]&&(K=o[W]),P&&e.grid.updateSlide(W,K,v,i),!(o[W]&&Pt(K,"display")==="none")){if(t.slidesPerView==="auto"){te&&(o[W].style[i("width")]="");const re=getComputedStyle(K),f=K.style.transform,ae=K.style.webkitTransform;if(f&&(K.style.transform="none"),ae&&(K.style.webkitTransform="none"),t.roundLengths)z=e.isHorizontal()?xo(K,"width",!0):xo(K,"height",!0);else{const ce=d(re,"width"),he=d(re,"padding-left"),ye=d(re,"padding-right"),R=d(re,"margin-left"),O=d(re,"margin-right"),j=re.getPropertyValue("box-sizing");if(j&&j==="border-box")z=ce+R+O;else{const{clientWidth:J,offsetWidth:q}=K;z=ce+he+ye+R+O+(q-J)}}f&&(K.style.transform=f),ae&&(K.style.webkitTransform=ae),t.roundLengths&&(z=Math.floor(z))}else z=(c-(t.slidesPerView-1)*E)/t.slidesPerView,t.roundLengths&&(z=Math.floor(z)),o[W]&&(o[W].style[i("width")]=`${z}px`);o[W]&&(o[W].swiperSlideSize=z),_.push(z),t.centeredSlides?(I=I+z/2+p/2+E,p===0&&W!==0&&(I=I-c/2-E),W===0&&(I=I-c/2-E),Math.abs(I)<1/1e3&&(I=0),t.roundLengths&&(I=Math.floor(I)),B%t.slidesPerGroup===0&&h.push(I),k.push(I)):(t.roundLengths&&(I=Math.floor(I)),(B-Math.min(e.params.slidesPerGroupSkip,B))%e.params.slidesPerGroup===0&&h.push(I),k.push(I),I=I+z+E),e.virtualSize+=z+E,p=z,B+=1}}if(e.virtualSize=Math.max(e.virtualSize,c)+S,r&&s&&(t.effect==="slide"||t.effect==="coverflow")&&(u.style.width=`${e.virtualSize+E}px`),t.setWrapperSize&&(u.style[i("width")]=`${e.virtualSize+E}px`),P&&e.grid.updateWrapperSize(z,h,i),!t.centeredSlides){const W=[];for(let K=0;K<h.length;K+=1){let re=h[K];t.roundLengths&&(re=Math.floor(re)),h[K]<=e.virtualSize-c&&W.push(re)}h=W,Math.floor(e.virtualSize-c)-Math.floor(h[h.length-1])>1&&h.push(e.virtualSize-c)}if(l&&t.loop){const W=_[0]+E;if(t.slidesPerGroup>1){const K=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/t.slidesPerGroup),re=W*t.slidesPerGroup;for(let f=0;f<K;f+=1)h.push(h[h.length-1]+re)}for(let K=0;K<e.virtual.slidesBefore+e.virtual.slidesAfter;K+=1)t.slidesPerGroup===1&&h.push(h[h.length-1]+W),k.push(k[k.length-1]+W),e.virtualSize+=W}if(h.length===0&&(h=[0]),E!==0){const W=e.isHorizontal()&&r?"marginLeft":i("marginRight");o.filter((K,re)=>!t.cssMode||t.loop?!0:re!==o.length-1).forEach(K=>{K.style[W]=`${E}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let W=0;_.forEach(re=>{W+=re+(E||0)}),W-=E;const K=W-c;h=h.map(re=>re<=0?-y:re>K?K+S:re)}if(t.centerInsufficientSlides){let W=0;if(_.forEach(K=>{W+=K+(E||0)}),W-=E,W<c){const K=(c-W)/2;h.forEach((re,f)=>{h[f]=re-K}),k.forEach((re,f)=>{k[f]=re+K})}}if(Object.assign(e,{slides:o,snapGrid:h,slidesGrid:k,slidesSizesGrid:_}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){Bn(u,"--swiper-centered-offset-before",`${-h[0]}px`),Bn(u,"--swiper-centered-offset-after",`${e.size/2-_[_.length-1]/2}px`);const W=-e.snapGrid[0],K=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(re=>re+W),e.slidesGrid=e.slidesGrid.map(re=>re+K)}if(v!==g&&e.emit("slidesLengthChange"),h.length!==x&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),k.length!==D&&e.emit("slidesGridLengthChange"),t.watchSlidesProgress&&e.updateSlidesOffset(),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const W=`${t.containerModifierClass}backface-hidden`,K=e.el.classList.contains(W);v<=t.maxBackfaceHiddenSlides?K||e.el.classList.add(W):K&&e.el.classList.remove(W)}}function au(e){const i=this,d=[],t=i.virtual&&i.params.virtual.enabled;let u=0,a;typeof e=="number"?i.setTransition(e):e===!0&&i.setTransition(i.params.speed);const c=r=>t?i.slides[i.getSlideIndexByData(r)]:i.slides[r];if(i.params.slidesPerView!=="auto"&&i.params.slidesPerView>1)if(i.params.centeredSlides)(i.visibleSlides||[]).forEach(r=>{d.push(r)});else for(a=0;a<Math.ceil(i.params.slidesPerView);a+=1){const r=i.activeIndex+a;if(r>i.slides.length&&!t)break;d.push(c(r))}else d.push(c(i.activeIndex));for(a=0;a<d.length;a+=1)if(typeof d[a]<"u"){const r=d[a].offsetHeight;u=r>u?r:u}(u||u===0)&&(i.wrapperEl.style.height=`${u}px`)}function du(){const e=this,i=e.slides,d=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let t=0;t<i.length;t+=1)i[t].swiperSlideOffset=(e.isHorizontal()?i[t].offsetLeft:i[t].offsetTop)-d-e.cssOverflowAdjustment()}function cu(e=this&&this.translate||0){const i=this,d=i.params,{slides:t,rtlTranslate:u,snapGrid:a}=i;if(t.length===0)return;typeof t[0].swiperSlideOffset>"u"&&i.updateSlidesOffset();let c=-e;u&&(c=e),t.forEach(s=>{s.classList.remove(d.slideVisibleClass)}),i.visibleSlidesIndexes=[],i.visibleSlides=[];let r=d.spaceBetween;typeof r=="string"&&r.indexOf("%")>=0?r=parseFloat(r.replace("%",""))/100*i.size:typeof r=="string"&&(r=parseFloat(r));for(let s=0;s<t.length;s+=1){const l=t[s];let g=l.swiperSlideOffset;d.cssMode&&d.centeredSlides&&(g-=t[0].swiperSlideOffset);const o=(c+(d.centeredSlides?i.minTranslate():0)-g)/(l.swiperSlideSize+r),v=(c-a[0]+(d.centeredSlides?i.minTranslate():0)-g)/(l.swiperSlideSize+r),h=-(c-g),k=h+i.slidesSizesGrid[s];(h>=0&&h<i.size-1||k>1&&k<=i.size||h<=0&&k>=i.size)&&(i.visibleSlides.push(l),i.visibleSlidesIndexes.push(s),t[s].classList.add(d.slideVisibleClass)),l.progress=u?-o:o,l.originalProgress=u?-v:v}}function lu(e){const i=this;if(typeof e>"u"){const g=i.rtlTranslate?-1:1;e=i&&i.translate&&i.translate*g||0}const d=i.params,t=i.maxTranslate()-i.minTranslate();let{progress:u,isBeginning:a,isEnd:c,progressLoop:r}=i;const s=a,l=c;if(t===0)u=0,a=!0,c=!0;else{u=(e-i.minTranslate())/t;const g=Math.abs(e-i.minTranslate())<1,o=Math.abs(e-i.maxTranslate())<1;a=g||u<=0,c=o||u>=1,g&&(u=0),o&&(u=1)}if(d.loop){const g=i.getSlideIndexByData(0),o=i.getSlideIndexByData(i.slides.length-1),v=i.slidesGrid[g],h=i.slidesGrid[o],k=i.slidesGrid[i.slidesGrid.length-1],_=Math.abs(e);_>=v?r=(_-v)/k:r=(_+k-h)/k,r>1&&(r-=1)}Object.assign(i,{progress:u,progressLoop:r,isBeginning:a,isEnd:c}),(d.watchSlidesProgress||d.centeredSlides&&d.autoHeight)&&i.updateSlidesProgress(e),a&&!s&&i.emit("reachBeginning toEdge"),c&&!l&&i.emit("reachEnd toEdge"),(s&&!a||l&&!c)&&i.emit("fromEdge"),i.emit("progress",u)}function uu(){const e=this,{slides:i,params:d,slidesEl:t,activeIndex:u}=e,a=e.virtual&&d.virtual.enabled,c=s=>Ct(t,`.${d.slideClass}${s}, swiper-slide${s}`)[0];i.forEach(s=>{s.classList.remove(d.slideActiveClass,d.slideNextClass,d.slidePrevClass)});let r;if(a)if(d.loop){let s=u-e.virtual.slidesBefore;s<0&&(s=e.virtual.slides.length+s),s>=e.virtual.slides.length&&(s-=e.virtual.slides.length),r=c(`[data-swiper-slide-index="${s}"]`)}else r=c(`[data-swiper-slide-index="${u}"]`);else r=i[u];if(r){r.classList.add(d.slideActiveClass);let s=Yl(r,`.${d.slideClass}, swiper-slide`)[0];d.loop&&!s&&(s=i[0]),s&&s.classList.add(d.slideNextClass);let l=$l(r,`.${d.slideClass}, swiper-slide`)[0];d.loop&&!l===0&&(l=i[i.length-1]),l&&l.classList.add(d.slidePrevClass)}e.emitSlidesClasses()}const Hn=(e,i)=>{if(!e||e.destroyed||!e.params)return;const d=()=>e.isElement?"swiper-slide":`.${e.params.slideClass}`,t=i.closest(d());if(t){const u=t.querySelector(`.${e.params.lazyPreloaderClass}`);u&&u.remove()}},Tr=(e,i)=>{if(!e.slides[i])return;const d=e.slides[i].querySelector('[loading="lazy"]');d&&d.removeAttribute("loading")},Gr=e=>{if(!e||e.destroyed||!e.params)return;let i=e.params.lazyPreloadPrevNext;const d=e.slides.length;if(!d||!i||i<0)return;i=Math.min(i,d);const t=e.params.slidesPerView==="auto"?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),u=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const c=u,r=[c-i];r.push(...Array.from({length:i}).map((s,l)=>c+t+l)),e.slides.forEach((s,l)=>{r.includes(s.column)&&Tr(e,l)});return}const a=u+t-1;if(e.params.rewind||e.params.loop)for(let c=u-i;c<=a+i;c+=1){const r=(c%d+d)%d;(r<u||r>a)&&Tr(e,r)}else for(let c=Math.max(u-i,0);c<=Math.min(a+i,d-1);c+=1)c!==u&&(c>a||c<u)&&Tr(e,c)};function fu(e){const{slidesGrid:i,params:d}=e,t=e.rtlTranslate?e.translate:-e.translate;let u;for(let a=0;a<i.length;a+=1)typeof i[a+1]<"u"?t>=i[a]&&t<i[a+1]-(i[a+1]-i[a])/2?u=a:t>=i[a]&&t<i[a+1]&&(u=a+1):t>=i[a]&&(u=a);return d.normalizeSlideIndex&&(u<0||typeof u>"u")&&(u=0),u}function pu(e){const i=this,d=i.rtlTranslate?i.translate:-i.translate,{snapGrid:t,params:u,activeIndex:a,realIndex:c,snapIndex:r}=i;let s=e,l;const g=v=>{let h=v-i.virtual.slidesBefore;return h<0&&(h=i.virtual.slides.length+h),h>=i.virtual.slides.length&&(h-=i.virtual.slides.length),h};if(typeof s>"u"&&(s=fu(i)),t.indexOf(d)>=0)l=t.indexOf(d);else{const v=Math.min(u.slidesPerGroupSkip,s);l=v+Math.floor((s-v)/u.slidesPerGroup)}if(l>=t.length&&(l=t.length-1),s===a){l!==r&&(i.snapIndex=l,i.emit("snapIndexChange")),i.params.loop&&i.virtual&&i.params.virtual.enabled&&(i.realIndex=g(s));return}let o;i.virtual&&u.virtual.enabled&&u.loop?o=g(s):i.slides[s]?o=parseInt(i.slides[s].getAttribute("data-swiper-slide-index")||s,10):o=s,Object.assign(i,{previousSnapIndex:r,snapIndex:l,previousRealIndex:c,realIndex:o,previousIndex:a,activeIndex:s}),i.initialized&&Gr(i),i.emit("activeIndexChange"),i.emit("snapIndexChange"),c!==o&&i.emit("realIndexChange"),(i.initialized||i.params.runCallbacksOnInit)&&i.emit("slideChange")}function mu(e){const i=this,d=i.params,t=e.closest(`.${d.slideClass}, swiper-slide`);let u=!1,a;if(t){for(let c=0;c<i.slides.length;c+=1)if(i.slides[c]===t){u=!0,a=c;break}}if(t&&u)i.clickedSlide=t,i.virtual&&i.params.virtual.enabled?i.clickedIndex=parseInt(t.getAttribute("data-swiper-slide-index"),10):i.clickedIndex=a;else{i.clickedSlide=void 0,i.clickedIndex=void 0;return}d.slideToClickedSlide&&i.clickedIndex!==void 0&&i.clickedIndex!==i.activeIndex&&i.slideToClickedSlide()}const hu={updateSize:ou,updateSlides:su,updateAutoHeight:au,updateSlidesOffset:du,updateSlidesProgress:cu,updateProgress:lu,updateSlidesClasses:uu,updateActiveIndex:pu,updateClickedSlide:mu};function vu(e=this.isHorizontal()?"x":"y"){const i=this,{params:d,rtlTranslate:t,translate:u,wrapperEl:a}=i;if(d.virtualTranslate)return t?-u:u;if(d.cssMode)return u;let c=Gl(a,e);return c+=i.cssOverflowAdjustment(),t&&(c=-c),c||0}function gu(e,i){const d=this,{rtlTranslate:t,params:u,wrapperEl:a,progress:c}=d;let r=0,s=0;const l=0;d.isHorizontal()?r=t?-e:e:s=e,u.roundLengths&&(r=Math.floor(r),s=Math.floor(s)),d.previousTranslate=d.translate,d.translate=d.isHorizontal()?r:s,u.cssMode?a[d.isHorizontal()?"scrollLeft":"scrollTop"]=d.isHorizontal()?-r:-s:u.virtualTranslate||(d.isHorizontal()?r-=d.cssOverflowAdjustment():s-=d.cssOverflowAdjustment(),a.style.transform=`translate3d(${r}px, ${s}px, ${l}px)`);let g;const o=d.maxTranslate()-d.minTranslate();o===0?g=0:g=(e-d.minTranslate())/o,g!==c&&d.updateProgress(e),d.emit("setTranslate",d.translate,i)}function yu(){return-this.snapGrid[0]}function _u(){return-this.snapGrid[this.snapGrid.length-1]}function Su(e=0,i=this.params.speed,d=!0,t=!0,u){const a=this,{params:c,wrapperEl:r}=a;if(a.animating&&c.preventInteractionOnTransition)return!1;const s=a.minTranslate(),l=a.maxTranslate();let g;if(t&&e>s?g=s:t&&e<l?g=l:g=e,a.updateProgress(g),c.cssMode){const o=a.isHorizontal();if(i===0)r[o?"scrollLeft":"scrollTop"]=-g;else{if(!a.support.smoothScroll)return Ls({swiper:a,targetPosition:-g,side:o?"left":"top"}),!0;r.scrollTo({[o?"left":"top"]:-g,behavior:"smooth"})}return!0}return i===0?(a.setTransition(0),a.setTranslate(g),d&&(a.emit("beforeTransitionStart",i,u),a.emit("transitionEnd"))):(a.setTransition(i),a.setTranslate(g),d&&(a.emit("beforeTransitionStart",i,u),a.emit("transitionStart")),a.animating||(a.animating=!0,a.onTranslateToWrapperTransitionEnd||(a.onTranslateToWrapperTransitionEnd=function(v){!a||a.destroyed||v.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onTranslateToWrapperTransitionEnd),a.onTranslateToWrapperTransitionEnd=null,delete a.onTranslateToWrapperTransitionEnd,d&&a.emit("transitionEnd"))}),a.wrapperEl.addEventListener("transitionend",a.onTranslateToWrapperTransitionEnd))),!0}const bu={getTranslate:vu,setTranslate:gu,minTranslate:yu,maxTranslate:_u,translateTo:Su};function wu(e,i){const d=this;d.params.cssMode||(d.wrapperEl.style.transitionDuration=`${e}ms`),d.emit("setTransition",e,i)}function js({swiper:e,runCallbacks:i,direction:d,step:t}){const{activeIndex:u,previousIndex:a}=e;let c=d;if(c||(u>a?c="next":u<a?c="prev":c="reset"),e.emit(`transition${t}`),i&&u!==a){if(c==="reset"){e.emit(`slideResetTransition${t}`);return}e.emit(`slideChangeTransition${t}`),c==="next"?e.emit(`slideNextTransition${t}`):e.emit(`slidePrevTransition${t}`)}}function Eu(e=!0,i){const d=this,{params:t}=d;t.cssMode||(t.autoHeight&&d.updateAutoHeight(),js({swiper:d,runCallbacks:e,direction:i,step:"Start"}))}function Cu(e=!0,i){const d=this,{params:t}=d;d.animating=!1,!t.cssMode&&(d.setTransition(0),js({swiper:d,runCallbacks:e,direction:i,step:"End"}))}const Tu={setTransition:wu,transitionStart:Eu,transitionEnd:Cu};function ku(e=0,i=this.params.speed,d=!0,t,u){typeof e=="string"&&(e=parseInt(e,10));const a=this;let c=e;c<0&&(c=0);const{params:r,snapGrid:s,slidesGrid:l,previousIndex:g,activeIndex:o,rtlTranslate:v,wrapperEl:h,enabled:k}=a;if(a.animating&&r.preventInteractionOnTransition||!k&&!t&&!u)return!1;const _=Math.min(a.params.slidesPerGroupSkip,c);let y=_+Math.floor((c-_)/a.params.slidesPerGroup);y>=s.length&&(y=s.length-1);const S=-s[y];if(r.normalizeSlideIndex)for(let D=0;D<l.length;D+=1){const E=-Math.floor(S*100),I=Math.floor(l[D]*100),p=Math.floor(l[D+1]*100);typeof l[D+1]<"u"?E>=I&&E<p-(p-I)/2?c=D:E>=I&&E<p&&(c=D+1):E>=I&&(c=D)}if(a.initialized&&c!==o&&(!a.allowSlideNext&&(v?S>a.translate&&S>a.minTranslate():S<a.translate&&S<a.minTranslate())||!a.allowSlidePrev&&S>a.translate&&S>a.maxTranslate()&&(o||0)!==c))return!1;c!==(g||0)&&d&&a.emit("beforeSlideChangeStart"),a.updateProgress(S);let x;if(c>o?x="next":c<o?x="prev":x="reset",v&&-S===a.translate||!v&&S===a.translate)return a.updateActiveIndex(c),r.autoHeight&&a.updateAutoHeight(),a.updateSlidesClasses(),r.effect!=="slide"&&a.setTranslate(S),x!=="reset"&&(a.transitionStart(d,x),a.transitionEnd(d,x)),!1;if(r.cssMode){const D=a.isHorizontal(),E=v?S:-S;if(i===0){const I=a.virtual&&a.params.virtual.enabled;I&&(a.wrapperEl.style.scrollSnapType="none",a._immediateVirtual=!0),I&&!a._cssModeVirtualInitialSet&&a.params.initialSlide>0?(a._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{h[D?"scrollLeft":"scrollTop"]=E})):h[D?"scrollLeft":"scrollTop"]=E,I&&requestAnimationFrame(()=>{a.wrapperEl.style.scrollSnapType="",a._immediateVirtual=!1})}else{if(!a.support.smoothScroll)return Ls({swiper:a,targetPosition:E,side:D?"left":"top"}),!0;h.scrollTo({[D?"left":"top"]:E,behavior:"smooth"})}return!0}return a.setTransition(i),a.setTranslate(S),a.updateActiveIndex(c),a.updateSlidesClasses(),a.emit("beforeTransitionStart",i,t),a.transitionStart(d,x),i===0?a.transitionEnd(d,x):a.animating||(a.animating=!0,a.onSlideToWrapperTransitionEnd||(a.onSlideToWrapperTransitionEnd=function(E){!a||a.destroyed||E.target===this&&(a.wrapperEl.removeEventListener("transitionend",a.onSlideToWrapperTransitionEnd),a.onSlideToWrapperTransitionEnd=null,delete a.onSlideToWrapperTransitionEnd,a.transitionEnd(d,x))}),a.wrapperEl.addEventListener("transitionend",a.onSlideToWrapperTransitionEnd)),!0}function Iu(e=0,i=this.params.speed,d=!0,t){typeof e=="string"&&(e=parseInt(e,10));const u=this;let a=e;return u.params.loop&&(u.virtual&&u.params.virtual.enabled?a=a+u.virtual.slidesBefore:a=u.getSlideIndexByData(a)),u.slideTo(a,i,d,t)}function Ru(e=this.params.speed,i=!0,d){const t=this,{enabled:u,params:a,animating:c}=t;if(!u)return t;let r=a.slidesPerGroup;a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(r=Math.max(t.slidesPerViewDynamic("current",!0),1));const s=t.activeIndex<a.slidesPerGroupSkip?1:r,l=t.virtual&&a.virtual.enabled;if(a.loop){if(c&&!l&&a.loopPreventsSliding)return!1;t.loopFix({direction:"next"}),t._clientLeft=t.wrapperEl.clientLeft}return a.rewind&&t.isEnd?t.slideTo(0,e,i,d):t.slideTo(t.activeIndex+s,e,i,d)}function xu(e=this.params.speed,i=!0,d){const t=this,{params:u,snapGrid:a,slidesGrid:c,rtlTranslate:r,enabled:s,animating:l}=t;if(!s)return t;const g=t.virtual&&u.virtual.enabled;if(u.loop){if(l&&!g&&u.loopPreventsSliding)return!1;t.loopFix({direction:"prev"}),t._clientLeft=t.wrapperEl.clientLeft}const o=r?t.translate:-t.translate;function v(S){return S<0?-Math.floor(Math.abs(S)):Math.floor(S)}const h=v(o),k=a.map(S=>v(S));let _=a[k.indexOf(h)-1];if(typeof _>"u"&&u.cssMode){let S;a.forEach((x,D)=>{h>=x&&(S=D)}),typeof S<"u"&&(_=a[S>0?S-1:S])}let y=0;if(typeof _<"u"&&(y=c.indexOf(_),y<0&&(y=t.activeIndex-1),u.slidesPerView==="auto"&&u.slidesPerGroup===1&&u.slidesPerGroupAuto&&(y=y-t.slidesPerViewDynamic("previous",!0)+1,y=Math.max(y,0))),u.rewind&&t.isBeginning){const S=t.params.virtual&&t.params.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1;return t.slideTo(S,e,i,d)}return t.slideTo(y,e,i,d)}function Ou(e=this.params.speed,i=!0,d){const t=this;return t.slideTo(t.activeIndex,e,i,d)}function Mu(e=this.params.speed,i=!0,d,t=.5){const u=this;let a=u.activeIndex;const c=Math.min(u.params.slidesPerGroupSkip,a),r=c+Math.floor((a-c)/u.params.slidesPerGroup),s=u.rtlTranslate?u.translate:-u.translate;if(s>=u.snapGrid[r]){const l=u.snapGrid[r],g=u.snapGrid[r+1];s-l>(g-l)*t&&(a+=u.params.slidesPerGroup)}else{const l=u.snapGrid[r-1],g=u.snapGrid[r];s-l<=(g-l)*t&&(a-=u.params.slidesPerGroup)}return a=Math.max(a,0),a=Math.min(a,u.slidesGrid.length-1),u.slideTo(a,e,i,d)}function Au(){const e=this,{params:i,slidesEl:d}=e,t=i.slidesPerView==="auto"?e.slidesPerViewDynamic():i.slidesPerView;let u=e.clickedIndex,a;const c=e.isElement?"swiper-slide":`.${i.slideClass}`;if(i.loop){if(e.animating)return;a=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),i.centeredSlides?u<e.loopedSlides-t/2||u>e.slides.length-e.loopedSlides+t/2?(e.loopFix(),u=e.getSlideIndex(Ct(d,`${c}[data-swiper-slide-index="${a}"]`)[0]),Hr(()=>{e.slideTo(u)})):e.slideTo(u):u>e.slides.length-t?(e.loopFix(),u=e.getSlideIndex(Ct(d,`${c}[data-swiper-slide-index="${a}"]`)[0]),Hr(()=>{e.slideTo(u)})):e.slideTo(u)}else e.slideTo(u)}const Pu={slideTo:ku,slideToLoop:Iu,slideNext:Ru,slidePrev:xu,slideReset:Ou,slideToClosest:Mu,slideToClickedSlide:Au};function Du(e){const i=this,{params:d,slidesEl:t}=i;if(!d.loop||i.virtual&&i.params.virtual.enabled)return;Ct(t,`.${d.slideClass}, swiper-slide`).forEach((a,c)=>{a.setAttribute("data-swiper-slide-index",c)}),i.loopFix({slideRealIndex:e,direction:d.centeredSlides?void 0:"next"})}function Lu({slideRealIndex:e,slideTo:i=!0,direction:d,setTranslate:t,activeSlideIndex:u,byController:a,byMousewheel:c}={}){const r=this;if(!r.params.loop)return;r.emit("beforeLoopFix");const{slides:s,allowSlidePrev:l,allowSlideNext:g,slidesEl:o,params:v}=r;if(r.allowSlidePrev=!0,r.allowSlideNext=!0,r.virtual&&v.virtual.enabled){i&&(!v.centeredSlides&&r.snapIndex===0?r.slideTo(r.virtual.slides.length,0,!1,!0):v.centeredSlides&&r.snapIndex<v.slidesPerView?r.slideTo(r.virtual.slides.length+r.snapIndex,0,!1,!0):r.snapIndex===r.snapGrid.length-1&&r.slideTo(r.virtual.slidesBefore,0,!1,!0)),r.allowSlidePrev=l,r.allowSlideNext=g,r.emit("loopFix");return}const h=v.slidesPerView==="auto"?r.slidesPerViewDynamic():Math.ceil(parseFloat(v.slidesPerView,10));let k=v.loopedSlides||h;k%v.slidesPerGroup!==0&&(k+=v.slidesPerGroup-k%v.slidesPerGroup),r.loopedSlides=k;const _=[],y=[];let S=r.activeIndex;typeof u>"u"?u=r.getSlideIndex(r.slides.filter(p=>p.classList.contains(v.slideActiveClass))[0]):S=u;const x=d==="next"||!d,D=d==="prev"||!d;let E=0,I=0;if(u<k){E=Math.max(k-u,v.slidesPerGroup);for(let p=0;p<k-u;p+=1){const B=p-Math.floor(p/s.length)*s.length;_.push(s.length-B-1)}}else if(u>r.slides.length-k*2){I=Math.max(u-(r.slides.length-k*2),v.slidesPerGroup);for(let p=0;p<I;p+=1){const B=p-Math.floor(p/s.length)*s.length;y.push(B)}}if(D&&_.forEach(p=>{r.slides[p].swiperLoopMoveDOM=!0,o.prepend(r.slides[p]),r.slides[p].swiperLoopMoveDOM=!1}),x&&y.forEach(p=>{r.slides[p].swiperLoopMoveDOM=!0,o.append(r.slides[p]),r.slides[p].swiperLoopMoveDOM=!1}),r.recalcSlides(),v.slidesPerView==="auto"&&r.updateSlides(),v.watchSlidesProgress&&r.updateSlidesOffset(),i){if(_.length>0&&D)if(typeof e>"u"){const p=r.slidesGrid[S],P=r.slidesGrid[S+E]-p;c?r.setTranslate(r.translate-P):(r.slideTo(S+E,0,!1,!0),t&&(r.touches[r.isHorizontal()?"startX":"startY"]+=P))}else t&&r.slideToLoop(e,0,!1,!0);else if(y.length>0&&x)if(typeof e>"u"){const p=r.slidesGrid[S],P=r.slidesGrid[S-I]-p;c?r.setTranslate(r.translate-P):(r.slideTo(S-I,0,!1,!0),t&&(r.touches[r.isHorizontal()?"startX":"startY"]+=P))}else r.slideToLoop(e,0,!1,!0)}if(r.allowSlidePrev=l,r.allowSlideNext=g,r.controller&&r.controller.control&&!a){const p={slideRealIndex:e,slideTo:!1,direction:d,setTranslate:t,activeSlideIndex:u,byController:!0};Array.isArray(r.controller.control)?r.controller.control.forEach(B=>{!B.destroyed&&B.params.loop&&B.loopFix(p)}):r.controller.control instanceof r.constructor&&r.controller.control.params.loop&&r.controller.control.loopFix(p)}r.emit("loopFix")}function Nu(){const e=this,{params:i,slidesEl:d}=e;if(!i.loop||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const t=[];e.slides.forEach(u=>{const a=typeof u.swiperSlideIndex>"u"?u.getAttribute("data-swiper-slide-index")*1:u.swiperSlideIndex;t[a]=u}),e.slides.forEach(u=>{u.removeAttribute("data-swiper-slide-index")}),t.forEach(u=>{d.append(u)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}const ju={loopCreate:Du,loopFix:Lu,loopDestroy:Nu};function Bu(e){const i=this;if(!i.params.simulateTouch||i.params.watchOverflow&&i.isLocked||i.params.cssMode)return;const d=i.params.touchEventsTarget==="container"?i.el:i.wrapperEl;i.isElement&&(i.__preventObserver__=!0),d.style.cursor="move",d.style.cursor=e?"grabbing":"grab",i.isElement&&requestAnimationFrame(()=>{i.__preventObserver__=!1})}function Fu(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e[e.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}const Vu={setGrabCursor:Bu,unsetGrabCursor:Fu};function Uu(e,i=this){function d(t){if(!t||t===Yt()||t===it())return null;t.assignedSlot&&(t=t.assignedSlot);const u=t.closest(e);return!u&&!t.getRootNode?null:u||d(t.getRootNode().host)}return d(i)}function zu(e){const i=this,d=Yt(),t=it(),u=i.touchEventsData;u.evCache.push(e);const{params:a,touches:c,enabled:r}=i;if(!r||!a.simulateTouch&&e.pointerType==="mouse"||i.animating&&a.preventInteractionOnTransition)return;!i.animating&&a.cssMode&&a.loop&&i.loopFix();let s=e;s.originalEvent&&(s=s.originalEvent);let l=s.target;if(a.touchEventsTarget==="wrapper"&&!i.wrapperEl.contains(l)||"which"in s&&s.which===3||"button"in s&&s.button>0||u.isTouched&&u.isMoved)return;const g=!!a.noSwipingClass&&a.noSwipingClass!=="",o=e.composedPath?e.composedPath():e.path;g&&s.target&&s.target.shadowRoot&&o&&(l=o[0]);const v=a.noSwipingSelector?a.noSwipingSelector:`.${a.noSwipingClass}`,h=!!(s.target&&s.target.shadowRoot);if(a.noSwiping&&(h?Uu(v,l):l.closest(v))){i.allowClick=!0;return}if(a.swipeHandler&&!l.closest(a.swipeHandler))return;c.currentX=s.pageX,c.currentY=s.pageY;const k=c.currentX,_=c.currentY,y=a.edgeSwipeDetection||a.iOSEdgeSwipeDetection,S=a.edgeSwipeThreshold||a.iOSEdgeSwipeThreshold;if(y&&(k<=S||k>=t.innerWidth-S))if(y==="prevent")e.preventDefault();else return;Object.assign(u,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),c.startX=k,c.startY=_,u.touchStartTime=Qn(),i.allowClick=!0,i.updateSize(),i.swipeDirection=void 0,a.threshold>0&&(u.allowThresholdMove=!1);let x=!0;l.matches(u.focusableElements)&&(x=!1,l.nodeName==="SELECT"&&(u.isTouched=!1)),d.activeElement&&d.activeElement.matches(u.focusableElements)&&d.activeElement!==l&&d.activeElement.blur();const D=x&&i.allowTouchMove&&a.touchStartPreventDefault;(a.touchStartForcePreventDefault||D)&&!l.isContentEditable&&s.preventDefault(),a.freeMode&&a.freeMode.enabled&&i.freeMode&&i.animating&&!a.cssMode&&i.freeMode.onTouchStart(),i.emit("touchStart",s)}function Wu(e){const i=Yt(),d=this,t=d.touchEventsData,{params:u,touches:a,rtlTranslate:c,enabled:r}=d;if(!r||!u.simulateTouch&&e.pointerType==="mouse")return;let s=e;if(s.originalEvent&&(s=s.originalEvent),!t.isTouched){t.startMoving&&t.isScrolling&&d.emit("touchMoveOpposite",s);return}const l=t.evCache.findIndex(p=>p.pointerId===s.pointerId);l>=0&&(t.evCache[l]=s);const g=t.evCache.length>1?t.evCache[0]:s,o=g.pageX,v=g.pageY;if(s.preventedByNestedSwiper){a.startX=o,a.startY=v;return}if(!d.allowTouchMove){s.target.matches(t.focusableElements)||(d.allowClick=!1),t.isTouched&&(Object.assign(a,{startX:o,startY:v,prevX:d.touches.currentX,prevY:d.touches.currentY,currentX:o,currentY:v}),t.touchStartTime=Qn());return}if(u.touchReleaseOnEdges&&!u.loop){if(d.isVertical()){if(v<a.startY&&d.translate<=d.maxTranslate()||v>a.startY&&d.translate>=d.minTranslate()){t.isTouched=!1,t.isMoved=!1;return}}else if(o<a.startX&&d.translate<=d.maxTranslate()||o>a.startX&&d.translate>=d.minTranslate())return}if(i.activeElement&&s.target===i.activeElement&&s.target.matches(t.focusableElements)){t.isMoved=!0,d.allowClick=!1;return}if(t.allowTouchCallbacks&&d.emit("touchMove",s),s.targetTouches&&s.targetTouches.length>1)return;a.currentX=o,a.currentY=v;const h=a.currentX-a.startX,k=a.currentY-a.startY;if(d.params.threshold&&Math.sqrt(h**2+k**2)<d.params.threshold)return;if(typeof t.isScrolling>"u"){let p;d.isHorizontal()&&a.currentY===a.startY||d.isVertical()&&a.currentX===a.startX?t.isScrolling=!1:h*h+k*k>=25&&(p=Math.atan2(Math.abs(k),Math.abs(h))*180/Math.PI,t.isScrolling=d.isHorizontal()?p>u.touchAngle:90-p>u.touchAngle)}if(t.isScrolling&&d.emit("touchMoveOpposite",s),typeof t.startMoving>"u"&&(a.currentX!==a.startX||a.currentY!==a.startY)&&(t.startMoving=!0),t.isScrolling||d.zoom&&d.params.zoom&&d.params.zoom.enabled&&t.evCache.length>1){t.isTouched=!1;return}if(!t.startMoving)return;d.allowClick=!1,!u.cssMode&&s.cancelable&&s.preventDefault(),u.touchMoveStopPropagation&&!u.nested&&s.stopPropagation();let _=d.isHorizontal()?h:k,y=d.isHorizontal()?a.currentX-a.previousX:a.currentY-a.previousY;u.oneWayMovement&&(_=Math.abs(_)*(c?1:-1),y=Math.abs(y)*(c?1:-1)),a.diff=_,_*=u.touchRatio,c&&(_=-_,y=-y);const S=d.touchesDirection;d.swipeDirection=_>0?"prev":"next",d.touchesDirection=y>0?"prev":"next";const x=d.params.loop&&!u.cssMode;if(!t.isMoved){if(x&&d.loopFix({direction:d.swipeDirection}),t.startTranslate=d.getTranslate(),d.setTransition(0),d.animating){const p=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});d.wrapperEl.dispatchEvent(p)}t.allowMomentumBounce=!1,u.grabCursor&&(d.allowSlideNext===!0||d.allowSlidePrev===!0)&&d.setGrabCursor(!0),d.emit("sliderFirstMove",s)}let D;t.isMoved&&S!==d.touchesDirection&&x&&Math.abs(_)>=1&&(d.loopFix({direction:d.swipeDirection,setTranslate:!0}),D=!0),d.emit("sliderMove",s),t.isMoved=!0,t.currentTranslate=_+t.startTranslate;let E=!0,I=u.resistanceRatio;if(u.touchReleaseOnEdges&&(I=0),_>0?(x&&!D&&t.currentTranslate>(u.centeredSlides?d.minTranslate()-d.size/2:d.minTranslate())&&d.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),t.currentTranslate>d.minTranslate()&&(E=!1,u.resistance&&(t.currentTranslate=d.minTranslate()-1+(-d.minTranslate()+t.startTranslate+_)**I))):_<0&&(x&&!D&&t.currentTranslate<(u.centeredSlides?d.maxTranslate()+d.size/2:d.maxTranslate())&&d.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:d.slides.length-(u.slidesPerView==="auto"?d.slidesPerViewDynamic():Math.ceil(parseFloat(u.slidesPerView,10)))}),t.currentTranslate<d.maxTranslate()&&(E=!1,u.resistance&&(t.currentTranslate=d.maxTranslate()+1-(d.maxTranslate()-t.startTranslate-_)**I))),E&&(s.preventedByNestedSwiper=!0),!d.allowSlideNext&&d.swipeDirection==="next"&&t.currentTranslate<t.startTranslate&&(t.currentTranslate=t.startTranslate),!d.allowSlidePrev&&d.swipeDirection==="prev"&&t.currentTranslate>t.startTranslate&&(t.currentTranslate=t.startTranslate),!d.allowSlidePrev&&!d.allowSlideNext&&(t.currentTranslate=t.startTranslate),u.threshold>0)if(Math.abs(_)>u.threshold||t.allowThresholdMove){if(!t.allowThresholdMove){t.allowThresholdMove=!0,a.startX=a.currentX,a.startY=a.currentY,t.currentTranslate=t.startTranslate,a.diff=d.isHorizontal()?a.currentX-a.startX:a.currentY-a.startY;return}}else{t.currentTranslate=t.startTranslate;return}!u.followFinger||u.cssMode||((u.freeMode&&u.freeMode.enabled&&d.freeMode||u.watchSlidesProgress)&&(d.updateActiveIndex(),d.updateSlidesClasses()),u.freeMode&&u.freeMode.enabled&&d.freeMode&&d.freeMode.onTouchMove(),d.updateProgress(t.currentTranslate),d.setTranslate(t.currentTranslate))}function Hu(e){const i=this,d=i.touchEventsData,t=d.evCache.findIndex(D=>D.pointerId===e.pointerId);if(t>=0&&d.evCache.splice(t,1),["pointercancel","pointerout","pointerleave"].includes(e.type)&&!(e.type==="pointercancel"&&(i.browser.isSafari||i.browser.isWebView)))return;const{params:u,touches:a,rtlTranslate:c,slidesGrid:r,enabled:s}=i;if(!s||!u.simulateTouch&&e.pointerType==="mouse")return;let l=e;if(l.originalEvent&&(l=l.originalEvent),d.allowTouchCallbacks&&i.emit("touchEnd",l),d.allowTouchCallbacks=!1,!d.isTouched){d.isMoved&&u.grabCursor&&i.setGrabCursor(!1),d.isMoved=!1,d.startMoving=!1;return}u.grabCursor&&d.isMoved&&d.isTouched&&(i.allowSlideNext===!0||i.allowSlidePrev===!0)&&i.setGrabCursor(!1);const g=Qn(),o=g-d.touchStartTime;if(i.allowClick){const D=l.path||l.composedPath&&l.composedPath();i.updateClickedSlide(D&&D[0]||l.target),i.emit("tap click",l),o<300&&g-d.lastClickTime<300&&i.emit("doubleTap doubleClick",l)}if(d.lastClickTime=Qn(),Hr(()=>{i.destroyed||(i.allowClick=!0)}),!d.isTouched||!d.isMoved||!i.swipeDirection||a.diff===0||d.currentTranslate===d.startTranslate){d.isTouched=!1,d.isMoved=!1,d.startMoving=!1;return}d.isTouched=!1,d.isMoved=!1,d.startMoving=!1;let v;if(u.followFinger?v=c?i.translate:-i.translate:v=-d.currentTranslate,u.cssMode)return;if(u.freeMode&&u.freeMode.enabled){i.freeMode.onTouchEnd({currentPos:v});return}let h=0,k=i.slidesSizesGrid[0];for(let D=0;D<r.length;D+=D<u.slidesPerGroupSkip?1:u.slidesPerGroup){const E=D<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;typeof r[D+E]<"u"?v>=r[D]&&v<r[D+E]&&(h=D,k=r[D+E]-r[D]):v>=r[D]&&(h=D,k=r[r.length-1]-r[r.length-2])}let _=null,y=null;u.rewind&&(i.isBeginning?y=u.virtual&&u.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1:i.isEnd&&(_=0));const S=(v-r[h])/k,x=h<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;if(o>u.longSwipesMs){if(!u.longSwipes){i.slideTo(i.activeIndex);return}i.swipeDirection==="next"&&(S>=u.longSwipesRatio?i.slideTo(u.rewind&&i.isEnd?_:h+x):i.slideTo(h)),i.swipeDirection==="prev"&&(S>1-u.longSwipesRatio?i.slideTo(h+x):y!==null&&S<0&&Math.abs(S)>u.longSwipesRatio?i.slideTo(y):i.slideTo(h))}else{if(!u.shortSwipes){i.slideTo(i.activeIndex);return}i.navigation&&(l.target===i.navigation.nextEl||l.target===i.navigation.prevEl)?l.target===i.navigation.nextEl?i.slideTo(h+x):i.slideTo(h):(i.swipeDirection==="next"&&i.slideTo(_!==null?_:h+x),i.swipeDirection==="prev"&&i.slideTo(y!==null?y:h))}}function Oo(){const e=this,{params:i,el:d}=e;if(d&&d.offsetWidth===0)return;i.breakpoints&&e.setBreakpoint();const{allowSlideNext:t,allowSlidePrev:u,snapGrid:a}=e,c=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const r=c&&i.loop;(i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!e.isBeginning&&!e.params.centeredSlides&&!r?e.slideTo(e.slides.length-1,0,!1,!0):e.params.loop&&!c?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=u,e.allowSlideNext=t,e.params.watchOverflow&&a!==e.snapGrid&&e.checkOverflow()}function Gu(e){const i=this;i.enabled&&(i.allowClick||(i.params.preventClicks&&e.preventDefault(),i.params.preventClicksPropagation&&i.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function qu(){const e=this,{wrapperEl:i,rtlTranslate:d,enabled:t}=e;if(!t)return;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-i.scrollLeft:e.translate=-i.scrollTop,e.translate===0&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();let u;const a=e.maxTranslate()-e.minTranslate();a===0?u=0:u=(e.translate-e.minTranslate())/a,u!==e.progress&&e.updateProgress(d?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function Ju(e){const i=this;Hn(i,e.target),!(i.params.cssMode||i.params.slidesPerView!=="auto"&&!i.params.autoHeight)&&i.update()}let Mo=!1;function $u(){}const Bs=(e,i)=>{const d=Yt(),{params:t,el:u,wrapperEl:a,device:c}=e,r=!!t.nested,s=i==="on"?"addEventListener":"removeEventListener",l=i;u[s]("pointerdown",e.onTouchStart,{passive:!1}),d[s]("pointermove",e.onTouchMove,{passive:!1,capture:r}),d[s]("pointerup",e.onTouchEnd,{passive:!0}),d[s]("pointercancel",e.onTouchEnd,{passive:!0}),d[s]("pointerout",e.onTouchEnd,{passive:!0}),d[s]("pointerleave",e.onTouchEnd,{passive:!0}),(t.preventClicks||t.preventClicksPropagation)&&u[s]("click",e.onClick,!0),t.cssMode&&a[s]("scroll",e.onScroll),t.updateOnWindowResize?e[l](c.ios||c.android?"resize orientationchange observerUpdate":"resize observerUpdate",Oo,!0):e[l]("observerUpdate",Oo,!0),u[s]("load",e.onLoad,{capture:!0})};function Yu(){const e=this,i=Yt(),{params:d}=e;e.onTouchStart=zu.bind(e),e.onTouchMove=Wu.bind(e),e.onTouchEnd=Hu.bind(e),d.cssMode&&(e.onScroll=qu.bind(e)),e.onClick=Gu.bind(e),e.onLoad=Ju.bind(e),Mo||(i.addEventListener("touchstart",$u),Mo=!0),Bs(e,"on")}function Ku(){Bs(this,"off")}const Xu={attachEvents:Yu,detachEvents:Ku},Ao=(e,i)=>e.grid&&i.grid&&i.grid.rows>1;function Qu(){const e=this,{realIndex:i,initialized:d,params:t,el:u}=e,a=t.breakpoints;if(!a||a&&Object.keys(a).length===0)return;const c=e.getBreakpoint(a,e.params.breakpointsBase,e.el);if(!c||e.currentBreakpoint===c)return;const s=(c in a?a[c]:void 0)||e.originalParams,l=Ao(e,t),g=Ao(e,s),o=t.enabled;l&&!g?(u.classList.remove(`${t.containerModifierClass}grid`,`${t.containerModifierClass}grid-column`),e.emitContainerClasses()):!l&&g&&(u.classList.add(`${t.containerModifierClass}grid`),(s.grid.fill&&s.grid.fill==="column"||!s.grid.fill&&t.grid.fill==="column")&&u.classList.add(`${t.containerModifierClass}grid-column`),e.emitContainerClasses()),["navigation","pagination","scrollbar"].forEach(_=>{if(typeof s[_]>"u")return;const y=t[_]&&t[_].enabled,S=s[_]&&s[_].enabled;y&&!S&&e[_].disable(),!y&&S&&e[_].enable()});const v=s.direction&&s.direction!==t.direction,h=t.loop&&(s.slidesPerView!==t.slidesPerView||v);v&&d&&e.changeDirection(),rt(e.params,s);const k=e.params.enabled;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),o&&!k?e.disable():!o&&k&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",s),h&&d&&(e.loopDestroy(),e.loopCreate(i),e.updateSlides()),e.emit("breakpoint",s)}function Zu(e,i="window",d){if(!e||i==="container"&&!d)return;let t=!1;const u=it(),a=i==="window"?u.innerHeight:d.clientHeight,c=Object.keys(e).map(r=>{if(typeof r=="string"&&r.indexOf("@")===0){const s=parseFloat(r.substr(1));return{value:a*s,point:r}}return{value:r,point:r}});c.sort((r,s)=>parseInt(r.value,10)-parseInt(s.value,10));for(let r=0;r<c.length;r+=1){const{point:s,value:l}=c[r];i==="window"?u.matchMedia(`(min-width: ${l}px)`).matches&&(t=s):l<=d.clientWidth&&(t=s)}return t||"max"}const ef={setBreakpoint:Qu,getBreakpoint:Zu};function tf(e,i){const d=[];return e.forEach(t=>{typeof t=="object"?Object.keys(t).forEach(u=>{t[u]&&d.push(i+u)}):typeof t=="string"&&d.push(i+t)}),d}function nf(){const e=this,{classNames:i,params:d,rtl:t,el:u,device:a}=e,c=tf(["initialized",d.direction,{"free-mode":e.params.freeMode&&d.freeMode.enabled},{autoheight:d.autoHeight},{rtl:t},{grid:d.grid&&d.grid.rows>1},{"grid-column":d.grid&&d.grid.rows>1&&d.grid.fill==="column"},{android:a.android},{ios:a.ios},{"css-mode":d.cssMode},{centered:d.cssMode&&d.centeredSlides},{"watch-progress":d.watchSlidesProgress}],d.containerModifierClass);i.push(...c),u.classList.add(...i),e.emitContainerClasses()}function rf(){const e=this,{el:i,classNames:d}=e;i.classList.remove(...d),e.emitContainerClasses()}const of={addClasses:nf,removeClasses:rf};function sf(){const e=this,{isLocked:i,params:d}=e,{slidesOffsetBefore:t}=d;if(t){const u=e.slides.length-1,a=e.slidesGrid[u]+e.slidesSizesGrid[u]+t*2;e.isLocked=e.size>a}else e.isLocked=e.snapGrid.length===1;d.allowSlideNext===!0&&(e.allowSlideNext=!e.isLocked),d.allowSlidePrev===!0&&(e.allowSlidePrev=!e.isLocked),i&&i!==e.isLocked&&(e.isEnd=!1),i!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}const af={checkOverflow:sf},Po={init:!0,direction:"horizontal",oneWayMovement:!1,touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopedSlides:null,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function df(e,i){return function(t={}){const u=Object.keys(t)[0],a=t[u];if(typeof a!="object"||a===null){rt(i,t);return}if(["navigation","pagination","scrollbar"].indexOf(u)>=0&&e[u]===!0&&(e[u]={auto:!0}),!(u in e&&"enabled"in a)){rt(i,t);return}e[u]===!0&&(e[u]={enabled:!0}),typeof e[u]=="object"&&!("enabled"in e[u])&&(e[u].enabled=!0),e[u]||(e[u]={enabled:!1}),rt(i,t)}}const kr={eventsEmitter:iu,update:hu,translate:bu,transition:Tu,slide:Pu,loop:ju,grabCursor:Vu,events:Xu,breakpoints:ef,checkOverflow:af,classes:of},Ir={};let Tn=class wt{constructor(...i){let d,t;i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[d,t]=i,t||(t={}),t=rt({},t),d&&!t.el&&(t.el=d);const u=Yt();if(t.el&&typeof t.el=="string"&&u.querySelectorAll(t.el).length>1){const s=[];return u.querySelectorAll(t.el).forEach(l=>{const g=rt({},t,{el:l});s.push(new wt(g))}),s}const a=this;a.__swiper__=!0,a.support=Ns(),a.device=Zl({userAgent:t.userAgent}),a.browser=tu(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const c={};a.modules.forEach(s=>{s({params:t,swiper:a,extendParams:df(t,c),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const r=rt({},Po,c);return a.params=rt({},r,Ir,t),a.originalParams=rt({},a.params),a.passedParams=rt({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(s=>{a.on(s,a.params.on[s])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:d,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,evCache:[]},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getSlideIndex(i){const{slidesEl:d,params:t}=this,u=Ct(d,`.${t.slideClass}, swiper-slide`),a=Ro(u[0]);return Ro(i)-a}getSlideIndexByData(i){return this.getSlideIndex(this.slides.filter(d=>d.getAttribute("data-swiper-slide-index")*1===i)[0])}recalcSlides(){const i=this,{slidesEl:d,params:t}=i;i.slides=Ct(d,`.${t.slideClass}, swiper-slide`)}enable(){const i=this;i.enabled||(i.enabled=!0,i.params.grabCursor&&i.setGrabCursor(),i.emit("enable"))}disable(){const i=this;i.enabled&&(i.enabled=!1,i.params.grabCursor&&i.unsetGrabCursor(),i.emit("disable"))}setProgress(i,d){const t=this;i=Math.min(Math.max(i,0),1);const u=t.minTranslate(),c=(t.maxTranslate()-u)*i+u;t.translateTo(c,typeof d>"u"?0:d),t.updateActiveIndex(),t.updateSlidesClasses()}emitContainerClasses(){const i=this;if(!i.params._emitClasses||!i.el)return;const d=i.el.className.split(" ").filter(t=>t.indexOf("swiper")===0||t.indexOf(i.params.containerModifierClass)===0);i.emit("_containerClasses",d.join(" "))}getSlideClasses(i){const d=this;return d.destroyed?"":i.className.split(" ").filter(t=>t.indexOf("swiper-slide")===0||t.indexOf(d.params.slideClass)===0).join(" ")}emitSlidesClasses(){const i=this;if(!i.params._emitClasses||!i.el)return;const d=[];i.slides.forEach(t=>{const u=i.getSlideClasses(t);d.push({slideEl:t,classNames:u}),i.emit("_slideClass",t,u)}),i.emit("_slideClasses",d)}slidesPerViewDynamic(i="current",d=!1){const t=this,{params:u,slides:a,slidesGrid:c,slidesSizesGrid:r,size:s,activeIndex:l}=t;let g=1;if(u.centeredSlides){let o=a[l]?a[l].swiperSlideSize:0,v;for(let h=l+1;h<a.length;h+=1)a[h]&&!v&&(o+=a[h].swiperSlideSize,g+=1,o>s&&(v=!0));for(let h=l-1;h>=0;h-=1)a[h]&&!v&&(o+=a[h].swiperSlideSize,g+=1,o>s&&(v=!0))}else if(i==="current")for(let o=l+1;o<a.length;o+=1)(d?c[o]+r[o]-c[l]<s:c[o]-c[l]<s)&&(g+=1);else for(let o=l-1;o>=0;o-=1)c[l]-c[o]<s&&(g+=1);return g}update(){const i=this;if(!i||i.destroyed)return;const{snapGrid:d,params:t}=i;t.breakpoints&&i.setBreakpoint(),[...i.el.querySelectorAll('[loading="lazy"]')].forEach(c=>{c.complete&&Hn(i,c)}),i.updateSize(),i.updateSlides(),i.updateProgress(),i.updateSlidesClasses();function u(){const c=i.rtlTranslate?i.translate*-1:i.translate,r=Math.min(Math.max(c,i.maxTranslate()),i.minTranslate());i.setTranslate(r),i.updateActiveIndex(),i.updateSlidesClasses()}let a;if(t.freeMode&&t.freeMode.enabled&&!t.cssMode)u(),t.autoHeight&&i.updateAutoHeight();else{if((t.slidesPerView==="auto"||t.slidesPerView>1)&&i.isEnd&&!t.centeredSlides){const c=i.virtual&&t.virtual.enabled?i.virtual.slides:i.slides;a=i.slideTo(c.length-1,0,!1,!0)}else a=i.slideTo(i.activeIndex,0,!1,!0);a||u()}t.watchOverflow&&d!==i.snapGrid&&i.checkOverflow(),i.emit("update")}changeDirection(i,d=!0){const t=this,u=t.params.direction;return i||(i=u==="horizontal"?"vertical":"horizontal"),i===u||i!=="horizontal"&&i!=="vertical"||(t.el.classList.remove(`${t.params.containerModifierClass}${u}`),t.el.classList.add(`${t.params.containerModifierClass}${i}`),t.emitContainerClasses(),t.params.direction=i,t.slides.forEach(a=>{i==="vertical"?a.style.width="":a.style.height=""}),t.emit("changeDirection"),d&&t.update()),t}changeLanguageDirection(i){const d=this;d.rtl&&i==="rtl"||!d.rtl&&i==="ltr"||(d.rtl=i==="rtl",d.rtlTranslate=d.params.direction==="horizontal"&&d.rtl,d.rtl?(d.el.classList.add(`${d.params.containerModifierClass}rtl`),d.el.dir="rtl"):(d.el.classList.remove(`${d.params.containerModifierClass}rtl`),d.el.dir="ltr"),d.update())}mount(i){const d=this;if(d.mounted)return!0;let t=i||d.params.el;if(typeof t=="string"&&(t=document.querySelector(t)),!t)return!1;t.swiper=d,t.shadowEl&&(d.isElement=!0);const u=()=>`.${(d.params.wrapperClass||"").trim().split(" ").join(".")}`;let c=(()=>t&&t.shadowRoot&&t.shadowRoot.querySelector?t.shadowRoot.querySelector(u()):Ct(t,u())[0])();return!c&&d.params.createElements&&(c=Jl("div",d.params.wrapperClass),t.append(c),Ct(t,`.${d.params.slideClass}`).forEach(r=>{c.append(r)})),Object.assign(d,{el:t,wrapperEl:c,slidesEl:d.isElement?t:c,mounted:!0,rtl:t.dir.toLowerCase()==="rtl"||Pt(t,"direction")==="rtl",rtlTranslate:d.params.direction==="horizontal"&&(t.dir.toLowerCase()==="rtl"||Pt(t,"direction")==="rtl"),wrongRTL:Pt(c,"display")==="-webkit-box"}),!0}init(i){const d=this;return d.initialized||d.mount(i)===!1||(d.emit("beforeInit"),d.params.breakpoints&&d.setBreakpoint(),d.addClasses(),d.updateSize(),d.updateSlides(),d.params.watchOverflow&&d.checkOverflow(),d.params.grabCursor&&d.enabled&&d.setGrabCursor(),d.params.loop&&d.virtual&&d.params.virtual.enabled?d.slideTo(d.params.initialSlide+d.virtual.slidesBefore,0,d.params.runCallbacksOnInit,!1,!0):d.slideTo(d.params.initialSlide,0,d.params.runCallbacksOnInit,!1,!0),d.params.loop&&d.loopCreate(),d.attachEvents(),[...d.el.querySelectorAll('[loading="lazy"]')].forEach(u=>{u.complete?Hn(d,u):u.addEventListener("load",a=>{Hn(d,a.target)})}),Gr(d),d.initialized=!0,Gr(d),d.emit("init"),d.emit("afterInit")),d}destroy(i=!0,d=!0){const t=this,{params:u,el:a,wrapperEl:c,slides:r}=t;return typeof t.params>"u"||t.destroyed||(t.emit("beforeDestroy"),t.initialized=!1,t.detachEvents(),u.loop&&t.loopDestroy(),d&&(t.removeClasses(),a.removeAttribute("style"),c.removeAttribute("style"),r&&r.length&&r.forEach(s=>{s.classList.remove(u.slideVisibleClass,u.slideActiveClass,u.slideNextClass,u.slidePrevClass),s.removeAttribute("style"),s.removeAttribute("data-swiper-slide-index")})),t.emit("destroy"),Object.keys(t.eventsListeners).forEach(s=>{t.off(s)}),i!==!1&&(t.el.swiper=null,Wl(t)),t.destroyed=!0),null}static extendDefaults(i){rt(Ir,i)}static get extendedDefaults(){return Ir}static get defaults(){return Po}static installModule(i){wt.prototype.__modules__||(wt.prototype.__modules__=[]);const d=wt.prototype.__modules__;typeof i=="function"&&d.indexOf(i)<0&&d.push(i)}static use(i){return Array.isArray(i)?(i.forEach(d=>wt.installModule(d)),wt):(wt.installModule(i),wt)}};Object.keys(kr).forEach(e=>{Object.keys(kr[e]).forEach(i=>{Tn.prototype[i]=kr[e][i]})});Tn.use([nu,ru]);function $t(e){return typeof e=="object"&&e!==null&&e.constructor&&Object.prototype.toString.call(e).slice(8,-1)==="Object"}function Dt(e,i){const d=["__proto__","constructor","prototype"];Object.keys(i).filter(t=>d.indexOf(t)<0).forEach(t=>{typeof e[t]>"u"?e[t]=i[t]:$t(i[t])&&$t(e[t])&&Object.keys(i[t]).length>0?i[t].__swiper__?e[t]=i[t]:Dt(e[t],i[t]):e[t]=i[t]})}function Fs(e={}){return e.navigation&&typeof e.navigation.nextEl>"u"&&typeof e.navigation.prevEl>"u"}function Vs(e={}){return e.pagination&&typeof e.pagination.el>"u"}function Us(e={}){return e.scrollbar&&typeof e.scrollbar.el>"u"}function zs(e=""){const i=e.split(" ").map(t=>t.trim()).filter(t=>!!t),d=[];return i.forEach(t=>{d.indexOf(t)<0&&d.push(t)}),d.join(" ")}function cf(e=""){return e?e.includes("swiper-wrapper")?e:`swiper-wrapper ${e}`:"swiper-wrapper"}const Ws=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopedSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideNextClass","slidePrevClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Do(e={},i=!0){const d={on:{}},t={},u={};Dt(d,Tn.defaults),Dt(d,Tn.extendedDefaults),d._emitClasses=!0,d.init=!1;const a={},c=Ws.map(s=>s.replace(/_/,"")),r=Object.assign({},e);return Object.keys(r).forEach(s=>{typeof e[s]>"u"||(c.indexOf(s)>=0?$t(e[s])?(d[s]={},u[s]={},Dt(d[s],e[s]),Dt(u[s],e[s])):(d[s]=e[s],u[s]=e[s]):s.search(/on[A-Z]/)===0&&typeof e[s]=="function"?i?t[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:d.on[`${s[2].toLowerCase()}${s.substr(3)}`]=e[s]:a[s]=e[s])}),["navigation","pagination","scrollbar"].forEach(s=>{d[s]===!0&&(d[s]={}),d[s]===!1&&delete d[s]}),{params:d,passedParams:u,rest:a,events:t}}function lf({el:e,nextEl:i,prevEl:d,paginationEl:t,scrollbarEl:u,swiper:a},c){Fs(c)&&i&&d&&(a.params.navigation.nextEl=i,a.originalParams.navigation.nextEl=i,a.params.navigation.prevEl=d,a.originalParams.navigation.prevEl=d),Vs(c)&&t&&(a.params.pagination.el=t,a.originalParams.pagination.el=t),Us(c)&&u&&(a.params.scrollbar.el=u,a.originalParams.scrollbar.el=u),a.init(e)}function uf(e,i,d,t,u){const a=[];if(!i)return a;const c=s=>{a.indexOf(s)<0&&a.push(s)};if(d&&t){const s=t.map(u),l=d.map(u);s.join("")!==l.join("")&&c("children"),t.length!==d.length&&c("children")}return Ws.filter(s=>s[0]==="_").map(s=>s.replace(/_/,"")).forEach(s=>{if(s in e&&s in i)if($t(e[s])&&$t(i[s])){const l=Object.keys(e[s]),g=Object.keys(i[s]);l.length!==g.length?c(s):(l.forEach(o=>{e[s][o]!==i[s][o]&&c(s)}),g.forEach(o=>{e[s][o]!==i[s][o]&&c(s)}))}else e[s]!==i[s]&&c(s)}),a}function Rr(e,i,d){e===void 0&&(e={});const t=[],u={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},a=(c,r)=>{Array.isArray(c)&&c.forEach(s=>{const l=typeof s.type=="symbol";r==="default"&&(r="container-end"),l&&s.children?a(s.children,r):s.type&&(s.type.name==="SwiperSlide"||s.type.name==="AsyncComponentWrapper")?t.push(s):u[r]&&u[r].push(s)})};return Object.keys(e).forEach(c=>{if(typeof e[c]!="function")return;const r=e[c]();a(r,c)}),d.value=i.value,i.value=t,{slides:t,slots:u}}function ff({swiper:e,slides:i,passedParams:d,changedParams:t,nextEl:u,prevEl:a,scrollbarEl:c,paginationEl:r}){const s=t.filter(P=>P!=="children"&&P!=="direction"&&P!=="wrapperClass"),{params:l,pagination:g,navigation:o,scrollbar:v,virtual:h,thumbs:k}=e;let _,y,S,x,D,E,I,p;t.includes("thumbs")&&d.thumbs&&d.thumbs.swiper&&l.thumbs&&!l.thumbs.swiper&&(_=!0),t.includes("controller")&&d.controller&&d.controller.control&&l.controller&&!l.controller.control&&(y=!0),t.includes("pagination")&&d.pagination&&(d.pagination.el||r)&&(l.pagination||l.pagination===!1)&&g&&!g.el&&(S=!0),t.includes("scrollbar")&&d.scrollbar&&(d.scrollbar.el||c)&&(l.scrollbar||l.scrollbar===!1)&&v&&!v.el&&(x=!0),t.includes("navigation")&&d.navigation&&(d.navigation.prevEl||a)&&(d.navigation.nextEl||u)&&(l.navigation||l.navigation===!1)&&o&&!o.prevEl&&!o.nextEl&&(D=!0);const B=P=>{e[P]&&(e[P].destroy(),P==="navigation"?(e.isElement&&(e[P].prevEl.remove(),e[P].nextEl.remove()),l[P].prevEl=void 0,l[P].nextEl=void 0,e[P].prevEl=void 0,e[P].nextEl=void 0):(e.isElement&&e[P].el.remove(),l[P].el=void 0,e[P].el=void 0))};t.includes("loop")&&e.isElement&&(l.loop&&!d.loop?E=!0:!l.loop&&d.loop?I=!0:p=!0),s.forEach(P=>{if($t(l[P])&&$t(d[P]))Dt(l[P],d[P]),(P==="navigation"||P==="pagination"||P==="scrollbar")&&"enabled"in d[P]&&!d[P].enabled&&B(P);else{const z=d[P];(z===!0||z===!1)&&(P==="navigation"||P==="pagination"||P==="scrollbar")?z===!1&&B(P):l[P]=d[P]}}),s.includes("controller")&&!y&&e.controller&&e.controller.control&&l.controller&&l.controller.control&&(e.controller.control=l.controller.control),t.includes("children")&&i&&h&&l.virtual.enabled&&(h.slides=i,h.update(!0)),t.includes("children")&&i&&l.loop&&(p=!0),_&&k.init()&&k.update(!0),y&&(e.controller.control=l.controller.control),S&&(e.isElement&&(!r||typeof r=="string")&&(r=document.createElement("div"),r.classList.add("swiper-pagination"),e.el.shadowEl.appendChild(r)),r&&(l.pagination.el=r),g.init(),g.render(),g.update()),x&&(e.isElement&&(!c||typeof c=="string")&&(c=document.createElement("div"),c.classList.add("swiper-scrollbar"),e.el.shadowEl.appendChild(c)),c&&(l.scrollbar.el=c),v.init(),v.updateSize(),v.setTranslate()),D&&(e.isElement&&((!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-button-next"),e.el.shadowEl.appendChild(u)),(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-button-prev"),e.el.shadowEl.appendChild(a))),u&&(l.navigation.nextEl=u),a&&(l.navigation.prevEl=a),o.init(),o.update()),t.includes("allowSlideNext")&&(e.allowSlideNext=d.allowSlideNext),t.includes("allowSlidePrev")&&(e.allowSlidePrev=d.allowSlidePrev),t.includes("direction")&&e.changeDirection(d.direction,!1),(E||p)&&e.loopDestroy(),(I||p)&&e.loopCreate(),e.update()}function pf(e,i,d){if(!d)return null;const t=g=>{let o=g;return g<0?o=i.length+g:o>=i.length&&(o=o-i.length),o},u=e.value.isHorizontal()?{[e.value.rtlTranslate?"right":"left"]:`${d.offset}px`}:{top:`${d.offset}px`},{from:a,to:c}=d,r=e.value.params.loop?-i.length:0,s=e.value.params.loop?i.length*2:i.length,l=[];for(let g=r;g<s;g+=1)g>=a&&g<=c&&l.push(i[t(g)]);return l.map(g=>(g.props||(g.props={}),g.props.style||(g.props.style={}),g.props.swiperRef=e,g.props.style=u,ct(g.type,{...g.props},g.children)))}const mf=e=>{!e||e.destroyed||!e.params.virtual||e.params.virtual&&!e.params.virtual.enabled||(e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),e.parallax&&e.params.parallax&&e.params.parallax.enabled&&e.parallax.setTranslate())},hf={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(e,i){let{slots:d,emit:t}=i;const{tag:u,wrapperTag:a}=e,c=qe("swiper"),r=qe(null),s=qe(!1),l=qe(!1),g=qe(null),o=qe(null),v=qe(null),h={value:[]},k={value:[]},_=qe(null),y=qe(null),S=qe(null),x=qe(null),{params:D,passedParams:E}=Do(e,!1);Rr(d,h,k),v.value=E,k.value=h.value;const I=()=>{Rr(d,h,k),s.value=!0};D.onAny=function(P){for(var z=arguments.length,te=new Array(z>1?z-1:0),W=1;W<z;W++)te[W-1]=arguments[W];t(P,...te)},Object.assign(D.on,{_beforeBreakpoint:I,_containerClasses(P,z){c.value=z}});const p={...D};if(delete p.wrapperClass,o.value=new Tn(p),o.value.virtual&&o.value.params.virtual.enabled){o.value.virtual.slides=h.value;const P={cache:!1,slides:h.value,renderExternal:z=>{r.value=z},renderExternalUpdate:!1};Dt(o.value.params.virtual,P),Dt(o.value.originalParams.virtual,P)}pi(()=>{!l.value&&o.value&&(o.value.emitSlidesClasses(),l.value=!0);const{passedParams:P}=Do(e,!1),z=uf(P,v.value,h.value,k.value,te=>te.props&&te.props.key);v.value=P,(z.length||s.value)&&o.value&&!o.value.destroyed&&ff({swiper:o.value,slides:h.value,passedParams:P,changedParams:z,nextEl:_.value,prevEl:y.value,scrollbarEl:x.value,paginationEl:S.value}),s.value=!1}),vi("swiper",o),Vn(r,()=>{ss(()=>{mf(o.value)})}),fi(()=>{g.value&&(lf({el:g.value,nextEl:_.value,prevEl:y.value,paginationEl:S.value,scrollbarEl:x.value,swiper:o.value},D),t("swiper",o.value))}),mi(()=>{o.value&&!o.value.destroyed&&o.value.destroy(!0,!1)});function B(P){return D.virtual?pf(o,P,r.value):(P.forEach((z,te)=>{z.props||(z.props={}),z.props.swiperRef=o,z.props.swiperSlideIndex=te}),P)}return()=>{const{slides:P,slots:z}=Rr(d,h,k);return ct(u,{ref:g,class:zs(c.value)},[z["container-start"],ct(a,{class:cf(D.wrapperClass)},[z["wrapper-start"],B(P),z["wrapper-end"]]),Fs(e)&&[ct("div",{ref:y,class:"swiper-button-prev"}),ct("div",{ref:_,class:"swiper-button-next"})],Us(e)&&ct("div",{ref:x,class:"swiper-scrollbar"}),Vs(e)&&ct("div",{ref:S,class:"swiper-pagination"}),z["container-end"]])}}},vf={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(e,i){let{slots:d}=i,t=!1;const{swiperRef:u}=e,a=qe(null),c=qe("swiper-slide"),r=qe(!1);function s(o,v,h){v===a.value&&(c.value=h)}fi(()=>{!u||!u.value||(u.value.on("_slideClass",s),t=!0)}),gs(()=>{t||!u||!u.value||(u.value.on("_slideClass",s),t=!0)}),pi(()=>{!a.value||!u||!u.value||(typeof e.swiperSlideIndex<"u"&&(a.value.swiperSlideIndex=e.swiperSlideIndex),u.value.destroyed&&c.value!=="swiper-slide"&&(c.value="swiper-slide"))}),mi(()=>{!u||!u.value||u.value.off("_slideClass",s)});const l=Ps(()=>({isActive:c.value.indexOf("swiper-slide-active")>=0,isVisible:c.value.indexOf("swiper-slide-visible")>=0,isPrev:c.value.indexOf("swiper-slide-prev")>=0,isNext:c.value.indexOf("swiper-slide-next")>=0}));vi("swiperSlide",l);const g=()=>{r.value=!0};return()=>ct(e.tag,{class:zs(`${c.value}`),ref:a,"data-swiper-slide-index":typeof e.virtualIndex>"u"&&u&&u.value&&u.value.params.loop?e.swiperSlideIndex:e.virtualIndex,onLoadCapture:g},e.zoom?ct("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof e.zoom=="number"?e.zoom:void 0},[d.default&&d.default(l.value),e.lazy&&!r.value&&ct("div",{class:"swiper-lazy-preloader"})]):[d.default&&d.default(l.value),e.lazy&&!r.value&&ct("div",{class:"swiper-lazy-preloader"})])}};const Hs=(e,i)=>{const d=e.__vccOpts||e;for(const[t,u]of i)d[t]=u;return d},gf={class:"video-container"},yf="https://vz-217da3db-313.b-cdn.net/",_f="/play_720p.mp4",Sf="https://vz-217da3db-313.b-cdn.net/",bf="/playlist.m3u8",wf={__name:"VideoPlayer",props:{guid:String,isActive:Boolean},setup(e){const i=e,d=yf+i.guid+_f,t=Sf+i.guid+bf,u=qe(null);let a=is(i).isActive;const c=()=>{const l=u.value;l&&(l.paused?l.play():l.pause())},r=()=>{const l=u.value;l&&l.play()},s=()=>{const l=u.value;l&&l.pause()};return ps(()=>{a.value?r():s()}),(l,g)=>(Ht(),yi("div",gf,[mt("video",{class:"video",ref_key:"vidRef",ref:u,onClick:c,playsinline:"true",preload:"auto",type:"video/mp4",onEnded:r},[mt("source",{src:d,type:"video/mp4"}),mt("source",{src:t,type:"video/mp4"})],544)]))}},Ef=Hs(wf,[["__scopeId","data-v-0eff0050"]]),Cf=mt("br",null,null,-1),Tf=mt("br",null,null,-1),kf={__name:"PreSlide",props:{isActive:Boolean},setup(e){let d=is(e).isActive,t=qe(!1),u=qe(""),a={result:0,token:"eyJ0b2tlbklkIjoiNjUxYzA5ZDllM2U0Nzk5YWY5OTNhMDA1Iiwicm9vbU1ldGEiOnsiX2lkIjoiNjUxOTlhNjRkMmZhYTk2ZGVkOWE4NmQwIiwibmFtZSI6IkVuYWJsZXhSb29tIiwic2VydmljZV9pZCI6IjY1MTk4NTRiNTZjYjQzMDI5MGY4ZWZkYSIsIm93bmVyX3JlZiI6Inh5eiIsInNldHRpbmdzIjp7ImRlc2NyaXB0aW9uIjoiRGVzY3JpcHRpdmUgdGV4dCIsIm1vZGUiOiJncm91cCIsInNjaGVkdWxlZCI6ZmFsc2UsImFkaG9jIjpmYWxzZSwiZHVyYXRpb24iOiIzMCIsInBhcnRpY2lwYW50cyI6IjIiLCJhdXRvX3JlY29yZGluZyI6dHJ1ZSwic2NyZWVuX3NoYXJlIjp0cnVlLCJjYW52YXMiOmZhbHNlLCJtZWRpYV9jb25maWd1cmF0aW9uIjoiZGVmYXVsdCIsInF1YWxpdHkiOiJTRCIsIm1vZGVyYXRvcnMiOiIxIiwidmlld2VycyI6MCwiYWN0aXZlX3RhbGtlciI6dHJ1ZSwiZW5jcnlwdGlvbiI6ZmFsc2UsIndhdGVybWFyayI6ZmFsc2UsInNpbmdsZV9maWxlX3JlY29yZGluZyI6ZmFsc2UsIm1heF9hY3RpdmVfdGFsa2VycyI6MywibWVkaWFfem9uZSI6IlhYIn0sInNpcCI6eyJlbmFibGVkIjpmYWxzZX0sImRhdGEiOnsiY3VzdG9tX2tleSI6IiJ9LCJjcmVhdGVkIjoiMjAyMy0xMC0wMVQxNjoxMjoyMC4zNjRaIiwiZW5hYmxleENvbnRyb2xsZXJJZCI6IjBhNGI5NWM1LThjM2MtY2ExNC03NTFmLWNjY2FhNzcwMWMwYyJ9LCJob3N0Ijoic3MzLmVuYWJsZXguaW86NDQzIiwic2VjdXJlIjp0cnVlLCJsb2dJZCI6InFSdmtpaiIsImN1cnJlbnRSb29tTW9kZSI6Imdyb3VwIiwiZ2F0ZXdheSI6IiIsInNpZ25hdHVyZSI6Ik4yWmhZamt5Tnpkak9URm1NR1l5WWpFeE16SXhZVGd5WWpRME9ETmhNRGt6T1dObE1EWm1aZz09IiwiZGF0YSI6W10sImV2ZW50U2VydmVyIjp7InVybCI6ImVzLmVuYWJsZXguaW8ifX0="};return ps(async()=>{if(d.value&&t.value==!1)try{var c={HD:[320,180,1280,720],SD:[320,180,640,480],LD:[80,45,640,360]},r={video:!0,audio:!0,data:!0,videoSize:c.SD,attributes:{name:"XX"}},s={allow_reconnect:!0,number_of_attempts:3,timeout_interval:1e4};window.EnxRtc.joinRoom(a.token,r,function(l,g){g&&g!=null&&(g.type=="media-access-denied"?console.log("Сам не захотел подключаться "):(console.log("проеб"),u.value="failed")),l&&l!=null&&(room=l.room,room.waitRoom&&room.me.role!="moderator"||(console.log("отлинчо!"),remoteStreams=l.room.streams))})}catch(l){console.log(l)}}),(c,r)=>(Ht(),yi("h1",null,[Gt("At first, we please you to apply your camera access "),Cf,Gt(),Tf,Gt(" Status: "+Rd(ns(u)),1)]))}},If={method:"GET",headers:{accept:"application/json",AccessKey:"f12fbdc6-e2fb-4d60-bc3f7432e661-32c7-4923"}};function Rf(){return fetch("https://video.bunnycdn.com/library/152986/videos",If).then(e=>{if(!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return e.json()}).then(e=>e).catch(e=>{throw console.error(e),e})}const xf={components:{Swiper:hf,SwiperSlide:vf,VideoPlayer:Ef,PreSlide:kf},methods:{handleSlideChange(){}},async setup(e){let d=(await Rf()).items;const t=qe(null);return qe([]),{modules:[],list:d,mySwiper:t}}},Of=mt("h1",null,[Gt("Welcome to our AI project. "),mt("br"),Gt(),mt("br"),Gt("If you interested swipe screen up")],-1),Mf=mt("h1",null,"That's all. Enjoy our videos",-1);function Af(e,i,d,t,u,a){const c=Nn("swiper-slide"),r=Nn("PreSlide"),s=Nn("VideoPlayer"),l=Nn("swiper");return Ht(),Ur(l,{direction:"vertical",onSlideChange:a.handleSlideChange,modules:t.modules,class:"mySwiper",ref:"mySwiper"},{default:Ut(()=>[Je(c,null,{default:Ut(()=>[Of]),_:1}),Je(c,null,{default:Ut(({isActive:g})=>[Je(r,{isActive:g},null,8,["isActive"])]),_:1}),Je(c,null,{default:Ut(()=>[Mf]),_:1}),(Ht(!0),yi(gt,null,zc(t.list,g=>(Ht(),Ur(c,null,{default:Ut(({isActive:o})=>[Je(s,{guid:g.guid,isActive:o},null,8,["guid","isActive"])]),_:2},1024))),256))]),_:1},8,["onSlideChange","modules"])}const Pf=Hs(xf,[["render",Af]]),Df={__name:"App",setup(e){return(i,d)=>(Ht(),Ur(Cc,null,{default:Ut(()=>[Je(Pf)]),_:1}))}};Vl(Df).mount("#app");
